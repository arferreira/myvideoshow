var jQuery;(function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){function o(e){var t=!!e&&"length"in e&&e.length,n=fe.type(e);return"function"!==n&&!fe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}function t(e,n,i){if(fe.isFunction(n))return fe.grep(e,function(e,t){return!!n.call(e,t,e)!==i});if(n.nodeType)return fe.grep(e,function(e){return e===n!==i});if("string"==typeof n){if(we.test(n))return fe.filter(n,e,i);n=fe.filter(n,e)}return fe.grep(e,function(e){return-1<fe.inArray(e,n)!==i})}function n(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e){var n={};return fe.each(e.match(Oe)||[],function(e,t){n[t]=!0}),n}function r(){ie.addEventListener?(ie.removeEventListener("DOMContentLoaded",a),w.removeEventListener("load",a)):(ie.detachEvent("onreadystatechange",a),w.detachEvent("onload",a))}function a(){(ie.addEventListener||"load"===w.event.type||"complete"===ie.readyState)&&(r(),fe.ready())}function u(e,t,n){if(n===undefined&&1===e.nodeType){var i="data-"+t.replace(Re,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(i))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:De.test(n)?fe.parseJSON(n):n)}catch(r){}fe.data(e,t,n)}else n=undefined}return n}function l(e){var t;for(t in e)if(("data"!==t||!fe.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function i(e,t,n,i){if(Le(e)){var r,a,s=fe.expando,o=e.nodeType,u=o?fe.cache:e,l=o?e[s]:e[s]&&s;if(l&&u[l]&&(i||u[l].data)||n!==undefined||"string"!=typeof t)return l||(l=o?e[s]=ne.pop()||fe.guid++:s),u[l]||(u[l]=o?{}:{toJSON:fe.noop}),"object"!=typeof t&&"function"!=typeof t||(i?u[l]=fe.extend(u[l],t):u[l].data=fe.extend(u[l].data,t)),a=u[l],i||(a.data||(a.data={}),a=a.data),n!==undefined&&(a[fe.camelCase(t)]=n),"string"==typeof t?null==(r=a[t])&&(r=a[fe.camelCase(t)]):r=a,r}}function s(e,t,n){if(Le(e)){var i,r,a=e.nodeType,s=a?fe.cache:e,o=a?e[fe.expando]:fe.expando;if(s[o]){if(t&&(i=n?s[o]:s[o].data)){r=(t=fe.isArray(t)?t.concat(fe.map(t,fe.camelCase)):t in i?[t]:(t=fe.camelCase(t))in i?[t]:t.split(" ")).length;for(;r--;)delete i[t[r]];if(n?!l(i):!fe.isEmptyObject(i))return}(n||(delete s[o].data,l(s[o])))&&(a?fe.cleanData([e],!0):de.deleteExpando||s!=s.window?delete s[o]:s[o]=undefined)}}}function d(e,t,n,i){var r,a=1,s=20,o=i?function(){return i.cur()}:function(){return fe.css(e,t,"")},u=o(),l=n&&n[3]||(fe.cssNumber[t]?"":"px"),c=(fe.cssNumber[t]||"px"!==l&&+u)&&Be.exec(fe.css(e,t));if(c&&c[3]!==l)for(l=l||c[3],n=n||[],c=+u||1;c/=a=a||".5",fe.style(e,t,c+l),a!==(a=o()/u)&&1!==a&&--s;);return n&&(c=+c||+u||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=l,i.start=c,i.end=r)),r}function g(e){var t=$e.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function y(e,t){var n,i,r=0,a="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):undefined;if(!a)for(a=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||fe.nodeName(i,t)?a.push(i):fe.merge(a,y(i,t));return t===undefined||t&&fe.nodeName(e,t)?fe.merge([e],a):a}function v(e,t){for(var n,i=0;null!=(n=e[i]);i++)fe._data(n,"globalEval",!t||fe._data(t[i],"globalEval"))}function b(e){Ve.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t,n,i,r){for(var a,s,o,u,l,c,d,h=e.length,f=g(t),p=[],m=0;m<h;m++)if((s=e[m])||0===s)if("object"===fe.type(s))fe.merge(p,s.nodeType?[s]:s);else if(Ye.test(s)){for(u=u||f.appendChild(t.createElement("div")),l=(We.exec(s)||["",""])[1].toLowerCase(),d=Xe[l]||Xe._default,u.innerHTML=d[1]+fe.htmlPrefilter(s)+d[2],a=d[0];a--;)u=u.lastChild;if(!de.leadingWhitespace&&Ge.test(s)&&p.push(t.createTextNode(Ge.exec(s)[0])),!de.tbody)for(a=(s="table"!==l||Ke.test(s)?"<table>"!==d[1]||Ke.test(s)?0:u:u.firstChild)&&s.childNodes.length;a--;)fe.nodeName(c=s.childNodes[a],"tbody")&&!c.childNodes.length&&s.removeChild(c);for(fe.merge(p,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=f.lastChild}else p.push(t.createTextNode(s));for(u&&f.removeChild(u),de.appendChecked||fe.grep(y(p,"input"),b),m=0;s=p[m++];)if(i&&-1<fe.inArray(s,i))r&&r.push(s);else if(o=fe.contains(s.ownerDocument,s),u=y(f.appendChild(s),"script"),o&&v(u),n)for(a=0;s=u[a++];)ze.test(s.type||"")&&n.push(s);return u=null,f}function h(){return!0}function f(){return!1}function p(){try{return ie.activeElement}catch(e){}}function _(e,t,n,i,r,a){var s,o;if("object"==typeof t){for(o in"string"!=typeof n&&(i=i||n,n=undefined),t)_(e,o,n,i,t[o],a);return e}if(null==i&&null==r?(r=n,i=n=undefined):null==r&&("string"==typeof n?(r=i,i=undefined):(r=i,i=n,n=undefined)),!1===r)r=f;else if(!r)return e;return 1===a&&(s=r,(r=function(e){return fe().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=fe.guid++)),e.each(function(){fe.event.add(this,t,r,i,n)})}function T(e,t){return fe.nodeName(e,"table")&&fe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function S(e){return e.type=(null!==fe.find.attr(e,"type"))+"/"+e.type,e}function k(e){var t=ot.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function C(e,t){if(1===t.nodeType&&fe.hasData(e)){var n,i,r,a=fe._data(e),s=fe._data(t,a),o=a.events;if(o)for(n in delete s.handle,s.events={},o)for(i=0,r=o[n].length;i<r;i++)fe.event.add(t,n,o[n][i]);s.data&&(s.data=fe.extend({},s.data))}}function E(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!de.noCloneEvent&&t[fe.expando]){for(i in(r=fe._data(t)).events)fe.removeEvent(t,i,r.handle);t.removeAttribute(fe.expando)}"script"===n&&t.text!==e.text?(S(t).text=e.text,k(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),de.html5Clone&&e.innerHTML&&!fe.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ve.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function x(n,i,r,a){i=ae.apply([],i);var e,t,s,o,u,l,c=0,d=n.length,h=d-1,f=i[0],p=fe.isFunction(f);if(p||1<d&&"string"==typeof f&&!de.checkClone&&st.test(f))return n.each(function(e){var t=n.eq(e);p&&(i[0]=f.call(this,e,t.html())),x(t,i,r,a)});if(d&&(e=(l=m(i,n[0].ownerDocument,!1,n,a)).firstChild,1===l.childNodes.length&&(l=e),e||a)){for(s=(o=fe.map(y(l,"script"),S)).length;c<d;c++)t=l,c!==h&&(t=fe.clone(t,!0,!0),s&&fe.merge(o,y(t,"script"))),r.call(n[c],t,c);if(s)for(u=o[o.length-1].ownerDocument,fe.map(o,k),c=0;c<s;c++)t=o[c],ze.test(t.type||"")&&!fe._data(t,"globalEval")&&fe.contains(u,t)&&(t.src?fe._evalUrl&&fe._evalUrl(t.src):fe.globalEval((t.text||t.textContent||t.innerHTML||"").replace(ut,"")));l=e=null}return n}function A(e,t,n){for(var i,r=t?fe.filter(t,e):e,a=0;null!=(i=r[a]);a++)n||1!==i.nodeType||fe.cleanData(y(i)),i.parentNode&&(n&&fe.contains(i.ownerDocument,i)&&v(y(i,"script")),i.parentNode.removeChild(i));return e}function P(e,t){var n=fe(t.createElement(e)).appendTo(t.body),i=fe.css(n[0],"display");return n.detach(),i}function O(e){var t=ie,n=dt[e];return n||("none"!==(n=P(e,t))&&n||((t=((ct=(ct||fe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||ct[0].contentDocument).document).write(),t.close(),n=P(e,t),ct.detach()),dt[e]=n),n}function I(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function L(e){if(e in Et)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Ct.length;n--;)if((e=Ct[n]+t)in Et)return e}function D(e,t){for(var n,i,r,a=[],s=0,o=e.length;s<o;s++)(i=e[s]).style&&(a[s]=fe._data(i,"olddisplay"),n=i.style.display,t?(a[s]||"none"!==n||(i.style.display=""),""===i.style.display&&qe(i)&&(a[s]=fe._data(i,"olddisplay",O(i.nodeName)))):(r=qe(i),(n&&"none"!==n||!r)&&fe._data(i,"olddisplay",r?n:fe.css(i,"display"))));for(s=0;s<o;s++)(i=e[s]).style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[s]||"":"none"));return e}function R(e,t,n){var i=St.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function M(e,t,n,i,r){for(var a=n===(i?"border":"content")?4:"width"===t?1:0,s=0;a<4;a+=2)"margin"===n&&(s+=fe.css(e,n+Fe[a],!0,r)),i?("content"===n&&(s-=fe.css(e,"padding"+Fe[a],!0,r)),"margin"!==n&&(s-=fe.css(e,"border"+Fe[a]+"Width",!0,r))):(s+=fe.css(e,"padding"+Fe[a],!0,r),"padding"!==n&&(s+=fe.css(e,"border"+Fe[a]+"Width",!0,r)));return s}function U(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,a=gt(e),s=de.boxSizing&&"border-box"===fe.css(e,"boxSizing",!1,a);if(r<=0||null==r){if(((r=yt(e,t,a))<0||null==r)&&(r=e.style[t]),ft.test(r))return r;i=s&&(de.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+M(e,t,n||(s?"border":"content"),i,a)+"px"}function N(e,t,n,i,r){return new N.prototype.init(e,t,n,i,r)}function j(){return w.setTimeout(function(){xt=undefined}),xt=fe.now()}function B(e,t){var n,i={height:e},r=0;for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=Fe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function F(e,t,n){for(var i,r=(V.tweeners[t]||[]).concat(V.tweeners["*"]),a=0,s=r.length;a<s;a++)if(i=r[a].call(n,t,e))return i}function q(t,e,n){var i,r,a,s,o,u,l,c=this,d={},h=t.style,f=t.nodeType&&qe(t),p=fe._data(t,"fxshow");for(i in n.queue||(null==(o=fe._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,u=o.empty.fire,o.empty.fire=function(){o.unqueued||u()}),o.unqueued++,c.always(function(){c.always(function(){o.unqueued--,fe.queue(t,"fx").length||o.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],"inline"===("none"===(l=fe.css(t,"display"))?fe._data(t,"olddisplay")||O(t.nodeName):l)&&"none"===fe.css(t,"float")&&(de.inlineBlockNeedsLayout&&"inline"!==O(t.nodeName)?h.zoom=1:h.display="inline-block")),n.overflow&&(h.overflow="hidden",de.shrinkWrapBlocks()||c.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),e)if(r=e[i],Rt.exec(r)){if(delete e[i],a=a||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!p||p[i]===undefined)continue;f=!0}d[i]=p&&p[i]||fe.style(t,i)}else l=undefined;if(fe.isEmptyObject(d))"inline"===("none"===l?O(t.nodeName):l)&&(h.display=l);else for(i in p?"hidden"in p&&(f=p.hidden):p=fe._data(t,"fxshow",{}),a&&(p.hidden=!f),f?fe(t).show():c.done(function(){fe(t).hide()}),c.done(function(){var e;for(e in fe._removeData(t,"fxshow"),d)fe.style(t,e,d[e])}),d)s=F(f?p[i]:0,i,c),i in p||(p[i]=s.start,f&&(s.end=s.start,s.start="width"===i||"height"===i?1:0))}function H(e,t){var n,i,r,a,s;for(n in e)if(r=t[i=fe.camelCase(n)],a=e[n],fe.isArray(a)&&(r=a[1],a=e[n]=a[0]),n!==i&&(e[i]=a,delete e[n]),(s=fe.cssHooks[i])&&"expand"in s)for(n in a=s.expand(a),delete e[i],a)n in e||(e[n]=a[n],t[n]=r);else t[i]=r}function V(a,e,t){var n,s,i=0,r=V.prefilters.length,o=fe.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var e=xt||j(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),i=0,r=l.tweens.length;i<r;i++)l.tweens[i].run(n);return o.notifyWith(a,[l,n,t]),n<1&&r?t:(o.resolveWith(a,[l]),!1)},l=o.promise({elem:a,props:fe.extend({},e),opts:fe.extend(!0,{specialEasing:{},easing:fe.easing._default},t),originalProperties:e,originalOptions:t,startTime:xt||j(),duration:t.duration,tweens:[],createTween:function(e,t){var n=fe.Tween(a,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)l.tweens[t].run(1);return e?(o.notifyWith(a,[l,1,0]),o.resolveWith(a,[l,e])):o.rejectWith(a,[l,e]),this}}),c=l.props;for(H(c,l.opts.specialEasing);i<r;i++)if(n=V.prefilters[i].call(l,a,c,l.opts))return fe.isFunction(n.stop)&&(fe._queueHooks(l.elem,l.opts.queue).stop=fe.proxy(n.stop,n)),n;return fe.map(c,F,l),fe.isFunction(l.opts.start)&&l.opts.start.call(a,l),fe.fx.timer(fe.extend(u,{elem:a,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function W(e){return fe.attr(e,"class")||""}function z(a){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,i=0,r=e.toLowerCase().match(Oe)||[];if(fe.isFunction(t))for(;n=r[i++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(a[n]=a[n]||[]).unshift(t)):(a[n]=a[n]||[]).push(t)}}function G(t,r,a,s){function o(e){var i;return u[e]=!0,fe.each(t[e]||[],function(e,t){var n=t(r,a,s);return"string"!=typeof n||l||u[n]?l?!(i=n):void 0:(r.dataTypes.unshift(n),o(n),!1)}),i}var u={},l=t===sn;return o(r.dataTypes[0])||!u["*"]&&o("*")}function $(e,t){var n,i,r=fe.ajaxSettings.flatOptions||{};for(i in t)t[i]!==undefined&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&fe.extend(!0,e,n),e}function X(e,t,n){for(var i,r,a,s,o=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),r===undefined&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(s in o)if(o[s]&&o[s].test(r)){u.unshift(s);break}if(u[0]in n)a=u[0];else{for(s in n){if(!u[0]||e.converters[s+" "+u[0]]){a=s;break}i||(i=s)}a=a||i}if(a)return a!==u[0]&&u.unshift(a),n[a]}function Y(e,t,n,i){var r,a,s,o,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(s=l[u+" "+a]||l["* "+a]))for(r in l)if((o=r.split(" "))[1]===a&&(s=l[u+" "+o[0]]||l["* "+o[0]])){!0===s?s=l[r]:!0!==l[r]&&(a=o[0],c.unshift(o[1]));break}if(!0!==s)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(d){return{state:"parsererror",error:s?d:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}function K(e){return e.style&&e.style.display||fe.css(e,"display")}function Q(e){if(!fe.contains(e.ownerDocument||ie,e))return!0;for(;e&&1===e.nodeType;){if("none"===K(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function J(n,e,i,r){var t;if(fe.isArray(e))fe.each(e,function(e,t){i||dn.test(n)?r(n,t):J(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,r)});else if(i||"object"!==fe.type(e))r(n,e);else for(t in e)J(n+"["+t+"]",e[t],i,r)}function Z(){try{return new w.XMLHttpRequest}catch(e){}}function ee(){try{return new w.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function te(e){return fe.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ne=[],ie=w.document,re=ne.slice,ae=ne.concat,se=ne.push,oe=ne.indexOf,ue={},le=ue.toString,ce=ue.hasOwnProperty,de={},he="1.12.4",fe=function(e,t){return new fe.fn.init(e,t)},pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,me=/^-ms-/,ge=/-([\da-z])/gi,ye=function(e,t){return t.toUpperCase()};fe.fn=fe.prototype={jquery:he,constructor:fe,selector:"",length:0,toArray:function(){return re.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:re.call(this)},pushStack:function(e){var t=fe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return fe.each(this,e)},map:function(n){return this.pushStack(fe.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(re.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:se,sort:ne.sort,splice:ne.splice},fe.extend=fe.fn.extend=function(e){var t,n,i,r,a,s,o=e||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[u]||{},u++),"object"==typeof o||fe.isFunction(o)||(o={}),u===l&&(o=this,u--);u<l;u++)if(null!=(a=arguments[u]))for(r in a)t=o[r],o!==(i=a[r])&&(c&&i&&(fe.isPlainObject(i)||(n=fe.isArray(i)))?(n?(n=!1,s=t&&fe.isArray(t)?t:[]):s=t&&fe.isPlainObject(t)?t:{},o[r]=fe.extend(c,s,i)):i!==undefined&&(o[r]=i));return o},fe.extend({expando:"jQuery"+(he+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===fe.type(e)},isArray:Array.isArray||function(e){return"array"===fe.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!fe.isArray(e)&&0<=t-parseFloat(t)+1},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==fe.type(e)||e.nodeType||fe.isWindow(e))return!1;try{if(e.constructor&&!ce.call(e,"constructor")&&!ce.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!de.ownFirst)for(t in e)return ce.call(e,t);for(t in e);return t===undefined||ce.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ue[le.call(e)]||"object":typeof e},globalEval:function(e){e&&fe.trim(e)&&(w.execScript||function(e){w.eval.call(w,e)})(e)},camelCase:function(e){return e.replace(me,"ms-").replace(ge,ye)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(o(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(pe,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(o(Object(e))?fe.merge(n,"string"==typeof e?[e]:e):se.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(oe)return oe.call(t,e,n);for(i=t.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;)e[r++]=t[i++];if(n!=n)for(;t[i]!==undefined;)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,a=e.length,s=!n;r<a;r++)!t(e[r],r)!==s&&i.push(e[r]);return i},map:function(e,t,n){var i,r,a=0,s=[];if(o(e))for(i=e.length;a<i;a++)null!=(r=t(e[a],a,n))&&s.push(r);else for(a in e)null!=(r=t(e[a],a,n))&&s.push(r);return ae.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),fe.isFunction(e)?(n=re.call(arguments,2),(i=function(){return e.apply(t||this,n.concat(re.call(arguments)))}).guid=e.guid=e.guid||fe.guid++,i):undefined},now:function(){return+new Date},support:de}),"function"==typeof Symbol&&(fe.fn[Symbol.iterator]=ne[Symbol.iterator]),fe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ue["[object "+t+"]"]=t.toLowerCase()});var ve=function(n){function _(e,t,n,i){var r,a,s,o,u,l,c,d,h=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:F)!==L&&I(t),t=t||L,R)){if(11!==f&&(l=ye.exec(e)))if(r=l[1]){if(9===f){if(!(s=t.getElementById(r)))return n;if(s.id===r)return n.push(s),n}else if(h&&(s=h.getElementById(r))&&j(t,s)&&s.id===r)return n.push(s),n}else{if(l[2])return J.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&y.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(r)),n}if(y.qsa&&!z[e+" "]&&(!M||!M.test(e))){if(1!==f)h=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((o=t.getAttribute("id"))?o=o.replace(be,"\\$&"):t.setAttribute("id",o=B),a=(c=C(e)).length,u=he.test(o)?"#"+o:"[id='"+o+"']";a--;)c[a]=u+" "+g(c[a]);d=c.join(","),h=ve.test(e)&&m(t.parentNode)||t}if(d)try{return J.apply(n,h.querySelectorAll(d)),n}catch(p){}finally{o===B&&t.removeAttribute("id")}}}return x(e.replace(oe,"$1"),t,n,i)}function e(){function n(e,t){return i.push(e+" ")>S.cacheLength&&delete n[i.shift()],n[e+" "]=t}var i=[];return n}function u(e){return e[B]=!0,e}function r(e){var t=L.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function t(e,t){for(var n=e.split("|"),i=n.length;i--;)S.attrHandle[n[i]]=t}function l(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||$)-(~e.sourceIndex||$);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function i(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function a(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function s(s){return u(function(a){return a=+a,u(function(e,t){for(var n,i=s([],e.length,a),r=i.length;r--;)e[n=i[r]]&&(e[n]=!(t[n]=e[n]))})})}function m(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function o(){}function g(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(o,e,t){var u=e.dir,l=t&&"parentNode"===u,c=H++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||l)return o(e,t,n)}:function(e,t,n){var i,r,a,s=[q,c];if(n){for(;e=e[u];)if((1===e.nodeType||l)&&o(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||l){if((i=(r=(a=e[B]||(e[B]={}))[e.uniqueID]||(a[e.uniqueID]={}))[u])&&i[0]===q&&i[1]===c)return s[2]=i[2];if((r[u]=s)[2]=o(e,t,n))return!0}}}function h(r){return 1<r.length?function(e,t,n){for(var i=r.length;i--;)if(!r[i](e,t,n))return!1;return!0}:r[0]}function v(e,t,n){for(var i=0,r=t.length;i<r;i++)_(e,t[i],n);return n}function T(e,t,n,i,r){for(var a,s=[],o=0,u=e.length,l=null!=t;o<u;o++)(a=e[o])&&(n&&!n(a,i,r)||(s.push(a),l&&t.push(o)));return s}function b(f,p,m,g,y,e){return g&&!g[B]&&(g=b(g)),y&&!y[B]&&(y=b(y,e)),u(function(e,t,n,i){var r,a,s,o=[],u=[],l=t.length,c=e||v(p||"*",n.nodeType?[n]:n,[]),d=!f||!e&&p?c:T(c,o,f,n,i),h=m?y||(e?f:l||g)?[]:t:d;if(m&&m(d,h,n,i),g)for(r=T(h,u),g(r,[],n,i),a=r.length;a--;)(s=r[a])&&(h[u[a]]=!(d[u[a]]=s));if(e){if(y||f){if(y){for(r=[],a=h.length;a--;)(s=h[a])&&r.push(d[a]=s);y(null,h=[],r,i)}for(a=h.length;a--;)(s=h[a])&&-1<(r=y?ee(e,s):o[a])&&(e[r]=!(t[r]=s))}}else h=T(h===t?h.splice(l,h.length):h),y?y(null,t,h,i):J.apply(t,h)})}function f(e){for(var r,t,n,i=e.length,a=S.relative[e[0].type],s=a||S.relative[" "],o=a?1:0,u=d(function(e){return e===r},s,!0),l=d(function(e){return-1<ee(r,e)},s,!0),c=[function(e,t,n){var i=!a&&(n||t!==A)||((r=t).nodeType?u(e,t,n):l(e,t,n));return r=null,i}];o<i;o++)if(t=S.relative[e[o].type])c=[d(h(c),t)];else{if((t=S.filter[e[o].type].apply(null,e[o].matches))[B]){for(n=++o;n<i&&!S.relative[e[n].type];n++);return b(1<o&&h(c),1<o&&g(e.slice(0,o-1).concat({value:" "===e[o-2].type?"*":""})).replace(oe,"$1"),t,o<n&&f(e.slice(o,n)),n<i&&f(e=e.slice(n)),n<i&&g(e))}c.push(t)}return h(c)}function c(g,y){var v=0<y.length,b=0<g.length,e=function(e,t,n,i,r){var a,s,o,u=0,l="0",c=e&&[],d=[],h=A,f=e||b&&S.find.TAG("*",r),p=q+=null==h?1:Math.random()||.1,m=f.length;for(r&&(A=t===L||t||r);l!==m&&null!=(a=f[l]);l++){if(b&&a){for(s=0,t||a.ownerDocument===L||(I(a),n=!R);o=g[s++];)if(o(a,t||L,n)){i.push(a);break}r&&(q=p)}v&&((a=!o&&a)&&u--,e&&c.push(a))}if(u+=l,v&&l!==u){for(s=0;o=y[s++];)o(c,d,t,n);if(e){if(0<u)for(;l--;)c[l]||d[l]||(d[l]=K.call(i));d=T(d)}J.apply(i,d),r&&!e&&0<d.length&&1<u+y.length&&_.uniqueSort(i)}return r&&(q=p,A=h),c};return v?u(e):e}var p,y,S,w,k,C,E,x,A,P,O,I,L,D,R,M,U,N,j,B="sizzle"+1*new Date,F=n.document,q=0,H=0,V=e(),W=e(),z=e(),G=function(e,t){return e===t&&(O=!0),0},$=1<<31,X={}.hasOwnProperty,Y=[],K=Y.pop,Q=Y.push,J=Y.push,Z=Y.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),oe=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),le=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),he=new RegExp("^"+ie+"$"),fe={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var i="0x"+t-65536;return i!=i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Se=function(){I()};try{J.apply(Y=Z.call(F.childNodes),F.childNodes),Y[F.childNodes.length].nodeType}catch(we){J={apply:Y.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}for(p in y=_.support={},k=_.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},I=_.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!==L&&9===i.nodeType&&i.documentElement&&(D=(L=i).documentElement,R=!k(L),(n=L.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Se,!1):n.attachEvent&&n.attachEvent("onunload",Se)),y.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),y.getElementsByTagName=r(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),y.getElementsByClassName=ge.test(L.getElementsByClassName),y.getById=r(function(e){return D.appendChild(e).id=B,!L.getElementsByName||!L.getElementsByName(B).length}),y.getById?(S.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&R){var n=t.getElementById(e);return n?[n]:[]}},S.filter.ID=function(e){var t=e.replace(_e,Te);return function(e){return e.getAttribute("id")===t}}):(delete S.find.ID,S.filter.ID=function(e){var n=e.replace(_e,Te);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),S.find.TAG=y.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):y.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,a=t.getElementsByTagName(e);if("*"!==e)return a;for(;n=a[r++];)1===n.nodeType&&i.push(n);return i},S.find.CLASS=y.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&R)return t.getElementsByClassName(e)},U=[],M=[],(y.qsa=ge.test(L.querySelectorAll))&&(r(function(e){D.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||M.push(".#.+[+~]")}),r(function(e){var t=L.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(y.matchesSelector=ge.test(N=D.matches||D.webkitMatchesSelector||D.mozMatchesSelector||D.oMatchesSelector||D.msMatchesSelector))&&r(function(e){y.disconnectedMatch=N.call(e,"div"),N.call(e,"[s!='']:x"),U.push("!=",ae)}),M=M.length&&new RegExp(M.join("|")),U=U.length&&new RegExp(U.join("|")),t=ge.test(D.compareDocumentPosition),j=t||ge.test(D.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return O=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!y.sortDetached&&t.compareDocumentPosition(e)===n?e===L||e.ownerDocument===F&&j(F,e)?-1:t===L||t.ownerDocument===F&&j(F,t)?1:P?ee(P,e)-ee(P,t):0:4&n?-1:1)}:function(e,t){if(e===t)return O=!0,0;var n,i=0,r=e.parentNode,a=t.parentNode,s=[e],o=[t];if(!r||!a)return e===L?-1:t===L?1:r?-1:a?1:P?ee(P,e)-ee(P,t):0;if(r===a)return l(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)o.unshift(n);for(;s[i]===o[i];)i++;return i?l(s[i],o[i]):s[i]===F?-1:o[i]===F?1:0}),L},_.matches=function(e,t){return _(e,null,null,t)},_.matchesSelector=function(e,t){if((e.ownerDocument||e)!==L&&I(e),t=t.replace(ce,"='$1']"),y.matchesSelector&&R&&!z[t+" "]&&(!U||!U.test(t))&&(!M||!M.test(t)))try{var n=N.call(e,t);if(n||y.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(we){}return 0<_(t,L,null,[e]).length},_.contains=function(e,t){return(e.ownerDocument||e)!==L&&I(e),j(e,t)},_.attr=function(e,t){(e.ownerDocument||e)!==L&&I(e);var n=S.attrHandle[t.toLowerCase()],i=n&&X.call(S.attrHandle,t.toLowerCase())?n(e,t,!R):undefined;return i!==undefined?i:y.attributes||!R?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},_.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},_.uniqueSort=function(e){var t,n=[],i=0,r=0;if(O=!y.detectDuplicates,P=!y.sortStable&&e.slice(0),e.sort(G),O){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return P=null,e},w=_.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=w(t);return n},(S=_.selectors={cacheLength:50,createPseudo:u,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||_.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&_.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,i,r){return function(e){var t=_.attr(e,n);return null==t?"!="===i:!i||(t+="","="===i?t===r:"!="===i?t!==r:"^="===i?r&&0===t.indexOf(r):"*="===i?r&&-1<t.indexOf(r):"$="===i?r&&t.slice(-r.length)===r:"~="===i?-1<(" "+t.replace(se," ")+" ").indexOf(r):"|="===i&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(p,e,t,m,g){var y="nth"!==p.slice(0,3),v="last"!==p.slice(-4),b="of-type"===e;return 1===m&&0===g?function(e){return!!e.parentNode}:function(e,t,n){var i,r,a,s,o,u,l=y!==v?"nextSibling":"previousSibling",c=e.parentNode,d=b&&e.nodeName.toLowerCase(),h=!n&&!b,f=!1;if(c){if(y){for(;l;){for(s=e;s=s[l];)if(b?s.nodeName.toLowerCase()===d:1===s.nodeType)return!1;u=l="only"===p&&!u&&"nextSibling"}return!0}if(u=[v?c.firstChild:c.lastChild],v&&h){for(f=(o=(i=(r=(a=(s=c)[B]||(s[B]={}))[s.uniqueID]||(a[s.uniqueID]={}))[p]||[])[0]===q&&i[1])&&i[2],s=o&&c.childNodes[o];s=++o&&s&&s[l]||(f=o=0)||u.pop();)if(1===s.nodeType&&++f&&s===e){r[p]=[q,o,f];break}}else if(h&&(f=o=(i=(r=(a=(s=e)[B]||(s[B]={}))[s.uniqueID]||(a[s.uniqueID]={}))[p]||[])[0]===q&&i[1]),!1===f)for(;(s=++o&&s&&s[l]||(f=o=0)||u.pop())&&((b?s.nodeName.toLowerCase()!==d:1!==s.nodeType)||!++f||(h&&((r=(a=s[B]||(s[B]={}))[s.uniqueID]||(a[s.uniqueID]={}))[p]=[q,f]),s!==e)););return(f-=g)===m||f%m==0&&0<=f/m}}},PSEUDO:function(e,a){var t,s=S.pseudos[e]||S.setFilters[e.toLowerCase()]||_.error("unsupported pseudo: "+e);return s[B]?s(a):1<s.length?(t=[e,e,"",a],S.setFilters.hasOwnProperty(e.toLowerCase())?u(function(e,t){for(var n,i=s(e,a),r=i.length;r--;)e[n=ee(e,i[r])]=!(t[n]=i[r])}):function(e){return s(e,0,t)}):s}},
pseudos:{not:u(function(e){var i=[],r=[],o=E(e.replace(oe,"$1"));return o[B]?u(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,t,n){return i[0]=e,o(i,null,n,r),i[0]=null,!r.pop()}}),has:u(function(t){return function(e){return 0<_(t,e).length}}),contains:u(function(t){return t=t.replace(_e,Te),function(e){return-1<(e.textContent||e.innerText||w(e)).indexOf(t)}}),lang:u(function(n){return he.test(n||"")||_.error("unsupported lang: "+n),n=n.replace(_e,Te).toLowerCase(),function(e){var t;do{if(t=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===D},focus:function(e){return e===L.activeElement&&(!L.hasFocus||L.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!S.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[n<0?n+t:n]}),even:s(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var i=n<0?n+t:n;0<=--i;)e.push(i);return e}),gt:s(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}}).pseudos.nth=S.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})S.pseudos[p]=i(p);for(p in{submit:!0,reset:!0})S.pseudos[p]=a(p);return o.prototype=S.filters=S.pseudos,S.setFilters=new o,C=_.tokenize=function(e,t){var n,i,r,a,s,o,u,l=W[e+" "];if(l)return t?0:l.slice(0);for(s=e,o=[],u=S.preFilter;s;){for(a in n&&!(i=ue.exec(s))||(i&&(s=s.slice(i[0].length)||s),o.push(r=[])),n=!1,(i=le.exec(s))&&(n=i.shift(),r.push({value:n,type:i[0].replace(oe," ")}),s=s.slice(n.length)),S.filter)!(i=fe[a].exec(s))||u[a]&&!(i=u[a](i))||(n=i.shift(),r.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?_.error(e):W(e,o).slice(0)},E=_.compile=function(e,t){var n,i=[],r=[],a=z[e+" "];if(!a){for(t||(t=C(e)),n=t.length;n--;)(a=f(t[n]))[B]?i.push(a):r.push(a);(a=z(e,c(r,i))).selector=e}return a},x=_.select=function(e,t,n,i){var r,a,s,o,u,l="function"==typeof e&&e,c=!i&&C(e=l.selector||e);if(n=n||[],1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(s=a[0]).type&&y.getById&&9===t.nodeType&&R&&S.relative[a[1].type]){if(!(t=(S.find.ID(s.matches[0].replace(_e,Te),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(a.shift().value.length)}for(r=fe.needsContext.test(e)?0:a.length;r--&&(s=a[r],!S.relative[o=s.type]);)if((u=S.find[o])&&(i=u(s.matches[0].replace(_e,Te),ve.test(a[0].type)&&m(t.parentNode)||t))){if(a.splice(r,1),!(e=i.length&&g(a)))return J.apply(n,i),n;break}}return(l||E(e,c))(i,t,!R,n,!t||ve.test(e)&&m(t.parentNode)||t),n},y.sortStable=B.split("").sort(G).join("")===B,y.detectDuplicates=!!O,I(),y.sortDetached=r(function(e){return 1&e.compareDocumentPosition(L.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||t("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),y.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||t("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||t(te,function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),_}(w);fe.find=ve,fe.expr=ve.selectors,fe.expr[":"]=fe.expr.pseudos,fe.uniqueSort=fe.unique=ve.uniqueSort,fe.text=ve.getText,fe.isXMLDoc=ve.isXML,fe.contains=ve.contains;var be=function(e,t,n){for(var i=[],r=n!==undefined;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&fe(e).is(n))break;i.push(e)}return i},_e=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Te=fe.expr.match.needsContext,Se=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,we=/^.[^:#\[\.,]*$/;fe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?fe.find.matchesSelector(i,e)?[i]:[]:fe.find.matches(e,fe.grep(t,function(e){return 1===e.nodeType}))},fe.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(fe(e).filter(function(){for(t=0;t<r;t++)if(fe.contains(i[t],this))return!0}));for(t=0;t<r;t++)fe.find(e,i[t],n);return(n=this.pushStack(1<r?fe.unique(n):n)).selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(t(this,e||[],!1))},not:function(e){return this.pushStack(t(this,e||[],!0))},is:function(e){return!!t(this,"string"==typeof e&&Te.test(e)?fe(e):e||[],!1).length}});var ke,Ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(fe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||ke,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):fe.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(fe):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),fe.makeArray(e,this));if(!(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:Ce.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof fe?t[0]:t,fe.merge(this,fe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:ie,!0)),Se.test(i[1])&&fe.isPlainObject(t))for(i in t)fe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if((r=ie.getElementById(i[2]))&&r.parentNode){if(r.id!==i[2])return ke.find(e);this.length=1,this[0]=r}return this.context=ie,this.selector=e,this}).prototype=fe.fn,ke=fe(ie);var Ee=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};fe.fn.extend({has:function(e){var t,n=fe(e,this),i=n.length;return this.filter(function(){for(t=0;t<i;t++)if(fe.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,a=[],s=Te.test(e)||"string"!=typeof e?fe(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&fe.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(1<a.length?fe.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?fe.inArray(this[0],fe(e)):fe.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(fe.uniqueSort(fe.merge(this.get(),fe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),fe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return be(e,"parentNode")},parentsUntil:function(e,t,n){return be(e,"parentNode",n)},next:function(e){return n(e,"nextSibling")},prev:function(e){return n(e,"previousSibling")},nextAll:function(e){return be(e,"nextSibling")},prevAll:function(e){return be(e,"previousSibling")},nextUntil:function(e,t,n){return be(e,"nextSibling",n)},prevUntil:function(e,t,n){return be(e,"previousSibling",n)},siblings:function(e){return _e((e.parentNode||{}).firstChild,e)},children:function(e){return _e(e.firstChild)},contents:function(e){return fe.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:fe.merge([],e.childNodes)}},function(i,r){fe.fn[i]=function(e,t){var n=fe.map(this,r,e);return"Until"!==i.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=fe.filter(t,n)),1<this.length&&(xe[i]||(n=fe.uniqueSort(n)),Ee.test(i)&&(n=n.reverse())),this.pushStack(n)}});var Ae,Pe,Oe=/\S+/g;for(Pe in fe.Callbacks=function(i){i="string"==typeof i?c(i):fe.extend({},i);var r,e,t,n,a=[],s=[],o=-1,u=function(){for(n=i.once,t=r=!0;s.length;o=-1)for(e=s.shift();++o<a.length;)!1===a[o].apply(e[0],e[1])&&i.stopOnFalse&&(o=a.length,e=!1);i.memory||(e=!1),r=!1,n&&(a=e?[]:"")},l={add:function(){return a&&(e&&!r&&(o=a.length-1,s.push(e)),function n(e){fe.each(e,function(e,t){fe.isFunction(t)?i.unique&&l.has(t)||a.push(t):t&&t.length&&"string"!==fe.type(t)&&n(t)})}(arguments),e&&!r&&u()),this},remove:function(){return fe.each(arguments,function(e,t){for(var n;-1<(n=fe.inArray(t,a,n));)a.splice(n,1),n<=o&&o--}),this},has:function(e){return e?-1<fe.inArray(e,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return n=s=[],a=e="",this},disabled:function(){return!a},lock:function(){return n=!0,e||l.disable(),this},locked:function(){return!!n},fireWith:function(e,t){return n||(t=[e,(t=t||[]).slice?t.slice():t],s.push(t),r||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!t}};return l},fe.extend({Deferred:function(e){var a=[["resolve","done",fe.Callbacks("once memory"),"resolved"],["reject","fail",fe.Callbacks("once memory"),"rejected"],["notify","progress",fe.Callbacks("memory")]],r="pending",s={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var r=arguments;return fe.Deferred(function(i){fe.each(a,function(e,t){var n=fe.isFunction(r[e])&&r[e];o[t[1]](function(){var e=n&&n.apply(this,arguments);e&&fe.isFunction(e.promise)?e.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[t[0]+"With"](this===s?i.promise():this,n?[e]:arguments)})}),r=null}).promise()},promise:function(e){return null!=e?fe.extend(e,s):s}},o={};return s.pipe=s.then,fe.each(a,function(e,t){var n=t[2],i=t[3];s[t[1]]=n.add,i&&n.add(function(){r=i},a[1^e][2].disable,a[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?s:this,arguments),this},o[t[0]+"With"]=n.fireWith}),s.promise(o),e&&e.call(o,o),o},when:function(e){var r,t,n,i=0,a=re.call(arguments),s=a.length,o=1!==s||e&&fe.isFunction(e.promise)?s:0,u=1===o?e:fe.Deferred(),l=function(t,n,i){return function(e){n[t]=this,i[t]=1<arguments.length?re.call(arguments):e,i===r?u.notifyWith(n,i):--o||u.resolveWith(n,i)}};if(1<s)for(r=new Array(s),t=new Array(s),n=new Array(s);i<s;i++)a[i]&&fe.isFunction(a[i].promise)?a[i].promise().progress(l(i,t,r)).done(l(i,n,a)).fail(u.reject):--o;return o||u.resolveWith(n,a),u.promise()}}),fe.fn.ready=function(e){return fe.ready.promise().done(e),this},fe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?fe.readyWait++:fe.ready(!0)},ready:function(e){(!0===e?--fe.readyWait:fe.isReady)||(fe.isReady=!0)!==e&&0<--fe.readyWait||(Ae.resolveWith(ie,[fe]),fe.fn.triggerHandler&&(fe(ie).triggerHandler("ready"),fe(ie).off("ready")))}}),fe.ready.promise=function(e){if(!Ae)if(Ae=fe.Deferred(),"complete"===ie.readyState||"loading"!==ie.readyState&&!ie.documentElement.doScroll)w.setTimeout(fe.ready);else if(ie.addEventListener)ie.addEventListener("DOMContentLoaded",a),w.addEventListener("load",a);else{ie.attachEvent("onreadystatechange",a),w.attachEvent("onload",a);var t=!1;try{t=null==w.frameElement&&ie.documentElement}catch(n){}t&&t.doScroll&&function i(){if(!fe.isReady){try{t.doScroll("left")}catch(n){return w.setTimeout(i,50)}r(),fe.ready()}}()}return Ae.promise(e)},fe.ready.promise(),fe(de))break;de.ownFirst="0"===Pe,de.inlineBlockNeedsLayout=!1,fe(function(){var e,t,n,i;(n=ie.getElementsByTagName("body")[0])&&n.style&&(t=ie.createElement("div"),(i=ie.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",de.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=ie.createElement("div");de.deleteExpando=!0;try{delete e.test}catch(t){de.deleteExpando=!1}e=null}();var Ie,Le=function(e){var t=fe.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)},De=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Re=/([A-Z])/g;fe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?fe.cache[e[fe.expando]]:e[fe.expando])&&!l(e)},data:function(e,t,n){return i(e,t,n)},removeData:function(e,t){return s(e,t)},_data:function(e,t,n){return i(e,t,n,!0)},_removeData:function(e,t){return s(e,t,!0)}}),fe.fn.extend({data:function(e,t){var n,i,r,a=this[0],s=a&&a.attributes;if(e!==undefined)return"object"==typeof e?this.each(function(){fe.data(this,e)}):1<arguments.length?this.each(function(){fe.data(this,e,t)}):a?u(a,e,fe.data(a,e)):undefined;if(this.length&&(r=fe.data(a),1===a.nodeType&&!fe._data(a,"parsedAttrs"))){for(n=s.length;n--;)s[n]&&0===(i=s[n].name).indexOf("data-")&&u(a,i=fe.camelCase(i.slice(5)),r[i]);fe._data(a,"parsedAttrs",!0)}return r},removeData:function(e){return this.each(function(){fe.removeData(this,e)})}}),fe.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=fe._data(e,t),n&&(!i||fe.isArray(n)?i=fe._data(e,t,fe.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=fe.queue(e,t),i=n.length,r=n.shift(),a=fe._queueHooks(e,t),s=function(){fe.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete a.stop,r.call(e,s,a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return fe._data(e,n)||fe._data(e,n,{empty:fe.Callbacks("once memory").add(function(){fe._removeData(e,t+"queue"),fe._removeData(e,n)})})}}),fe.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?fe.queue(this[0],t):n===undefined?this:this.each(function(){var e=fe.queue(this,t,n);fe._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&fe.dequeue(this,t)})},dequeue:function(e){return this.each(function(){fe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=fe.Deferred(),a=this,s=this.length,o=function(){--i||r.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=undefined),e=e||"fx";s--;)(n=fe._data(a[s],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(t)}}),de.shrinkWrapBlocks=function(){return null!=Ie?Ie:(Ie=!1,(t=ie.getElementsByTagName("body")[0])&&t.style?(e=ie.createElement("div"),(n=ie.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",t.appendChild(n).appendChild(e),"undefined"!=typeof e.style.zoom&&(e.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",e.appendChild(ie.createElement("div")).style.width="5px",Ie=3!==e.offsetWidth),t.removeChild(n),Ie):void 0);var e,t,n};var Me,Ue,Ne,je=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Be=new RegExp("^(?:([+-])=|)("+je+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],qe=function(e,t){return e=t||e,"none"===fe.css(e,"display")||!fe.contains(e.ownerDocument,e)},He=function(e,t,n,i,r,a,s){var o=0,u=e.length,l=null==n;if("object"===fe.type(n))for(o in r=!0,n)He(e,t,o,n[o],!0,a,s);else if(i!==undefined&&(r=!0,fe.isFunction(i)||(s=!0),l&&(s?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(fe(e),n)})),t))for(;o<u;o++)t(e[o],n,s?i:i.call(e[o],o,t(e[o],n)));return r?e:l?t.call(e):u?t(e[0],n):a},Ve=/^(?:checkbox|radio)$/i,We=/<([\w:-]+)/,ze=/^$|\/(?:java|ecma)script/i,Ge=/^\s+/,$e="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";Me=ie.createElement("div"),Ue=ie.createDocumentFragment(),Ne=ie.createElement("input"),Me.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",de.leadingWhitespace=3===Me.firstChild.nodeType,de.tbody=!Me.getElementsByTagName("tbody").length,de.htmlSerialize=!!Me.getElementsByTagName("link").length,de.html5Clone="<:nav></:nav>"!==ie.createElement("nav").cloneNode(!0).outerHTML,Ne.type="checkbox",Ne.checked=!0,Ue.appendChild(Ne),de.appendChecked=Ne.checked,Me.innerHTML="<textarea>x</textarea>",de.noCloneChecked=!!Me.cloneNode(!0).lastChild.defaultValue,Ue.appendChild(Me),(Ne=ie.createElement("input")).setAttribute("type","radio"),Ne.setAttribute("checked","checked"),Ne.setAttribute("name","t"),Me.appendChild(Ne),de.checkClone=Me.cloneNode(!0).cloneNode(!0).lastChild.checked,de.noCloneEvent=!!Me.addEventListener,Me[fe.expando]=1,de.attributes=!Me.getAttribute(fe.expando);var Xe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:de.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Xe.optgroup=Xe.option,Xe.tbody=Xe.tfoot=Xe.colgroup=Xe.caption=Xe.thead,Xe.th=Xe.td;var Ye=/<|&#?\w+;/,Ke=/<tbody/i;!function(){var e,t,n=ie.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(de[e]=t in w)||(n.setAttribute(t,"t"),de[e]=!1===n.attributes[t].expando);n=null}();var Qe=/^(?:input|select|textarea)$/i,Je=/^key/,Ze=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,et=/^(?:focusinfocus|focusoutblur)$/,tt=/^([^.]*)(?:\.(.+)|)/;fe.event={global:{},add:function(e,t,n,i,r){var a,s,o,u,l,c,d,h,f,p,m,g=fe._data(e);if(g){for(n.handler&&(n=(u=n).handler,r=u.selector),n.guid||(n.guid=fe.guid++),(s=g.events)||(s=g.events={}),(c=g.handle)||((c=g.handle=function(e){return void 0===fe||e&&fe.event.triggered===e.type?undefined:fe.event.dispatch.apply(c.elem,arguments)}).elem=e),o=(t=(t||"").match(Oe)||[""]).length;o--;)f=m=(a=tt.exec(t[o])||[])[1],p=(a[2]||"").split(".").sort(),f&&(l=fe.event.special[f]||{},f=(r?l.delegateType:l.bindType)||f,l=fe.event.special[f]||{},d=fe.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&fe.expr.match.needsContext.test(r),namespace:p.join(".")},u),(h=s[f])||((h=s[f]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,i,p,c)||(e.addEventListener?e.addEventListener(f,c,!1):e.attachEvent&&e.attachEvent("on"+f,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,d):h.push(d),fe.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var a,s,o,u,l,c,d,h,f,p,m,g=fe.hasData(e)&&fe._data(e);if(g&&(c=g.events)){for(l=(t=(t||"").match(Oe)||[""]).length;l--;)if(f=m=(o=tt.exec(t[l])||[])[1],p=(o[2]||"").split(".").sort(),f){for(d=fe.event.special[f]||{},h=c[f=(i?d.delegateType:d.bindType)||f]||[],o=o[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=a=h.length;a--;)s=h[a],!r&&m!==s.origType||n&&n.guid!==s.guid||o&&!o.test(s.namespace)||i&&i!==s.selector&&("**"!==i||!s.selector)||(h.splice(a,1),s.selector&&h.delegateCount--,d.remove&&d.remove.call(e,s));u&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,g.handle)||fe.removeEvent(e,f,g.handle),delete c[f])}else for(f in c)fe.event.remove(e,f+t[l],n,i,!0);fe.isEmptyObject(c)&&(delete g.handle,fe._removeData(e,"events"))}},trigger:function(e,t,n,i){var r,a,s,o,u,l,c,d=[n||ie],h=ce.call(e,"type")?e.type:e,f=ce.call(e,"namespace")?e.namespace.split("."):[];if(s=l=n=n||ie,3!==n.nodeType&&8!==n.nodeType&&!et.test(h+fe.event.triggered)&&(-1<h.indexOf(".")&&(h=(f=h.split(".")).shift(),f.sort()),a=h.indexOf(":")<0&&"on"+h,(e=e[fe.expando]?e:new fe.Event(h,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=undefined,e.target||(e.target=n),t=null==t?[e]:fe.makeArray(t,[e]),u=fe.event.special[h]||{},i||!u.trigger||!1!==u.trigger.apply(n,t))){if(!i&&!u.noBubble&&!fe.isWindow(n)){for(o=u.delegateType||h,et.test(o+h)||(s=s.parentNode);s;s=s.parentNode)d.push(s),l=s;l===(n.ownerDocument||ie)&&d.push(l.defaultView||l.parentWindow||w)}for(c=0;(s=d[c++])&&!e.isPropagationStopped();)e.type=1<c?o:u.bindType||h,(r=(fe._data(s,"events")||{})[e.type]&&fe._data(s,"handle"))&&r.apply(s,t),(r=a&&s[a])&&r.apply&&Le(s)&&(e.result=r.apply(s,t),!1===e.result&&e.preventDefault());if(e.type=h,!i&&!e.isDefaultPrevented()&&(!u._default||!1===u._default.apply(d.pop(),t))&&Le(n)&&a&&n[h]&&!fe.isWindow(n)){(l=n[a])&&(n[a]=null),fe.event.triggered=h;try{n[h]()}catch(p){}fe.event.triggered=undefined,l&&(n[a]=l)}return e.result}},dispatch:function(e){e=fe.event.fix(e);var t,n,i,r,a,s=[],o=re.call(arguments),u=(fe._data(this,"events")||{})[e.type]||[],l=fe.event.special[e.type]||{};if((o[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(s=fe.event.handlers.call(this,e,u),t=0;(r=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(a=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(a.namespace)||(e.handleObj=a,e.data=a.data,(i=((fe.event.special[a.origType]||{}).handle||a.handler).apply(r.elem,o))!==undefined&&!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,a,s=[],o=t.delegateCount,u=e.target;if(o&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(i=[],n=0;n<o;n++)i[r=(a=t[n]).selector+" "]===undefined&&(i[r]=a.needsContext?-1<fe(r,this).index(u):fe.find(r,this,null,[u]).length),i[r]&&i.push(a);i.length&&s.push({elem:u,handlers:i})}return o<t.length&&s.push({elem:this,handlers:t.slice(o)}),s},fix:function(e){if(e[fe.expando])return e;var t,n,i,r=e.type,a=e,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ze.test(r)?this.mouseHooks:Je.test(r)?this.keyHooks:{}),i=s.props?this.props.concat(s.props):this.props,e=new fe.Event(a),t=i.length;t--;)e[n=i[t]]=a[n];return e.target||(e.target=a.srcElement||ie),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,a=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(i=e.target.ownerDocument||ie).documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||a===undefined||(e.which=1&a?1:2&a?3:4&a?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==p()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===p()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(fe.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return fe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var i=fe.extend(new fe.Event,n,{type:e,isSimulated:!0});fe.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}},fe.removeEvent=ie.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},fe.Event=function(e,t){if(!(this instanceof fe.Event))return new fe.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&!1===e.returnValue?h:f):this.type=e,t&&fe.extend(this,t),this.timeStamp=e&&e.timeStamp||fe.now(),this[fe.expando]=!0},fe.Event.prototype={constructor:fe.Event,isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},fe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){fe.event.special[e]={delegateType:a,bindType:a,handle:function(e){var t,n=this,i=e.relatedTarget,r=e.handleObj;return i&&(i===n||fe.contains(n,i))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=a),t}}}),de.submit||(fe.event.special.submit={setup:function(){if(fe.nodeName(this,"form"))return!1;fe.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=fe.nodeName(t,"input")||fe.nodeName(t,"button")?fe.prop(t,"form"):undefined;n&&!fe._data(n,"submit")&&(fe.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),fe._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&fe.event.simulate("submit",this.parentNode,e))},teardown:function(){if(fe.nodeName(this,"form"))return!1;fe.event.remove(this,"._submit")}}),de.change||(fe.event.special.change={setup:function(){if(Qe.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(fe.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),fe.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),fe.event.simulate("change",this,e)})),!1;fe.event.add(this,"beforeactivate._change",function(e){var t=e.target;Qe.test(t.nodeName)&&!fe._data(t,"change")&&(fe.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||fe.event.simulate("change",this.parentNode,e)}),fe._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return fe.event.remove(this,"._change"),!Qe.test(this.nodeName)}}),de.focusin||fe.each({focus:"focusin",blur:"focusout"},function(n,i){var r=function(e){fe.event.simulate(i,e.target,fe.event.fix(e))};fe.event.special[i]={setup:function(){var e=this.ownerDocument||this,t=fe._data(e,i);t||e.addEventListener(n,r,!0),fe._data(e,i,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=fe._data(e,i)-1;t?fe._data(e,i,t):(e.removeEventListener(n,r,!0),fe._removeData(e,i))}}}),fe.fn.extend({on:function(e,t,n,i){return _(this,e,t,n,i)},one:function(e,t,n,i){return _(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,fe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=undefined),!1===n&&(n=f),this.each(function(){fe.event.remove(this,e,n,t)});for(r in e)this.off(r,t,e[r]);return this},trigger:function(e,t){return this.each(function(){fe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return fe.event.trigger(e,t,n,!0)}});var nt=/ jQuery\d+="(?:null|\d+)"/g,it=new RegExp("<(?:"+$e+")[\\s/>]","i"),rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,at=/<script|<style|<link/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,ot=/^true\/(.*)/,ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,lt=g(ie).appendChild(ie.createElement("div"));fe.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,n){var i,r,a,s,o,u=fe.contains(e.ownerDocument,e);if(de.html5Clone||fe.isXMLDoc(e)||!it.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(lt.innerHTML=e.outerHTML,lt.removeChild(a=lt.firstChild)),!(de.noCloneEvent&&de.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||fe.isXMLDoc(e)))for(i=y(a),o=y(e),s=0;null!=(r=o[s]);++s)i[s]&&E(r,i[s]);if(t)if(n)for(o=o||y(e),i=i||y(a),s=0;null!=(r=o[s]);s++)C(r,i[s]);else C(e,a);return 0<(i=y(a,"script")).length&&v(i,!u&&y(e,"script")),i=o=r=null,a},cleanData:function(e,t){for(var n,i,r,a,s=0,o=fe.expando,u=fe.cache,l=de.attributes,c=fe.event.special;null!=(n=e[s]);s++)if((t||Le(n))&&(a=(r=n[o])&&u[r])){if(a.events)for(i in a.events)c[i]?fe.event.remove(n,i):fe.removeEvent(n,i,a.handle);u[r]&&(delete u[r],l||"undefined"==typeof n.removeAttribute?n[o]=undefined:n.removeAttribute(o),ne.push(r))}}}),fe.fn.extend({domManip:x,detach:function(e){return A(this,e,!0)},remove:function(e){return A(this,e)},text:function(e){return He(this,function(e){return e===undefined?fe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ie).createTextNode(e))},null,e,arguments.length)},append:function(){return x(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||T(this,e).appendChild(e)})},prepend:function(){return x(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return x(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&fe.cleanData(y(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&fe.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return fe.clone(this,e,t)})},html:function(e){return He(this,function(e){var t=this[0]||{},n=0,i=this.length;if(e===undefined)return 1===t.nodeType?t.innerHTML.replace(nt,""):undefined;if("string"==typeof e&&!at.test(e)&&(de.htmlSerialize||!it.test(e))&&(de.leadingWhitespace||!Ge.test(e))&&!Xe[(We.exec(e)||["",""])[1].toLowerCase()]){e=fe.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(fe.cleanData(y(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return x(this,arguments,function(e){var t=this.parentNode;fe.inArray(this,n)<0&&(fe.cleanData(y(this)),t&&t.replaceChild(e,this))},n)}}),fe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){fe.fn[e]=function(e){for(var t,n=0,i=[],r=fe(e),a=r.length-1;n<=a;n++)t=n===a?this:this.clone(!0),fe(r[n])[s](t),se.apply(i,t.get());return this.pushStack(i)}});var ct,dt={HTML:"block",BODY:"block"},ht=/^margin/,ft=new RegExp("^("+je+")(?!px)[a-z%]+$","i"),pt=function(e,t,n,i){var r,a,s={};for(a in t)s[a]=e.style[a],e.style[a]=t[a];for(a in r=n.apply(e,i||[]),t)e.style[a]=s[a];return r},mt=ie.documentElement;!function(){function e(){var e,t,n=ie.documentElement;n.appendChild(l),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",i=a=u=!1,r=o=!0,w.getComputedStyle&&(t=w.getComputedStyle(c),i="1%"!==(t||{}).top,u="2px"===(t||{}).marginLeft,a="4px"===(t||{width:"4px"}).width,c.style.marginRight="50%",r="4px"===(t||{marginRight:"4px"}).marginRight,(e=c.appendChild(ie.createElement("div"))).style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",c.style.width="1px",o=!parseFloat((w.getComputedStyle(e)||{}).marginRight),c.removeChild(e)),c.style.display="none",(s=0===c.getClientRects().length)&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",(
e=c.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===e[0].offsetHeight)&&(e[0].style.display="",e[1].style.display="none",s=0===e[0].offsetHeight)),n.removeChild(l)}var i,r,a,s,o,u,l=ie.createElement("div"),c=ie.createElement("div");c.style&&(c.style.cssText="float:left;opacity:.5",de.opacity="0.5"===c.style.opacity,de.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",de.clearCloneStyle="content-box"===c.style.backgroundClip,(l=ie.createElement("div")).style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",l.appendChild(c),de.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,fe.extend(de,{reliableHiddenOffsets:function(){return null==i&&e(),s},boxSizingReliable:function(){return null==i&&e(),a},pixelMarginRight:function(){return null==i&&e(),r},pixelPosition:function(){return null==i&&e(),i},reliableMarginRight:function(){return null==i&&e(),o},reliableMarginLeft:function(){return null==i&&e(),u}}))}();var gt,yt,vt=/^(top|right|bottom|left)$/;w.getComputedStyle?(gt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)},yt=function(e,t,n){var i,r,a,s,o=e.style;return""!==(s=(n=n||gt(e))?n.getPropertyValue(t)||n[t]:undefined)&&s!==undefined||fe.contains(e.ownerDocument,e)||(s=fe.style(e,t)),n&&!de.pixelMarginRight()&&ft.test(s)&&ht.test(t)&&(i=o.width,r=o.minWidth,a=o.maxWidth,o.minWidth=o.maxWidth=o.width=s,s=n.width,o.width=i,o.minWidth=r,o.maxWidth=a),s===undefined?s:s+""}):mt.currentStyle&&(gt=function(e){return e.currentStyle},yt=function(e,t,n){var i,r,a,s,o=e.style;return null==(s=(n=n||gt(e))?n[t]:undefined)&&o&&o[t]&&(s=o[t]),ft.test(s)&&!vt.test(t)&&(i=o.left,(a=(r=e.runtimeStyle)&&r.left)&&(r.left=e.currentStyle.left),o.left="fontSize"===t?"1em":s,s=o.pixelLeft+"px",o.left=i,a&&(r.left=a)),s===undefined?s:s+""||"auto"});var bt=/alpha\([^)]*\)/i,_t=/opacity\s*=\s*([^)]*)/i,Tt=/^(none|table(?!-c[ea]).+)/,St=new RegExp("^("+je+")(.*)$","i"),wt={position:"absolute",visibility:"hidden",display:"block"},kt={letterSpacing:"0",fontWeight:"400"},Ct=["Webkit","O","Moz","ms"],Et=ie.createElement("div").style;fe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=yt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":de.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,a,s,o=fe.camelCase(t),u=e.style;if(t=fe.cssProps[o]||(fe.cssProps[o]=L(o)||o),s=fe.cssHooks[t]||fe.cssHooks[o],n===undefined)return s&&"get"in s&&(r=s.get(e,!1,i))!==undefined?r:u[t];if("string"===(a=typeof n)&&(r=Be.exec(n))&&r[1]&&(n=d(e,t,r),a="number"),null!=n&&n==n&&("number"===a&&(n+=r&&r[3]||(fe.cssNumber[o]?"":"px")),de.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(s&&"set"in s&&(n=s.set(e,n,i))===undefined)))try{u[t]=n}catch(l){}}},css:function(e,t,n,i){var r,a,s,o=fe.camelCase(t);return t=fe.cssProps[o]||(fe.cssProps[o]=L(o)||o),(s=fe.cssHooks[t]||fe.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,n)),a===undefined&&(a=yt(e,t,i)),"normal"===a&&t in kt&&(a=kt[t]),""===n||n?(r=parseFloat(a),!0===n||isFinite(r)?r||0:a):a}}),fe.each(["height","width"],function(e,r){fe.cssHooks[r]={get:function(e,t,n){if(t)return Tt.test(fe.css(e,"display"))&&0===e.offsetWidth?pt(e,wt,function(){return U(e,r,n)}):U(e,r,n)},set:function(e,t,n){var i=n&&gt(e);return R(e,t,n?M(e,r,n,de.boxSizing&&"border-box"===fe.css(e,"boxSizing",!1,i),i):0)}}}),de.opacity||(fe.cssHooks.opacity={get:function(e,t){return _t.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=fe.isNumeric(t)?"alpha(opacity="+100*t+")":"",a=i&&i.filter||n.filter||"";((n.zoom=1)<=t||""===t)&&""===fe.trim(a.replace(bt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=bt.test(a)?a.replace(bt,r):a+" "+r)}}),fe.cssHooks.marginRight=I(de.reliableMarginRight,function(e,t){if(t)return pt(e,{display:"inline-block"},yt,[e,"marginRight"])}),fe.cssHooks.marginLeft=I(de.reliableMarginLeft,function(e,t){if(t)return(parseFloat(yt(e,"marginLeft"))||(fe.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-pt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),fe.each({margin:"",padding:"",border:"Width"},function(r,a){fe.cssHooks[r+a]={expand:function(e){for(var t=0,n={},i="string"==typeof e?e.split(" "):[e];t<4;t++)n[r+Fe[t]+a]=i[t]||i[t-2]||i[0];return n}},ht.test(r)||(fe.cssHooks[r+a].set=R)}),fe.fn.extend({css:function(e,t){return He(this,function(e,t,n){var i,r,a={},s=0;if(fe.isArray(t)){for(i=gt(e),r=t.length;s<r;s++)a[t[s]]=fe.css(e,t[s],!1,i);return a}return n!==undefined?fe.style(e,t,n):fe.css(e,t)},e,t,1<arguments.length)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){qe(this)?fe(this).show():fe(this).hide()})}}),(fe.Tween=N).prototype={constructor:N,init:function(e,t,n,i,r,a){this.elem=e,this.prop=n,this.easing=r||fe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(fe.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.options.duration?this.pos=t=fe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=fe.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){fe.fx.step[e.prop]?fe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[fe.cssProps[e.prop]]&&!fe.cssHooks[e.prop]?e.elem[e.prop]=e.now:fe.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},fe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},fe.fx=N.prototype.init,fe.fx.step={};var xt,At,Pt,Ot,It,Lt,Dt,Rt=/^(?:toggle|show|hide)$/,Mt=/queueHooks$/;fe.Animation=fe.extend(V,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return d(n.elem,e,Be.exec(t),n),n}]},tweener:function(e,t){fe.isFunction(e)?(t=e,e=["*"]):e=e.match(Oe);for(var n,i=0,r=e.length;i<r;i++)n=e[i],V.tweeners[n]=V.tweeners[n]||[],V.tweeners[n].unshift(t)},prefilters:[q],prefilter:function(e,t){t?V.prefilters.unshift(e):V.prefilters.push(e)}}),fe.speed=function(e,t,n){var i=e&&"object"==typeof e?fe.extend({},e):{complete:n||!n&&t||fe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!fe.isFunction(t)&&t};return i.duration=fe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in fe.fx.speeds?fe.fx.speeds[i.duration]:fe.fx.speeds._default,null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){fe.isFunction(i.old)&&i.old.call(this),i.queue&&fe.dequeue(this,i.queue)},i},fe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(qe).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(t,e,n,i){var r=fe.isEmptyObject(t),a=fe.speed(e,n,i),s=function(){var e=V(this,fe.extend({},t),a);(r||fe._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||!1===a.queue?this.each(s):this.queue(a.queue,s)},stop:function(r,e,a){var s=function(e){var t=e.stop;delete e.stop,t(a)};return"string"!=typeof r&&(a=e,e=r,r=undefined),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",n=fe.timers,i=fe._data(this);if(t)i[t]&&i[t].stop&&s(i[t]);else for(t in i)i[t]&&i[t].stop&&Mt.test(t)&&s(i[t]);for(t=n.length;t--;)n[t].elem!==this||null!=r&&n[t].queue!==r||(n[t].anim.stop(a),e=!1,n.splice(t,1));!e&&a||fe.dequeue(this,r)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=fe._data(this),n=t[s+"queue"],i=t[s+"queueHooks"],r=fe.timers,a=n?n.length:0;for(t.finish=!0,fe.queue(this,s,[]),i&&i.stop&&i.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===s&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<a;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),fe.each(["toggle","show","hide"],function(e,i){var r=fe.fn[i];fe.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(B(i,!0),e,t,n)}}),fe.each({slideDown:B("show"),slideUp:B("hide"),slideToggle:B("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,i){fe.fn[e]=function(e,t,n){return this.animate(i,e,t,n)}}),fe.timers=[],fe.fx.tick=function(){var e,t=fe.timers,n=0;for(xt=fe.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||fe.fx.stop(),xt=undefined},fe.fx.timer=function(e){fe.timers.push(e),e()?fe.fx.start():fe.timers.pop()},fe.fx.interval=13,fe.fx.start=function(){At||(At=w.setInterval(fe.fx.tick,fe.fx.interval))},fe.fx.stop=function(){w.clearInterval(At),At=null},fe.fx.speeds={slow:600,fast:200,_default:400},fe.fn.delay=function(i,e){return i=fe.fx&&fe.fx.speeds[i]||i,e=e||"fx",this.queue(e,function(e,t){var n=w.setTimeout(e,i);t.stop=function(){w.clearTimeout(n)}})},Ot=ie.createElement("input"),It=ie.createElement("div"),Lt=ie.createElement("select"),Dt=Lt.appendChild(ie.createElement("option")),(It=ie.createElement("div")).setAttribute("className","t"),It.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Pt=It.getElementsByTagName("a")[0],Ot.setAttribute("type","checkbox"),It.appendChild(Ot),(Pt=It.getElementsByTagName("a")[0]).style.cssText="top:1px",de.getSetAttribute="t"!==It.className,de.style=/top/.test(Pt.getAttribute("style")),de.hrefNormalized="/a"===Pt.getAttribute("href"),de.checkOn=!!Ot.value,de.optSelected=Dt.selected,de.enctype=!!ie.createElement("form").enctype,Lt.disabled=!0,de.optDisabled=!Dt.disabled,(Ot=ie.createElement("input")).setAttribute("value",""),de.input=""===Ot.getAttribute("value"),Ot.value="t",Ot.setAttribute("type","radio"),de.radioValue="t"===Ot.value;var Ut=/\r/g,Nt=/[\x20\t\r\n\f]+/g;fe.fn.extend({val:function(n){var i,e,r,t=this[0];return arguments.length?(r=fe.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?n.call(this,e,fe(this).val()):n)?t="":"number"==typeof t?t+="":fe.isArray(t)&&(t=fe.map(t,function(e){return null==e?"":e+""})),(i=fe.valHooks[this.type]||fe.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,t,"value")!==undefined||(this.value=t))})):t?(i=fe.valHooks[t.type]||fe.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&(e=i.get(t,"value"))!==undefined?e:"string"==typeof(e=t.value)?e.replace(Ut,""):null==e?"":e:void 0}}),fe.extend({valHooks:{option:{get:function(e){var t=fe.find.attr(e,"value");return null!=t?t:fe.trim(fe.text(e)).replace(Nt," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,a="select-one"===e.type||r<0,s=a?null:[],o=a?r+1:i.length,u=r<0?o:a?r:0;u<o;u++)if(((n=i[u]).selected||u===r)&&(de.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!fe.nodeName(n.parentNode,"optgroup"))){if(t=fe(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,a=fe.makeArray(t),s=r.length;s--;)if(i=r[s],-1<fe.inArray(fe.valHooks.option.get(i),a))try{i.selected=n=!0}catch(o){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),fe.each(["radio","checkbox"],function(){fe.valHooks[this]={set:function(e,t){if(fe.isArray(t))return e.checked=-1<fe.inArray(fe(e).val(),t)}},de.checkOn||(fe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var jt,Bt,Ft=fe.expr.attrHandle,qt=/^(?:checked|selected)$/i,Ht=de.getSetAttribute,Vt=de.input;fe.fn.extend({attr:function(e,t){return He(this,fe.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){fe.removeAttr(this,e)})}}),fe.extend({attr:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"==typeof e.getAttribute?fe.prop(e,t,n):(1===a&&fe.isXMLDoc(e)||(t=t.toLowerCase(),r=fe.attrHooks[t]||(fe.expr.match.bool.test(t)?Bt:jt)),n!==undefined?null===n?void fe.removeAttr(e,t):r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=fe.find.attr(e,t))?undefined:i)},attrHooks:{type:{set:function(e,t){if(!de.radioValue&&"radio"===t&&fe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,a=t&&t.match(Oe);if(a&&1===e.nodeType)for(;n=a[r++];)i=fe.propFix[n]||n,fe.expr.match.bool.test(n)?Vt&&Ht||!qt.test(n)?e[i]=!1:e[fe.camelCase("default-"+n)]=e[i]=!1:fe.attr(e,n,""),e.removeAttribute(Ht?n:i)}}),Bt={set:function(e,t,n){return!1===t?fe.removeAttr(e,n):Vt&&Ht||!qt.test(n)?e.setAttribute(!Ht&&fe.propFix[n]||n,n):e[fe.camelCase("default-"+n)]=e[n]=!0,n}},fe.each(fe.expr.match.bool.source.match(/\w+/g),function(e,t){var a=Ft[t]||fe.find.attr;Vt&&Ht||!qt.test(t)?Ft[t]=function(e,t,n){var i,r;return n||(r=Ft[t],Ft[t]=i,i=null!=a(e,t,n)?t.toLowerCase():null,Ft[t]=r),i}:Ft[t]=function(e,t,n){if(!n)return e[fe.camelCase("default-"+t)]?t.toLowerCase():null}}),Vt&&Ht||(fe.attrHooks.value={set:function(e,t,n){if(!fe.nodeName(e,"input"))return jt&&jt.set(e,t,n);e.defaultValue=t}}),Ht||(jt={set:function(e,t,n){var i=e.getAttributeNode(n);if(i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n))return t}},Ft.id=Ft.name=Ft.coords=function(e,t,n){var i;if(!n)return(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},fe.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:jt.set},fe.attrHooks.contenteditable={set:function(e,t,n){jt.set(e,""!==t&&t,n)}},fe.each(["width","height"],function(e,n){fe.attrHooks[n]={set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}}})),de.style||(fe.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var Wt=/^(?:input|select|textarea|button|object)$/i,zt=/^(?:a|area)$/i;fe.fn.extend({prop:function(e,t){return He(this,fe.prop,e,t,1<arguments.length)},removeProp:function(t){return t=fe.propFix[t]||t,this.each(function(){try{this[t]=undefined,delete this[t]}catch(e){}})}}),fe.extend({prop:function(e,t,n){var i,r,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&fe.isXMLDoc(e)||(t=fe.propFix[t]||t,r=fe.propHooks[t]),n!==undefined?r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=fe.find.attr(e,"tabindex");return t?parseInt(t,10):Wt.test(e.nodeName)||zt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),de.hrefNormalized||fe.each(["href","src"],function(e,t){fe.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),de.optSelected||(fe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),fe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fe.propFix[this.toLowerCase()]=this}),de.enctype||(fe.propFix.enctype="encoding");var Gt=/[\t\r\n\f]/g;fe.fn.extend({addClass:function(t){var e,n,i,r,a,s,o,u=0;if(fe.isFunction(t))return this.each(function(e){fe(this).addClass(t.call(this,e,W(this)))});if("string"==typeof t&&t)for(e=t.match(Oe)||[];n=this[u++];)if(r=W(n),i=1===n.nodeType&&(" "+r+" ").replace(Gt," ")){for(s=0;a=e[s++];)i.indexOf(" "+a+" ")<0&&(i+=a+" ");r!==(o=fe.trim(i))&&fe.attr(n,"class",o)}return this},removeClass:function(t){var e,n,i,r,a,s,o,u=0;if(fe.isFunction(t))return this.each(function(e){fe(this).removeClass(t.call(this,e,W(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(Oe)||[];n=this[u++];)if(r=W(n),i=1===n.nodeType&&(" "+r+" ").replace(Gt," ")){for(s=0;a=e[s++];)for(;-1<i.indexOf(" "+a+" ");)i=i.replace(" "+a+" "," ");r!==(o=fe.trim(i))&&fe.attr(n,"class",o)}return this},toggleClass:function(r,t){var a=typeof r;return"boolean"==typeof t&&"string"===a?t?this.addClass(r):this.removeClass(r):fe.isFunction(r)?this.each(function(e){fe(this).toggleClass(r.call(this,e,W(this),t),t)}):this.each(function(){var e,t,n,i;if("string"===a)for(t=0,n=fe(this),i=r.match(Oe)||[];e=i[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else r!==undefined&&"boolean"!==a||((e=W(this))&&fe._data(this,"__className__",e),fe.attr(this,"class",e||!1===r?"":fe._data(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&-1<(" "+W(n)+" ").replace(Gt," ").indexOf(t))return!0;return!1}}),fe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){fe.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),fe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var $t=w.location,Xt=fe.now(),Yt=/\?/,Kt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;fe.parseJSON=function(e){if(w.JSON&&w.JSON.parse)return w.JSON.parse(e+"");var r,a=null,t=fe.trim(e+"");return t&&!fe.trim(t.replace(Kt,function(e,t,n,i){return r&&t&&(a=0),0===a?e:(r=n||t,a+=!i-!n,"")}))?Function("return "+t)():fe.error("Invalid JSON: "+e)},fe.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{w.DOMParser?t=(new w.DOMParser).parseFromString(e,"text/xml"):((t=new w.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(n){t=undefined}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||fe.error("Invalid XML: "+e),t};var Qt=/#.*$/,Jt=/([?&])_=[^&]*/,Zt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,en=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,tn=/^(?:GET|HEAD)$/,nn=/^\/\//,rn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,an={},sn={},on="*/".concat("*"),un=$t.href,ln=rn.exec(un.toLowerCase())||[];fe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:un,type:"GET",isLocal:en.test(ln[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":on,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fe.parseJSON,"text xml":fe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?$($(e,fe.ajaxSettings),t):$(fe.ajaxSettings,e)},ajaxPrefilter:z(an),ajaxTransport:z(sn),ajax:function(e,t){function n(e,t,n,i){var r,a,s,o,u,l=t;2!==T&&(T=2,h&&w.clearTimeout(h),p=undefined,d=i||"",S.readyState=0<e?4:0,r=200<=e&&e<300||304===e,n&&(o=X(m,S,n)),o=Y(m,o,S,r),r?(m.ifModified&&((u=S.getResponseHeader("Last-Modified"))&&(fe.lastModified[c]=u),(u=S.getResponseHeader("etag"))&&(fe.etag[c]=u)),204===e||"HEAD"===m.type?l="nocontent":304===e?l="notmodified":(l=o.state,a=o.data,r=!(s=o.error))):(s=l,!e&&l||(l="error",e<0&&(e=0))),S.status=e,S.statusText=(t||l)+"",r?v.resolveWith(g,[a,l,S]):v.rejectWith(g,[S,l,s]),S.statusCode(_),_=undefined,f&&y.trigger(r?"ajaxSuccess":"ajaxError",[S,m,r?a:s]),b.fireWith(g,[S,l]),f&&(y.trigger("ajaxComplete",[S,m]),--fe.active||fe.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=undefined),t=t||{};var i,r,c,d,h,f,p,a,m=fe.ajaxSetup({},t),g=m.context||m,y=m.context&&(g.nodeType||g.jquery)?fe(g):fe.event,v=fe.Deferred(),b=fe.Callbacks("once memory"),_=m.statusCode||{},s={},o={},T=0,u="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(2===T){if(!a)for(a={};t=Zt.exec(d);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===T?d:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return T||(e=o[n]=o[n]||e,s[e]=t),this},overrideMimeType:function(e){return T||(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(T<2)for(t in e)_[t]=[_[t],e[t]];else S.always(e[S.status]);return this},abort:function(e){var t=e||u;return p&&p.abort(t),n(0,t),this}};if(v.promise(S).complete=b.add,S.success=S.done,S.error=S.fail,m.url=((e||m.url||un)+"").replace(Qt,"").replace(nn,ln[1]+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=fe.trim(m.dataType||"*").toLowerCase().match(Oe)||[""],null==m.crossDomain&&(i=rn.exec(m.url.toLowerCase()),m.crossDomain=!(!i||i[1]===ln[1]&&i[2]===ln[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(ln[3]||("http:"===ln[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=fe.param(m.data,m.traditional)),G(an,m,t,S),2===T)return S;for(r in(f=fe.event&&m.global)&&0==fe.active++&&fe.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!tn.test(m.type),c=m.url,m.hasContent||(m.data&&(c=m.url+=(Yt.test(c)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=Jt.test(c)?c.replace(Jt,"$1_="+Xt++):c+(Yt.test(c)?"&":"?")+"_="+Xt++)),m.ifModified&&(fe.lastModified[c]&&S.setRequestHeader("If-Modified-Since",fe.lastModified[c]),fe.etag[c]&&S.setRequestHeader("If-None-Match",fe.etag[c])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&S.setRequestHeader("Content-Type",m.contentType),S.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+on+"; q=0.01":""):m.accepts["*"]),m.headers)S.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(g,S,m)||2===T))return S.abort();for(r in u="abort",{success:1,error:1,complete:1})S[r](m[r]);if(p=G(sn,m,t,S)){if(S.readyState=1,f&&y.trigger("ajaxSend",[S,m]),2===T)return S;m.async&&0<m.timeout&&(h=w.setTimeout(function(){S.abort("timeout")},m.timeout));try{T=1,p.send(s,n)}catch(l){if(!(T<2))throw l;n(-1,l)}}else n(-1,"No Transport");return S},getJSON:function(e,t,n){return fe.get(e,t,n,"json")},getScript:function(e,t){return fe.get(e,undefined,t,"script")}}),fe.each(["get","post"],function(e,r){fe[r]=function(e,t,n,i){return fe.isFunction(t)&&(i=i||n,n=t,t=undefined),fe.ajax(fe.extend({url:e,type:r,dataType:i,data:t,success:n},fe.isPlainObject(e)&&e))}}),fe._evalUrl=function(e){return fe.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},fe.fn.extend({wrapAll:function(t){if(fe.isFunction(t))return this.each(function(e){fe(this).wrapAll(t.call(this,e))});if(this[0]){var e=fe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(n){return fe.isFunction(n)?this.each(function(e){fe(this).wrapInner(n.call(this,e))}):this.each(function(){var e=fe(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=fe.isFunction(t);return this.each(function(e){fe(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){fe.nodeName(this,"body")||fe(this).replaceWith(this.childNodes)}).end()}}),fe.expr.filters.hidden=function(e){return de.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:Q(e)},fe.expr.filters.visible=function(e){return!fe.expr.filters.hidden(e)};var cn=/%20/g,dn=/\[\]$/,hn=/\r?\n/g,fn=/^(?:submit|button|image|reset|file)$/i,pn=/^(?:input|select|textarea|keygen)/i;fe.param=function(e,t){var n,i=[],r=function(e,t){t=fe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===undefined&&(t=fe.ajaxSettings&&fe.ajaxSettings.traditional),fe.isArray(e)||e.jquery&&!fe.isPlainObject(e))fe.each(e,function(){r(this.name,this.value)});else for(n in e)J(n,e[n],t,r);return i.join("&").replace(cn,"+")},fe.fn.extend({serialize:function(){return fe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=fe.prop(this,"elements");return e?fe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!fe(this).is(":disabled")&&pn.test(this.nodeName)&&!fn.test(e)&&(this.checked||!Ve.test(e))}).map(function(e,t){var n=fe(this).val();return null==n?null:fe.isArray(n)?fe.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),fe.ajaxSettings.xhr=w.ActiveXObject!==undefined?function(){return this.isLocal?ee():8<ie.documentMode?Z():/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||ee()}:Z;var mn=0,gn={},yn=fe.ajaxSettings.xhr();w.attachEvent&&w.attachEvent("onunload",function(){for(var e in gn)gn[e](undefined,!0)}),de.cors=!!yn&&"withCredentials"in yn,(yn=de.ajax=!!yn)&&fe.ajaxTransport(function(l){var c;if(!l.crossDomain||de.cors)return{send:function(e,s){var t,o=l.xhr(),u=++mn;if(o.open(l.type,l.url,l.async,l.username,l.password),l.xhrFields)for(t in l.xhrFields)o[t]=l.xhrFields[t];for(t in l.mimeType&&o.overrideMimeType&&o.overrideMimeType(l.mimeType),l.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)e[t]!==undefined&&o.setRequestHeader(t,e[t]+"");o.send(l.hasContent&&l.data||null),c=function(e,t){var n,i,r;if(c&&(t||4===o.readyState))if(delete gn[u],c=undefined,o.onreadystatechange=fe.noop,t)4!==o.readyState&&o.abort();else{r={},n=o.status,"string"==typeof o.responseText&&(r.text=o.responseText);try{i=o.statusText}catch(a){i=""}n||!l.isLocal||l.crossDomain?1223===n&&(n=204):n=r.text?200:404}r&&s(n,i,r,o.getAllResponseHeaders())},l.async?4===o.readyState?w.setTimeout(c):o.onreadystatechange=gn[u]=c:c()},abort:function(){c&&c(undefined,!0)}}}),fe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return fe.globalEval(e),e}}}),fe.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),fe.ajaxTransport("script",function(t){if(t.crossDomain){var i,r=ie.head||fe("head")[0]||ie.documentElement;return{send:function(e,n){(i=ie.createElement("script")).async=!0,t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(e,t){(t||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),i=null,t||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(undefined,!0)}}}});var vn=[],bn=/(=)\?(?=&|$)|\?\?/;fe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=vn.pop()||fe.expando+"_"+Xt++;return this[e]=!0,e}}),fe.ajaxPrefilter("json jsonp",function(e,t,n){var i,r,a,s=!1!==e.jsonp&&(bn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&bn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=fe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(bn,"$1"+i):!1!==e.jsonp&&(e.url+=(Yt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||fe.error(i+" was not called"),a[0]},e.dataTypes[0]="json",r=w[i],w[i]=function(){a=arguments},n.always(function(){r===undefined?fe(w).removeProp(i):w[i]=r,e[i]&&(e.jsonpCallback=t.jsonpCallback,vn.push(i)),a&&fe.isFunction(r)&&r(a[0]),a=r=undefined}),"script"}),fe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||ie;var i=Se.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=m([e],t,r),r&&r.length&&fe(r).remove(),fe.merge([],i.childNodes))};var _n=fe.fn.load;fe.fn.load=function(e,t,n){if("string"!=typeof e&&_n)return _n.apply(this,arguments);var i,r,a,s=this,o=e.indexOf(" ");return-1<o&&(i=fe.trim(e.slice(o,e.length)),e=e.slice(0,o)),fe.isFunction(t)?(n=t,t=undefined):t&&"object"==typeof t&&(r="POST"),0<s.length&&fe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){a=arguments,s.html(i?fe("<div>").append(fe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,a||[e.responseText,t,e])})}),this},fe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){fe.fn[t]=function(e){return this.on(t,e)}}),fe.expr.filters.animated=function(t){return fe.grep(fe.timers,function(e){return t===e.elem}).length},fe.offset={setOffset:function(e,t,n){var i,r,a,s,o,u,l=fe.css(e,"position"),c=fe(e),d={};"static"===l&&(e.style.position="relative"),o=c.offset(),a=fe.css(e,"top"),u=fe.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<fe.inArray("auto",[a,u])?(s=(i=c.position()).top,r=i.left):(s=parseFloat(a)||0,r=parseFloat(u)||0),fe.isFunction(t)&&(t=t.call(e,n,fe.extend({},o))),null!=t.top&&(d.top=t.top-o.top+s),null!=t.left&&(d.left=t.left-o.left+r),"using"in t?t.using.call(e,d):c.css(d)}},fe.fn.extend({offset:function(t){if(arguments.length)return t===undefined?this:this.each(function(e){fe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=this[0],a=r&&r.ownerDocument;return a?(e=a.documentElement,fe.contains(e,r)?("undefined"!=typeof r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=te(a),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===fe.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),fe.nodeName(e[0],"html")||(n=e.offset()),n.top+=fe.css(e[0],"borderTopWidth",!0),n.left+=fe.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-fe.css(i,"marginTop",!0),left:t.left-n.left-fe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!fe.nodeName(e,"html")&&"static"===fe.css(e,"position");)e=e.offsetParent;return e||mt})}}),fe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var a=/Y/.test(r);fe.fn[t]=function(e){return He(this,function(e,t,n){var i=te(e);if(n===undefined)return i?r in i?i[r]:i.document.documentElement[t]:e[t];i?i.scrollTo(a?fe(i).scrollLeft():n,a?n:fe(i).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),fe.each(["top","left"],function(e,n){fe.cssHooks[n]=I(de.pixelPosition,function(e,t){if(t)return t=yt(e,n),ft.test(t)?fe(e).position()[n]+"px":t})}),fe.each({Height:"height",Width:"width"},function(a,s){fe.each({padding:"inner"+a,content:s,"":"outer"+a},function(i,e){fe.fn[e]=function(e,t){var n=arguments.length&&(i||"boolean"!=typeof e),r=i||(!0===e||!0===t?"margin":"border");return He(this,function(e,t,n){var i;return fe.isWindow(e)?e.document.documentElement["client"+a]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+a],i["scroll"+a],e.body["offset"+a],i["offset"+a],i["client"+a])):n===undefined?fe.css(e,t,r):fe.style(e,t,n,r)},s,n?e:undefined,n,null)}})}),fe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),fe.fn.size=function(){return this.length},fe.fn.andSelf=fe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return fe});var Tn=w.jQuery,Sn=w.$;return fe.noConflict=function(e){return w.$===fe&&(w.$=Sn),e&&w.jQuery===fe&&(w.jQuery=Tn),fe},e||(w.jQuery=w.$=fe),fe}),function(c,u){"use strict";var l;c.rails!==u&&c.error("jquery-ujs has already been loaded!");var e=c(document);c.rails=l={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)",
inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]), textarea[name][required]:not([disabled])",fileInputSelector:"input[name][type=file]:not([disabled])",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",csrfToken:function(){return c("meta[name=csrf-token]").attr("content")},csrfParam:function(){return c("meta[name=csrf-param]").attr("content")},CSRFProtection:function(e){var t=l.csrfToken();t&&e.setRequestHeader("X-CSRF-Token",t)},refreshCSRFTokens:function(){c('form input[name="'+l.csrfParam()+'"]').val(l.csrfToken())},fire:function(e,t,n){var i=c.Event(t);return e.trigger(i,n),!1!==i.result},confirm:function(e){return confirm(e)},ajax:function(e){return c.ajax(e)},href:function(e){return e[0].href},isRemote:function(e){return e.data("remote")!==u&&!1!==e.data("remote")},handleRemote:function(i){var e,t,n,r,a,s;if(l.fire(i,"ajax:before")){if(r=i.data("with-credentials")||null,a=i.data("type")||c.ajaxSettings&&c.ajaxSettings.dataType,i.is("form")){e=i.data("ujs:submit-button-formmethod")||i.attr("method"),t=i.data("ujs:submit-button-formaction")||i.attr("action"),n=c(i[0]).serializeArray();var o=i.data("ujs:submit-button");o&&(n.push(o),i.data("ujs:submit-button",null)),i.data("ujs:submit-button-formmethod",null),i.data("ujs:submit-button-formaction",null)}else i.is(l.inputChangeSelector)?(e=i.data("method"),t=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(l.buttonClickSelector)?(e=i.data("method")||"get",t=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(e=i.data("method"),t=l.href(i),n=i.data("params")||null);return s={type:e||"GET",data:n,dataType:a,beforeSend:function(e,t){if(t.dataType===u&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),!l.fire(i,"ajax:beforeSend",[e,t]))return!1;i.trigger("ajax:send",e)},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:l.isCrossDomain(t)},r&&(s.xhrFields={withCredentials:r}),t&&(s.url=t),l.ajax(s)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!((!n.protocol||":"===n.protocol)&&!n.host||t.protocol+"//"+t.host==n.protocol+"//"+n.host)}catch(i){return!0}},handleMethod:function(e){var t=l.href(e),n=e.data("method"),i=e.attr("target"),r=l.csrfToken(),a=l.csrfParam(),s=c('<form method="post" action="'+t+'"></form>'),o='<input name="_method" value="'+n+'" type="hidden" />';a===u||r===u||l.isCrossDomain(t)||(o+='<input name="'+a+'" value="'+r+'" type="hidden" />'),i&&s.attr("target",i),s.hide().append(o).appendTo("body"),s.submit()},formElements:function(e,t){return e.is("form")?c(e[0].elements).filter(t):e.find(t)},disableFormElements:function(e){l.formElements(e,l.disableSelector).each(function(){l.disableFormElement(c(this))})},disableFormElement:function(e){var t,n;t=e.is("button")?"html":"val",(n=e.data("disable-with"))!==u&&(e.data("ujs:enable-with",e[t]()),e[t](n)),e.prop("disabled",!0),e.data("ujs:disabled",!0)},enableFormElements:function(e){l.formElements(e,l.enableSelector).each(function(){l.enableFormElement(c(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")!==u&&(e[t](e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.prop("disabled",!1),e.removeData("ujs:disabled")},allowAction:function(e){var t,n=e.data("confirm"),i=!1;if(!n)return!0;if(l.fire(e,"confirm")){try{i=l.confirm(n)}catch(r){(console.error||console.log).call(console,r.stack||r)}t=l.fire(e,"confirm:complete",[i])}return i&&t},blankInputs:function(e,t,n){var i,r,a,s=c(),o=t||"input,textarea",u=e.find(o),l={};return u.each(function(){(i=c(this)).is("input[type=radio]")?(a=i.attr("name"),l[a]||(0===e.find('input[type=radio]:checked[name="'+a+'"]').length&&(r=e.find('input[type=radio][name="'+a+'"]'),s=s.add(r)),l[a]=a)):(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):!!i.val())===n&&(s=s.add(i))}),!!s.length&&s},nonBlankInputs:function(e,t){return l.blankInputs(e,t,!0)},stopEverything:function(e){return c(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(e){var t=e.data("disable-with");t!==u&&(e.data("ujs:enable-with",e.html()),e.html(t)),e.bind("click.railsDisable",function(e){return l.stopEverything(e)}),e.data("ujs:disabled",!0)},enableElement:function(e){e.data("ujs:enable-with")!==u&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable"),e.removeData("ujs:disabled")}},l.fire(e,"rails:attachBindings")&&(c.ajaxPrefilter(function(e,t,n){e.crossDomain||l.CSRFProtection(n)}),c(window).on("pageshow.rails",function(){c(c.rails.enableSelector).each(function(){var e=c(this);e.data("ujs:disabled")&&c.rails.enableFormElement(e)}),c(c.rails.linkDisableSelector).each(function(){var e=c(this);e.data("ujs:disabled")&&c.rails.enableElement(e)})}),e.on("ajax:complete",l.linkDisableSelector,function(){l.enableElement(c(this))}),e.on("ajax:complete",l.buttonDisableSelector,function(){l.enableFormElement(c(this))}),e.on("click.rails",l.linkClickSelector,function(e){var t=c(this),n=t.data("method"),i=t.data("params"),r=e.metaKey||e.ctrlKey;if(!l.allowAction(t))return l.stopEverything(e);if(!r&&t.is(l.linkDisableSelector)&&l.disableElement(t),l.isRemote(t)){if(r&&(!n||"GET"===n)&&!i)return!0;var a=l.handleRemote(t);return!1===a?l.enableElement(t):a.fail(function(){l.enableElement(t)}),!1}return n?(l.handleMethod(t),!1):void 0}),e.on("click.rails",l.buttonClickSelector,function(e){var t=c(this);if(!l.allowAction(t)||!l.isRemote(t))return l.stopEverything(e);t.is(l.buttonDisableSelector)&&l.disableFormElement(t);var n=l.handleRemote(t);return!1===n?l.enableFormElement(t):n.fail(function(){l.enableFormElement(t)}),!1}),e.on("change.rails",l.inputChangeSelector,function(e){var t=c(this);return l.allowAction(t)&&l.isRemote(t)?(l.handleRemote(t),!1):l.stopEverything(e)}),e.on("submit.rails",l.formSubmitSelector,function(e){var t,n,i=c(this),r=l.isRemote(i);if(!l.allowAction(i))return l.stopEverything(e);if(i.attr("novalidate")===u)if(i.data("ujs:formnovalidate-button")===u){if((t=l.blankInputs(i,l.requiredInputSelector,!1))&&l.fire(i,"ajax:aborted:required",[t]))return l.stopEverything(e)}else i.data("ujs:formnovalidate-button",u);if(r){if(n=l.nonBlankInputs(i,l.fileInputSelector)){setTimeout(function(){l.disableFormElements(i)},13);var a=l.fire(i,"ajax:aborted:file",[n]);return a||setTimeout(function(){l.enableFormElements(i)},13),a}return l.handleRemote(i),!1}setTimeout(function(){l.disableFormElements(i)},13)}),e.on("click.rails",l.formInputClickSelector,function(e){var t=c(this);if(!l.allowAction(t))return l.stopEverything(e);var n=t.attr("name"),i=n?{name:n,value:t.val()}:null,r=t.closest("form");0===r.length&&(r=c("#"+t.attr("form"))),r.data("ujs:submit-button",i),r.data("ujs:formnovalidate-button",t.attr("formnovalidate")),r.data("ujs:submit-button-formaction",t.attr("formaction")),r.data("ujs:submit-button-formmethod",t.attr("formmethod"))}),e.on("ajax:send.rails",l.formSubmitSelector,function(e){this===e.target&&l.disableFormElements(c(this))}),e.on("ajax:complete.rails",l.formSubmitSelector,function(e){this===e.target&&l.enableFormElements(c(this))}),c(function(){l.refreshCSRFTokens()}))}(jQuery),function(){var e=this;(function(){(function(){this.Turbolinks={supported:null!=window.history.pushState&&null!=window.requestAnimationFrame&&null!=window.addEventListener,visit:function(e,t){return c.controller.visit(e,t)},clearCache:function(){return c.controller.clearCache()},setProgressBarDelay:function(e){return c.controller.setProgressBarDelay(e)}}}).call(this)}).call(e);var c=e.Turbolinks;(function(){(function(){var n,i,u,e,t,r,a,s,o,l=[].slice;c.copyObject=function(e){var t,n,i;for(t in n={},e)i=e[t],n[t]=i;return n},c.closest=function(e,t){return n.call(e,t)},n=null!=(o=document.documentElement.closest)?o:function(e){var t;for(t=this;t;){if(t.nodeType===Node.ELEMENT_NODE&&i.call(t,e))return t;t=t.parentNode}},c.defer=function(e){return setTimeout(e,1)},c.throttle=function(n){var i;return i=null,function(){var e,t;return e=1<=arguments.length?l.call(arguments,0):[],null!=i?i:i=requestAnimationFrame((t=this,function(){return i=null,n.apply(t,e)}))}},c.dispatch=function(e,t){var n,i,r,a,s,o;return o=(s=null!=t?t:{}).target,n=s.cancelable,i=s.data,(r=document.createEvent("Events")).initEvent(e,!0,!0===n),r.data=null!=i?i:{},r.cancelable&&!u&&(a=r.preventDefault,r.preventDefault=function(){return this.defaultPrevented||Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}}),a.call(this)}),(null!=o?o:document).dispatchEvent(r),r},(s=document.createEvent("Events")).initEvent("test",!0,!0),s.preventDefault(),u=s.defaultPrevented,c.match=function(e,t){return i.call(e,t)},i=null!=(t=null!=(r=null!=(a=(e=document.documentElement).matchesSelector)?a:e.webkitMatchesSelector)?r:e.msMatchesSelector)?t:e.mozMatchesSelector,c.uuid=function(){var e,t,n;for(n="",e=t=1;t<=36;e=++t)n+=9===e||14===e||19===e||24===e?"-":15===e?"4":20===e?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16);return n}}).call(this),function(){c.Location=function(){function e(e){var t,n;null==e&&(e=""),(n=document.createElement("a")).href=e.toString(),this.absoluteURL=n.href,(t=n.hash.length)<2?this.requestURL=this.absoluteURL:(this.requestURL=this.absoluteURL.slice(0,-t),this.anchor=n.hash.slice(1))}var t,n,i,r;return e.wrap=function(e){return e instanceof this?e:new this(e)},e.prototype.getOrigin=function(){return this.absoluteURL.split("/",3).join("/")},e.prototype.getPath=function(){var e,t;return null!=(e=null!=(t=this.requestURL.match(/\/\/[^\/]*(\/[^?;]*)/))?t[1]:void 0)?e:"/"},e.prototype.getPathComponents=function(){return this.getPath().split("/").slice(1)},e.prototype.getLastPathComponent=function(){return this.getPathComponents().slice(-1)[0]},e.prototype.getExtension=function(){var e,t;return null!=(e=null!=(t=this.getLastPathComponent().match(/\.[^.]*$/))?t[0]:void 0)?e:""},e.prototype.isHTML=function(){return this.getExtension().match(/^(?:|\.(?:htm|html|xhtml))$/)},e.prototype.isPrefixedBy=function(e){var t;return t=n(e),this.isEqualTo(e)||r(this.absoluteURL,t)},e.prototype.isEqualTo=function(e){return this.absoluteURL===(null!=e?e.absoluteURL:void 0)},e.prototype.toCacheKey=function(){return this.requestURL},e.prototype.toJSON=function(){return this.absoluteURL},e.prototype.toString=function(){return this.absoluteURL},e.prototype.valueOf=function(){return this.absoluteURL},n=function(e){return t(e.getOrigin()+e.getPath())},t=function(e){return i(e,"/")?e:e+"/"},r=function(e,t){return e.slice(0,t.length)===t},i=function(e,t){return e.slice(-t.length)===t},e}()}.call(this),function(){var i=function(e,t){return function(){return e.apply(t,arguments)}};c.HttpRequest=function(){function e(e,t,n){this.delegate=e,this.requestCanceled=i(this.requestCanceled,this),this.requestTimedOut=i(this.requestTimedOut,this),this.requestFailed=i(this.requestFailed,this),this.requestLoaded=i(this.requestLoaded,this),this.requestProgressed=i(this.requestProgressed,this),this.url=c.Location.wrap(t).requestURL,this.referrer=c.Location.wrap(n).absoluteURL,this.createXHR()}return e.NETWORK_FAILURE=0,e.TIMEOUT_FAILURE=-1,e.timeout=60,e.prototype.send=function(){var e;return this.xhr&&!this.sent?(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(),this.sent=!0,"function"==typeof(e=this.delegate).requestStarted?e.requestStarted():void 0):void 0},e.prototype.cancel=function(){return this.xhr&&this.sent?this.xhr.abort():void 0},e.prototype.requestProgressed=function(e){return e.lengthComputable?this.setProgress(e.loaded/e.total):void 0},e.prototype.requestLoaded=function(){return this.endRequest((t=this,function(){var e;return 200<=(e=t.xhr.status)&&e<300?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}));var t},e.prototype.requestFailed=function(){return this.endRequest((e=this,function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.NETWORK_FAILURE)}));var e},e.prototype.requestTimedOut=function(){return this.endRequest((e=this,function(){return e.failed=!0,e.delegate.requestFailedWithStatusCode(e.constructor.TIMEOUT_FAILURE)}));var e},e.prototype.requestCanceled=function(){return this.endRequest()},e.prototype.notifyApplicationBeforeRequestStart=function(){return c.dispatch("turbolinks:request-start",{data:{url:this.url,xhr:this.xhr}})},e.prototype.notifyApplicationAfterRequestEnd=function(){return c.dispatch("turbolinks:request-end",{data:{url:this.url,xhr:this.xhr}})},e.prototype.createXHR=function(){return this.xhr=new XMLHttpRequest,this.xhr.open("GET",this.url,!0),this.xhr.timeout=1e3*this.constructor.timeout,this.xhr.setRequestHeader("Accept","text/html, application/xhtml+xml"),this.xhr.setRequestHeader("Turbolinks-Referrer",this.referrer),this.xhr.onprogress=this.requestProgressed,this.xhr.onload=this.requestLoaded,this.xhr.onerror=this.requestFailed,this.xhr.ontimeout=this.requestTimedOut,this.xhr.onabort=this.requestCanceled},e.prototype.endRequest=function(e){return this.xhr?(this.notifyApplicationAfterRequestEnd(),null!=e&&e.call(this),this.destroy()):void 0},e.prototype.setProgress=function(e){var t;return this.progress=e,"function"==typeof(t=this.delegate).requestProgressed?t.requestProgressed(this.progress):void 0},e.prototype.destroy=function(){var e;return this.setProgress(1),"function"==typeof(e=this.delegate).requestFinished&&e.requestFinished(),this.delegate=null,this.xhr=null},e}()}.call(this),function(){var n=function(e,t){return function(){return e.apply(t,arguments)}};c.ProgressBar=function(){function e(){this.trickle=n(this.trickle,this),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement()}var t;return t=300,e.defaultCSS=".turbolinks-progress-bar {\n  position: fixed;\n  display: block;\n  top: 0;\n  left: 0;\n  height: 3px;\n  background: #0076ff;\n  z-index: 9999;\n  transition: width "+t+"ms ease-out, opacity "+t/2+"ms "+t/2+"ms ease-in;\n  transform: translate3d(0, 0, 0);\n}",e.prototype.show=function(){return this.visible?void 0:(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())},e.prototype.hide=function(){return this.visible&&!this.hiding?(this.hiding=!0,this.fadeProgressElement((e=this,function(){return e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}))):void 0;var e},e.prototype.setValue=function(e){return this.value=e,this.refresh()},e.prototype.installStylesheetElement=function(){return document.head.insertBefore(this.stylesheetElement,document.head.firstChild)},e.prototype.installProgressElement=function(){return this.progressElement.style.width=0,this.progressElement.style.opacity=1,document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()},e.prototype.fadeProgressElement=function(e){return this.progressElement.style.opacity=0,setTimeout(e,1.5*t)},e.prototype.uninstallProgressElement=function(){return this.progressElement.parentNode?document.documentElement.removeChild(this.progressElement):void 0},e.prototype.startTrickling=function(){return null!=this.trickleInterval?this.trickleInterval:this.trickleInterval=setInterval(this.trickle,t)},e.prototype.stopTrickling=function(){return clearInterval(this.trickleInterval),this.trickleInterval=null},e.prototype.trickle=function(){return this.setValue(this.value+Math.random()/100)},e.prototype.refresh=function(){return requestAnimationFrame((e=this,function(){return e.progressElement.style.width=10+90*e.value+"%"}));var e},e.prototype.createStylesheetElement=function(){var e;return(e=document.createElement("style")).type="text/css",e.textContent=this.constructor.defaultCSS,e},e.prototype.createProgressElement=function(){var e;return(e=document.createElement("div")).className="turbolinks-progress-bar",e},e}()}.call(this),function(){var r=function(e,t){return function(){return e.apply(t,arguments)}};c.BrowserAdapter=function(){function e(e){this.controller=e,this.showProgressBar=r(this.showProgressBar,this),this.progressBar=new c.ProgressBar}var n,i,t;return t=c.HttpRequest,n=t.NETWORK_FAILURE,i=t.TIMEOUT_FAILURE,e.prototype.visitProposedToLocationWithAction=function(e,t){return this.controller.startVisitToLocationWithAction(e,t)},e.prototype.visitStarted=function(e){return e.issueRequest(),e.changeHistory(),e.loadCachedSnapshot()},e.prototype.visitRequestStarted=function(e){return this.progressBar.setValue(0),e.hasCachedSnapshot()||"restore"!==e.action?this.showProgressBarAfterDelay():this.showProgressBar()},e.prototype.visitRequestProgressed=function(e){return this.progressBar.setValue(e.progress)},e.prototype.visitRequestCompleted=function(e){return e.loadResponse()},e.prototype.visitRequestFailedWithStatusCode=function(e,t){switch(t){case n:case i:return this.reload();default:return e.loadResponse()}},e.prototype.visitRequestFinished=function(){return this.hideProgressBar()},e.prototype.visitCompleted=function(e){return e.followRedirect()},e.prototype.pageInvalidated=function(){return this.reload()},e.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=setTimeout(this.showProgressBar,this.controller.progressBarDelay)},e.prototype.showProgressBar=function(){return this.progressBar.show()},e.prototype.hideProgressBar=function(){return this.progressBar.hide(),clearTimeout(this.progressBarTimeout)},e.prototype.reload=function(){return window.location.reload()},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};c.History=function(){function e(e){this.delegate=e,this.onPageLoad=t(this.onPageLoad,this),this.onPopState=t(this.onPopState,this)}return e.prototype.start=function(){return this.started?void 0:(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0)},e.prototype.stop=function(){return this.started?(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1):void 0},e.prototype.push=function(e,t){return e=c.Location.wrap(e),this.update("push",e,t)},e.prototype.replace=function(e,t){return e=c.Location.wrap(e),this.update("replace",e,t)},e.prototype.onPopState=function(e){var t,n,i,r;return this.shouldHandlePopState()&&(r=null!=(n=e.state)?n.turbolinks:void 0)?(t=c.Location.wrap(window.location),i=r.restorationIdentifier,this.delegate.historyPoppedToLocationWithRestorationIdentifier(t,i)):void 0},e.prototype.onPageLoad=function(){return c.defer((e=this,function(){return e.pageLoaded=!0}));var e},e.prototype.shouldHandlePopState=function(){return this.pageIsLoaded()},e.prototype.pageIsLoaded=function(){return this.pageLoaded||"complete"===document.readyState},e.prototype.update=function(e,t,n){var i;return i={turbolinks:{restorationIdentifier:n}},history[e+"State"](i,null,t)},e}()}.call(this),function(){c.HeadDetails=function(){function e(e){var t,n,i,r,a;for(this.elements={},n=0,r=e.length;n<r;n++)(a=e[n]).nodeType===Node.ELEMENT_NODE&&(i=a.outerHTML,(null!=(t=this.elements)[i]?t[i]:t[i]={type:o(a),tracked:s(a),elements:[]}).elements.push(a))}var a,t,n,s,o;return e.fromHeadElement=function(e){var t;return new this(null!=(t=null!=e?e.childNodes:void 0)?t:[])},e.prototype.hasElementWithKey=function(e){return e in this.elements},e.prototype.getTrackedElementSignature=function(){var n;return function(){var e,t;for(n in t=[],e=this.elements)e[n].tracked&&t.push(n);return t}.call(this).join("")},e.prototype.getScriptElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("script",e)},e.prototype.getStylesheetElementsNotInDetails=function(e){return this.getElementsMatchingTypeNotInDetails("stylesheet",e)},e.prototype.getElementsMatchingTypeNotInDetails=function(e,t){var n,i,r,a,s,o;for(i in s=[],r=this.elements)o=(a=r[i]).type,n=a.elements,o!==e||t.hasElementWithKey(i)||s.push(n[0]);return s},e.prototype.getProvisionalElements=function(){var e,t,n,i,r,a,s;for(t in n=[],i=this.elements)s=(r=i[t]).type,a=r.tracked,e=r.elements,null!=s||a?1<e.length&&n.push.apply(n,e.slice(1)):n.push.apply(n,e);return n},e.prototype.getMetaValue=function(e){var t;return null!=(t=this.findMetaElementByName(e))?t.getAttribute("content"):void 0},e.prototype.findMetaElementByName=function(e){var t,n,i,r;for(i in t=void 0,r=this.elements)n=r[i].elements,a(n[0],e)&&(t=n[0]);return t},o=function(e){return t(e)?"script":n(e)?"stylesheet":void 0},s=function(e){return"reload"===e.getAttribute("data-turbolinks-track")},t=function(e){return"script"===e.tagName.toLowerCase()},n=function(e){var t;return"style"===(t=e.tagName.toLowerCase())||"link"===t&&"stylesheet"===e.getAttribute("rel")},a=function(e,t){return"meta"===e.tagName.toLowerCase()&&e.getAttribute("name")===t},e}()}.call(this),function(){c.Snapshot=function(){function e(e,t){this.headDetails=e,this.bodyElement=t}return e.wrap=function(e){return e instanceof this?e:"string"==typeof e?this.fromHTMLString(e):this.fromHTMLElement(e)},e.fromHTMLString=function(e){var t;return(t=document.createElement("html")).innerHTML=e,this.fromHTMLElement(t)},e.fromHTMLElement=function(e){var t,n,i;return n=e.querySelector("head"),t=null!=(i=e.querySelector("body"))?i:document.createElement("body"),new this(c.HeadDetails.fromHeadElement(n),t)},e.prototype.clone=function(){return new this.constructor(this.headDetails,this.bodyElement.cloneNode(!0))},e.prototype.getRootLocation=function(){var e,t;return t=null!=(e=this.getSetting("root"))?e:"/",new c.Location(t)},e.prototype.getCacheControlValue=function(){return this.getSetting("cache-control")},e.prototype.getElementForAnchor=function(e){try{return this.bodyElement.querySelector("[id='"+e+"'], a[name='"+e+"']")}catch(c){}},e.prototype.getPermanentElements=function(){return this.bodyElement.querySelectorAll("[id][data-turbolinks-permanent]")},e.prototype.getPermanentElementById=function(e){return this.bodyElement.querySelector("#"+e+"[data-turbolinks-permanent]")},e.prototype.getPermanentElementsPresentInSnapshot=function(e){var t,n,i,r,a;for(a=[],n=0,i=(r=this.getPermanentElements()).length;n<i;n++)t=r[n],e.getPermanentElementById(t.id)&&a.push(t);return a},e.prototype.findFirstAutofocusableElement=function(){return this.bodyElement.querySelector("[autofocus]")},e.prototype.hasAnchor=function(e){return null!=this.getElementForAnchor(e)},e.prototype.isPreviewable=function(){return"no-preview"!==this.getCacheControlValue()},e.prototype.isCacheable=function(){return"no-cache"!==this.getCacheControlValue()},e.prototype.isVisitable=function(){return"reload"!==this.getSetting("visit-control")},e.prototype.getSetting=function(e){return this.headDetails.getMetaValue("turbolinks-"+e)},e}()}.call(this),function(){var a=[].slice;c.Renderer=function(){function e(){}var n;return e.render=function(e,t){var n,i,r;return i=e,n=t,(r=function(e,t,n){n.prototype=e.prototype;var i=new n,r=e.apply(i,t);return Object(r)===r?r:i}(this,3<=arguments.length?a.call(arguments,2):[],function(){})).delegate=i,r.render(n),r},e.prototype.renderView=function(e){return this.delegate.viewWillRender(this.newBody),e(),this.delegate.viewRendered(this.newBody)},e.prototype.invalidateView=function(){return this.delegate.viewInvalidated()},e.prototype.createScriptElement=function(e){var t;return"false"===e.getAttribute("data-turbolinks-eval")?e:((t=document.createElement("script")).textContent=e.textContent,t.async=!1,n(t,e),t)},n=function(e,t){var n,i,r,a,s,o,u;for(o=[],n=0,i=(a=t.attributes).length;n<i;n++)r=(s=a[n]).name,u=s.value,o.push(e.setAttribute(r,u));return o},e}()}.call(this),function(){var o,u,n=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;c.SnapshotRenderer=function(e){function t(e,t,n){this.currentSnapshot=e,this.newSnapshot=t,this.isPreview=n,this.currentHeadDetails=this.currentSnapshot.headDetails,this.newHeadDetails=this.newSnapshot.headDetails,this.currentBody=this.currentSnapshot.bodyElement,this.newBody=this.newSnapshot.bodyElement}return n(t,e),t.prototype.render=function(e){return this.shouldRender()?(this.mergeHead(),this.renderView((t=this,function(){return t.replaceBody(),t.isPreview||t.focusFirstAutofocusableElement(),e()}))):this.invalidateView();var t},t.prototype.mergeHead=function(){return this.copyNewHeadStylesheetElements(),this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements()},t.prototype.replaceBody=function(){var e;return e=this.relocateCurrentBodyPermanentElements(),this.activateNewBodyScriptElements(),this.assignNewBody(),this.replacePlaceholderElementsWithClonedPermanentElements(e)},t.prototype.shouldRender=function(){return this.newSnapshot.isVisitable()&&this.trackedElementsAreIdentical()},t.prototype.trackedElementsAreIdentical=function(){return this.currentHeadDetails.getTrackedElementSignature()===this.newHeadDetails.getTrackedElementSignature()},t.prototype.copyNewHeadStylesheetElements=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.getNewHeadStylesheetElements()).length;t<n;t++)e=i[t],r.push(document.head.appendChild(e));return r},t.prototype.copyNewHeadScriptElements=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.getNewHeadScriptElements()).length;t<n;t++)e=i[t],r.push(document.head.appendChild(this.createScriptElement(e)));return r},t.prototype.removeCurrentHeadProvisionalElements=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.getCurrentHeadProvisionalElements()).length;t<n;t++)e=i[t],r.push(document.head.removeChild(e));return r},t.prototype.copyNewHeadProvisionalElements=function(){var e,t,n,i,r;for(r=[],t=0,n=(i=this.getNewHeadProvisionalElements()).length;t<n;t++)e=i[t],r.push(document.head.appendChild(e));return r},t.prototype.relocateCurrentBodyPermanentElements=function(){var e,t,n,i,r,a,s;for(s=[],e=0,t=(a=this.getCurrentBodyPermanentElements()).length;e<t;e++)i=a[e],r=o(i),n=this.newSnapshot.getPermanentElementById(i.id),u(i,r.element),u(n,i),s.push(r);return s},t.prototype.replacePlaceholderElementsWithClonedPermanentElements=function(e){var t,n,i,r,a,s;for(s=[],i=0,r=e.length;i<r;i++)n=(a=e[i]).element,t=a.permanentElement.cloneNode(!0),s.push(u(n,t));return s},t.prototype.activateNewBodyScriptElements=function(){var e,t,n,i,r,a;for(a=[],t=0,i=(r=this.getNewBodyScriptElements()).length;t<i;t++)n=r[t],e=this.createScriptElement(n),a.push(u(n,e));return a},t.prototype.assignNewBody=function(){return document.body=this.newBody},t.prototype.focusFirstAutofocusableElement=function(){var e;return null!=(e=this.newSnapshot.findFirstAutofocusableElement())?e.focus():void 0},t.prototype.getNewHeadStylesheetElements=function(){return this.newHeadDetails.getStylesheetElementsNotInDetails(this.currentHeadDetails)},t.prototype.getNewHeadScriptElements=function(){return this.newHeadDetails.getScriptElementsNotInDetails(this.currentHeadDetails)},t.prototype.getCurrentHeadProvisionalElements=function(){return this.currentHeadDetails.getProvisionalElements()},t.prototype.getNewHeadProvisionalElements=function(){return this.newHeadDetails.getProvisionalElements()},t.prototype.getCurrentBodyPermanentElements=function(){return this.currentSnapshot.getPermanentElementsPresentInSnapshot(this.newSnapshot)},t.prototype.getNewBodyScriptElements=function(){return this.newBody.querySelectorAll("script")},t}(c.Renderer),o=function(e){var t;return(t=document.createElement("meta")).setAttribute("name","turbolinks-permanent-placeholder"),t.setAttribute("content",e.id),{element:t,permanentElement:e}},u=function(e,t){var n;return(n=e.parentNode)?n.replaceChild(t,e):void 0}}.call(this),function(){var n=function(e,t){function n(){this.constructor=e}for(var i in t)r.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},r={}.hasOwnProperty;c.ErrorRenderer=function(e){function t(e){var t;(t=document.createElement("html")).innerHTML=e,this.newHead=t.querySelector("head"),this.newBody=t.querySelector("body")}return n(t,e),t.prototype.render=function(e){return this.renderView((t=this,function(){return t.replaceHeadAndBody(),t.activateBodyScriptElements(),e()}));var t},t.prototype.replaceHeadAndBody=function(){var e,t;return t=document.head,e=document.body,t.parentNode.replaceChild(this.newHead,t),e.parentNode.replaceChild(this.newBody,e)},t.prototype.activateBodyScriptElements=function(){var e,t,n,i,r,a;for(a=[],t=0,n=(i=this.getScriptElements()).length;t<n;t++)r=i[t],e=this.createScriptElement(r),a.push(r.parentNode.replaceChild(e,r));return a},t.prototype.getScriptElements=function(){return document.documentElement.querySelectorAll("script")},t}(c.Renderer)}.call(this),function(){c.View=function(){function e(e){this.delegate=e,this.htmlElement=document.documentElement}return e.prototype.getRootLocation=function(){return this.getSnapshot().getRootLocation()},e.prototype.getElementForAnchor=function(e){return this.getSnapshot().getElementForAnchor(e)},e.prototype.getSnapshot=function(){return c.Snapshot.fromHTMLElement(this.htmlElement)},e.prototype.render=function(e,t){var n,i,r;return r=e.snapshot,n=e.error,i=e.isPreview,this.markAsPreview(i),null!=r?this.renderSnapshot(r,i,t):this.renderError(n,t)},e.prototype.markAsPreview=function(e){return e?this.htmlElement.setAttribute("data-turbolinks-preview",""):this.htmlElement.removeAttribute("data-turbolinks-preview")},e.prototype.renderSnapshot=function(e,t,n){return c.SnapshotRenderer.render(this.delegate,n,this.getSnapshot(),c.Snapshot.wrap(e),t)},e.prototype.renderError=function(e,t){return c.ErrorRenderer.render(this.delegate,t,e)},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};c.ScrollManager=function(){function e(e){this.delegate=e,this.onScroll=t(this.onScroll,this),this.onScroll=c.throttle(this.onScroll)}return e.prototype.start=function(){return this.started?void 0:(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)},e.prototype.stop=function(){return this.started?(removeEventListener("scroll",this.onScroll,!1),this.started=!1):void 0},e.prototype.scrollToElement=function(e){return e.scrollIntoView()},e.prototype.scrollToPosition=function(e){var t,n;return t=e.x,n=e.y,window.scrollTo(t,n)},e.prototype.onScroll=function(){return this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},e.prototype.updatePosition=function(e){var t;return this.position=e,null!=(t=this.delegate)?t.scrollPositionChanged(this.position):void 0},e}()}.call(this),function(){c.SnapshotCache=function(){function e(e){this.size=e,this.keys=[],this.snapshots={}}var i;return e.prototype.has=function(e){return i(e)in this.snapshots},e.prototype.get=function(e){var t;if(this.has(e))return t=this.read(e),this.touch(e),t},e.prototype.put=function(e,t){return this.write(e,t),this.touch(e),t},e.prototype.read=function(e){var t;return t=i(e),this.snapshots[t]},e.prototype.write=function(e,t){var n;return n=i(e),this.snapshots[n]=t},e.prototype.touch=function(e){var t,n;return n=i(e),-1<(t=this.keys.indexOf(n))&&this.keys.splice(t,1),this.keys.unshift(n),this.trim()},e.prototype.trim=function(){var e,t,n,i,r;for(r=[],e=0,n=(i=this.keys.splice(this.size)).length;e<n;e++)t=i[e],r.push(delete this.snapshots[t]);return r},i=function(e){return c.Location.wrap(e).toCacheKey()},e}()}.call(this),function(){var i=function(e,t){return function(){return e.apply(t,arguments)}};c.Visit=function(){
function e(e,t,n){this.controller=e,this.action=n,this.performScroll=i(this.performScroll,this),this.identifier=c.uuid(),this.location=c.Location.wrap(t),this.adapter=this.controller.adapter,this.state="initialized",this.timingMetrics={}}var n;return e.prototype.start=function(){return"initialized"===this.state?(this.recordTimingMetric("visitStart"),this.state="started",this.adapter.visitStarted(this)):void 0},e.prototype.cancel=function(){var e;return"started"===this.state?(null!=(e=this.request)&&e.cancel(),this.cancelRender(),this.state="canceled"):void 0},e.prototype.complete=function(){var e;return"started"===this.state?(this.recordTimingMetric("visitEnd"),this.state="completed","function"==typeof(e=this.adapter).visitCompleted&&e.visitCompleted(this),this.controller.visitCompleted(this)):void 0},e.prototype.fail=function(){var e;return"started"===this.state?(this.state="failed","function"==typeof(e=this.adapter).visitFailed?e.visitFailed(this):void 0):void 0},e.prototype.changeHistory=function(){var e,t;return this.historyChanged?void 0:(e=this.location.isEqualTo(this.referrer)?"replace":this.action,t=n(e),this.controller[t](this.location,this.restorationIdentifier),this.historyChanged=!0)},e.prototype.issueRequest=function(){return this.shouldIssueRequest()&&null==this.request?(this.progress=0,this.request=new c.HttpRequest(this,this.location,this.referrer),this.request.send()):void 0},e.prototype.getCachedSnapshot=function(){var e;return!(e=this.controller.getCachedSnapshotForLocation(this.location))||null!=this.location.anchor&&!e.hasAnchor(this.location.anchor)||"restore"!==this.action&&!e.isPreviewable()?void 0:e},e.prototype.hasCachedSnapshot=function(){return null!=this.getCachedSnapshot()},e.prototype.loadCachedSnapshot=function(){var t,n;return(n=this.getCachedSnapshot())?(t=this.shouldIssueRequest(),this.render(function(){var e;return this.cacheSnapshot(),this.controller.render({snapshot:n,isPreview:t},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),t?void 0:this.complete()})):void 0},e.prototype.loadResponse=function(){return null!=this.response?this.render(function(){var e,t;return this.cacheSnapshot(),this.request.failed?(this.controller.render({error:this.response},this.performScroll),"function"==typeof(e=this.adapter).visitRendered&&e.visitRendered(this),this.fail()):(this.controller.render({snapshot:this.response},this.performScroll),"function"==typeof(t=this.adapter).visitRendered&&t.visitRendered(this),this.complete())}):void 0},e.prototype.followRedirect=function(){return this.redirectedToLocation&&!this.followedRedirect?(this.location=this.redirectedToLocation,this.controller.replaceHistoryWithLocationAndRestorationIdentifier(this.redirectedToLocation,this.restorationIdentifier),this.followedRedirect=!0):void 0},e.prototype.requestStarted=function(){var e;return this.recordTimingMetric("requestStart"),"function"==typeof(e=this.adapter).visitRequestStarted?e.visitRequestStarted(this):void 0},e.prototype.requestProgressed=function(e){var t;return this.progress=e,"function"==typeof(t=this.adapter).visitRequestProgressed?t.visitRequestProgressed(this):void 0},e.prototype.requestCompletedWithResponse=function(e,t){return this.response=e,null!=t&&(this.redirectedToLocation=c.Location.wrap(t)),this.adapter.visitRequestCompleted(this)},e.prototype.requestFailedWithStatusCode=function(e,t){return this.response=t,this.adapter.visitRequestFailedWithStatusCode(this,e)},e.prototype.requestFinished=function(){var e;return this.recordTimingMetric("requestEnd"),"function"==typeof(e=this.adapter).visitRequestFinished?e.visitRequestFinished(this):void 0},e.prototype.performScroll=function(){return this.scrolled?void 0:("restore"===this.action?this.scrollToRestoredPosition()||this.scrollToTop():this.scrollToAnchor()||this.scrollToTop(),this.scrolled=!0)},e.prototype.scrollToRestoredPosition=function(){var e,t;return null!=(e=null!=(t=this.restorationData)?t.scrollPosition:void 0)?(this.controller.scrollToPosition(e),!0):void 0},e.prototype.scrollToAnchor=function(){return null!=this.location.anchor?(this.controller.scrollToAnchor(this.location.anchor),!0):void 0},e.prototype.scrollToTop=function(){return this.controller.scrollToPosition({x:0,y:0})},e.prototype.recordTimingMetric=function(e){var t;return null!=(t=this.timingMetrics)[e]?t[e]:t[e]=(new Date).getTime()},e.prototype.getTimingMetrics=function(){return c.copyObject(this.timingMetrics)},n=function(e){switch(e){case"replace":return"replaceHistoryWithLocationAndRestorationIdentifier";case"advance":case"restore":return"pushHistoryWithLocationAndRestorationIdentifier"}},e.prototype.shouldIssueRequest=function(){return"restore"!==this.action||!this.hasCachedSnapshot()},e.prototype.cacheSnapshot=function(){return this.snapshotCached?void 0:(this.controller.cacheSnapshot(),this.snapshotCached=!0)},e.prototype.render=function(e){return this.cancelRender(),this.frame=requestAnimationFrame((t=this,function(){return t.frame=null,e.call(t)}));var t},e.prototype.cancelRender=function(){return this.frame?cancelAnimationFrame(this.frame):void 0},e}()}.call(this),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};c.Controller=function(){function e(){this.clickBubbled=t(this.clickBubbled,this),this.clickCaptured=t(this.clickCaptured,this),this.pageLoaded=t(this.pageLoaded,this),this.history=new c.History(this),this.view=new c.View(this),this.scrollManager=new c.ScrollManager(this),this.restorationData={},this.clearCache(),this.setProgressBarDelay(500)}return e.prototype.start=function(){return c.supported&&!this.started?(addEventListener("click",this.clickCaptured,!0),addEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.start(),this.startHistory(),this.started=!0,this.enabled=!0):void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.stop=function(){return this.started?(removeEventListener("click",this.clickCaptured,!0),removeEventListener("DOMContentLoaded",this.pageLoaded,!1),this.scrollManager.stop(),this.stopHistory(),this.started=!1):void 0},e.prototype.clearCache=function(){return this.cache=new c.SnapshotCache(10)},e.prototype.visit=function(e,t){var n,i;return null==t&&(t={}),e=c.Location.wrap(e),this.applicationAllowsVisitingLocation(e)?this.locationIsVisitable(e)?(n=null!=(i=t.action)?i:"advance",this.adapter.visitProposedToLocationWithAction(e,n)):window.location=e:void 0},e.prototype.startVisitToLocationWithAction=function(e,t,n){var i;return c.supported?(i=this.getRestorationDataForIdentifier(n),this.startVisit(e,t,{restorationData:i})):window.location=e},e.prototype.setProgressBarDelay=function(e){return this.progressBarDelay=e},e.prototype.startHistory=function(){return this.location=c.Location.wrap(window.location),this.restorationIdentifier=c.uuid(),this.history.start(),this.history.replace(this.location,this.restorationIdentifier)},e.prototype.stopHistory=function(){return this.history.stop()},e.prototype.pushHistoryWithLocationAndRestorationIdentifier=function(e,t){return this.restorationIdentifier=t,this.location=c.Location.wrap(e),this.history.push(this.location,this.restorationIdentifier)},e.prototype.replaceHistoryWithLocationAndRestorationIdentifier=function(e,t){return this.restorationIdentifier=t,this.location=c.Location.wrap(e),this.history.replace(this.location,this.restorationIdentifier)},e.prototype.historyPoppedToLocationWithRestorationIdentifier=function(e,t){var n;return this.restorationIdentifier=t,this.enabled?(n=this.getRestorationDataForIdentifier(this.restorationIdentifier),this.startVisit(e,"restore",{restorationIdentifier:this.restorationIdentifier,restorationData:n,historyChanged:!0}),this.location=c.Location.wrap(e)):this.adapter.pageInvalidated()},e.prototype.getCachedSnapshotForLocation=function(e){var t;return null!=(t=this.cache.get(e))?t.clone():void 0},e.prototype.shouldCacheSnapshot=function(){return this.view.getSnapshot().isCacheable()},e.prototype.cacheSnapshot=function(){var e,t,n;return this.shouldCacheSnapshot()?(this.notifyApplicationBeforeCachingSnapshot(),t=this.view.getSnapshot(),e=this.lastRenderedLocation,c.defer((n=this,function(){return n.cache.put(e,t.clone())}))):void 0},e.prototype.scrollToAnchor=function(e){var t;return(t=this.view.getElementForAnchor(e))?this.scrollToElement(t):this.scrollToPosition({x:0,y:0})},e.prototype.scrollToElement=function(e){return this.scrollManager.scrollToElement(e)},e.prototype.scrollToPosition=function(e){return this.scrollManager.scrollToPosition(e)},e.prototype.scrollPositionChanged=function(e){return this.getCurrentRestorationData().scrollPosition=e},e.prototype.render=function(e,t){return this.view.render(e,t)},e.prototype.viewInvalidated=function(){return this.adapter.pageInvalidated()},e.prototype.viewWillRender=function(e){return this.notifyApplicationBeforeRender(e)},e.prototype.viewRendered=function(){return this.lastRenderedLocation=this.currentVisit.location,this.notifyApplicationAfterRender()},e.prototype.pageLoaded=function(){return this.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()},e.prototype.clickCaptured=function(){return removeEventListener("click",this.clickBubbled,!1),addEventListener("click",this.clickBubbled,!1)},e.prototype.clickBubbled=function(e){var t,n,i;return this.enabled&&this.clickEventIsSignificant(e)&&(n=this.getVisitableLinkForNode(e.target))&&(i=this.getVisitableLocationForLink(n))&&this.applicationAllowsFollowingLinkToLocation(n,i)?(e.preventDefault(),t=this.getActionForLink(n),this.visit(i,{action:t})):void 0},e.prototype.applicationAllowsFollowingLinkToLocation=function(e,t){return!this.notifyApplicationAfterClickingLinkToLocation(e,t).defaultPrevented},e.prototype.applicationAllowsVisitingLocation=function(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented},e.prototype.notifyApplicationAfterClickingLinkToLocation=function(e,t){return c.dispatch("turbolinks:click",{target:e,data:{url:t.absoluteURL},cancelable:!0})},e.prototype.notifyApplicationBeforeVisitingLocation=function(e){return c.dispatch("turbolinks:before-visit",{data:{url:e.absoluteURL},cancelable:!0})},e.prototype.notifyApplicationAfterVisitingLocation=function(e){return c.dispatch("turbolinks:visit",{data:{url:e.absoluteURL}})},e.prototype.notifyApplicationBeforeCachingSnapshot=function(){return c.dispatch("turbolinks:before-cache")},e.prototype.notifyApplicationBeforeRender=function(e){return c.dispatch("turbolinks:before-render",{data:{newBody:e}})},e.prototype.notifyApplicationAfterRender=function(){return c.dispatch("turbolinks:render")},e.prototype.notifyApplicationAfterPageLoad=function(e){return null==e&&(e={}),c.dispatch("turbolinks:load",{data:{url:this.location.absoluteURL,timing:e}})},e.prototype.startVisit=function(e,t,n){var i;return null!=(i=this.currentVisit)&&i.cancel(),this.currentVisit=this.createVisit(e,t,n),this.currentVisit.start(),this.notifyApplicationAfterVisitingLocation(e)},e.prototype.createVisit=function(e,t,n){var i,r,a,s,o;return s=(r=null!=n?n:{}).restorationIdentifier,a=r.restorationData,i=r.historyChanged,(o=new c.Visit(this,e,t)).restorationIdentifier=null!=s?s:c.uuid(),o.restorationData=c.copyObject(a),o.historyChanged=i,o.referrer=this.location,o},e.prototype.visitCompleted=function(e){return this.notifyApplicationAfterPageLoad(e.getTimingMetrics())},e.prototype.clickEventIsSignificant=function(e){return!(e.defaultPrevented||e.target.isContentEditable||1<e.which||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)},e.prototype.getVisitableLinkForNode=function(e){return this.nodeIsVisitable(e)?c.closest(e,"a[href]:not([target]):not([download])"):void 0},e.prototype.getVisitableLocationForLink=function(e){var t;return t=new c.Location(e.getAttribute("href")),this.locationIsVisitable(t)?t:void 0},e.prototype.getActionForLink=function(e){var t;return null!=(t=e.getAttribute("data-turbolinks-action"))?t:"advance"},e.prototype.nodeIsVisitable=function(e){var t;return!(t=c.closest(e,"[data-turbolinks]"))||"false"!==t.getAttribute("data-turbolinks")},e.prototype.locationIsVisitable=function(e){return e.isPrefixedBy(this.view.getRootLocation())&&e.isHTML()},e.prototype.getCurrentRestorationData=function(){return this.getRestorationDataForIdentifier(this.restorationIdentifier)},e.prototype.getRestorationDataForIdentifier=function(e){var t;return null!=(t=this.restorationData)[e]?t[e]:t[e]={}},e}()}.call(this),function(){!function(){var e,t;if((e=t=document.currentScript)&&!t.hasAttribute("data-turbolinks-suppress-warning"))for(;e=e.parentNode;)if(e===document.body)return console.warn("You are loading Turbolinks from a <script> element inside the <body> element. This is probably not what you meant to do!\n\nLoad your application\u2019s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.\n\nFor more information, see: https://github.com/turbolinks/turbolinks#working-with-script-elements\n\n\u2014\u2014\nSuppress this warning by adding a `data-turbolinks-suppress-warning` attribute to: %s",t.outerHTML)}()}.call(this),function(){var e,t,n;c.start=function(){return t()?(null==c.controller&&(c.controller=e()),c.controller.start()):void 0},t=function(){return null==window.Turbolinks&&(window.Turbolinks=c),n()},e=function(){var e;return(e=new c.Controller).adapter=new c.BrowserAdapter(e),e},(n=function(){return window.Turbolinks===c})()&&c.start()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=c:"function"==typeof define&&define.amd&&define(c)}.call(this),void 0===jQuery)&&(jQuery="function"==typeof require?$=require("jquery"):$);!function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&"object"==typeof module.exports?exports=t(require("jquery")):t(jQuery)}(function(t){function n(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}t.easing.jswing=t.easing.swing;var i=Math.pow,r=Math.sqrt,a=Math.sin,s=Math.cos,o=Math.PI,u=1.70158,l=1.525*u,c=u+1,d=2*o/3,h=2*o/4.5;t.extend(t.easing,{def:"easeOutQuad",swing:function(e){return t.easing[t.easing.def](e)},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-i(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-i(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-i(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-i(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-i(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-i(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-i(-2*e+2,5)/2},easeInSine:function(e){return 1-s(e*o/2)},easeOutSine:function(e){return a(e*o/2)},easeInOutSine:function(e){return-(s(o*e)-1)/2},easeInExpo:function(e){return 0===e?0:i(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-i(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?i(2,20*e-10)/2:(2-i(2,-20*e+10))/2},easeInCirc:function(e){return 1-r(1-i(e,2))},easeOutCirc:function(e){return r(1-i(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-r(1-i(2*e,2)))/2:(r(1-i(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-i(2,10*e-10)*a((10*e-10.75)*d)},easeOutElastic:function(e){return 0===e?0:1===e?1:i(2,-10*e)*a((10*e-.75)*d)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-i(2,20*e-10)*a((20*e-11.125)*h)/2:i(2,-20*e+10)*a((20*e-11.125)*h)/2+1},easeInBack:function(e){return c*e*e*e-u*e*e},easeOutBack:function(e){return 1+c*i(e-1,3)+u*i(e-1,2)},easeInOutBack:function(e){return e<.5?i(2*e,2)*(2*(l+1)*e-l)/2:(i(2*e-2,2)*((l+1)*(2*e-2)+l)+2)/2},easeInBounce:function(e){return 1-n(1-e)},easeOutBounce:n,easeInOutBounce:function(e){return e<.5?(1-n(1-2*e))/2:(1+n(2*e-1))/2}})}),jQuery.extend(jQuery.easing,{easeInOutMaterial:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:i/4*((t-=2)*t*t+2)+n}}),jQuery.Velocity?console.log("Velocity is already loaded. You may be needlessly importing Velocity again; note that Materialize includes Velocity."):(function(t){function s(e){var t=e.length,n=d.type(e);return"function"!==n&&!d.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e))}if(!t.jQuery){var d=function(e,t){return new d.fn.init(e,t)};d.isWindow=function(e){return null!=e&&e==e.window},d.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[r.call(e)]||"object":typeof e},d.isArray=Array.isArray||function(e){return"array"===d.type(e)},d.isPlainObject=function(e){var t;if(!e||"object"!==d.type(e)||e.nodeType||d.isWindow(e))return!1;try{if(e.constructor&&!i.call(e,"constructor")&&!i.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}for(t in e);return void 0===t||i.call(e,t)},d.each=function(e,t,n){var i=0,r=e.length,a=s(e);if(n){if(a)for(;i<r&&!1!==t.apply(e[i],n);i++);else for(i in e)if(!1===t.apply(e[i],n))break}else if(a)for(;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},d.data=function(e,t,n){if(void 0===n){var i=(r=e[d.expando])&&a[r];if(void 0===t)return i;if(i&&t in i)return i[t]}else if(void 0!==t){var r=e[d.expando]||(e[d.expando]=++d.uuid);return a[r]=a[r]||{},a[r][t]=n}},d.removeData=function(e,t){var n=e[d.expando],i=n&&a[n];i&&d.each(t,function(e,t){delete i[t]})},d.extend=function(e){var t,n,i,r,a,s,o=e||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[u]||{},u++),"object"!=typeof o&&"function"!==d.type(o)&&(o={}),u===l&&(o=this,u--);u<l;u++)if(null!=(a=arguments[u]))for(r in a)t=o[r],o!==(i=a[r])&&(c&&i&&(d.isPlainObject(i)||(n=d.isArray(i)))?(n?(n=!1,s=t&&d.isArray(t)?t:[]):s=t&&d.isPlainObject(t)?t:{},o[r]=d.extend(c,s,i)):void 0!==i&&(o[r]=i));return o},d.queue=function(e,t,n){function i(e,t){var n=t||[];return null!=e&&(s(Object(e))?function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;)e[r++]=t[i++];if(n!=n)for(;void 0!==t[i];)e[r++]=t[i++];e.length=r}(n,"string"==typeof e?[e]:e):[].push.call(n,e)),n}if(e){t=(t||"fx")+"queue";var r=d.data(e,t);return n?(!r||d.isArray(n)?r=d.data(e,t,i(n)):r.push(n),r):r||[]}},d.dequeue=function(e,r){d.each(e.nodeType?[e]:e,function(e,t){r=r||"fx";var n=d.queue(t,r),i=n.shift();"inprogress"===i&&(i=n.shift()),i&&("fx"===r&&n.unshift("inprogress"),i.call(t,function(){d.dequeue(t,r)}))})},d.fn=d.prototype={init:function(e){if(e.nodeType)return this[0]=e,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function e(){for(var e=this.offsetParent||document;e&&"html"===!e.nodeType.toLowerCase&&"static"===e.style.position;)e=e.offsetParent;return e||document}var t=this[0],e=e.apply(t),n=this.offset(),i=/^(?:body|html)$/i.test(e.nodeName)?{top:0,left:0}:d(e).offset();return n.top-=parseFloat(t.style.marginTop)||0,n.left-=parseFloat(t.style.marginLeft)||0,e.style&&(i.top+=parseFloat(e.style.borderTopWidth)||0,i.left+=parseFloat(e.style.borderLeftWidth)||0),{top:n.top-i.top,left:n.left-i.left}}};var a={};d.expando="velocity"+(new Date).getTime(),d.uuid=0;for(var n={},i=n.hasOwnProperty,r=n.toString,e="Boolean Number String Function Array Date RegExp Object Error".split(" "),o=0;o<e.length;o++)n["[object "+e[o]+"]"]=e[o].toLowerCase();d.fn.init.prototype=d.fn,t.Velocity={Utilities:d}}}(window),function(e){"object"==typeof module&&"object"==typeof module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):e()}(function(){return function(e,N,j,B){function C(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}function m(e){return W.isWrapped(e)?e=[].slice.call(e):W.isNode(e)&&(e=[e]),e}function F(e){var t=V.data(e,"velocity");return null===t?B:t}function i(t){return function(e){return Math.round(e*t)*(1/t)}}function r(s,t,o,n){function i(e,t){return 1-3*t+3*e}function r(e,t){return 3*t-6*e}function a(e){return 3*e}function u(e,t,n){return((i(t,n)*e+r(t,n))*e+a(t))*e}function l(e,t,n){return 3*i(t,n)*e*e+2*r(t,n)*e+a(t)}function c(e,t){for(var n=0;n<p;++n){var i=l(t,s,o);if(0===i)return t;t-=(u(t,s,o)-e)/i}return t}function e(){for(var e=0;e<v;++e)S[e]=u(e*b,s,o)}function d(e,t,n){for(var i,r,a=0;0<(i=u(r=t+(n-t)/2,s,o)-e)?n=r:t=r,Math.abs(i)>g&&++a<y;);return r}function h(e){for(var t=0,n=1,i=v-1;n!=i&&S[n]<=e;++n)t+=b;var r=t+(e-S[--n])/(S[n+1]-S[n])*b,a=l(r,s,o);return m<=a?c(e,r):0==a?r:d(e,t,t+b)}function f(){w=!0,(s!=t||o!=n)&&e()}var p=4,m=.001,g=1e-7,y=10,v=11,b=1/(v-1),_="Float32Array"in N;if(4!==arguments.length)return!1;for(var T=0;T<4;++T)if("number"!=typeof arguments[T]||isNaN(arguments[T])||!isFinite(arguments[T]))return!1;s=Math.min(s,1),o=Math.min(o,1),s=Math.max(s,0),o=Math.max(o,0);var S=_?new Float32Array(v):new Array(v),w=!1,k=function(e){return w||f(),s===t&&o===n?e:0===e?0:1===e?1:u(h(e),t,n)};k.getControlPoints=function(){return[{x:s,y:t},{x:o,y:n}]};var C="generateBezier("+[s,t,o,n]+")";return k.toString=function(){return C},k}function q(e,t){var n=e;return W.isString(e)?z.Easings[e]||(n=!1):n=W.isArray(e)&&1===e.length?i.apply(null,e):W.isArray(e)&&2===e.length?o.apply(null,e.concat([t])):!(!W.isArray(e)||4!==e.length)&&r.apply(null,e),!1===n&&(n=z.Easings[z.defaults.easing]?z.defaults.easing:s),n}function H(e){if(e){var t=(new Date).getTime(),n=z.State.calls.length;1e4<n&&(z.State.calls=C(z.State.calls));for(var i=0;i<n;i++)if(z.State.calls[i]){var r=z.State.calls[i],a=r[0],s=r[2],o=r[3],u=!!o,l=null;o||(o=z.State.calls[i][3]=t-16);for(var c=Math.min((t-o)/s.duration,1),d=0,h=a.length;d<h;d++){var f=a[d],p=f.element;if(F(p)){var m=!1;if(s.display!==B&&null!==s.display&&"none"!==s.display){if("flex"===s.display){var g=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];V.each(g,function(e,t){G.setPropertyValue(p,"display",t)})}G.setPropertyValue(p,"display",s.display)}for(var y in s.visibility!==B&&"hidden"!==s.visibility&&G.setPropertyValue(p,"visibility",s.visibility),f)if("element"!==y){var v,b=f[y],_=W.isString(b.easing)?z.Easings[b.easing]:b.easing;if(1===c)v=b.endValue;else{var T=b.endValue-b.startValue;if(v=b.startValue+T*_(c,s,T),!u&&v===b.currentValue)continue}if(b.currentValue=v,"tween"===y)l=v;else{if(G.Hooks.registered[y]){var S=G.Hooks.getRoot(y),w=F(p).rootPropertyValueCache[S];w&&(b.rootPropertyValue=w)}var k=G.setPropertyValue(p,y,b.currentValue+(0===parseFloat(v)?"":b.unitType),b.rootPropertyValue,b.scrollData);G.Hooks.registered[y]&&(F(p).rootPropertyValueCache[S]=G.Normalizations.registered[S]?G.Normalizations.registered[S]("extract",null,k[1]):k[1]),"transform"===k[0]&&(m=!0)}}s.mobileHA&&F(p).transformCache.translate3d===B&&(F(p).transformCache.translate3d="(0px, 0px, 0px)",m=!0),m&&G.flushTransformCache(p)}}s.display!==B&&"none"!==s.display&&(z.State.calls[i][2].display=!1),s.visibility!==B&&"hidden"!==s.visibility&&(z.State.calls[i][2].visibility=!1),s.progress&&s.progress.call(r[1],r[1],c,Math.max(0,o+s.duration-t),o,l),1===c&&E(i)}}z.State.isTicking&&x(H)}function E(e,t){if(!z.State.calls[e])return!1;for(var n=z.State.calls[e][0],i=z.State.calls[e][1],r=z.State.calls[e][2],a=z.State.calls[e][4],s=!1,o=0,u=n.length;o<u;o++){var l=n[o].element;if(t||r.loop||("none"===r.display&&G.setPropertyValue(l,"display",r.display),"hidden"===r.visibility&&G.setPropertyValue(l,"visibility",r.visibility)),!0!==r.loop&&(V.queue(l)[1]===B||!/\.velocityQueueEntryFlag/i.test(V.queue(l)[1]))&&F(l)){F(l).isAnimating=!1;var c=!(F(l).rootPropertyValueCache={});V.each(G.Lists.transforms3D,function(e,t){var n=/^scale/.test(t)?1:0,i=F(l).transformCache[t];F(l).transformCache[t]!==B&&new RegExp("^\\("+n+"[^.]").test(i)&&(c=!0,delete F(l).transformCache[t])}),r.mobileHA&&(c=!0,delete F(l).transformCache.translate3d),c&&G.flushTransformCache(l),G.Values.removeClass(l,"velocity-animating")}if(!t&&r.complete&&!r.loop&&o===u-1)try{r.complete.call(i,i)}catch(f){setTimeout(function(){throw f},1)}a&&!0!==r.loop&&a(i),F(l)&&!0===r.loop&&!t&&(V.each(F(l).tweensContainer,function(e,t){/^rotate/.test(e)&&360===parseFloat(t.endValue)&&(t.endValue=0,t.startValue=360),/^backgroundPosition/.test(e)&&100===parseFloat(t.endValue)&&"%"===t.unitType&&(t.endValue=0,t.startValue=100)}),z(l,"reverse",{loop:!0,delay:r.delay})),!1!==r.queue&&V.dequeue(l,r.queue)}z.State.calls[e]=!1;for(var d=0,h=z.State.calls.length;d<h;d++)if(!1!==z.State.calls[d]){s=!0;break}!1===s&&(z.State.isTicking=!1,delete z.State.calls,z.State.calls=[])}var V,a,d=function(){if(j.documentMode)return j.documentMode;for(var e=7;4<e;e--){var t=j.createElement("div");if(t.innerHTML="<!--[if IE "+e+"]><span></span><![endif]-->",t.getElementsByTagName("span").length)return t=null,e}return B}(),f=(a=0,N.webkitRequestAnimationFrame||N.mozRequestAnimationFrame||function(e){var t,n=(new Date).getTime();return t=Math.max(0,16-(n-a)),a=n+t,setTimeout(function(){e(n+t)},t)}),W={isString:function(e){return"string"==typeof e},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},isNode:function(e){return e&&e.nodeType},isNodeList:function(e){return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&e.length!==B&&(0===e.length||"object"==typeof e[0]&&0<e[0].nodeType)},isWrapped:function(e){return e&&(e.jquery||N.Zepto&&N.Zepto.zepto.isZ(e))},isSVG:function(e){return N.SVGElement&&e instanceof N.SVGElement},isEmptyObject:function(e){for(var t in e)return!1;return!0}},t=!1;if(e.fn&&e.fn.jquery?(V=e,t=!0):V=N.Velocity.Utilities,d<=8&&!t)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(d<=7)){var g=400,s="swing",z={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:N.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:j.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:V,Redirects:{},Easings:{},Promise:N.Promise,defaults:{queue:"",duration:g,easing:s,begin:B,complete:B,progress:B,display:B,visibility:B,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(e){V.data(e,"velocity",{isSVG:W.isSVG(e),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:2,patch:2},debug:!1};N.pageYOffset!==B?(z.State.scrollAnchor=N,z.State.scrollPropertyLeft="pageXOffset",z.State.scrollPropertyTop="pageYOffset"):(z.State.scrollAnchor=j.documentElement||j.body.parentNode||j.body,z.State.scrollPropertyLeft="scrollLeft",z.State.scrollPropertyTop="scrollTop");var o=function(){function u(e){return-e.tension*e.x-e.friction*e.v}function l(e,t,n){var i={x:e.x+n.dx*t,v:e.v+n.dv*t,tension:e.tension,friction:e.friction};return{dx:i.v,dv:u(i)}}function d(e,t){var n={dx:e.v,dv:u(e)},i=l(e,.5*t,n),r=l(e,.5*t,i),a=l(e,t,r),s=1/6*(n.dx+2*(i.dx+r.dx)+a.dx),o=1/6*(n.dv+2*(i.dv+r.dv)+a.dv);return e.x=e.x+s*t,e.v=e.v+o*t,e}return function h(e,t,n){var i,r,a,s={x:-1,v:0,tension:null,friction:null},o=[0],u=0,l=1e-4,c=.016;for(e=parseFloat(e)||500,t=parseFloat(t)||20,n=n||null,s.tension=e,s.friction=t,(i=null!==n)?r=(u=h(e,t))/n*c:r=c;a=d(a||s,r),o.push(1+a.x),u+=16,Math.abs(a.x)>l&&Math.abs(a.v)>l;);return i?function(e){return o[e*(o.length-1)|0]}:u}}();z.Easings={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)}},V.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(e,t){z.Easings[t[0]]=r.apply(null,t[1])});var G=z.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var e=0;e<G.Lists.colors.length;e++){var t="color"===G.Lists.colors[e]?"0 0 0 1":"255 255 255 1";G.Hooks.templates[G.Lists.colors[e]]=["Red Green Blue Alpha",t]}var n,i,r;if(d)for(n in G.Hooks.templates){r=(i=G.Hooks.templates[n])[0].split(" ");var a=i[1].match(G.RegEx.valueSplit);"Color"===r[0]&&(r.push(r.shift()),a.push(a.shift()),G.Hooks.templates[n]=[r.join(" "),a.join(" ")])}for(n in G.Hooks.templates)for(var e in r=(i=G.Hooks.templates[n])[0].split(" ")){var s=n+r[e],o=e;G.Hooks.registered[s]=[n,o]}},getRoot:function(e){var t=G.Hooks.registered[e];return t?t[0]:e},cleanRootPropertyValue:function(e,t){return G.RegEx.valueUnwrap.test(t)&&(t=t.match(G.RegEx.valueUnwrap)[1]),G.Values.isCSSNullValue(t)&&(t=G.Hooks.templates[e][1]),t},extractValue:function(e,t){var n=G.Hooks.registered[e];if(n){var i=n[0],r=n[1];return(t=G.Hooks.cleanRootPropertyValue(i,t)).toString().match(G.RegEx.valueSplit)[r]}return t},injectValue:function(e,t,n){var i=G.Hooks.registered[e];if(i){var r,a=i[0],s=i[1];return(r=(n=G.Hooks.cleanRootPropertyValue(a,n)).toString().match(G.RegEx.valueSplit))[s]=t,r.join(" ")}return n}},Normalizations:{registered:{clip:function(e,t,n){switch(e){case"name":return"clip";case"extract":var i;return G.RegEx.wrappedValueAlreadyExtracted.test(n)?i=n:i=(i=n.toString().match(G.RegEx.valueUnwrap))?i[1].replace(/,(\s+)?/g," "):n,i;case"inject":return"rect("+n+")"}},blur:function(e,t,n){switch(e){case"name":return z.State.isFirefox?"filter":"-webkit-filter";case"extract":var i=parseFloat(n);if(!i&&0!==i){var r=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);i=r?r[1]:0}return i;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(e,t,n){if(d<=8)switch(e){case"name":return"filter";case"extract":var i=n.toString().match(/alpha\(opacity=(.*)\)/i);return i?i[1]/100:1;case"inject":return(t.style.zoom=1)<=parseFloat(n)?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(e){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){d<=9||z.State.isGingerbread||(G.Lists.transformsBase=G.Lists.transformsBase.concat(G.Lists.transforms3D));for(var e=0;e<G.Lists.transformsBase.length;e++)!function(){var r=G.Lists.transformsBase[e];G.Normalizations.registered[r]=function(e,t,n){switch(e){case"name":return"transform";case"extract":return F(t)===B||F(t).transformCache[r]===B?/^scale/i.test(r)?1:0:F(t).transformCache[r].replace(/[()]/g,"");case"inject":var i=!1;switch(r.substr(0,r.length-1)){case"translate":i=!/(%|px|em|rem|vw|vh|\d)$/i.test(n);break;case"scal":case"scale":z.State.isAndroid&&F(t).transformCache[r]===B&&n<1&&(n=1),i=!/(\d)$/i.test(n);break;case"skew":i=!/(deg|\d)$/i.test(n);break;case"rotate":i=!/(deg|\d)$/i.test(n)}return i||(F(t).transformCache[r]="("+n+")"),F(t).transformCache[r]}}}();for(e=0;e<G.Lists.colors.length;e++)!function(){var s=G.Lists.colors[e];G.Normalizations.registered[s]=function(e,t,n){switch(e){case"name":
return s;case"extract":var i;if(G.RegEx.wrappedValueAlreadyExtracted.test(n))i=n;else{var r,a={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(n)?r=a[n]!==B?a[n]:a.black:G.RegEx.isHex.test(n)?r="rgb("+G.Values.hexToRgb(n).join(" ")+")":/^rgba?\(/i.test(n)||(r=a.black),i=(r||n).toString().match(G.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return d<=8||3!==i.split(" ").length||(i+=" 1"),i;case"inject":return d<=8?4===n.split(" ").length&&(n=n.split(/\s+/).slice(0,3).join(" ")):3===n.split(" ").length&&(n+=" 1"),(d<=8?"rgb":"rgba")+"("+n.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},SVGAttribute:function(e){var t="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(d||z.State.isAndroid&&!z.State.isChrome)&&(t+="|transform"),new RegExp("^("+t+")$","i").test(e)},prefixCheck:function(e){if(z.State.prefixMatches[e])return[z.State.prefixMatches[e],!0];for(var t=["","Webkit","Moz","ms","O"],n=0,i=t.length;n<i;n++){var r;if(r=0===n?e:t[n]+e.replace(/^\w/,function(e){return e.toUpperCase()}),W.isString(z.State.prefixElement.style[r]))return[z.State.prefixMatches[e]=r,!0]}return[e,!1]}},Values:{hexToRgb:function(e){var t,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return e=e.replace(n,function(e,t,n,i){return t+t+n+n+i+i}),(t=i.exec(e))?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:[0,0,0]},isCSSNullValue:function(e){return 0==e||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(e)},getUnitType:function(e){return/^(rotate|skew)/i.test(e)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(e)?"":"px"},getDisplayType:function(e){var t=e&&e.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(t)?"inline":/^(li)$/i.test(t)?"list-item":/^(tr)$/i.test(t)?"table-row":/^(table)$/i.test(t)?"table":/^(tbody)$/i.test(t)?"table-row-group":"block"},addClass:function(e,t){e.classList?e.classList.add(t):e.className+=(e.className.length?" ":"")+t},removeClass:function(e,t){e.classList?e.classList.remove(t):e.className=e.className.toString().replace(new RegExp("(^|\\s)"+t.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(e,t,n,l){function c(e,t){function n(){a&&G.setPropertyValue(e,"display","none")}var i=0;if(d<=8)i=V.css(e,t);else{var r,a=!1;if(/^(width|height)$/.test(t)&&0===G.getPropertyValue(e,"display")&&(a=!0,G.setPropertyValue(e,"display",G.Values.getDisplayType(e))),!l){if("height"===t&&"border-box"!==G.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var s=e.offsetHeight-(parseFloat(G.getPropertyValue(e,"borderTopWidth"))||0)-(parseFloat(G.getPropertyValue(e,"borderBottomWidth"))||0)-(parseFloat(G.getPropertyValue(e,"paddingTop"))||0)-(parseFloat(G.getPropertyValue(e,"paddingBottom"))||0);return n(),s}if("width"===t&&"border-box"!==G.getPropertyValue(e,"boxSizing").toString().toLowerCase()){var o=e.offsetWidth-(parseFloat(G.getPropertyValue(e,"borderLeftWidth"))||0)-(parseFloat(G.getPropertyValue(e,"borderRightWidth"))||0)-(parseFloat(G.getPropertyValue(e,"paddingLeft"))||0)-(parseFloat(G.getPropertyValue(e,"paddingRight"))||0);return n(),o}}r=F(e)===B?N.getComputedStyle(e,null):F(e).computedStyle?F(e).computedStyle:F(e).computedStyle=N.getComputedStyle(e,null),"borderColor"===t&&(t="borderTopColor"),(""===(i=9===d&&"filter"===t?r.getPropertyValue(t):r[t])||null===i)&&(i=e.style[t]),n()}if("auto"===i&&/^(top|right|bottom|left)$/i.test(t)){var u=c(e,"position");("fixed"===u||"absolute"===u&&/top|left/i.test(t))&&(i=V(e).position()[t]+"px")}return i}var i;if(G.Hooks.registered[t]){var r=t,a=G.Hooks.getRoot(r);n===B&&(n=G.getPropertyValue(e,G.Names.prefixCheck(a)[0])),G.Normalizations.registered[a]&&(n=G.Normalizations.registered[a]("extract",e,n)),i=G.Hooks.extractValue(r,n)}else if(G.Normalizations.registered[t]){var s,o;"transform"!==(s=G.Normalizations.registered[t]("name",e))&&(o=c(e,G.Names.prefixCheck(s)[0]),G.Values.isCSSNullValue(o)&&G.Hooks.templates[t]&&(o=G.Hooks.templates[t][1])),i=G.Normalizations.registered[t]("extract",e,o)}if(!/^[\d-]/.test(i))if(F(e)&&F(e).isSVG&&G.Names.SVGAttribute(t))if(/^(height|width)$/i.test(t))try{i=e.getBBox()[t]}catch(W){i=0}else i=e.getAttribute(t);else i=c(e,G.Names.prefixCheck(t)[0]);return G.Values.isCSSNullValue(i)&&(i=0),2<=z.debug&&console.log("Get "+t+": "+i),i},setPropertyValue:function(e,t,n,i,r){var a=t;if("scroll"===t)r.container?r.container["scroll"+r.direction]=n:"Left"===r.direction?N.scrollTo(n,r.alternateValue):N.scrollTo(r.alternateValue,n);else if(G.Normalizations.registered[t]&&"transform"===G.Normalizations.registered[t]("name",e))G.Normalizations.registered[t]("inject",e,n),a="transform",n=F(e).transformCache[t];else{if(G.Hooks.registered[t]){var s=t,o=G.Hooks.getRoot(t);i=i||G.getPropertyValue(e,o),n=G.Hooks.injectValue(s,n,i),t=o}if(G.Normalizations.registered[t]&&(n=G.Normalizations.registered[t]("inject",e,n),t=G.Normalizations.registered[t]("name",e)),a=G.Names.prefixCheck(t)[0],d<=8)try{e.style[a]=n}catch(H){z.debug&&console.log("Browser does not support ["+n+"] for ["+a+"]")}else F(e)&&F(e).isSVG&&G.Names.SVGAttribute(t)?e.setAttribute(t,n):e.style[a]=n;2<=z.debug&&console.log("Set "+t+" ("+a+"): "+n)}return[a,n]},flushTransformCache:function(t){function e(e){return parseFloat(G.getPropertyValue(t,e))}var n="";if((d||z.State.isAndroid&&!z.State.isChrome)&&F(t).isSVG){var i={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};V.each(F(t).transformCache,function(e){/^translate/i.test(e)?e="translate":/^scale/i.test(e)?e="scale":/^rotate/i.test(e)&&(e="rotate"),i[e]&&(n+=e+"("+i[e].join(" ")+") ",delete i[e])})}else{var r,a;V.each(F(t).transformCache,function(e){return r=F(t).transformCache[e],"transformPerspective"===e?(a=r,!0):(9===d&&"rotateZ"===e&&(e="rotate"),void(n+=e+r+" "))}),a&&(n="perspective"+a+" "+n)}G.setPropertyValue(t,"transform",n)}};G.Hooks.register(),G.Normalizations.register(),z.hook=function(e,i,r){var a=B;return e=m(e),V.each(e,function(e,t){if(F(t)===B&&z.init(t),r===B)a===B&&(a=z.CSS.getPropertyValue(t,i));else{var n=z.CSS.setPropertyValue(t,i,r);"transform"===n[0]&&z.CSS.flushTransformCache(t),a=n}}),a};var y=function(e){function t(){return i?R.promise||null:r}function n(){function n(){function d(e,t){var n=B,i=B,r=B;return W.isArray(e)?(n=e[0],!W.isArray(e[1])&&/^[\d-]/.test(e[1])||W.isFunction(e[1])||G.RegEx.isHex.test(e[1])?r=e[1]:(W.isString(e[1])&&!G.RegEx.isHex.test(e[1])||W.isArray(e[1]))&&(i=t?e[1]:q(e[1],C.duration),e[2]!==B&&(r=e[2]))):n=e,t||(i=i||C.easing),W.isFunction(n)&&(n=n.call(k,L,I)),W.isFunction(r)&&(r=r.call(k,L,I)),[n||0,i,r]}function e(e,t){var n,i;return i=(t||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(e){return n=e,""}),n||(n=G.Values.getUnitType(e)),[i,n]}function t(){var e={myParent:k.parentNode||j.body,position:G.getPropertyValue(k,"position"),fontSize:G.getPropertyValue(k,"fontSize")},t=e.position===M.lastPosition&&e.myParent===M.lastParent,n=e.fontSize===M.lastFontSize;M.lastParent=e.myParent,M.lastPosition=e.position,M.lastFontSize=e.fontSize;var i=100,r={};if(n&&t)r.emToPx=M.lastEmToPx,r.percentToPxWidth=M.lastPercentToPxWidth,r.percentToPxHeight=M.lastPercentToPxHeight;else{var a=F(k).isSVG?j.createElementNS("http://www.w3.org/2000/svg","rect"):j.createElement("div");z.init(a),e.myParent.appendChild(a),V.each(["overflow","overflowX","overflowY"],function(e,t){z.CSS.setPropertyValue(a,t,"hidden")}),z.CSS.setPropertyValue(a,"position",e.position),z.CSS.setPropertyValue(a,"fontSize",e.fontSize),z.CSS.setPropertyValue(a,"boxSizing","content-box"),V.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(e,t){z.CSS.setPropertyValue(a,t,i+"%")}),z.CSS.setPropertyValue(a,"paddingLeft",i+"em"),r.percentToPxWidth=M.lastPercentToPxWidth=(parseFloat(G.getPropertyValue(a,"width",null,!0))||1)/i,r.percentToPxHeight=M.lastPercentToPxHeight=(parseFloat(G.getPropertyValue(a,"height",null,!0))||1)/i,r.emToPx=M.lastEmToPx=(parseFloat(G.getPropertyValue(a,"paddingLeft"))||1)/i,e.myParent.removeChild(a)}return null===M.remToPx&&(M.remToPx=parseFloat(G.getPropertyValue(j.body,"fontSize"))||16),null===M.vwToPx&&(M.vwToPx=parseFloat(N.innerWidth)/100,M.vhToPx=parseFloat(N.innerHeight)/100),r.remToPx=M.remToPx,r.vwToPx=M.vwToPx,r.vhToPx=M.vhToPx,1<=z.debug&&console.log("Unit ratios: "+JSON.stringify(r),k),r}if(C.begin&&0===L)try{C.begin.call(x,x)}catch(O){setTimeout(function(){throw O},1)}if("scroll"===D){var n,i,r,a=/^x$/i.test(C.axis)?"Left":"Top",s=parseFloat(C.offset)||0;C.container?W.isWrapped(C.container)||W.isNode(C.container)?(C.container=C.container[0]||C.container,r=(n=C.container["scroll"+a])+V(k).position()[a.toLowerCase()]+s):C.container=null:(n=z.State.scrollAnchor[z.State["scrollProperty"+a]],i=z.State.scrollAnchor[z.State["scrollProperty"+("Left"===a?"Top":"Left")]],r=V(k).offset()[a.toLowerCase()]+s),E={scroll:{rootPropertyValue:!1,startValue:n,currentValue:n,endValue:r,unitType:"",easing:C.easing,scrollData:{container:C.container,direction:a,alternateValue:i}},element:k},z.debug&&console.log("tweensContainer (scroll): ",E.scroll,k)}else if("reverse"===D){if(!F(k).tweensContainer)return void V.dequeue(k,C.queue);"none"===F(k).opts.display&&(F(k).opts.display="auto"),"hidden"===F(k).opts.visibility&&(F(k).opts.visibility="visible"),F(k).opts.loop=!1,F(k).opts.begin=null,F(k).opts.complete=null,P.easing||delete C.easing,P.duration||delete C.duration,C=V.extend({},F(k).opts,C);var o=V.extend(!0,{},F(k).tweensContainer);for(var u in o)if("element"!==u){var l=o[u].startValue;o[u].startValue=o[u].currentValue=o[u].endValue,o[u].endValue=l,W.isEmptyObject(P)||(o[u].easing=C.easing),z.debug&&console.log("reverse tweensContainer ("+u+"): "+JSON.stringify(o[u]),k)}E=o}else if("start"===D){for(var c in F(k).tweensContainer&&!0===F(k).isAnimating&&(o=F(k).tweensContainer),V.each(A,function(e,t){if(RegExp("^"+G.Lists.colors.join("$|^")+"$").test(e)){var n=d(t,!0),i=n[0],r=n[1],a=n[2];if(G.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],o=G.Values.hexToRgb(i),u=a?G.Values.hexToRgb(a):B,l=0;l<s.length;l++){var c=[o[l]];r&&c.push(r),u!==B&&c.push(u[l]),A[e+s[l]]=c}delete A[e]}}}),A){var h=d(A[c]),f=h[0],p=h[1],m=h[2];c=G.Names.camelCase(c);var g=G.Hooks.getRoot(c),y=!1;if(F(k).isSVG||"tween"===g||!1!==G.Names.prefixCheck(g)[1]||G.Normalizations.registered[g]!==B){(C.display!==B&&null!==C.display&&"none"!==C.display||C.visibility!==B&&"hidden"!==C.visibility)&&/opacity|filter/.test(c)&&!m&&0!==f&&(m=0),C._cacheValues&&o&&o[c]?(m===B&&(m=o[c].endValue+o[c].unitType),y=F(k).rootPropertyValueCache[g]):G.Hooks.registered[c]?m===B?(y=G.getPropertyValue(k,g),m=G.getPropertyValue(k,c,y)):y=G.Hooks.templates[g][1]:m===B&&(m=G.getPropertyValue(k,c));var v,b,_,T=!1;if(m=(v=e(c,m))[0],_=v[1],f=(v=e(c,f))[0].replace(/^([+-\/*])=/,function(e,t){return T=t,""}),b=v[1],m=parseFloat(m)||0,f=parseFloat(f)||0,"%"===b&&(/^(fontSize|lineHeight)$/.test(c)?(f/=100,b="em"):/^scale/.test(c)?(f/=100,b=""):/(Red|Green|Blue)$/i.test(c)&&(f=f/100*255,b="")),/[\/*]/.test(T))b=_;else if(_!==b&&0!==m)if(0===f)b=_;else{w=w||t();var S=/margin|padding|left|right|width|text|word|letter/i.test(c)||/X$/.test(c)||"x"===c?"x":"y";switch(_){case"%":m*="x"===S?w.percentToPxWidth:w.percentToPxHeight;break;case"px":break;default:m*=w[_+"ToPx"]}switch(b){case"%":m*=1/("x"===S?w.percentToPxWidth:w.percentToPxHeight);break;case"px":break;default:m*=1/w[b+"ToPx"]}}switch(T){case"+":f=m+f;break;case"-":f=m-f;break;case"*":f*=m;break;case"/":f=m/f}E[c]={rootPropertyValue:y,startValue:m,currentValue:m,endValue:f,unitType:b,easing:p},z.debug&&console.log("tweensContainer ("+c+"): "+JSON.stringify(E[c]),k)}else z.debug&&console.log("Skipping ["+g+"] due to a lack of browser support.")}E.element=k}E.element&&(G.Values.addClass(k,"velocity-animating"),U.push(E),""===C.queue&&(F(k).tweensContainer=E,F(k).opts=C),F(k).isAnimating=!0,L===I-1?(z.State.calls.push([U,x,C,null,R.resolver]),!1===z.State.isTicking&&(z.State.isTicking=!0,H())):L++)}var w,k=this,C=V.extend({},z.defaults,P),E={};switch(F(k)===B&&z.init(k),parseFloat(C.delay)&&!1!==C.queue&&V.queue(k,C.queue,function(e){z.velocityQueueEntryFlag=!0,F(k).delayTimer={setTimeout:setTimeout(e,parseFloat(C.delay)),next:e}}),C.duration.toString().toLowerCase()){case"fast":C.duration=200;break;case"normal":C.duration=g;break;case"slow":C.duration=600;break;default:C.duration=parseFloat(C.duration)||1}!1!==z.mock&&(!0===z.mock?C.duration=C.delay=1:(C.duration*=parseFloat(z.mock)||1,C.delay*=parseFloat(z.mock)||1)),C.easing=q(C.easing,C.duration),C.begin&&!W.isFunction(C.begin)&&(C.begin=null),C.progress&&!W.isFunction(C.progress)&&(C.progress=null),C.complete&&!W.isFunction(C.complete)&&(C.complete=null),C.display!==B&&null!==C.display&&(C.display=C.display.toString().toLowerCase(),"auto"===C.display&&(C.display=z.CSS.Values.getDisplayType(k))),C.visibility!==B&&null!==C.visibility&&(C.visibility=C.visibility.toString().toLowerCase()),C.mobileHA=C.mobileHA&&z.State.isMobile&&!z.State.isGingerbread,!1===C.queue?C.delay?setTimeout(n,C.delay):n():V.queue(k,C.queue,function(e,t){return!0===t?(R.promise&&R.resolver(x),!0):(z.velocityQueueEntryFlag=!0,void n(e))}),""!==C.queue&&"fx"!==C.queue||"inprogress"===V.queue(k)[0]||V.dequeue(k)}var i,r,a,x,A,P,O=e&&(e.p||V.isPlainObject(e.properties)&&!e.properties.names||W.isString(e.properties));if(W.isWrapped(this)?(i=!1,a=0,r=x=this):(i=!0,a=1,x=O?e.elements||e.e:e),x=m(x)){O?(A=e.properties||e.p,P=e.options||e.o):(A=arguments[a],P=arguments[a+1]);var I=x.length,L=0;if(!/^(stop|finish)$/i.test(A)&&!V.isPlainObject(P)){P={};for(var s=a+1;s<arguments.length;s++)W.isArray(arguments[s])||!/^(fast|normal|slow)$/i.test(arguments[s])&&!/^\d/.test(arguments[s])?W.isString(arguments[s])||W.isArray(arguments[s])?P.easing=arguments[s]:W.isFunction(arguments[s])&&(P.complete=arguments[s]):P.duration=arguments[s]}var D,R={promise:null,resolver:null,rejecter:null};switch(i&&z.Promise&&(R.promise=new z.Promise(function(e,t){R.resolver=e,R.rejecter=t})),A){case"scroll":D="scroll";break;case"reverse":D="reverse";break;case"finish":case"stop":V.each(x,function(e,t){F(t)&&F(t).delayTimer&&(clearTimeout(F(t).delayTimer.setTimeout),F(t).delayTimer.next&&F(t).delayTimer.next(),delete F(t).delayTimer)});var o=[];return V.each(z.State.calls,function(r,a){a&&V.each(a[1],function(e,n){var i=P===B?"":P;return!0!==i&&a[2].queue!==i&&(P!==B||!1!==a[2].queue)||void V.each(x,function(e,t){t===n&&((!0===P||W.isString(P))&&(V.each(V.queue(t,W.isString(P)?P:""),function(e,t){W.isFunction(t)&&t(null,!0)}),V.queue(t,W.isString(P)?P:"",[])),"stop"===A?(F(t)&&F(t).tweensContainer&&!1!==i&&V.each(F(t).tweensContainer,function(e,t){t.endValue=t.currentValue}),o.push(r)):"finish"===A&&(a[2].duration=1))})})}),"stop"===A&&(V.each(o,function(e,t){E(t,!0)}),R.promise&&R.resolver(x)),t();default:if(!V.isPlainObject(A)||W.isEmptyObject(A)){if(W.isString(A)&&z.Redirects[A]){var u=(h=V.extend({},P)).duration,l=h.delay||0;return!0===h.backwards&&(x=V.extend(!0,[],x).reverse()),V.each(x,function(e,t){parseFloat(h.stagger)?h.delay=l+parseFloat(h.stagger)*e:W.isFunction(h.stagger)&&(h.delay=l+h.stagger.call(t,e,I)),h.drag&&(h.duration=parseFloat(u)||(/^(callout|transition)/.test(A)?1e3:g),h.duration=Math.max(h.duration*(h.backwards?1-e/I:(e+1)/I),.75*h.duration,200)),z.Redirects[A].call(t,t,h||{},e,I,x,R.promise?R:B)}),t()}var c="Velocity: First argument ("+A+") was not a property map, a known action, or a registered redirect. Aborting.";return R.promise?R.rejecter(new Error(c)):console.log(c),t()}D="start"}var d,h,M={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},U=[];if(V.each(x,function(e,t){W.isNode(t)&&n.call(t)}),(h=V.extend({},z.defaults,P)).loop=parseInt(h.loop),d=2*h.loop-1,h.loop)for(var f=0;f<d;f++){var p={delay:h.delay,progress:h.progress};f===d-1&&(p.display=h.display,p.visibility=h.visibility,p.complete=h.complete),y(x,"reverse",p)}return t()}};(z=V.extend(y,z)).animate=y;var x=N.requestAnimationFrame||f;return z.State.isMobile||j.hidden===B||j.addEventListener("visibilitychange",function(){j.hidden?(x=function(e){return setTimeout(function(){e(!0)},16)},H()):x=N.requestAnimationFrame||f}),e.Velocity=z,e!==N&&(e.fn.velocity=y,e.fn.velocity.defaults=z.defaults),V.each(["Down","Up"],function(e,d){z.Redirects["slide"+d]=function(n,e,t,i,r,a){var s=V.extend({},e),o=s.begin,u=s.complete,l={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},c={};s.display===B&&(s.display="Down"===d?"inline"===z.CSS.Values.getDisplayType(n)?"inline-block":"block":"none"),s.begin=function(){for(var e in o&&o.call(r,r),l){c[e]=n.style[e];var t=z.CSS.getPropertyValue(n,e);l[e]="Down"===d?[t,0]:[0,t]}c.overflow=n.style.overflow,n.style.overflow="hidden"},s.complete=function(){for(var e in c)n.style[e]=c[e];u&&u.call(r,r),a&&a.resolver(r)},z(n,l,s)}}),V.each(["In","Out"],function(e,l){z.Redirects["fade"+l]=function(e,t,n,i,r,a){var s=V.extend({},t),o={opacity:"In"===l?1:0},u=s.complete;s.complete=n!==i-1?s.begin=null:function(){u&&u.call(r,r),a&&a.resolver(r)},s.display===B&&(s.display="In"===l?"auto":"none"),z(this,o,s)}}),z}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)})),function(e,i,t,d){"use strict";function o(e,t,n){return setTimeout(l(e,n),t)}function n(e,t,n){return!!Array.isArray(e)&&(r(e,n[t],n),!0)}function r(e,t,n){var i;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==d)for(i=0;i<e.length;)t.call(n,e[i],i,e),i++;else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function a(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;)(!n||n&&e[i[r]]===d)&&(e[i[r]]=t[i[r]]),r++;return e}function s(e,t){return a(e,t,!0)}function u(e,t,n){var i,r=t.prototype;(i=e.prototype=Object.create(r)).constructor=e,i._super=r,n&&a(i,n)}function l(e,t){return function(){return e.apply(t,arguments)}}function c(e,t){return typeof e==ce?e.apply(t&&t[0]||d,t):e}function h(e,t){return e===d?t:e}function f(t,e,n){r(y(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){r(y(e),function(e){t.removeEventListener(e,n,!1)})}function m(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return-1<e.indexOf(t)}function y(e){return e.trim().split(/\s+/g)}function v(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var i=0;i<e.length;){if(n&&e[i][n]==t||!n&&e[i]===t)return i;i++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function _(e,n,t){for(var i=[],r=[],a=0;a<e.length;){var s=n?e[a][n]:e[a];v(r,s)<0&&i.push(e[a]),r[a]=s,a++}return t&&(i=n?i.sort(function(e,t){return e[n]>t[n]}):i.sort()),i}function T(e,t){for(var n,i,r=t[0].toUpperCase()+t.slice(1),a=0;a<ue.length;){if((i=(n=ue[a])?n+r:t)in e)return i;a++}return d}function S(){return pe++}function w(e){var t=e.ownerDocument;return t.defaultView||t.parentWindow}function k(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&n.handler(e)},this.init()}function C(e){var t=e.options.inputClass;return new(t||(ye?B:ve?H:ge?W:j))(e,E)}function E(e,t,n){var i=n.pointers.length,r=n.changedPointers.length,a=t&ke&&0==i-r,s=t&(Ee|xe)&&0==i-r;n.isFirst=!!a,n.isFinal=!!s,a&&(e.session={}),n.eventType=t,x(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function x(e,t){var n=e.session,i=t.pointers,r=i.length;n.firstInput||(n.firstInput=O(t)),1<r&&!n.firstMultiple?n.firstMultiple=O(t):1===r&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,o=s?s.center:a.center,u=t.center=I(i);t.timeStamp=fe(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=M(o,u),t.distance=R(o,u),A(n,t),t.offsetDirection=D(t.deltaX,t.deltaY),t.scale=s?N(s.pointers,i):1,t.rotation=s?U(s.pointers,i):0,P(n,t);var l=e.element;m(t.srcEvent.target,l)&&(l=t.srcEvent.target),t.target=l}function A(e,t){var n=t.center,i=e.offsetDelta||{},r=e.prevDelta||{},a=e.prevInput||{};(t.eventType===ke||a.eventType===Ee)&&(r=e.prevDelta={x:a.deltaX||0,y:a.deltaY||0},i=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=r.x+(n.x-i.x),t.deltaY=r.y+(n.y-i.y)}function P(e,t){var n,i,r,a,s=e.lastInterval||t,o=t.timeStamp-s.timeStamp;if(t.eventType!=xe&&(we<o||s.velocity===d)){var u=s.deltaX-t.deltaX,l=s.deltaY-t.deltaY,c=L(o,u,l);i=c.x,r=c.y,n=he(c.x)>he(c.y)?c.x:c.y,a=D(u,l),e.lastInterval=t}else n=s.velocity,i=s.velocityX,r=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=i,t.velocityY=r,t.direction=a}function O(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:de(e.pointers[n].clientX),clientY:de(e.pointers[n].clientY)},n++;return{timeStamp:fe(),pointers:t,center:I(t),deltaX:e.deltaX,deltaY:e.deltaY}}function I(e){var t=e.length;if(1===t)return{x:de(e[0].clientX),y:de(e[0].clientY)};for(var n=0,i=0,r=0;r<t;)n+=e[r].clientX,i+=e[r].clientY,r++;return{x:de(n/t),y:de(i/t)}}function L(e,t,n){return{x:t/e||0,y:n/e||0}}function D(e,t){return e===t?Ae:he(e)>=he(t)?0<e?Pe:Oe:0<t?Ie:Le}function R(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return Math.sqrt(i*i+r*r)}function M(e,t,n){n||(n=Ue);var i=t[n[0]]-e[n[0]],r=t[n[1]]-e[n[1]];return 180*Math.atan2(r,i)/Math.PI}function U(e,t){return M(t[1],t[0],Ne)-M(e[1],e[0],Ne)}function N(e,t){return R(t[0],t[1],Ne)/R(e[0],e[1],Ne)}function j(){this.evEl=Be,this.evWin=Fe,this.allow=!0,this.pressed=!1,k.apply(this,arguments)}function B(){this.evEl=Ve,this.evWin=We,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=Ge,this.evWin=$e,this.started=!1,k.apply(this,arguments)}function q(e,t){var n=b(e.touches),i=b(e.changedTouches);return t&(Ee|xe)&&(n=_(n.concat(i),"identifier",!0)),[n,i]}function H(){this.evTarget=Ye,this.targetIds={},k.apply(this,arguments)}function V(e,t){var n=b(e.touches),i=this.targetIds;if(t&(ke|Ce)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,a,s=b(e.changedTouches),o=[],u=this.target;if(a=n.filter(function(e){return m(e.target,u)}),t===ke)for(r=0;r<a.length;)i[a[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&o.push(s[r]),t&(Ee|xe)&&delete i[s[r].identifier],r++;return o.length?[_(a.concat(o),"identifier",!0),o]:void 0}function W(){k.apply(this,arguments);var e=l(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new j(this.manager,e)}function z(e,t){this.manager=e,this.set(t)}function G(e){if(g(e,tt))return tt;var t=g(e,nt),n=g(e,it);return t&&n?nt+" "+it:t||n?t?nt:it:g(e,et)?et:Ze}function $(e){this.id=S(),this.manager=null,this.options=s(e||{},this.defaults),this.options.enable=h(this.options.enable,!0),this.state=rt,this.simultaneous={},this.requireFail=[]}function X(e){return e&lt?"cancel":e&ot?"end":e&st?"move":e&at?"start":""}function Y(e){return e==Le?"down":e==Ie?"up":e==Pe?"left":e==Oe?"right":""}function K(e,t){var n=t.manager;return n?n.get(e):e}function Q(){$.apply(this,arguments)}function J(){Q.apply(this,arguments),this.pX=null,this.pY=null}function Z(){Q.apply(this,arguments)}function ee(){$.apply(this,arguments),this._timer=null,this._input=null}function te(){Q.apply(this,arguments)}function ne(){Q.apply(this,arguments)}function ie(){$.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function re(e,t){return(t=t||{}).recognizers=h(t.recognizers,re.defaults.preset),new ae(e,t)}function ae(e,t){t=t||{},this.options=s(t,re.defaults),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=C(this),this.touchAction=new z(this,this.options.touchAction),se(this,!0),r(t.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function se(e,n){var i=e.element;r(e.options.cssProps,function(e,t){i.style[T(i.style,t)]=n?e:""})}function oe(e,t){var n=i.createEvent("Event");n.initEvent(e,!0,!0),(n.gesture=t).target.dispatchEvent(n)}var ue=["","webkit","moz","MS","ms","o"],le=i.createElement("div"),ce="function",de=Math.round,he=Math.abs,fe=Date.now,pe=1,me=/mobile|tablet|ip(ad|hone|od)|android/i,ge="ontouchstart"in e,ye=T(e,"PointerEvent")!==d,ve=ge&&me.test(navigator.userAgent),be="touch",_e="pen",Te="mouse",Se="kinect",we=25,ke=1,Ce=2,Ee=4,xe=8,Ae=1,Pe=2,Oe=4,Ie=8,Le=16,De=Pe|Oe,Re=Ie|Le,Me=De|Re,Ue=["x","y"],Ne=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(w(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(w(this.element),this.evWin,this.domHandler)}};var je={mousedown:ke,mousemove:Ce,mouseup:Ee},Be="mousedown",Fe="mousemove mouseup";u(j,k,{handler:function(e){var t=je[e.type];t&ke&&0===e.button&&(this.pressed=!0),t&Ce&&1!==e.which&&(t=Ee),this.pressed&&this.allow&&(t&Ee&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:Te,srcEvent:e}))}});var qe={pointerdown:ke,pointermove:Ce,pointerup:Ee,pointercancel:xe,pointerout:xe},He={2:be,3:_e,4:Te,5:Se},Ve="pointerdown",We="pointermove pointerup pointercancel";e.MSPointerEvent&&(Ve="MSPointerDown",We="MSPointerMove MSPointerUp MSPointerCancel"),u(B,k,{handler:function(e){var t=this.store,n=!1,i=e.type.toLowerCase().replace("ms",""),r=qe[i],a=He[e.pointerType]||e.pointerType,s=a==be,o=v(t,e.pointerId,"pointerId");r&ke&&(0===e.button||s)?o<0&&(t.push(e),o=t.length-1):r&(Ee|xe)&&(n=!0),o<0||(t[o]=e,this.callback(this.manager,r,{pointers:t,changedPointers:[e],pointerType:a,srcEvent:e}),n&&t.splice(o,1))}});var ze={touchstart:ke,touchmove:Ce,touchend:Ee,touchcancel:xe},Ge="touchstart",$e="touchstart touchmove touchend touchcancel";u(F,k,{handler:function(e){var t=ze[e.type];if(t===ke&&(this.started=!0),this.started){var n=q.call(this,e,t);t&(Ee|xe)&&0==n[0].length-n[1].length&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:be,srcEvent:e})}}});var Xe={touchstart:ke,touchmove:Ce,touchend:Ee,touchcancel:xe},Ye="touchstart touchmove touchend touchcancel";u(H,k,{handler:function(e){var t=Xe[e.type],n=V.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:be,srcEvent:e})}}),u(W,k,{handler:function(e,t,n){var i=n.pointerType==be,r=n.pointerType==Te;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;t&(Ee|xe)&&(this.mouse.allow=!0),this.callback(e,t,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ke=T(le.style,"touchAction"),Qe=Ke!==d,Je="compute",Ze="auto",et="manipulation",tt="none",nt="pan-x",it="pan-y";z.prototype={set:function(e){e==Je&&(e=this.compute()),Qe&&(this.manager.element.style[Ke]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return r(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),G(t.join(" "))},preventDefaults:function(e){if(!Qe){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)return void t.preventDefault();var i=this.actions,r=g(i,tt),a=g(i,it),s=g(i,nt);return r||a&&n&De||s&&n&Re?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var rt=1,at=2,st=4,ot=8,ut=ot,lt=16,ct=32;$.prototype={defaults:{},set:function(e){return a(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(n(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=K(e,this)).id]||(t[e.id]=e).recognizeWith(this),this},dropRecognizeWith:function(e){return n(e,"dropRecognizeWith",this)||(e=K(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(n(e,"requireFailure",this))return this;var t=this.requireFail;return-1===v(t,e=K(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(n(e,"dropRequireFailure",this))return this;e=K(e,this);var t=v(this.requireFail,e);return-1<t&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return 0<this.requireFail.length},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?X(i):""),t)}var n=this,i=this.state;i<ot&&e(!0),e(),ot<=i&&e(!0)},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=ct)},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(ct|rt)))return!1;e++}return!0},recognize:function(e){var t=a({},e);return c(this.options.enable,[this,t])?(this.state&(ut|lt|ct)&&(this.state=rt),this.state=this.process(t),void(this.state&(at|st|ot|lt)&&this.tryEmit(t))):(this.reset(),void(this.state=ct))},process:function(){},getTouchAction:function(){},reset:function(){}},u(Q,$,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,i=t&(at|st),r=this.attrTest(e);return i&&(n&xe||!r)?t|lt:i||r?n&Ee?t|ot:t&at?t|st:at:ct}}),u(J,Q,{defaults:{event:"pan",threshold:10,pointers:1,direction:Me},getTouchAction:function(){var e=this.options.direction,t=[];return e&De&&t.push(it),e&Re&&t.push(nt),t},directionTest:function(e){var t=this.options,n=!0,i=e.distance,r=e.direction,a=e.deltaX,s=e.deltaY;return r&t.direction||(t.direction&De?(r=0===a?Ae:a<0?Pe:Oe,n=a!=this.pX,i=Math.abs(e.deltaX)):(r=0===s?Ae:s<0?Ie:Le,n=s!=this.pY,i=Math.abs(e.deltaY))),e.direction=r,n&&i>t.threshold&&r&t.direction},attrTest:function(e){return Q.prototype.attrTest.call(this,e)&&(this.state&at||!(this.state&at)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Y(e.direction);t&&this.manager.emit(this.options.event+t,e),this._super.emit.call(this,e)}}),u(Z,Q,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[tt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&at)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),u(ee,$,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Ze]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime>t.time;if(this._input=e,!i||!n||e.eventType&(Ee|xe)&&!r)this.reset();else if(e.eventType&ke)this.reset(),this._timer=o(function(){this.state=ut,this.tryEmit()},t.time,this);else if(e.eventType&Ee)return ut;return ct},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===ut&&(e&&e.eventType&Ee?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=fe(),this.manager.emit(this.options.event,this._input)))}}),u(te,Q,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[tt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&at)}}),u(ne,Q,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:De|Re,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return n&(De|Re)?t=e.velocity:n&De?t=e.velocityX:n&Re&&(t=e.velocityY),this._super.attrTest.call(this,e)&&n&e.direction&&e.distance>this.options.threshold&&he(t)>this.options.velocity&&e.eventType&Ee},emit:function(e){var t=Y(e.direction);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(ie,$,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[et]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,i=e.distance<t.threshold,r=e.deltaTime<t.time;if(this.reset(),e.eventType&ke&&0===this.count)return this.failTimeout();if(i&&r&&n){if(e.eventType!=Ee)return this.failTimeout();var a=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||R(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,
s&&a?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=o(function(){this.state=ut,this.tryEmit()},t.interval,this),at):ut}return ct},failTimeout:function(){return this._timer=o(function(){this.state=ct},this.options.interval,this),ct},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ut&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),re.VERSION="2.0.4",re.defaults={domEvents:!1,touchAction:Je,enable:!0,inputTarget:null,inputClass:null,preset:[[te,{enable:!1}],[Z,{enable:!1},["rotate"]],[ne,{direction:De}],[J,{direction:De},["swipe"]],[ie],[ie,{event:"doubletap",taps:2},["tap"]],[ee]],cssProps:{userSelect:"default",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var dt=1,ht=2;ae.prototype={set:function(e){return a(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?ht:dt},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,i=this.recognizers,r=t.curRecognizer;(!r||r&&r.state&ut)&&(r=t.curRecognizer=null);for(var a=0;a<i.length;)n=i[a],t.stopped===ht||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(e),!r&&n.state&(at|st|ot)&&(r=t.curRecognizer=n),a++}},get:function(e){if(e instanceof $)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(n(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),(e.manager=this).touchAction.update(),e},remove:function(e){if(n(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(v(t,e),1),this.touchAction.update(),this},on:function(e,t){var n=this.handlers;return r(y(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return r(y(e),function(e){t?n[e].splice(v(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&oe(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](t),i++}},destroy:function(){this.element&&se(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},a(re,{INPUT_START:ke,INPUT_MOVE:Ce,INPUT_END:Ee,INPUT_CANCEL:xe,STATE_POSSIBLE:rt,STATE_BEGAN:at,STATE_CHANGED:st,STATE_ENDED:ot,STATE_RECOGNIZED:ut,STATE_CANCELLED:lt,STATE_FAILED:ct,DIRECTION_NONE:Ae,DIRECTION_LEFT:Pe,DIRECTION_RIGHT:Oe,DIRECTION_UP:Ie,DIRECTION_DOWN:Le,DIRECTION_HORIZONTAL:De,DIRECTION_VERTICAL:Re,DIRECTION_ALL:Me,Manager:ae,Input:k,TouchAction:z,TouchInput:H,MouseInput:j,PointerEventInput:B,TouchMouseInput:W,SingleTouchInput:F,Recognizer:$,AttrRecognizer:Q,Tap:ie,Pan:J,Swipe:ne,Pinch:Z,Rotate:te,Press:ee,on:f,off:p,each:r,merge:s,extend:a,inherit:u,bindFn:l,prefixed:T}),typeof define==ce&&define.amd?define(function(){return re}):"undefined"!=typeof module&&module.exports?module.exports=re:e[t]=re}(window,document,"Hammer"),function(e){"function"==typeof define&&define.amd?define(["jquery","hammerjs"],e):"object"==typeof exports?e(require("jquery"),require("hammerjs")):e(jQuery,Hammer)}(function(i,r){function t(e,t){var n=i(e);n.data("hammer")||n.data("hammer",new r(n[0],t))}var n;i.fn.hammer=function(e){return this.each(function(){t(this,e)})},r.Manager.prototype.emit=(n=r.Manager.prototype.emit,function(e,t){n.call(this,e,t),i(this.element).trigger({type:e,gesture:t})})}),function(e){e.Package?Materialize={}:e.Materialize={}}(window),function(e){for(var i=0,t=["webkit","moz"],n=e.requestAnimationFrame,r=e.cancelAnimationFrame,a=t.length;0<=--a&&!n;)n=e[t[a]+"RequestAnimationFrame"],r=e[t[a]+"CancelRequestAnimationFrame"];n&&r||(n=function(e){var t=+Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},r=clearTimeout),e.requestAnimationFrame=n,e.cancelAnimationFrame=r}(window),Materialize.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},Materialize.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),Materialize.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=)/g,"\\$1")},Materialize.elementOrParentIsFixed=function(e){var t=$(e),n=t.add(t.parents()),i=!1;return n.each(function(){if("fixed"===$(this).css("position"))return!(i=!0)}),i};var Vel,getTime=Date.now||function(){return(new Date).getTime()};Materialize.throttle=function(n,i,r){var a,s,o,u=null,l=0;r||(r={});var c=function(){l=!1===r.leading?0:getTime(),u=null,o=n.apply(a,s),a=s=null};return function(){var e=getTime();l||!1!==r.leading||(l=e);var t=i-(e-l);return a=this,s=arguments,t<=0?(clearTimeout(u),u=null,l=e,o=n.apply(a,s),a=s=null):u||!1===r.trailing||(u=setTimeout(c,t)),o}},Vel=jQuery?jQuery.Velocity:$?$.Velocity:Velocity,function(p){p.fn.collapsible=function(d,h){var e={accordion:undefined,onOpen:undefined,onClose:undefined},f=d;return d=p.extend(e,d),this.each(function(){function n(e){u=t.find("> li > .collapsible-header"),e.hasClass("active")?e.parent().addClass("active"):e.parent().removeClass("active"),e.parent().hasClass("active")?e.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){p(this).css("height","")}}):e.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){p(this).css("height","")}}),u.not(e).removeClass("active").parent().removeClass("active"),u.not(e).parent().children(".collapsible-body").stop(!0,!1).each(function(){p(this).is(":visible")&&p(this).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){p(this).css("height",""),a(p(this).siblings(".collapsible-header"))}})})}function i(e){e.hasClass("active")?e.parent().addClass("active"):e.parent().removeClass("active"),e.parent().hasClass("active")?e.siblings(".collapsible-body").stop(!0,!1).slideDown({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){p(this).css("height","")}}):e.siblings(".collapsible-body").stop(!0,!1).slideUp({duration:350,easing:"easeOutQuart",queue:!1,complete:function(){p(this).css("height","")}})}function r(e,t){t||e.toggleClass("active"),d.accordion||"accordion"===l||l===undefined?n(e):i(e),a(e)}function a(e){e.hasClass("active")?"function"==typeof d.onOpen&&d.onOpen.call(this,e.parent()):"function"==typeof d.onClose&&d.onClose.call(this,e.parent())}function s(e){return 0<o(e).length}function o(e){return e.closest("li > .collapsible-header")}function e(){t.off("click.collapse","> li > .collapsible-header")}var t=p(this),u=p(this).find("> li > .collapsible-header"),l=t.data("collapsible");if("destroy"!==f)if(0<=h&&h<u.length){var c=u.eq(h);c.length&&("open"===f||"close"===f&&c.hasClass("active"))&&r(c)}else e(),t.on("click.collapse","> li > .collapsible-header",function(e){var t=p(e.target);s(t)&&(t=o(t)),r(t)}),d.accordion||"accordion"===l||l===undefined?r(u.filter(".active").first(),!0):u.filter(".active").each(function(){r(p(this),!0)});else e()})},p(document).on("ready turbolinks:load",function(){p(".collapsible").collapsible()})}(jQuery),function(b){b.fn.scrollTo=function(e){return b(this).scrollTop(b(this).scrollTop()-b(this).offset().top+b(e).offset().top),this},b.fn.dropdown=function(e){var t={inDuration:300,outDuration:225,constrainWidth:!0,hover:!1,gutter:0,belowOrigin:!1,alignment:"left",stopPropagation:!1};return"open"===e?(this.each(function(){b(this).trigger("open")}),!1):"close"===e?(this.each(function(){b(this).trigger("close")}),!1):void this.each(function(){function f(){m.data("induration")!==undefined&&(g.inDuration=m.data("induration")),m.data("outduration")!==undefined&&(g.outDuration=m.data("outduration")),m.data("constrainwidth")!==undefined&&(g.constrainWidth=m.data("constrainwidth")),m.data("hover")!==undefined&&(g.hover=m.data("hover")),m.data("gutter")!==undefined&&(g.gutter=m.data("gutter")),m.data("beloworigin")!==undefined&&(g.belowOrigin=m.data("beloworigin")),m.data("alignment")!==undefined&&(g.alignment=m.data("alignment")),m.data("stoppropagation")!==undefined&&(g.stopPropagation=m.data("stoppropagation"))}function n(e){"focus"===e&&(y=!0),f(),v.addClass("active"),m.addClass("active"),!0===g.constrainWidth?v.css("width",m.outerWidth()):v.css("white-space","nowrap");var t=window.innerHeight,n=m.innerHeight(),i=m.offset().left,r=m.offset().top-b(window).scrollTop(),a=g.alignment,s=0,o=0,u=0;!0===g.belowOrigin&&(u=n);var l=0,c=0,d=m.parent();if(d.is("body")||(d[0].scrollHeight>d[0].clientHeight&&(l=d[0].scrollTop),d[0].scrollWidth>d[0].clientWidth&&(c=d[0].scrollLeft)),i+v.innerWidth()>b(window).width()?a="right":i-v.innerWidth()+m.innerWidth()<0&&(a="left"),r+v.innerHeight()>t)if(r+n-v.innerHeight()<0){var h=t-r-u;v.css("max-height",h)}else u||(u+=n),u-=v.innerHeight();if("left"===a)s=g.gutter,o=m.position().left+s;else if("right"===a){v.stop(!0,!0).css({opacity:0,left:0}),o=m.position().left+m.outerWidth()-v.outerWidth()+(s=-g.gutter)}v.css({position:"absolute",top:m.position().top+u+l,left:o+c}),v.slideDown({queue:!1,duration:g.inDuration,easing:"easeOutCubic",complete:function(){b(this).css("height","")}}).animate({opacity:1},{queue:!1,duration:g.inDuration,easing:"easeOutSine"}),setTimeout(function(){b(document).on("click."+v.attr("id"),function(){p(),b(document).off("click."+v.attr("id"))})},0)}function p(){y=!1,v.fadeOut(g.outDuration),v.removeClass("active"),m.removeClass("active"),b(document).off("click."+v.attr("id")),setTimeout(function(){v.css("max-height","")},g.outDuration)}var m=b(this),g=b.extend({},t,e),y=!1,v=b("#"+m.attr("data-activates"));if(f(),m.after(v),g.hover){var i=!1;m.off("click."+m.attr("id")),m.on("mouseenter",function(){!1===i&&(n(),i=!0)}),m.on("mouseleave",function(e){var t=e.toElement||e.relatedTarget;b(t).closest(".dropdown-content").is(v)||(v.stop(!0,!0),p(),i=!1)}),v.on("mouseleave",function(e){var t=e.toElement||e.relatedTarget;b(t).closest(".dropdown-button").is(m)||(v.stop(!0,!0),p(),i=!1)})}else m.off("click."+m.attr("id")),m.on("click."+m.attr("id"),function(e){y||(m[0]!=e.currentTarget||m.hasClass("active")||0!==b(e.target).closest(".dropdown-content").length?m.hasClass("active")&&(p(),b(document).off("click."+v.attr("id"))):(e.preventDefault(),g.stopPropagation&&e.stopPropagation(),n("click")))});m.on("open",function(e,t){n(t)}),m.on("close",p)})},b(document).on("ready turbolinks:load",function(){b(".dropdown-button").dropdown()})}(jQuery),function(c){var d=0,e=0,h=function(){return"materialize-modal-overlay-"+ ++e},t={init:function(l){var e={opacity:.5,inDuration:350,outDuration:250,ready:undefined,complete:undefined,dismissible:!0,startingTop:"4%",endingTop:"10%"};return l=c.extend(e,l),this.each(function(){var o=c(this),e=c(this).attr("id")||"#"+c(this).data("target"),u=function(){var e=o.data("overlay-id"),t=c("#"+e);o.removeClass("open"),c("body").css({overflow:"",width:""}),o.find(".modal-close").off("click.close"),c(document).off("keyup.modal"+e),t.velocity({opacity:0},{duration:l.outDuration,queue:!1,ease:"easeOutQuart"});var n={duration:l.outDuration,queue:!1,ease:"easeOutCubic",complete:function(){c(this).css({display:"none"}),"function"==typeof l.complete&&l.complete.call(this,o),t.remove(),d--}};o.hasClass("bottom-sheet")?o.velocity({bottom:"-100%",opacity:0},n):o.velocity({top:l.startingTop,opacity:0,scaleX:.7},n)},t=function(e){var t=c("body"),n=t.innerWidth();if(t.css("overflow","hidden"),t.width(n),!o.hasClass("open")){var i=h(),r=c('<div class="modal-overlay"></div>'),a=++d;r.attr("id",i).css("z-index",1e3+2*a),o.data("overlay-id",i).css("z-index",1e3+2*a+1),o.addClass("open"),c("body").append(r),l.dismissible&&(r.click(function(){u()}),c(document).on("keyup.modal"+i,function(e){27===e.keyCode&&u()})),o.find(".modal-close").on("click.close",function(){u()}),r.css({display:"block",opacity:0}),o.css({display:"block",opacity:0}),r.velocity({opacity:l.opacity},{duration:l.inDuration,queue:!1,ease:"easeOutCubic"}),o.data("associated-overlay",r[0]);var s={duration:l.inDuration,queue:!1,ease:"easeOutCubic",complete:function(){"function"==typeof l.ready&&l.ready.call(this,o,e)}};o.hasClass("bottom-sheet")?o.velocity({bottom:"0",opacity:1},s):(c.Velocity.hook(o,"scaleX",.7),o.css({top:l.startingTop}),o.velocity({top:l.endingTop,opacity:1,scaleX:"1"},s))}};c(document).off("click.modalTrigger",'a[href="#'+e+'"], [data-target="'+e+'"]'),c(this).off("openModal"),c(this).off("closeModal"),c(document).on("click.modalTrigger",'a[href="#'+e+'"], [data-target="'+e+'"]',function(e){l.startingTop=(c(this).offset().top-c(window).scrollTop())/1.15,t(c(this)),e.preventDefault()}),c(this).on("openModal",function(){c(this).attr("href")||c(this).data("target");t()}),c(this).on("closeModal",function(){u()})})},open:function(){t.init.apply(this,arguments),c(this).trigger("openModal")},close:function(){c(this).trigger("closeModal")}};c.fn.modal=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("Method "+e+" does not exist on jQuery.modal"):t.init.apply(this,arguments)}}(jQuery),function(v){v.fn.materialbox=function(){return this.each(function(){function d(){m=!1;var e=y.parent(".material-placeholder"),t=(window.innerWidth,window.innerHeight,y.data("width")),n=y.data("height");y.velocity("stop",!0),v("#materialbox-overlay").velocity("stop",!0),v(".materialbox-caption").velocity("stop",!0),v(window).off("scroll.materialbox"),v(document).off("keyup.materialbox"),v(window).off("resize.materialbox"),v("#materialbox-overlay").velocity({opacity:0},{duration:i,queue:!1,easing:"easeOutQuad",complete:function(){p=!1,v(this).remove()}}),y.velocity({width:t,height:n,left:0,top:0},{duration:i,queue:!1,easing:"easeOutQuad",complete:function(){e.css({height:"",width:"",position:"",top:"",left:""}),y.removeAttr("style"),y.attr("style",r),y.removeClass("active"),m=!0,h&&h.css("overflow","")}}),v(".materialbox-caption").velocity({opacity:0},{duration:i,queue:!1,easing:"easeOutQuad",complete:function(){v(this).remove()}})}if(!v(this).hasClass("initialized")){v(this).addClass("initialized");var h,f,p=!1,m=!0,g=275,i=200,y=v(this),e=v("<div></div>").addClass("material-placeholder"),r=y.attr("style");y.wrap(e),y.on("click",function(){var e=y.parent(".material-placeholder"),t=window.innerWidth,n=window.innerHeight,i=y.width(),r=y.height();if(!1===m)return d(),!1;if(p&&!0===m)return d(),!1;m=!1,y.addClass("active"),p=!0,e.css({width:e[0].getBoundingClientRect().width,height:e[0].getBoundingClientRect().height,position:"relative",top:0,left:0}),h=undefined,f=e[0].parentNode;for(;null!==f&&!v(f).is(document);){var a=v(f);"visible"!==a.css("overflow")&&(a.css("overflow","visible"),h=h===undefined?a:h.add(a)),f=f.parentNode}y.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}).data("width",i).data("height",r);var s=v('<div id="materialbox-overlay"></div>').css({opacity:0}).click(function(){!0===m&&d()});y.before(s);var o=s[0].getBoundingClientRect();if(s.css({width:t,height:n,left:-1*o.left,top:-1*o.top}),s.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"}),""!==y.data("caption")){var u=v('<div class="materialbox-caption"></div>');u.text(y.data("caption")),v("body").append(u),u.css({display:"inline"}),u.velocity({opacity:1},{duration:g,queue:!1,easing:"easeOutQuad"})}var l=0,c=0;r/n<i/t?c=(l=.9*t)*(r/i):(l=.9*n*(i/r),c=.9*n),y.hasClass("responsive-img")?y.velocity({"max-width":l,width:i},{duration:0,queue:!1,complete:function(){y.css({left:0,top:0}).velocity({height:c,width:l,left:v(document).scrollLeft()+t/2-y.parent(".material-placeholder").offset().left-l/2,top:v(document).scrollTop()+n/2-y.parent(".material-placeholder").offset().top-c/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){m=!0}})}}):y.css("left",0).css("top",0).velocity({height:c,width:l,left:v(document).scrollLeft()+t/2-y.parent(".material-placeholder").offset().left-l/2,top:v(document).scrollTop()+n/2-y.parent(".material-placeholder").offset().top-c/2},{duration:g,queue:!1,easing:"easeOutQuad",complete:function(){m=!0}}),v(window).on("scroll.materialbox",function(){p&&d()}),v(window).on("resize.materialbox",function(){p&&d()}),v(document).on("keyup.materialbox",function(e){27===e.keyCode&&!0===m&&p&&d()})})}})},v(document).on("ready turbolinks:load",function(){v(".materialboxed").materialbox()})}(jQuery),function(h){h.fn.parallax=function(){var d=h(window).width();return this.each(function(){function e(e){var t;t=d<601?0<c.height()?c.height():c.children("img").height():0<c.height()?c.height():500;var n=c.children("img").first(),i=n.height()-t,r=c.offset().top+t,a=c.offset().top,s=h(window).scrollTop(),o=window.innerHeight,u=(s+o-a)/(t+o),l=Math.round(i*u);e&&n.css("display","block"),s<r&&a<s+o&&n.css("transform","translate3D(-50%,"+l+"px, 0)")}var c=h(this);c.addClass("parallax"),c.children("img").one("load",function(){e(!0)}).each(function(){this.complete&&h(this).trigger("load")}),h(window).scroll(function(){d=h(window).width(),e(!1)}),h(window).resize(function(){d=h(window).width(),e(!1)})})}}(jQuery),function(_){var t={init:function(v){var e={onShow:null,swipeable:!1,responsiveThreshold:Infinity};v=_.extend(e,v);var b=Materialize.objectSelectorString(_(this));return this.each(function(e){var n,i,r,t,a=b+e,s=_(this),o=_(window).width(),u=s.find("li.tab a"),l=s.width(),c=_(),d=Math.max(l,s[0].scrollWidth)/u.length,h=prev_index=0,f=!1,p=300,m=function(e){return Math.ceil(l-e.position().left-e.outerWidth()-s.scrollLeft())},g=function(e){return Math.floor(e.position().left+s.scrollLeft())},y=function(e){0<=h-e?(t.velocity({right:m(n)},{duration:p,queue:!1,easing:"easeOutQuad"}),t.velocity({left:g(n)},{duration:p,queue:!1,easing:"easeOutQuad",delay:90})):(t.velocity({left:g(n)},{duration:p,queue:!1,easing:"easeOutQuad"}),t.velocity({right:m(n)},{duration:p,queue:!1,easing:"easeOutQuad",delay:90}))};v.swipeable&&o>v.responsiveThreshold&&(v.swipeable=!1),0===(n=_(u.filter('[href="'+location.hash+'"]'))).length&&(n=_(this).find("li.tab a.active").first()),0===n.length&&(n=_(this).find("li.tab a").first()),n.addClass("active"),(h=u.index(n))<0&&(h=0),n[0]!==undefined&&(i=_(n[0].hash)).addClass("active"),s.find(".indicator").length||s.append('<li class="indicator"></li>'),t=s.find(".indicator"),s.append(t),s.is(":visible")&&setTimeout(function(){t.css({right:m(n)}),t.css({left:g(n)})},0),_(window).off("resize.tabs-"+a).on("resize.tabs-"+a,function(){l=s.width(),d=Math.max(l,s[0].scrollWidth)/u.length,h<0&&(h=0),0!==d&&0!==l&&(t.css({right:m(n)}),t.css({left:g(n)}))}),v.swipeable?(u.each(function(){var e=_(Materialize.escapeHash(this.hash));e.addClass("carousel-item"),c=c.add(e)}),r=c.wrapAll('<div class="tabs-content carousel"></div>'),c.css("display",""),_(".tabs-content.carousel").carousel({fullWidth:!0,noWrap:!0,onCycleTo:function(e){if(!f){var t=h;h=r.index(e),n=u.eq(h),y(t),"function"==typeof v.onShow&&v.onShow.call(s[0],i)}}})):u.not(n).each(function(){_(Materialize.escapeHash(this.hash)).hide()}),s.off("click.tabs").on("click.tabs","a",function(e){if(_(this).parent().hasClass("disabled"))e.preventDefault();else if(!_(this).attr("target")){f=!0,l=s.width(),d=Math.max(l,s[0].scrollWidth)/u.length,n.removeClass("active");var t=i;n=_(this),i=_(Materialize.escapeHash(this.hash)),u=s.find("li.tab a");n.position();n.addClass("active"),prev_index=h,(h=u.index(_(this)))<0&&(h=0),v.swipeable?c.length&&c.carousel("set",h,function(){"function"==typeof v.onShow&&v.onShow.call(s[0],i)}):(i!==undefined&&(i.show(),i.addClass("active"),"function"==typeof v.onShow&&v.onShow.call(this,i)),t===undefined||t.is(i)||(t.hide(),t.removeClass("active"))),setTimeout(function(){f=!1},p),y(prev_index),e.preventDefault()}})})},select_tab:function(e){this.find('a[href="#'+e+'"]').trigger("click")}};_.fn.tabs=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void _.error("Method "+e+" does not exist on jQuery.tabs"):t.init.apply(this,arguments)},_(document).on("ready turbolinks:load",function(){_("ul.tabs").tabs()})}(jQuery),function(s){s.fn.tooltip=function(a){var _=5,e={delay:350,tooltip:"",position:"bottom",html:!1};return"remove"===a?(this.each(function(){s("#"+s(this).attr("data-tooltip-id")).remove(),s(this).off("mouseenter.tooltip mouseleave.tooltip")}),!1):(a=s.extend(e,a),this.each(function(){var t,e,p,n,m,g,i=Materialize.guid(),y=s(this);y.attr("data-tooltip-id")&&s("#"+y.attr("data-tooltip-id")).remove(),y.attr("data-tooltip-id",i);var v=function(){t=y.attr("data-html")?"true"===y.attr("data-html"):a.html,e=(e=y.attr("data-delay"))===undefined||""===e?a.delay:e,p=(p=y.attr("data-position"))===undefined||""===p?a.position:p,n=(n=y.attr("data-tooltip"))===undefined||""===n?a.tooltip:n};v(),m=function(){var e=s('<div class="material-tooltip"></div>');return n=t?s("<span></span>").html(n):s("<span></span>").text(n),e.append(n).appendTo(s("body")).attr("id",i),(g=s('<div class="backdrop"></div>')).appendTo(e),e}(),y.off("mouseenter.tooltip mouseleave.tooltip");var r,b=!1;y.on({"mouseenter.tooltip":function(){r=setTimeout(function(){v(),b=!0,m.velocity("stop"),g.velocity("stop"),m.css({visibility:"visible",left:"0px",top:"0px"});var e,t,n,i=y.outerWidth(),r=y.outerHeight(),a=m.outerHeight(),s=m.outerWidth(),o="0px",u="0px",l=g[0].offsetWidth,c=g[0].offsetHeight,d=8,h=8,f=0;"top"===p?(e=y.offset().top-a-_,t=y.offset().left+i/2-s/2,n=T(t,e,s,a),o="-10px",g.css({bottom:0,left:0,borderRadius:"14px 14px 0 0",transformOrigin:"50% 100%",marginTop:a,marginLeft:s/2-l/2})):"left"===p?(e=y.offset().top+r/2-a/2,t=y.offset().left-s-_,n=T(t,e,s,a),u="-10px",g.css({top:"-7px",right:0,width:"14px",height:"14px",borderRadius:"14px 0 0 14px",transformOrigin:"95% 50%",marginTop:a/2,marginLeft:s})):"right"===p?(e=y.offset().top+r/2-a/2,t=y.offset().left+i+_,n=T(t,e,s,a),u="+10px",g.css({top:"-7px",left:0,width:"14px",height:"14px",borderRadius:"0 14px 14px 0",transformOrigin:"5% 50%",marginTop:a/2,marginLeft:"0px"})):(e=y.offset().top+y.outerHeight()+_,t=y.offset().left+i/2-s/2,n=T(t,e,s,a),o="+10px",g.css({top:0,left:0,marginLeft:s/2-l/2})),m.css({top:n.y,left:n.x}),d=Math.SQRT2*s/parseInt(l),h=Math.SQRT2*a/parseInt(c),f=Math.max(d,h),m.velocity({translateY:o,translateX:u},{duration:350,queue:!1}).velocity({opacity:1},{duration:300,delay:50,queue:!1}),g.css({visibility:"visible"}).velocity({opacity:1},{duration:55,delay:0,queue:!1}).velocity({scaleX:f,scaleY:f},{duration:300,delay:0,queue:!1,easing:"easeInOutQuad"})},e)},"mouseleave.tooltip":function(){b=!1,clearTimeout(r),setTimeout(function(){!0!==b&&(m.velocity({opacity:0,translateY:0,translateX:0},{duration:225,queue:!1}),g.velocity({opacity:0,scaleX:1,scaleY:1},{duration:225,queue:!1,complete:function(){g.css({visibility:"hidden"}),m.css({visibility:"hidden"}),b=!1}}))},225)}})}))};var T=function(e,t,n,i){var r=e,a=t;return r<0?r=4:r+n>window.innerWidth&&(r-=r+n-window.innerWidth),a<0?a=4:a+i>window.innerHeight+s(window).scrollTop&&(a-=a+i-window.innerHeight),{x:r,y:a}};s(document).on("ready turbolinks:load",function(){s(".tooltipped").tooltip()})}(jQuery),function(n){"use strict";function t(e){return null!==e&&e===e.window}function a(e){return t(e)?e:9===e.nodeType&&e.defaultView}function l(e){var t,n,i={top:0,left:0},r=e&&e.ownerDocument;return t=r.documentElement,typeof e.getBoundingClientRect!=typeof undefined&&(i=e.getBoundingClientRect()),n=a(r),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}}function c(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}function i(e){if(!1===u.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentElement;){if(!(n instanceof SVGElement||-1===n.className.indexOf("waves-effect"))){t=n;break}if(-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentElement}return t}function r(e){var t=i(e);null!==t&&(d.show(e,t),"ontouchstart"in n&&(t.addEventListener("touchend",d.hide,!1),t.addEventListener("touchcancel",d.hide,!1)),t.addEventListener("mouseup",d.hide,!1),t.addEventListener("mouseleave",d.hide,!1))}var e=e||{},s=document.querySelectorAll.bind(document),d={duration:750,show:function(e,t){if(2===e.button)return!1;var n=t||this,i=document.createElement("div");i.className="waves-ripple",n.appendChild(i);var r=l(n),a=e.pageY-r.top,s=e.pageX-r.left,o="scale("+n.clientWidth/100*10+")";"touches"in e&&(a=e.touches[0].pageY-r.top,s=e.touches[0].pageX-r.left),i.setAttribute("data-hold",Date.now()),i.setAttribute("data-scale",o),i.setAttribute("data-x",s),i.setAttribute("data-y",a);var u={top:a+"px",left:s+"px"};i.className=i.className+" waves-notransition",i.setAttribute("style",c(u)),i.className=i.className.replace("waves-notransition",""),u["-webkit-transform"]=o,u["-moz-transform"]=o,u["-ms-transform"]=o,u["-o-transform"]=o,u.transform=o,u.opacity="1",u["-webkit-transition-duration"]=d.duration+"ms",u["-moz-transition-duration"]=d.duration+"ms",u["-o-transition-duration"]=d.duration+"ms",u["transition-duration"]=d.duration+"ms",u["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",i.setAttribute("style",c(u))},hide:function(t){u.touchup(t);var n=this,i=(n.clientWidth,null),e=n.getElementsByClassName("waves-ripple");if(!(0<e.length))return!1;var r=(i=e[e.length-1]).getAttribute("data-x"),a=i.getAttribute("data-y"),s=i.getAttribute("data-scale"),o=350-(Date.now()-Number(i.getAttribute("data-hold")));o<0&&(o=0),setTimeout(function(){var e={top:a+"px",left:r+"px",opacity:"0","-webkit-transition-duration":d.duration+"ms","-moz-transition-duration":d.duration+"ms","-o-transition-duration":d.duration+"ms","transition-duration":d.duration+"ms","-webkit-transform":s,"-moz-transform":s,"-ms-transform":s,"-o-transform":s,transform:s};i.setAttribute("style",c(e)),setTimeout(function(){try{n.removeChild(i)}catch(t){return!1}},d.duration)},o)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),r.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},u={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?u.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout(function(){0<u.touches&&(u.touches-=1)},500):"mousedown"===e.type&&0<u.touches&&(t=!1),t},touchup:function(e){u.allowEvent(e)}};e.displayEffect=function(e){"duration"in(e=e||{})&&(d.duration=e.duration),d.wrapInput(s(".waves-effect")),"ontouchstart"in n&&document.body.addEventListener("touchstart",r,!1),document.body.addEventListener("mousedown",r,!1)},e.attach=function(e){"input"===e.tagName.toLowerCase()&&(d.wrapInput([e]),e=e.parentElement),"ontouchstart"in n&&e.addEventListener("touchstart",r,!1),e.addEventListener("mousedown",r,!1)},n.Waves=e,document.addEventListener("DOMContentLoaded",function(){e.displayEffect()},!1)}(window),Materialize.toast=function(e,t,s,o){function n(e){var r=document.createElement("div");if(r.classList.add("toast"),s)for(var t=s.split(" "),n=0,i=t.length;n<i;n++)r.classList.add(t[n]);("object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName)?r.appendChild(e):e instanceof jQuery?r.appendChild(e[0]):r.innerHTML=e;var a=new Hammer(r,{prevent_default:!1});return a.on("pan",function(e){var t=e.deltaX,n=80;r.classList.contains("panning")||r.classList.add("panning");var i=1-Math.abs(t/n);i<0&&(i=0),Vel(r,{left:t,opacity:i},{duration:50,queue:!1,easing:"easeOutQuad"})}),a.on("panend",function(e){var t=e.deltaX,n=80;Math.abs(t)>n?Vel(r,{marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof o&&o(),r.parentNode.removeChild(r)}}):(r.classList.remove("panning"),Vel(r,{left:0,opacity:1},{duration:300,easing:"easeOutExpo",queue:!1}))}),r}s=s||"";var i=document.getElementById("toast-container");null===i&&((i=document.createElement("div")).id="toast-container",document.body.appendChild(i));var r=n(e);e&&i.appendChild(r),r.style.opacity=0,Vel(r,{translateY:"-35px",opacity:1},{duration:300,easing:"easeOutCubic",queue:!1});var a,u=t;null!=u&&(a=setInterval(function(){null===r.parentNode&&window.clearInterval(a),r.classList.contains("panning")||(u-=20),u<=0&&(Vel(r,{opacity:0,marginTop:"-40px"},{duration:375,easing:"easeOutExpo",queue:!1,complete:function(){"function"==typeof o&&o(),this[0].parentNode.removeChild(this[0])}}),window.clearInterval(a))},20))},function(h){var t={init:function(d){var e={menuWidth:300,edge:"left",closeOnClick:!1,draggable:!0,onOpen:null,onClose:null};d=h.extend(e,d),h(this).each(function(){var e=h(this),t=e.attr("data-activates"),u=h("#"+t);300!=d.menuWidth&&u.css("width",d.menuWidth);var s=h('.drag-target[data-sidenav="'+t+'"]');d.draggable?(s.length&&s.remove(),s=h('<div class="drag-target"></div>').attr("data-sidenav",t),h("body").append(s)):s=h(),"left"==d.edge?(u.css("transform","translateX(-100%)"),s.css({left:0})):(u.addClass("right-aligned").css("transform","translateX(100%)"),s.css({right:0})),u.hasClass("fixed")&&992<window.innerWidth&&u.css("transform","translateX(0)"),u.hasClass("fixed")&&h(window).resize(function(){992<window.innerWidth?0!==h("#sidenav-overlay").length&&c?l(!0):u.css("transform","translateX(0%)"):!1===c&&("left"===d.edge?u.css("transform","translateX(-100%)"):u.css("transform","translateX(100%)"))}),!0===d.closeOnClick&&u.on("click.itemclick","a:not(.collapsible-header)",function(){992<window.innerWidth&&u.hasClass("fixed")||l()});var l=function(e){c=!1,h("body").css({overflow:"",width:""}),h("#sidenav-overlay").velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){h(this).remove()}}),"left"===d.edge?(s.css({width:"",right:"",left:"0"}),u.velocity({translateX:"-100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===e&&(u.removeAttr("style"),u.css("width",d.menuWidth))}})):(s.css({width:"",right:"0",left:""}),u.velocity({translateX:"100%"},{duration:200,queue:!1,easing:"easeOutCubic",complete:function(){!0===e&&(u.removeAttr("style"),u.css("width",d.menuWidth))}})),"function"==typeof d.onClose&&d.onClose.call(this,u)},c=!1;d.draggable&&(s.on("click",function(){c&&l()}),s.hammer({prevent_default:!1}).on("pan",function(e){if("touch"==e.gesture.pointerType){e.gesture.direction;var t=e.gesture.center.x,n=e.gesture.center.y;e.gesture.velocityX;if(0===t&&0===n)return;var i,r=h("body"),a=h("#sidenav-overlay"),s=r.innerWidth();if(r.css("overflow","hidden"),r.width(s),0===a.length&&((a=h('<div id="sidenav-overlay"></div>')).css("opacity",0).click(function(){l()}),"function"==typeof d.onOpen&&d.onOpen.call(this,u),h("body").append(a)),"left"===d.edge&&(t>d.menuWidth?t=d.menuWidth:t<0&&(t=0)),"left"===d.edge)t<d.menuWidth/2?c=!1:t>=d.menuWidth/2&&(c=!0),u.css("transform","translateX("+(t-d.menuWidth)+"px)");else{t<window.innerWidth-d.menuWidth/2?c=!0:t>=window.innerWidth-d.menuWidth/2&&(c=!1);var o=t-d.menuWidth/2;o<0&&(o=0),u.css("transform","translateX("+o+"px)")}i="left"===d.edge?t/d.menuWidth:Math.abs((t-window.innerWidth)/d.menuWidth),a.velocity({opacity:i},{duration:10,queue:!1,easing:"easeOutQuad"})}}).on("panend",function(e){if("touch"==e.gesture.pointerType){var t=h("#sidenav-overlay"),n=e.gesture.velocityX,i=e.gesture.center.x,r=i-d.menuWidth,a=i-d.menuWidth/2;0<r&&(r=0),a<0&&(a=0),!1,"left"===d.edge?c&&n<=.3||n<-.5?(0!==r&&u.velocity({translateX:[0,r]},{duration:300,queue:!1,easing:"easeOutQuad"}),t.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),s.css({width:"50%",right:0,left:""}),c=!0):(!c||.3<n)&&(h("body").css({overflow:"",width:""}),u.velocity({translateX:[-1*d.menuWidth-10,r]},{duration:200,queue:!1,easing:"easeOutQuad"}),t.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){"function"==typeof d.onClose&&d.onClose.call(this,u),h(this).remove()}}),s.css({width:"10px",right:"",left:0})):c&&-.3<=n||.5<n?(
0!==a&&u.velocity({translateX:[0,a]},{duration:300,queue:!1,easing:"easeOutQuad"}),t.velocity({opacity:1},{duration:50,queue:!1,easing:"easeOutQuad"}),s.css({width:"50%",right:"",left:0}),c=!0):(!c||n<-.3)&&(h("body").css({overflow:"",width:""}),u.velocity({translateX:[d.menuWidth+10,a]},{duration:200,queue:!1,easing:"easeOutQuad"}),t.velocity({opacity:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){h(this).remove()}}),s.css({width:"10px",right:0,left:""}))}})),e.off("click.sidenav").on("click.sidenav",function(){if(!0===c)c=!1,l();else{var e=h("body"),t=h('<div id="sidenav-overlay"></div>'),n=e.innerWidth();e.css("overflow","hidden"),e.width(n),h("body").append(s),"left"===d.edge?(s.css({width:"50%",right:0,left:""}),u.velocity({translateX:[0,-1*d.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})):(s.css({width:"50%",right:"",left:0}),u.velocity({translateX:[0,d.menuWidth]},{duration:300,queue:!1,easing:"easeOutQuad"})),t.css("opacity",0).click(function(){c=!1,l(),t.velocity({opacity:0},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){h(this).remove()}})}),h("body").append(t),t.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){!(c=!0)}}),"function"==typeof d.onOpen&&d.onOpen.call(this,u)}return!1})})},destroy:function(){var e=h("#sidenav-overlay"),t=h('.drag-target[data-sidenav="'+h(this).attr("data-activates")+'"]');e.trigger("click"),t.remove(),h(this).off("click"),e.remove()},show:function(){this.trigger("click")},hide:function(){h("#sidenav-overlay").trigger("click")}};h.fn.sideNav=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void h.error("Method "+e+" does not exist on jQuery.sideNav"):t.init.apply(this,arguments)}}(jQuery),function(d){function s(s,o,u,l){var c=d();return d.each(h,function(e,t){if(0<t.height()){var n=t.offset().top,i=t.offset().left,r=i+t.width(),a=n+t.height();!(o<i||r<l||u<n||a<s)&&c.push(t)}}),c}function o(e){++f;var t=u.scrollTop(),n=u.scrollLeft(),i=n+u.width(),r=t+u.height(),a=s(t+p.top+e||200,i+p.right,r+p.bottom,n+p.left);d.each(a,function(e,t){"number"!=typeof t.data("scrollSpy:ticks")&&t.triggerHandler("scrollSpy:enter"),t.data("scrollSpy:ticks",f)}),d.each(l,function(e,t){var n=t.data("scrollSpy:ticks");"number"==typeof n&&n!==f&&(t.triggerHandler("scrollSpy:exit"),t.data("scrollSpy:ticks",null))}),l=a}function t(){u.trigger("scrollSpy:winSize")}var u=d(window),h=[],l=[],c=!1,f=0,p={top:0,right:0,bottom:0,left:0};d.scrollSpy=function(e,n){var t={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}};n=d.extend(t,n);var i=[];(e=d(e)).each(function(e,t){h.push(d(t)),d(t).data("scrollSpy:id",e),d('a[href="#'+d(t).attr("id")+'"]').click(function(e){e.preventDefault();var t=d(Materialize.escapeHash(this.hash)).offset().top+1;d("html, body").animate({scrollTop:t-n.scrollOffset},{duration:400,queue:!1,easing:"easeOutCubic"})})}),p.top=n.offsetTop||0,p.right=n.offsetRight||0,p.bottom=n.offsetBottom||0,p.left=n.offsetLeft||0;var r=Materialize.throttle(function(){o(n.scrollOffset)},n.throttle||100),a=function(){d(document).on("ready turbolinks:load",r)};return c||(u.on("scroll",a),u.on("resize",a),c=!0),setTimeout(a,0),e.on("scrollSpy:enter",function(){i=d.grep(i,function(e){return 0!=e.height()});var e=d(this);i[0]?(d(n.getActiveElement(i[0].attr("id"))).removeClass(n.activeClass),e.data("scrollSpy:id")<i[0].data("scrollSpy:id")?i.unshift(d(this)):i.push(d(this))):i.push(d(this)),d(n.getActiveElement(i[0].attr("id"))).addClass(n.activeClass)}),e.on("scrollSpy:exit",function(){if((i=d.grep(i,function(e){return 0!=e.height()}))[0]){d(n.getActiveElement(i[0].attr("id"))).removeClass(n.activeClass);var t=d(this);(i=d.grep(i,function(e){return e.attr("id")!=t.attr("id")}))[0]&&d(n.getActiveElement(i[0].attr("id"))).addClass(n.activeClass)}}),e},d.winSizeSpy=function(e){return d.winSizeSpy=function(){return u},e=e||{throttle:100},u.on("resize",Materialize.throttle(t,e.throttle||100))},d.fn.scrollSpy=function(e){return d.scrollSpy(d(this),e)}}(jQuery),function(b){b(document).on("ready turbolinks:load",function(){function e(e){var t=e.css("font-family"),n=e.css("font-size"),i=e.css("line-height");n&&a.css("font-size",n),t&&a.css("font-family",t),i&&a.css("line-height",i),e.data("original-height")||e.data("original-height",e.height()),"off"===e.attr("wrap")&&a.css("overflow-wrap","normal").css("white-space","pre"),a.text(e.val()+"\n");var r=a.html().replace(/\n/g,"<br>");a.html(r),e.is(":visible")?a.css("width",e.width()):a.css("width",b(window).width()/2),e.data("original-height")<=a.height()?e.css("height",a.height()):e.val().length<e.data("previous-length")&&e.css("height",e.data("original-height")),e.data("previous-length",e.val().length)}Materialize.updateTextFields=function(){b("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea").each(function(e,t){var n=b(this);0<b(t).val().length||b(t).is(":focus")||t.autofocus||n.attr("placeholder")!==undefined?n.siblings("label").addClass("active"):b(t)[0].validity?n.siblings("label").toggleClass("active",!0===b(t)[0].validity.badInput):n.siblings("label").removeClass("active")})};var n="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], textarea";b(document).on("change",n,function(){0===b(this).val().length&&b(this).attr("placeholder")===undefined||b(this).siblings("label").addClass("active"),validate_field(b(this))}),b(document).on("ready turbolinks:load",function(){Materialize.updateTextFields()}),b(document).on("reset",function(e){var t=b(e.target);t.is("form")&&(t.find(n).removeClass("valid").removeClass("invalid"),t.find(n).each(function(){""===b(this).attr("value")&&b(this).siblings("label").removeClass("active")}),t.find("select.initialized").each(function(){var e=t.find("option[selected]").text();t.siblings("input.select-dropdown").val(e)}))}),b(document).on("focus",n,function(){b(this).siblings("label, .prefix").addClass("active")}),b(document).on("blur",n,function(){var e=b(this),t=".prefix";0===e.val().length&&!0!==e[0].validity.badInput&&e.attr("placeholder")===undefined&&(t+=", label"),e.siblings(t).removeClass("active"),validate_field(e)}),window.validate_field=function(e){var t=e.attr("data-length")!==undefined,n=parseInt(e.attr("data-length")),i=e.val().length;0===e.val().length&&!1===e[0].validity.badInput?e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid")):e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid")))};var t="input[type=radio], input[type=checkbox]";b(document).on("keyup.radio",t,function(e){if(9===e.which)return b(this).addClass("tabbed"),void b(this).one("blur",function(){b(this).removeClass("tabbed")})});var a=b(".hiddendiv").first();a.length||(a=b('<div class="hiddendiv common"></div>'),b("body").append(a));var i=".materialize-textarea";b(i).each(function(){var e=b(this);e.data("original-height",e.height()),e.data("previous-length",e.val().length)}),b("body").on("keyup keydown autoresize",i,function(){e(b(this))}),b(document).on("change",'.file-field input[type="file"]',function(){for(var e=b(this).closest(".file-field").find("input.file-path"),t=b(this)[0].files,n=[],i=0;i<t.length;i++)n.push(t[i].name);e.val(n.join(", ")),e.trigger("change")});var r="input[type=range]",s=!1;b(r).each(function(){var e=b('<span class="thumb"><span class="value"></span></span>');b(this).after(e)});var o=function(e){var t=-7+parseInt(e.parent().css("padding-left"))+"px";e.velocity({height:"30px",width:"30px",top:"-30px",marginLeft:t},{duration:300,easing:"easeOutExpo"})},u=function(e){var t=e.width()-15,n=parseFloat(e.attr("max")),i=parseFloat(e.attr("min"));return(parseFloat(e.val())-i)/(n-i)*t},l=".range-field";b(document).on("change",r,function(){var e=b(this).siblings(".thumb");e.find(".value").html(b(this).val()),e.hasClass("active")||o(e);var t=u(b(this));e.addClass("active").css("left",t)}),b(document).on("mousedown touchstart",r,function(e){var t=b(this).siblings(".thumb");if(t.length<=0&&(t=b('<span class="thumb"><span class="value"></span></span>'),b(this).after(t)),t.find(".value").html(b(this).val()),s=!0,b(this).addClass("active"),t.hasClass("active")||o(t),"input"!==e.type){var n=u(b(this));t.addClass("active").css("left",n)}}),b(document).on("mouseup touchend",l,function(){s=!1,b(this).removeClass("active")}),b(document).on("input mousemove touchmove",l,function(){var e=b(this).children(".thumb"),t=b(this).find(r);if(s){e.hasClass("active")||o(e);var n=u(t);e.addClass("active").css("left",n),e.find(".value").html(e.siblings(r).val())}}),b(document).on("mouseout touchleave",l,function(){if(!s){var e=b(this).children(".thumb"),t=7+parseInt(b(this).css("padding-left"))+"px";e.hasClass("active")&&e.velocity({height:"0",width:"0",top:"10px",marginLeft:t},{duration:100}),e.removeClass("active")}}),b.fn.autocomplete=function(h){var e={data:{},limit:Infinity,onAutocomplete:null,minLength:1};return h=b.extend(e,h),this.each(function(){var r,a=b(this),s=h.data,o=0,u=-1,e=a.closest(".input-field");if(!b.isEmptyObject(s)){var t,l=b('<ul class="autocomplete-content dropdown-content"></ul>');e.length?(t=e.children(".autocomplete-content.dropdown-content").first()).length||e.append(l):(t=a.next(".autocomplete-content.dropdown-content")).length||a.after(l),t.length&&(l=t);var c=function(e,t){var n=t.find("img"),i=t.text().toLowerCase().indexOf(""+e.toLowerCase()),r=i+e.length-1,a=t.text().slice(0,i),s=t.text().slice(i,r+1),o=t.text().slice(r+1);t.html("<span>"+a+"<span class='highlight'>"+s+"</span>"+o+"</span>"),n.length&&t.prepend(n)},n=function(){u=-1,l.find(".active").removeClass("active")},d=function(){l.empty(),n(),r=undefined};a.off("blur.autocomplete").on("blur.autocomplete",function(){d()}),a.off("keyup.autocomplete focus.autocomplete").on("keyup.autocomplete focus.autocomplete",function(e){o=0;var t=a.val().toLowerCase();if(13!==e.which&&38!==e.which&&40!==e.which){if(r!==t&&(d(),t.length>=h.minLength))for(var n in s)if(s.hasOwnProperty(n)&&-1!==n.toLowerCase().indexOf(t)&&n.toLowerCase()!==t){if(o>=h.limit)break;var i=b("<li></li>");s[n]?i.append('<img src="'+s[n]+'" class="right circle"><span>'+n+"</span>"):i.append("<span>"+n+"</span>"),l.append(i),c(t,i),o++}r=t}}),a.off("keydown.autocomplete").on("keydown.autocomplete",function(e){var t,n=e.which,i=l.children("li").length,r=l.children(".active").first();13===n&&0<=u?(t=l.children("li").eq(u)).length&&(t.trigger("mousedown.autocomplete"),e.preventDefault()):38!==n&&40!==n||(e.preventDefault(),38===n&&0<u&&u--,40===n&&u<i-1&&u++,r.removeClass("active"),0<=u&&l.children("li").eq(u).addClass("active"))}),l.on("mousedown.autocomplete touchstart.autocomplete","li",function(){var e=b(this).text().trim();a.val(e),a.trigger("change"),d(),"function"==typeof h.onAutocomplete&&h.onAutocomplete.call(this,e)})}})}}),b.fn.material_select=function(y){function v(e,t,n){var i=e.indexOf(t),r=-1===i;return r?e.push(t):e.splice(i,1),n.siblings("ul.dropdown-content").find("li:not(.optgroup)").eq(t).toggleClass("active"),n.find("option").eq(t).prop("selected",r),a(e,n),r}function a(e,t){for(var n="",i=0,r=e.length;i<r;i++){var a=t.find("option").eq(e[i]).text();n+=0===i?a:", "+a}""===n&&(n=t.find("option:disabled").eq(0).text()),t.siblings("input.select-dropdown").val(n)}b(this).each(function(){var i=b(this);if(!i.hasClass("browser-default")){var l=!!i.attr("multiple"),e=i.data("select-id");if(e&&(i.parent().find("span.caret").remove(),i.parent().find("input").remove(),i.unwrap(),b("ul#select-options-"+e).remove()),"destroy"!==y){var t=Materialize.guid();i.data("select-id",t);var n=b('<div class="select-wrapper"></div>');n.addClass(i.attr("class"));var c=b('<ul id="select-options-'+t+'" class="dropdown-content select-dropdown '+(l?"multiple-select-dropdown":"")+'"></ul>'),r=i.children("option, optgroup"),a=[],s=!1,o=i.find("option:selected").html()||i.find("option:first").html()||"",u=function(e,t,n){var i=t.is(":disabled")?"disabled ":"",r="optgroup-option"===n?"optgroup-option ":"",a=l?'<input type="checkbox"'+i+"/><label></label>":"",s=t.data("icon"),o=t.attr("class");if(s){var u="";return o&&(u=' class="'+o+'"'),c.append(b('<li class="'+i+r+'"><img alt="" src="'+s+'"'+u+"><span>"+a+t.html()+"</span></li>")),!0}c.append(b('<li class="'+i+r+'"><span>'+a+t.html()+"</span></li>"))};r.length&&r.each(function(){if(b(this).is("option"))l?u(i,b(this),"multiple"):u(i,b(this));else if(b(this).is("optgroup")){var e=b(this).children("option");c.append(b('<li class="optgroup"><span>'+b(this).attr("label")+"</span></li>")),e.each(function(){u(i,b(this),"optgroup-option")})}}),c.find("li:not(.optgroup)").each(function(n){b(this).click(function(e){if(!b(this).hasClass("disabled")&&!b(this).hasClass("optgroup")){var t=!0;l?(b('input[type="checkbox"]',this).prop("checked",function(e,t){return!t}),t=v(a,n,i),f.trigger("focus")):(c.find("li").removeClass("active"),b(this).toggleClass("active"),f.val(b(this).text())),p(c,b(this)),i.find("option").eq(n).prop("selected",t),i.trigger("change"),void 0!==y&&y()}e.stopPropagation()})}),i.wrap(n);var d=b('<span class="caret">&#9660;</span>');i.is(":disabled")&&d.addClass("disabled");var h=o.replace(/"/g,"&quot;"),f=b('<input type="text" class="select-dropdown" readonly="true" '+(i.is(":disabled")?"disabled":"")+' data-activates="select-options-'+t+'" value="'+h+'"/>');i.before(f),f.before(d),f.after(c),i.is(":disabled")||f.dropdown({hover:!1}),i.attr("tabindex")&&b(f[0]).attr("tabindex",i.attr("tabindex")),i.addClass("initialized"),f.on({focus:function(){if(b("ul.select-dropdown").not(c[0]).is(":visible")&&b("input.select-dropdown").trigger("close"),!c.is(":visible")){b(this).trigger("open",["focus"]);var e=b(this).val();l&&0<=e.indexOf(",")&&(e=e.split(",")[0]);var t=c.find("li").filter(function(){return b(this).text().toLowerCase()===e.toLowerCase()})[0];p(c,t,!0)}},click:function(e){e.stopPropagation()}}),f.on("blur",function(){l||b(this).trigger("close"),c.find("li.selected").removeClass("selected")}),c.hover(function(){s=!0},function(){s=!1}),b(window).on({click:function(){l&&(s||f.trigger("close"))}}),l&&i.find("option:selected:not(:disabled)").each(function(){var e=b(this).index();v(a,e,i),c.find("li").eq(e).find(":checkbox").prop("checked",!0)});var p=function(e,t,n){if(t){e.find("li.selected").removeClass("selected");var i=b(t);i.addClass("selected"),l&&!n||c.scrollTo(i)}},m=[],g=function(e){if(9!=e.which)if(40!=e.which||c.is(":visible")){if(13!=e.which||c.is(":visible")){e.preventDefault();var t=String.fromCharCode(e.which).toLowerCase();if(t&&-1===[9,13,27,38,40].indexOf(e.which)){m.push(t);var n=m.join(""),i=c.find("li").filter(function(){return 0===b(this).text().toLowerCase().indexOf(n)})[0];i&&p(c,i)}if(13==e.which){var r=c.find("li.selected:not(.disabled)")[0];r&&(b(r).trigger("click"),l||f.trigger("close"))}40==e.which&&(i=c.find("li.selected").length?c.find("li.selected").next("li:not(.disabled)")[0]:c.find("li:not(.disabled)")[0],p(c,i)),27==e.which&&f.trigger("close"),38==e.which&&(i=c.find("li.selected").prev("li:not(.disabled)")[0])&&p(c,i),setTimeout(function(){m=[]},1e3)}}else f.trigger("open");else f.trigger("close")};f.on("keydown",g)}else i.data("select-id",null).removeClass("initialized")}})}}(jQuery),function(f){var t={init:function(h){var e={indicators:!0,height:400,transition:500,interval:6e3};return h=f.extend(e,h),this.each(function(){function t(e,t){e.hasClass("center-align")?e.velocity({opacity:0,translateY:-100},{duration:t,queue:!1}):e.hasClass("right-align")?e.velocity({opacity:0,translateX:100},{duration:t,queue:!1}):e.hasClass("left-align")&&e.velocity({opacity:0,translateX:-100},{duration:t,queue:!1})}function n(e){e>=l.length?e=0:e<0&&(e=l.length-1),(a=u.find(".active").index())!=e&&(i=l.eq(a),$caption=i.find(".caption"),i.removeClass("active"),i.velocity({opacity:0},{duration:h.transition,queue:!1,easing:"easeOutQuad",complete:function(){l.not(".active").velocity({opacity:0,translateX:0,translateY:0},{duration:0,queue:!1})}}),t($caption,h.transition),h.indicators&&r.eq(a).removeClass("active"),l.eq(e).velocity({opacity:1},{duration:h.transition,queue:!1,easing:"easeOutQuad"}),l.eq(e).find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:h.transition,delay:h.transition,queue:!1,easing:"easeOutQuad"}),l.eq(e).addClass("active"),h.indicators&&r.eq(e).addClass("active"))}var i,r,s,o=f(this),u=o.find("ul.slides").first(),l=u.find("> li"),a=u.find(".active").index();-1!=a&&(i=l.eq(a)),o.hasClass("fullscreen")||(h.indicators?o.height(h.height+40):o.height(h.height),u.height(h.height)),l.find(".caption").each(function(){t(f(this),0)}),l.find("img").each(function(){var e="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";f(this).attr("src")!==e&&(f(this).css("background-image",'url("'+f(this).attr("src")+'")'),f(this).attr("src",e))}),h.indicators&&(r=f('<ul class="indicators"></ul>'),l.each(function(){var e=f('<li class="indicator-item"></li>');e.click(function(){n(u.parent().find(f(this)).index()),clearInterval(s),s=setInterval(function(){a=u.find(".active").index(),l.length==a+1?a=0:a+=1,n(a)},h.transition+h.interval)}),r.append(e)}),o.append(r),r=o.find("ul.indicators").find("li.indicator-item")),i?i.show():(l.first().addClass("active").velocity({opacity:1},{duration:h.transition,queue:!1,easing:"easeOutQuad"}),a=0,i=l.eq(a),h.indicators&&r.eq(a).addClass("active")),i.find("img").each(function(){i.find(".caption").velocity({opacity:1,translateX:0,translateY:0},{duration:h.transition,queue:!1,easing:"easeOutQuad"})}),s=setInterval(function(){n((a=u.find(".active").index())+1)},h.transition+h.interval);var c=!1,d=!1;o.hammer({prevent_default:!1}).on("pan",function(e){if("touch"===e.gesture.pointerType){clearInterval(s);var t,n=e.gesture.direction,i=e.gesture.deltaX,r=e.gesture.velocityX,a=e.gesture.velocityY;$curr_slide=u.find(".active"),Math.abs(r)>Math.abs(a)&&$curr_slide.velocity({translateX:i},{duration:50,queue:!1,easing:"easeOutQuad"}),4===n&&(i>o.innerWidth()/2||r<-.65)?d=!0:2===n&&(i<-1*o.innerWidth()/2||.65<r)&&(c=!0),c&&(0===(t=$curr_slide.next()).length&&(t=l.first()),t.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"})),d&&(0===(t=$curr_slide.prev()).length&&(t=l.last()),t.velocity({opacity:1},{duration:300,queue:!1,easing:"easeOutQuad"}))}}).on("panend",function(e){"touch"===e.gesture.pointerType&&($curr_slide=u.find(".active"),!1,curr_index=u.find(".active").index(),!d&&!c||l.length<=1?$curr_slide.velocity({translateX:0},{duration:300,queue:!1,easing:"easeOutQuad"}):c?(n(curr_index+1),$curr_slide.velocity({translateX:-1*o.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})):d&&(n(curr_index-1),$curr_slide.velocity({translateX:o.innerWidth()},{duration:300,queue:!1,easing:"easeOutQuad",complete:function(){$curr_slide.velocity({opacity:0,translateX:0},{duration:0,queue:!1})}})),d=c=!1,clearInterval(s),s=setInterval(function(){a=u.find(".active").index(),l.length==a+1?a=0:a+=1,n(a)},h.transition+h.interval))}),o.on("sliderPause",function(){clearInterval(s)}),o.on("sliderStart",function(){clearInterval(s),s=setInterval(function(){a=u.find(".active").index(),l.length==a+1?a=0:a+=1,n(a)},h.transition+h.interval)}),o.on("sliderNext",function(){n((a=u.find(".active").index())+1)}),o.on("sliderPrev",function(){n((a=u.find(".active").index())-1)})})},pause:function(){f(this).trigger("sliderPause")},start:function(){f(this).trigger("sliderStart")},next:function(){f(this).trigger("sliderNext")},prev:function(){f(this).trigger("sliderPrev")}};f.fn.slider=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void f.error("Method "+e+" does not exist on jQuery.tooltip"):t.init.apply(this,arguments)}}(jQuery),function(n){n(document).on("ready turbolinks:load",function(){n(document).on("click.card",".card",function(e){if(n(this).find("> .card-reveal").length){var t=n(e.target).closest(".card");t.data("initialOverflow")===undefined&&t.data("initialOverflow",t.css("overflow")===undefined?"":t.css("overflow")),n(e.target).is(n(".card-reveal .card-title"))||n(e.target).is(n(".card-reveal .card-title i"))?n(this).find(".card-reveal").velocity({translateY:0},{duration:225,queue:!1,easing:"easeInOutQuad",complete:function(){n(this).css({display:"none"}),t.css("overflow",t.data("initialOverflow"))}}):(n(e.target).is(n(".card .activator"))||n(e.target).is(n(".card .activator i")))&&(t.css("overflow","hidden"),n(this).find(".card-reveal").css({display:"block"}).velocity("stop",!1).velocity({translateY:"-100%"},{duration:300,queue:!1,easing:"easeInOutQuad"}))}})})}(jQuery),function(u){var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{}};u(document).on("ready turbolinks:load",function(){u(document).on("click",".chip .close",function(){u(this).closest(".chips").attr("data-initialized")||u(this).closest(".chip").remove()})}),u.fn.material_chip=function(e){var o=this;if(this.$el=u(this),this.$document=u(document),this.SELS={CHIPS:".chips",CHIP:".chip",INPUT:"input",DELETE:".material-icons",SELECTED_CHIP:".selected"},"data"===e)return this.$el.data("chips");var r=u.extend({},t,e);o.hasAutocomplete=!u.isEmptyObject(r.autocompleteOptions.data),this.init=function(){var n=0;o.$el.each(function(){var e=u(this),t=Materialize.guid();o.chipId=t,r.data&&r.data instanceof Array||(r.data=[]),e.data("chips",r.data),e.attr("data-index",n),e.attr("data-initialized",!0),e.hasClass(o.SELS.CHIPS)||e.addClass("chips"),o.chips(e,t),n++})},this.handleEvents=function(){var s=o.SELS;o.$document.off("click.chips-focus",s.CHIPS).on("click.chips-focus",s.CHIPS,function(e){u(e.target).find(s.INPUT).focus()}),o.$document.off("click.chips-select",s.CHIP).on("click.chips-select",s.CHIP,function(e){var t=u(e.target);if(t.length){var n=t.hasClass("selected"),i=t.closest(s.CHIPS);u(s.CHIP).removeClass("selected"),n||o.selectChip(t.index(),i)}}),o.$document.off("keydown.chips").on("keydown.chips",function(e){if(!u(e.target).is("input, textarea")){var t,n=o.$document.find(s.CHIP+s.SELECTED_CHIP),i=n.closest(s.CHIPS),r=n.siblings(s.CHIP).length;if(n.length)if(8===e.which||46===e.which){e.preventDefault(),t=n.index(),o.deleteChip(t,i);var a=null;t+1<r?a=t:t!==r&&t+1!==r||(a=r-1),a<0&&(a=null),null!==a&&o.selectChip(a,i),r||i.find("input").focus()}else if(37===e.which){if((t=n.index()-1)<0)return;u(s.CHIP).removeClass("selected"),o.selectChip(t,i)}else if(39===e.which){if(t=n.index()+1,u(s.CHIP).removeClass("selected"),r<t)return void i.find("input").focus();o.selectChip(t,i)}}}),o.$document.off("focusin.chips",s.CHIPS+" "+s.INPUT).on("focusin.chips",s.CHIPS+" "+s.INPUT,function(e){var t=u(e.target).closest(s.CHIPS);t.addClass("focus"),t.siblings("label, .prefix").addClass("active"),u(s.CHIP).removeClass("selected")}),o.$document.off("focusout.chips",s.CHIPS+" "+s.INPUT).on("focusout.chips",s.CHIPS+" "+s.INPUT,function(e){var t=u(e.target).closest(s.CHIPS);t.removeClass("focus"),t.data("chips")!==undefined&&t.data("chips").length||t.siblings("label").removeClass("active"),t.siblings(".prefix").removeClass("active")}),o.$document.off("keydown.chips-add",s.CHIPS+" "+s.INPUT).on("keydown.chips-add",s.CHIPS+" "+s.INPUT,function(e){var t=u(e.target),n=t.closest(s.CHIPS),i=n.children(s.CHIP).length;if(13===e.which){if(o.hasAutocomplete&&n.find(".autocomplete-content.dropdown-content").length&&n.find(".autocomplete-content.dropdown-content").children().length)return;return e.preventDefault(),o.addChip({tag:t.val()},n),void t.val("")}if((8===e.keyCode||37===e.keyCode)&&""===t.val()&&i)return e.preventDefault(),o.selectChip(i-1,n),void t.blur()}),o.$document.off("click.chips-delete",s.CHIPS+" "+s.DELETE).on("click.chips-delete",s.CHIPS+" "+s.DELETE,function(e){var t=u(e.target),n=t.closest(s.CHIPS),i=t.closest(s.CHIP);e.stopPropagation(),o.deleteChip(i.index(),n),n.find("input").focus()})},this.chips=function(t,e){t.empty(),t.data("chips").forEach(function(e){t.append(o.renderChip(e))}),t.append(u('<input id="'+e+'" class="input" placeholder="">')),o.setPlaceholder(t);var n=t.next("label");n.length&&(n.attr("for",e),t.data("chips")!==undefined&&t.data("chips").length&&n.addClass("active"));var i=u("#"+e);o.hasAutocomplete&&(r.autocompleteOptions.onAutocomplete=function(e){o.addChip({tag:e},t),i.val(""),i.focus()},i.autocomplete(r.autocompleteOptions))},this.renderChip=function(e){if(e.tag){var t=u('<div class="chip"></div>');return t.text(e.tag),e.image&&t.prepend(u("<img />").attr("src",e.image)),t.append(u('<i class="material-icons close">close</i>')),t}},this.setPlaceholder=function(e){e.data("chips")!==undefined&&e.data("chips").length&&r.placeholder?e.find("input").prop("placeholder",r.placeholder):e.data("chips")!==undefined&&e.data("chips").length||!r.secondaryPlaceholder||e.find("input").prop("placeholder",r.secondaryPlaceholder)},this.isValid=function(e,t){for(var n=e.data("chips"),i=!1,r=0;r<n.length;r++)if(n[r].tag===t.tag)return void(i=!0);return""!==t.tag&&!i},this.addChip=function(e,t){if(o.isValid(t,e)){for(var n=o.renderChip(e),i=[],r=t.data("chips"),a=0;a<r.length;a++)i.push(r[a]);i.push(e),t.data("chips",i),n.insertBefore(t.find("input")),t.trigger("chip.add",e),o.setPlaceholder(t)}},this.deleteChip=function(e,t){var n=t.data("chips")[e];t.find(".chip").eq(e).remove();for(var i=[],r=t.data("chips"),a=0;a<r.length;a++)a!==e&&i.push(r[a]);t.data("chips",i),t.trigger("chip.delete",n),o.setPlaceholder(t)},this.selectChip=function(e,t){var n=t.find(".chip").eq(e);n&&!1===n.hasClass("selected")&&(n.addClass("selected"),t.trigger("chip.select",t.data("chips")[e]))},this.getChipsElement=function(e,t){return t.eq(e)},this.init(),this.handleEvents()}}(jQuery),function(s){s.fn.pushpin=function(a){var e={top:0,bottom:Infinity,offset:0};return"remove"===a?(this.each(function(){(id=s(this).data("pushpin-id"))&&(s(window).off("scroll."+id),s(this).removeData("pushpin-id").removeClass("pin-top pinned pin-bottom").removeAttr("style"))}),!1):(a=s.extend(e,a),$index=0,this.each(function(){function n(e){e.removeClass("pin-top"),e.removeClass("pinned"),e.removeClass("pin-bottom")}function t(e,t){e.each(function(){a.top<=t&&a.bottom>=t&&!s(this).hasClass("pinned")&&(n(s(this)),s(this).css("top",a.offset),s(this).addClass("pinned")),t<a.top&&!s(this).hasClass("pin-top")&&(n(s(this)),s(this).css("top",0),s(this).addClass("pin-top")),t>a.bottom&&!s(this).hasClass("pin-bottom")&&(n(s(this)),s(this).addClass("pin-bottom"),s(this).css("top",a.bottom-r))})}var e=Materialize.guid(),i=s(this),r=s(this).offset().top;s(this).data("pushpin-id",e),t(i,s(window).scrollTop()),s(window).on("scroll."+e,function(){var e=s(window).scrollTop()+a.offset;t(i,e)})}))}}(jQuery),function(d){d(document).on("ready turbolinks:load",function(){d.fn.reverse=[].reverse,d(document).on("mouseenter.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(){var e=d(this);t(e)}),d(document).on("mouseleave.fixedActionBtn",".fixed-action-btn:not(.click-to-toggle):not(.toolbar)",function(){var e=d(this);n(e)}),d(document).on("click.fabClickToggle",".fixed-action-btn.click-to-toggle > a",function(){var e=d(this).parent();e.hasClass("active")?n(e):t(e)}),d(document).on("click.fabToolbar",".fixed-action-btn.toolbar > a",function(){var e=d(this).parent();i(e)})}),d.fn.extend({openFAB:function(){t(d(this))},closeFAB:function(){n(d(this))},openToolbar:function(){i(d(this))},closeToolbar:function(){h(d(this))}});var t=function(e){var t=e;if(!1===t.hasClass("active")){var n,i;!0===t.hasClass("horizontal")?i=40:n=40,t.addClass("active"),t.find("ul .btn-floating").velocity({scaleY:".4",scaleX:".4",translateY:n+"px",translateX:i+"px"},{duration:0});var r=0;t.find("ul .btn-floating").reverse().each(function(){d(this).velocity({opacity:"1",scaleX:"1",scaleY:"1",translateY:"0",translateX:"0"},{duration:80,delay:r}),r+=40})}},n=function(e){var t,n,i=e;!0===i.hasClass("horizontal")?n=40:t=40,i.removeClass("active");i.find("ul .btn-floating").velocity("stop",!0),i.find("ul .btn-floating").velocity({opacity:"0",scaleX:".4",scaleY:".4",translateY:t+"px",translateX:n+"px"},{duration:80})},i=function(t){if("true"!==t.attr("data-open")){var e,n,i,r=window.innerWidth,a=window.innerHeight,s=t[0].getBoundingClientRect(),o=t.find("> a").first(),u=t.find("> ul").first(),l=d('<div class="fab-backdrop"></div>'),c=o.css("background-color");o.append(l),e=s.left-r/2+s.width/2,n=a-s.bottom,i=r/l.width(),t.attr("data-origin-bottom",s.bottom),t.attr("data-origin-left",s.left),t.attr("data-origin-width",s.width),t.addClass("active"),t.attr("data-open",!0),t.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+e+"px)",transition:"none"}),o.css({transform:"translateY("+-n+"px)",transition:"none"}),l.css({"background-color":c}),setTimeout(function(){t.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),o.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){t.css({overflow:"hidden","background-color":c}),l.css({transform:"scale("+i+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),u.find("> li > a").css({opacity:1}),d(window).on("scroll.fabToolbarClose",function(){h(t),d(window).off("scroll.fabToolbarClose"),d(document).off("click.fabToolbarClose")}),d(document).on("click.fabToolbarClose",function(e){d(e.target).closest(u).length||(h(t),d(window).off("scroll.fabToolbarClose"),d(document).off("click.fabToolbarClose"))})},100)},0)}},h=function(e){if("true"===e.attr("data-open")){var t,n,i=window.innerWidth,r=window.innerHeight,a=e.attr("data-origin-width"),s=e.attr("data-origin-bottom"),o=e.attr("data-origin-left"),u=e.find("> .btn-floating").first(),l=e.find("> ul").first(),c=e.find(".fab-backdrop"),d=u.css("background-color");t=o-i/2+a/2,n=r-s,i/c.width(),e.removeClass("active"),e.attr("data-open",!1),e.css({"background-color":"transparent",transition:"none"}),u.css({transition:"none"}),c.css({transform:"scale(0)","background-color":d}),l.find("> li > a").css({opacity:""}),setTimeout(function(){c.remove(),e.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-t+"px,0,0)"}),u.css({overflow:"",transform:"translate3d(0,"+n+"px,0)"}),setTimeout(function(){e.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),u.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}}(jQuery),function(o){Materialize.fadeInImage=function(e){var t;if("string"==typeof e)t=o(e);else{if("object"!=typeof e)return;t=e}t.css({opacity:0}),o(t).velocity({opacity:1},{duration:650,queue:!1,easing:"easeOutSine"}),o(t).velocity({opacity:1},{duration:1300,queue:!1,easing:"swing",step:function(e,t){var n=e/(t.start=100),i=150-(100-e)/1.75;i<100&&(i=100),0<=e&&o(this).css({"-webkit-filter":"grayscale("+n+")brightness("+i+"%)",filter:"grayscale("+n+")brightness("+i+"%)"})}})},Materialize.showStaggeredList=function(e){var t;if("string"==typeof e)t=o(e);else{if("object"!=typeof e)return;t=e}var n=0;t.find("li").velocity({translateX:"-100px"},{duration:0}),t.find("li").each(function(){o(this).velocity({opacity:"1",translateX:"0"},{duration:800,delay:n,easing:[60,10]}),n+=120})},o(document).on("ready turbolinks:load",function(){var a=!1,s=!1;o(".dismissable").each(function(){o(this).hammer({prevent_default:!1}).on("pan",function(e){if("touch"===e.gesture.pointerType){var t=o(this),n=e.gesture.direction,i=e.gesture.deltaX,r=e.gesture.velocityX;t.velocity({translateX:i},{duration:50,queue:!1,easing:"easeOutQuad"}),4===n&&(i>t.innerWidth()/2||r<-.75)&&(a=!0),2===n&&(i<-1*t.innerWidth()/2||.75<r)&&(s=!0)}}).on("panend",function(e){if(Math.abs(e.gesture.deltaX)<o(this).innerWidth()/2&&(a=s=!1),"touch"===e.gesture.pointerType){var t,n=o(this);if(a||s)t=a?n.innerWidth():-1*n.innerWidth(),n.velocity({translateX:t},{duration:100,queue:!1,easing:"easeOutQuad",complete:function(){n.css("border","none"),n.velocity({height:0,padding:0},{duration:200,queue:!1,easing:"easeOutQuad",complete:function(){n.remove()}})}});else n.velocity({translateX:0},{duration:100,queue:!1,easing:"easeOutQuad"});s=a=!1}})})})}(jQuery),function(){var n=!1;Materialize.scrollFire=function(o){var e=function(){for(var e=window.pageYOffset+window.innerHeight,
t=0;t<o.length;t++){var n=o[t],i=n.selector,r=n.offset,a=n.callback,s=document.querySelector(i);if(null!==s)if(s.getBoundingClientRect().top+window.pageYOffset+r<e&&!0!==n.done){if("function"==typeof a)a.call(this,s);else if("string"==typeof a){new Function(a)(s)}n.done=!0}}},t=Materialize.throttle(function(){e()},o.throttle||100);n||(window.addEventListener("scroll",t),window.addEventListener("resize",t),n=!0),setTimeout(t,0)}}(),function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(y){function v(i,e,t,n){function r(){return v._.node("div",v._.node("div",v._.node("div",v._.node("div",g.component.nodes(d.open),f.box),f.wrap),f.frame),f.holder)}function a(){p.data(e,g).addClass(f.input).attr("tabindex",-1).val(p.data("value")?g.get("select",h.format):i.value),h.editable||p.on("focus."+d.id+" click."+d.id,function(e){e.preventDefault(),g.$root.eq(0).focus()}).on("keydown."+d.id,u),T(i,{haspopup:!0,expanded:!1,readonly:!1,owns:i.id+"_root"})}function s(){g.$root.on({keydown:u,focusin:function(e){g.$root.removeClass(f.focused),e.stopPropagation()},"mousedown click":function(e){var t=e.target;t!=g.$root.children()[0]&&(e.stopPropagation(),"mousedown"!=e.type||y(t).is("input, select, textarea, button, option")||(e.preventDefault(),g.$root.eq(0).focus()))}}).on({focus:function(){p.addClass(f.target)},blur:function(){p.removeClass(f.target)}}).on("focus.toOpen",l).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=y(this),t=e.data(),n=e.hasClass(f.navDisabled)||e.hasClass(f.disabled),i=S();i=i&&(i.type||i.href),(n||i&&!y.contains(g.$root[0],i))&&g.$root.eq(0).focus(),!n&&t.nav?g.set("highlight",g.component.item.highlight,{nav:t.nav}):!n&&"pick"in t?g.set("select",t.pick):t.clear?g.clear().close(!0):t.close&&g.close(!0)}),T(g.$root[0],"hidden",!0)}function o(){var e;!0===h.hiddenName?(e=i.name,i.name=""):e=(e=["string"==typeof h.hiddenPrefix?h.hiddenPrefix:"","string"==typeof h.hiddenSuffix?h.hiddenSuffix:"_submit"])[0]+i.name+e[1],g._hidden=y('<input type=hidden name="'+e+'"'+(p.data("value")||i.value?' value="'+g.get("select",h.formatSubmit)+'"':"")+">")[0],p.on("change."+d.id,function(){g._hidden.value=i.value?g.get("select",h.formatSubmit):""}),h.container?y(h.container).append(g._hidden):p.after(g._hidden)}function u(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return g.close(),!1;(32==t||n||!d.open&&g.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?g.clear().close():g.open())}function l(e){e.stopPropagation(),"focus"==e.type&&g.$root.addClass(f.focused),g.open()}if(!i)return v;var c=!1,d={id:i.id||"P"+Math.abs(~~(Math.random()*new Date))},h=t?y.extend(!0,{},t.defaults,n):n||{},f=y.extend({},v.klasses(),h.klass),p=y(i),m=function(){return this.start()},g=m.prototype={constructor:m,$node:p,start:function(){return d&&d.start?g:(d.methods={},d.start=!0,d.open=!1,d.type=i.type,i.autofocus=i==S(),i.readOnly=!h.editable,i.id=i.id||d.id,"text"!=i.type&&(i.type="text"),g.component=new t(g,h),g.$root=y(v._.node("div",r(),f.picker,'id="'+i.id+'_root" tabindex="0"')),s(),h.formatSubmit&&o(),a(),h.container?y(h.container).append(g.$root):p.after(g.$root),g.on({start:g.component.onStart,render:g.component.onRender,stop:g.component.onStop,open:g.component.onOpen,close:g.component.onClose,set:g.component.onSet}).on({start:h.onStart,render:h.onRender,stop:h.onStop,open:h.onOpen,close:h.onClose,set:h.onSet}),c=b(g.$root.children()[0]),i.autofocus&&g.open(),g.trigger("start").trigger("render"))},render:function(e){return e?g.$root.html(r()):g.$root.find("."+f.box).html(g.component.nodes(d.open)),g.trigger("render")},stop:function(){return d.start&&(g.close(),g._hidden&&g._hidden.parentNode.removeChild(g._hidden),g.$root.remove(),p.removeClass(f.input).removeData(e),setTimeout(function(){p.off("."+d.id)},0),i.type=d.type,i.readOnly=!1,g.trigger("stop"),d.methods={},d.start=!1),g},open:function(e){return d.open?g:(p.addClass(f.active),T(i,"expanded",!0),setTimeout(function(){g.$root.addClass(f.opened),T(g.$root[0],"hidden",!1)},0),!1!==e&&(d.open=!0,c&&k.css("overflow","hidden").css("padding-right","+="+_()),g.$root.eq(0).focus(),w.on("click."+d.id+" focusin."+d.id,function(e){var t=e.target;t!=i&&t!=document&&3!=e.which&&g.close(t===g.$root.children()[0])}).on("keydown."+d.id,function(e){var t=e.keyCode,n=g.component.key[t],i=e.target;27==t?g.close(!0):i!=g.$root[0]||!n&&13!=t?y.contains(g.$root[0],i)&&13==t&&(e.preventDefault(),i.click()):(e.preventDefault(),n?v._.trigger(g.component.key.go,g,[v._.trigger(n)]):g.$root.find("."+f.highlighted).hasClass(f.disabled)||g.set("select",g.component.item.highlight).close())})),g.trigger("open"))},close:function(e){return e&&(g.$root.off("focus.toOpen").eq(0).focus(),setTimeout(function(){g.$root.on("focus.toOpen",l)},0)),p.removeClass(f.active),T(i,"expanded",!1),setTimeout(function(){g.$root.removeClass(f.opened+" "+f.focused),T(g.$root[0],"hidden",!0)},0),d.open?(d.open=!1,c&&k.css("overflow","").css("padding-right","-="+_()),w.off("."+d.id),g.trigger("close")):g},clear:function(e){return g.set("clear",null,e)},set:function(e,t,n){var i,r,a=y.isPlainObject(e),s=a?e:{};if(n=a&&y.isPlainObject(t)?t:n||{},e){for(i in a||(s[e]=t),s)r=s[i],i in g.component.item&&(r===undefined&&(r=null),g.component.set(i,r,n)),"select"!=i&&"clear"!=i||p.val("clear"==i?"":g.get(i,h.format)).trigger("change");g.render()}return n.muted?g:g.trigger("set",s)},get:function(e,t){if(null!=d[e=e||"value"])return d[e];if("valueSubmit"==e){if(g._hidden)return g._hidden.value;e="value"}if("value"==e)return i.value;if(e in g.component.item){if("string"!=typeof t)return g.component.get(e);var n=g.component.get(e);return n?v._.trigger(g.component.formats.toString,g.component,[t,n]):""}},on:function(e,t,n){var i,r,a=y.isPlainObject(e),s=a?e:{};if(e)for(i in a||(s[e]=t),s)r=s[i],n&&(i="_"+i),d.methods[i]=d.methods[i]||[],d.methods[i].push(r);return g},off:function(){var e,t,n=arguments;for(e=0,namesCount=n.length;e<namesCount;e+=1)(t=n[e])in d.methods&&delete d.methods[t];return g},trigger:function(e,n){var t=function(e){var t=d.methods[e];t&&t.map(function(e){v._.trigger(e,g,[n])})};return t("_"+e),t(e),g}};return new m}function b(e){var t,n="position";return e.currentStyle?t=e.currentStyle[n]:window.getComputedStyle&&(t=getComputedStyle(e)[n]),"fixed"==t}function _(){if(k.height()<=i.height())return 0;var e=y('<div style="visibility:hidden;width:100px" />').appendTo("body"),t=e[0].offsetWidth;e.css("overflow","scroll");var n=y('<div style="width:100%" />').appendTo(e)[0].offsetWidth;return e.remove(),t-n}function T(e,t,n){if(y.isPlainObject(t))for(var i in t)r(e,i,t[i]);else r(e,t,n)}function r(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function e(e,t){for(var n in y.isPlainObject(e)||(e={attribute:t}),t="",e){var i=("role"==n?"":"aria-")+n;t+=null==e[n]?"":i+'="'+e[n]+'"'}return t}function S(){try{return document.activeElement}catch(e){}}var i=y(window),w=y(document),k=y(document.documentElement);return v.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},v._={group:function(e){for(var t,n="",i=v._.trigger(e.min,e);i<=v._.trigger(e.max,e,[i]);i+=e.i)t=v._.trigger(e.item,e,[i]),n+=v._.node(e.node,t[0],t[1],t[2]);return n},node:function(e,t,n,i){return t?"<"+e+(n=n?' class="'+n+'"':"")+(i=i?" "+i:"")+">"+(t=y.isArray(t)?t.join(""):t)+"</"+e+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf("Date")&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toString.call(e).indexOf("Number")&&e%1==0},ariaAttr:e},v.extend=function(i,r){y.fn[i]=function(e,t){var n=this.data(i);return"picker"==e?n:n&&"string"==typeof e?v._.trigger(n[e],n,[t]):this.each(function(){y(this).data(i)||new v(this,i,r,e)})},y.fn[i].defaults=r.defaults},v}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,p){function t(t,n){var e,i=this,r=t.$node[0],a=r.value,s=t.$node.data("value"),o=s||a,u=s?n.formatSubmit:n.format,l=function(){return r.currentStyle?"rtl"==r.currentStyle.direction:"rtl"==getComputedStyle(t.$root[0]).direction};i.settings=n,i.$node=t.$node,i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.disable=(n.disable||[]).slice(0),i.item.enable=-(!0===(e=i.item.disable)[0]?e.shift():-1),i.set("min",n.min).set("max",n.max).set("now"),o?i.set("select",o,{format:u}):i.set("select",null).set("highlight",i.item.now),i.key={40:7,38:-7,39:function(){return l()?-1:1},37:function(){return l()?1:-1},go:function(e){var t=i.item.highlight,n=new Date(t.year,t.month,t.date+e);i.set("highlight",n,{interval:e}),this.render()}},t.on("render",function(){t.$root.find("."+n.klass.selectMonth).on("change",function(){var e=this.value;e&&(t.set("highlight",[t.get("view").year,e,t.get("highlight").date]),t.$root.find("."+n.klass.selectMonth).trigger("focus"))}),t.$root.find("."+n.klass.selectYear).on("change",function(){var e=this.value;e&&(t.set("highlight",[e,t.get("view").month,t.get("highlight").date]),t.$root.find("."+n.klass.selectYear).trigger("focus"))})},1).on("open",function(){var e="";i.disabled(i.get("now"))&&(e=":not(."+n.klass.buttonToday+")"),t.$root.find("button"+e+", select").attr("disabled",!1)},1).on("close",function(){t.$root.find("button, select").attr("disabled",!0)},1)}var n,y=7,v=6,b=e._;t.prototype.set=function(t,n,i){var r=this,e=r.item;return null===n?("clear"==t&&(t="select"),e[t]=n):(e["enable"==t?"disable":"flip"==t?"enable":t]=r.queue[t].split(" ").map(function(e){return n=r[e](t,n,i)}).pop(),"select"==t?r.set("highlight",e.select,i):"highlight"==t?r.set("view",e.highlight,i):t.match(/^(flip|min|max|disable|enable)$/)&&(e.select&&r.disabled(e.select)&&r.set("select",e.select,i),e.highlight&&r.disabled(e.highlight)&&r.set("highlight",e.highlight,i))),r},t.prototype.get=function(e){return this.item[e]},t.prototype.create=function(e,t,n){var i,r=this;return(t=t===undefined?e:t)==-Infinity||t==Infinity?i=t:p.isPlainObject(t)&&b.isInteger(t.pick)?t=t.obj:p.isArray(t)?(t=new Date(t[0],t[1],t[2]),t=b.isDate(t)?t:r.create().obj):t=b.isInteger(t)||b.isDate(t)?r.normalize(new Date(t),n):r.now(e,t,n),{year:i||t.getFullYear(),month:i||t.getMonth(),date:i||t.getDate(),day:i||t.getDay(),obj:i||t,pick:i||t.getTime()}},t.prototype.createRange=function(e,t){var n=this,i=function(e){return!0===e||p.isArray(e)||b.isDate(e)?n.create(e):e};return b.isInteger(e)||(e=i(e)),b.isInteger(t)||(t=i(t)),b.isInteger(e)&&p.isPlainObject(t)?e=[t.year,t.month,t.date+e]:b.isInteger(t)&&p.isPlainObject(e)&&(t=[e.year,e.month,e.date+t]),{from:i(e),to:i(t)}},t.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},t.prototype.overlapRanges=function(e,t){var n=this;return e=n.createRange(e.from,e.to),t=n.createRange(t.from,t.to),n.withinRange(e,t.from)||n.withinRange(e,t.to)||n.withinRange(t,e.from)||n.withinRange(t,e.to)},t.prototype.now=function(e,t,n){return t=new Date,n&&n.rel&&t.setDate(t.getDate()+n.rel),this.normalize(t,n)},t.prototype.navigate=function(e,t,n){var i,r,a,s,o=p.isArray(t),u=p.isPlainObject(t),l=this.item.view;if(o||u){for(u?(r=t.year,a=t.month,s=t.date):(r=+t[0],a=+t[1],s=+t[2]),n&&n.nav&&l&&l.month!==a&&(r=l.year,a=l.month),r=(i=new Date(r,a+(n&&n.nav?n.nav:0),1)).getFullYear(),a=i.getMonth();new Date(r,a,s).getMonth()!==a;)s-=1;t=[r,a,s]}return t},t.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},t.prototype.measure=function(e,t){var n=this;return t?"string"==typeof t?t=n.parse(e,t):b.isInteger(t)&&(t=n.now(e,t,{rel:t})):t="min"==e?-Infinity:Infinity,t},t.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},t.prototype.validate=function(e,n,t){var i,r,a,s,o=this,u=n,l=t&&t.interval?t.interval:1,c=-1===o.item.enable,d=o.item.min,h=o.item.max,f=c&&o.item.disable.filter(function(e){if(p.isArray(e)){var t=o.create(e).pick;t<n.pick?i=!0:t>n.pick&&(r=!0)}return b.isInteger(e)}).length;if((!t||!t.nav)&&(!c&&o.disabled(n)||c&&o.disabled(n)&&(f||i||r)||!c&&(n.pick<=d.pick||n.pick>=h.pick)))for(c&&!f&&(!r&&0<l||!i&&l<0)&&(l*=-1);o.disabled(n)&&(1<Math.abs(l)&&(n.month<u.month||n.month>u.month)&&(n=u,l=0<l?1:-1),n.pick<=d.pick?(a=!0,l=1,n=o.create([d.year,d.month,d.date+(n.pick===d.pick?0:-1)])):n.pick>=h.pick&&(s=!0,l=-1,n=o.create([h.year,h.month,h.date+(n.pick===h.pick?0:1)])),!a||!s);)n=o.create([n.year,n.month,n.date+l]);return n},t.prototype.disabled=function(t){var n=this,e=n.item.disable.filter(function(e){return b.isInteger(e)?t.day===(n.settings.firstDay?e:e-1)%7:p.isArray(e)||b.isDate(e)?t.pick===n.create(e).pick:p.isPlainObject(e)?n.withinRange(e,t):void 0});return e=e.length&&!e.filter(function(e){return p.isArray(e)&&"inverted"==e[3]||p.isPlainObject(e)&&e.inverted}).length,-1===n.item.enable?!e:e||t.pick<n.item.min.pick||t.pick>n.item.max.pick},t.prototype.parse=function(e,i,t){var r=this,a={};return i&&"string"==typeof i?(t&&t.format||((t=t||{}).format=r.settings.format),r.formats.toArray(t.format).map(function(e){var t=r.formats[e],n=t?b.trigger(t,r,[i,a]):e.replace(/^!/,"").length;t&&(a[e]=i.substr(0,n)),i=i.substr(n)}),[a.yyyy||a.yy,+(a.mm||a.m)-1,a.dd||a.d]):i},t.prototype.formats=function(){function i(e,t,n){var i=e.match(/\w+/)[0];return n.mm||n.m||(n.m=t.indexOf(i)+1),i.length}function n(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?b.digits(e):t.date},dd:function(e,t){return e?2:b.lead(t.date)},ddd:function(e,t){return e?n(e):this.settings.weekdaysShort[t.day]},dddd:function(e,t){return e?n(e):this.settings.weekdaysFull[t.day]},m:function(e,t){return e?b.digits(e):t.month+1},mm:function(e,t){return e?2:b.lead(t.month+1)},mmm:function(e,t){var n=this.settings.monthsShort;return e?i(e,n,t):n[t.month]},mmmm:function(e,t){var n=this.settings.monthsFull;return e?i(e,n,t):n[t.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var n=this;return n.formats.toArray(e).map(function(e){return b.trigger(n.formats[e],n,[0,t])||e.replace(/^!/,"")}).join("")}}}(),t.prototype.isDateExact=function(e,t){var n=this;return b.isInteger(e)&&b.isInteger(t)||"boolean"==typeof e&&"boolean"==typeof t?e===t:(b.isDate(e)||p.isArray(e))&&(b.isDate(t)||p.isArray(t))?n.create(e).pick===n.create(t).pick:!(!p.isPlainObject(e)||!p.isPlainObject(t))&&(n.isDateExact(e.from,t.from)&&n.isDateExact(e.to,t.to))},t.prototype.isDateOverlap=function(e,t){var n=this,i=n.settings.firstDay?1:0;return b.isInteger(e)&&(b.isDate(t)||p.isArray(t))?(e=e%7+i)===n.create(t).day+1:b.isInteger(t)&&(b.isDate(e)||p.isArray(e))?(t=t%7+i)===n.create(e).day+1:!(!p.isPlainObject(e)||!p.isPlainObject(t))&&n.overlapRanges(e,t)},t.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},t.prototype.deactivate=function(e,t){var i=this,r=i.item.disable.slice(0);return"flip"==t?i.flipEnable():!1===t?(i.flipEnable(1),r=[]):!0===t?(i.flipEnable(-1),r=[]):t.map(function(e){for(var t,n=0;n<r.length;n+=1)if(i.isDateExact(e,r[n])){t=!0;break}t||(b.isInteger(e)||b.isDate(e)||p.isArray(e)||p.isPlainObject(e)&&e.from&&e.to)&&r.push(e)}),r},t.prototype.activate=function(e,t){var a=this,s=a.item.disable,o=s.length;return"flip"==t?a.flipEnable():!0===t?(a.flipEnable(1),s=[]):!1===t?(a.flipEnable(-1),s=[]):t.map(function(e){var t,n,i,r;for(i=0;i<o;i+=1){if(n=s[i],a.isDateExact(n,e)){t=s[i]=null,r=!0;break}if(a.isDateOverlap(n,e)){p.isPlainObject(e)?(e.inverted=!0,t=e):p.isArray(e)?(t=e)[3]||t.push("inverted"):b.isDate(e)&&(t=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(t)for(i=0;i<o;i+=1)if(a.isDateExact(s[i],e)){s[i]=null;break}if(r)for(i=0;i<o;i+=1)if(a.isDateOverlap(s[i],e)){s[i]=null;break}t&&s.push(t)}),s.filter(function(e){return null!=e})},t.prototype.nodes=function(l){var t,n,c=this,d=c.settings,e=c.item,s=e.now,o=e.select,u=e.highlight,h=e.view,f=e.disable,p=e.min,m=e.max,i=(t=(d.showWeekdaysFull?d.weekdaysFull:d.weekdaysLetter).slice(0),n=d.weekdaysFull.slice(0),d.firstDay&&(t.push(t.shift()),n.push(n.shift())),b.node("thead",b.node("tr",b.group({min:0,max:y-1,i:1,node:"th",item:function(e){return[t[e],d.klass.weekdays,'scope=col title="'+n[e]+'"']}})))),r=function(e){return b.node("div"," ",d.klass["nav"+(e?"Next":"Prev")]+(e&&h.year>=m.year&&h.month>=m.month||!e&&h.year<=p.year&&h.month<=p.month?" "+d.klass.navDisabled:""),"data-nav="+(e||-1)+" "+b.ariaAttr({role:"button",controls:c.$node[0].id+"_table"})+' title="'+(e?d.labelMonthNext:d.labelMonthPrev)+'"')},a=function(e){var t=d.showMonthsShort?d.monthsShort:d.monthsFull;return"short_months"==e&&(t=d.monthsShort),d.selectMonths&&e==undefined?b.node("select",b.group({min:0,max:11,i:1,node:"option",item:function(e){return[t[e],0,"value="+e+(h.month==e?" selected":"")+(h.year==p.year&&e<p.month||h.year==m.year&&e>m.month?" disabled":"")]}}),d.klass.selectMonth+" browser-default",(l?"":"disabled")+" "+b.ariaAttr({controls:c.$node[0].id+"_table"})+' title="'+d.labelMonthSelect+'"'):"short_months"==e?null!=o?t[o.month]:t[h.month]:b.node("div",t[h.month],d.klass.month)},g=function(e){var t=h.year,n=!0===d.selectYears?5:~~(d.selectYears/2);if(n){var i=p.year,r=m.year,a=t-n,s=t+n;if(a<i&&(s+=i-a,a=i),r<s){var o=a-i,u=s-r;a-=u<o?u:o,s=r}if(d.selectYears&&e==undefined)return b.node("select",b.group({min:a,max:s,i:1,node:"option",item:function(e){return[e,0,"value="+e+(t==e?" selected":"")]}}),d.klass.selectYear+" browser-default",(l?"":"disabled")+" "+b.ariaAttr({controls:c.$node[0].id+"_table"})+' title="'+d.labelYearSelect+'"')}return"raw"==e?b.node("div",t):b.node("div",t,d.klass.year)};return createDayLabel=function(){return null!=o?o.date:s.date},createWeekdayLabel=function(){var e;return e=null!=o?o.day:s.day,d.weekdaysShort[e]},b.node("div",b.node("div",g("raw"),d.klass.year_display)+b.node("span",createWeekdayLabel()+", ","picker__weekday-display")+b.node("span",a("short_months")+" ",d.klass.month_display)+b.node("span",createDayLabel(),d.klass.day_display),d.klass.date_display)+b.node("div",b.node("div",b.node("div",(d.selectYears,a()+g()+r()+r(1)),d.klass.header)+b.node("table",i+b.node("tbody",b.group({min:0,max:v-1,i:1,node:"tr",item:function(e){var t=d.firstDay&&0===c.create([h.year,h.month,1]).day?-7:0;return[b.group({min:y*e-h.day+t+1,max:function(){return this.min+y-1},i:1,node:"td",item:function(e){e=c.create([h.year,h.month,e+(d.firstDay?1:0)]);var t,n=o&&o.pick==e.pick,i=u&&u.pick==e.pick,r=f&&c.disabled(e)||e.pick<p.pick||e.pick>m.pick,a=b.trigger(c.formats.toString,c,[d.format,e]);return[b.node("div",e.date,(t=[d.klass.day],t.push(h.month==e.month?d.klass.infocus:d.klass.outfocus),s.pick==e.pick&&t.push(d.klass.now),n&&t.push(d.klass.selected),i&&t.push(d.klass.highlighted),r&&t.push(d.klass.disabled),t.join(" ")),"data-pick="+e.pick+" "+b.ariaAttr({role:"gridcell",label:a,selected:!(!n||c.$node.val()!==a)||null,activedescendant:!!i||null,disabled:!!r||null})),"",b.ariaAttr({role:"presentation"})]}})]}})),d.klass.table,'id="'+c.$node[0].id+'_table" '+b.ariaAttr({role:"grid",controls:c.$node[0].id,readonly:!0})),d.klass.calendar_container)+b.node("div",b.node("button",d.today,"btn-flat picker__today waves-effect","type=button data-pick="+s.pick+(l&&!c.disabled(s)?"":" disabled")+" "+b.ariaAttr({controls:c.$node[0].id}))+b.node("button",d.clear,"btn-flat picker__clear waves-effect","type=button data-clear=1"+(l?"":" disabled")+" "+b.ariaAttr({controls:c.$node[0].id}))+b.node("button",d.close,"btn-flat picker__close waves-effect","type=button data-close=true "+(l?"":" disabled")+" "+b.ariaAttr({controls:c.$node[0].id})),d.klass.footer),"picker__container__wrapper")},t.defaults={labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysLetter:["S","M","T","W","T","F","S"],today:"Today",clear:"Clear",close:"Ok",format:"d mmmm, yyyy",klass:{table:(n=e.klasses().picker+"__")+"table",header:n+"header",date_display:n+"date-display",day_display:n+"day-display",month_display:n+"month-display",year_display:n+"year-display",calendar_container:n+"calendar-container",navPrev:n+"nav--prev",navNext:n+"nav--next",navDisabled:n+"nav--disabled",month:n+"month",year:n+"year",selectMonth:n+"select--month",selectYear:n+"select--year",weekdays:n+"weekday",day:n+"day",disabled:n+"day--disabled",selected:n+"day--selected",highlighted:n+"day--highlighted",now:n+"day--today",infocus:n+"day--infocus",outfocus:n+"day--outfocus",footer:n+"footer",buttonClear:n+"button--clear",buttonToday:n+"button--today",buttonClose:n+"button--close"}},e.extend("pickadate",t)}),function(){function k(e){return document.createElementNS(r,e)}function C(e){return(e<10?"0":"")+e}function E(e){var t=++u+"";return e?e+t:t}function a(e,d){function t(e,r){var t=h.offset(),n=/^touch/.test(e.type),a=t.left+R,s=t.top+R,o=(n?e.originalEvent.touches[0]:e).pageX-a,u=(n?e.originalEvent.touches[0]:e).pageY-s,i=Math.sqrt(o*o+u*u),l=!1;if(!r||!(i<M-N||M+N<i)){e.preventDefault();var c=setTimeout(function(){f.popover.addClass("clockpicker-moving")},200);f.setHand(o,u,!r,!0),P.off(L).on(L,function(e){e.preventDefault();var t=/^touch/.test(e.type),n=(t?e.originalEvent.touches[0]:e).pageX-a,i=(t?e.originalEvent.touches[0]:e).pageY-s;(l||n!==o||i!==u)&&(l=!0,f.setHand(n,i,!1,!0))}),P.off(D).on(D,function(e){P.off(D),e.preventDefault();var t=/^touch/.test(e.type),n=(t?e.originalEvent.changedTouches[0]:e).pageX-a,i=(t?e.originalEvent.changedTouches[0]:e).pageY-s;(r||l)&&n===o&&i===u&&f.setHand(n,i),"hours"===f.currentView?f.toggleView("minutes",B/2):d.autoclose&&(f.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){f.done()},B/2)),h.prepend(v),clearTimeout(c),f.popover.removeClass("clockpicker-moving"),P.off(L)})}}var n=A(F),h=n.find(".clockpicker-plate"),i=n.find(".picker__holder"),r=n.find(".clockpicker-hours"),a=n.find(".clockpicker-minutes"),s=n.find(".clockpicker-am-pm-block"),o="INPUT"===e.prop("tagName"),u=o?e:e.find("input"),l=A("label[for="+u.attr("id")+"]"),f=this;this.id=E("cp"),this.element=e,this.holder=i,this.options=d,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=o,this.input=u,this.label=l,this.popover=n,this.plate=h,this.hoursView=r,this.minutesView=a,this.amPmBlock=s,this.spanHours=n.find(".clockpicker-span-hours"),this.spanMinutes=n.find(".clockpicker-span-minutes"),this.spanAmPm=n.find(".clockpicker-span-am-pm"),this.footer=n.find(".picker__footer"),this.amOrPm="PM",d.twelvehour&&(d.ampmclickable?(this.spanAmPm.empty(),A('<div id="click-am">AM</div>').on("click",function(){f.spanAmPm.children("#click-am").addClass("text-primary"),f.spanAmPm.children("#click-pm").removeClass("text-primary"),f.amOrPm="AM"}).appendTo(this.spanAmPm),A('<div id="click-pm">PM</div>').on("click",function(){f.spanAmPm.children("#click-pm").addClass("text-primary"),f.spanAmPm.children("#click-am").removeClass("text-primary"),f.amOrPm="PM"}).appendTo(this.spanAmPm)):(this.spanAmPm.empty(),A('<div id="click-am">AM</div>').appendTo(this.spanAmPm),A('<div id="click-pm">PM</div>').appendTo(this.spanAmPm))),A('<button type="button" class="btn-flat picker__clear" tabindex="'+(d.twelvehour?"3":"1")+'">'+d.cleartext+"</button>").click(A.proxy(this.clear,this)).appendTo(this.footer),A('<button type="button" class="btn-flat picker__close" tabindex="'+(d.twelvehour?"3":"1")+'">'+d.canceltext+"</button>").click(A.proxy(this.hide,this)).appendTo(this.footer),A('<button type="button" class="btn-flat picker__close" tabindex="'+(d.twelvehour?"3":"1")+'">'+d.donetext+"</button>").click(A.proxy(this.done,this)).appendTo(this.footer),this.spanHours.click(A.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(A.proxy(this.toggleView,this,"minutes")),u.on("focus.clockpicker click.clockpicker",A.proxy(this.show,this));var c,p,m,g,y=A('<div class="clockpicker-tick"></div>');if(d.twelvehour)for(c=1;c<13;c+=1)p=y.clone(),m=c/6*Math.PI,g=M,p.css({left:R+Math.sin(m)*g-N,top:R-Math.cos(m)*g-N}),p.html(0===c?"00":c),r.append(p),p.on(I,t);else for(c=0;c<24;c+=1){p=y.clone(),m=c/6*Math.PI,g=0<c&&c<13?U:M,p.css({left:R+Math.sin(m)*g-N,top:R-Math.cos(m)*g-N}),p.html(0===c?"00":c),r.append(p),p.on(I,t)}for(c=0;c<60;c+=5)p=y.clone(),m=c/30*Math.PI,p.css({left:R+Math.sin(m)*M-N,top:R-Math.cos(m)*M-N}),p.html(C(c)),a.append(p),p.on(I,t);if(h.on(I,function(e){0===A(e.target).closest(".clockpicker-tick").length&&t(e,!0)}),O){var v=n.find(".clockpicker-canvas"),b=k("svg");b.setAttribute("class","clockpicker-svg"),b.setAttribute("width",j),b.setAttribute("height",j);var _=k("g");_.setAttribute("transform","translate("+R+","+R+")");var T=k("circle");T.setAttribute("class","clockpicker-canvas-bearing"),T.setAttribute("cx",0),T.setAttribute("cy",0),T.setAttribute("r",4);var S=k("line");S.setAttribute("x1",0),S.setAttribute("y1",0);var w=k("circle");w.setAttribute("class","clockpicker-canvas-bg"),w.setAttribute("r",N),_.appendChild(S),_.appendChild(w),_.appendChild(T),b.appendChild(_),v.append(b),this.hand=S,this.bg=w,this.bearing=T,this.g=_,this.canvas=v}x(this.options.init)}function x(e){e&&"function"==typeof e&&e()}var e,t,n,A=window.jQuery,i=A(window),P=A(document),r="http://www.w3.org/2000/svg",O="SVGAngle"in window&&((t=document.createElement("div")).innerHTML="<svg/>",e=(t.firstChild&&t.firstChild.namespaceURI)==r,t.innerHTML="",e),s="transition"in(n=document.createElement("div").style)||"WebkitTransition"in n||"MozTransition"in n||"msTransition"in n||"OTransition"in n,o="ontouchstart"in window,I="mousedown"+(o?" touchstart":""),L="mousemove.clockpicker"+(o?" touchmove.clockpicker":""),D="mouseup.clockpicker"+(o?" touchend.clockpicker":""),m=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,u=0,R=135,M=105,U=80,N=20,j=2*R,B=s?350:1,F=['<div class="clockpicker picker">','<div class="picker__holder">','<div class="picker__frame">','<div class="picker__wrap">','<div class="picker__box">','<div class="picker__date-display">','<div class="clockpicker-display">','<div class="clockpicker-display-column">','<span class="clockpicker-span-hours text-primary"></span>',":",'<span class="clockpicker-span-minutes"></span>',"</div>",'<div class="clockpicker-display-column clockpicker-display-am-pm">','<div class="clockpicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="picker__container__wrapper">','<div class="picker__calendar-container">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<div class="clockpicker-am-pm-block">',"</div>","</div>",'<div class="picker__footer">',"</div>","</div>","</div>","</div>","</div>","</div>","</div>"].join("");a.DEFAULTS={"default":"",fromnow:0,donetext:"Ok",cleartext:"Clear",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,darktheme:!1,twelvehour:!0,vibrate:!0},a.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},a.prototype.locate=function(){var e=this.element,t=this.popover;e.offset(),e.outerWidth(),e.outerHeight(),this.options.align;t.show()},a.prototype.show=function(){if(!this.isShown){x(this.options.beforeShow),A(":input").each(function(){A(this).attr("tabindex",-1)});var n=this;this.input.blur(),this.popover.addClass("picker--opened"),this.input.addClass("picker__input picker__input--active"),A(document.body).css("overflow","hidden");var e=((this.input.prop("value")||this.options["default"]||"")+"").split(":");if(this.options.twelvehour&&"undefined"!=typeof e[1]&&(0<e[1].indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromnow);e=[t.getHours(),t.getMinutes()]}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.html(this.hours),this.spanMinutes.html(C(this.minutes)),this.isAppended||(this.popover.insertAfter(this.input),this.options.twelvehour&&("PM"===this.amOrPm?(this.spanAmPm.children("#click-pm").addClass("text-primary"),this.spanAmPm.children("#click-am").removeClass("text-primary")):(this.spanAmPm.children("#click-am").addClass("text-primary"),this.spanAmPm.children("#click-pm").removeClass("text-primary"))),i.on("resize.clockpicker"+this.id,function(){n.isShown&&n.locate()}),this.isAppended=!0),this.toggleView("hours"),this.locate(),this.isShown=!0,P.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(e){var t=A(e.target);0===t.closest(n.popover.find(".picker__wrap")).length&&0===t.closest(n.input).length&&n.hide()}),P.on("keyup.clockpicker."+this.id,function(e){27===e.keyCode&&n.hide()}),x(this.options.afterShow)}},a.prototype.hide=function(){x(this.options.beforeHide),this.input.removeClass("picker__input picker__input--active"),this.popover.removeClass("picker--opened"),A(document.body).css("overflow","visible"),this.isShown=!1,A(":input").each(function(e){A(this).attr("tabindex",e+1)}),P.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),P.off("keyup.clockpicker."+this.id),this.popover.hide(),x(this.options.afterHide)},a.prototype.toggleView=function(e,t){var n=!1;"minutes"===e&&"visible"===A(this.hoursView).css("visibility")&&(x(this.options.beforeHourSelect),n=!0);var i="hours"===e,r=i?this.hoursView:this.minutesView,a=i?this.minutesView:this.hoursView;this.currentView=e,this.spanHours.toggleClass("text-primary",i),this.spanMinutes.toggleClass("text-primary",!i),a.addClass("clockpicker-dial-out"),r.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(t),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){a.css("visibility","hidden")},B),n&&x(this.options.afterHourSelect)},a.prototype.resetClock=function(e){var t=this.currentView,n=this[t],i="hours"===t,r=n*(Math.PI/(i?6:30)),a=i&&0<n&&n<13?U:M,s=Math.sin(r)*a,o=-Math.cos(r)*a,u=this;O&&e?(u.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){u.canvas.removeClass("clockpicker-canvas-out"),u.setHand(s,o)},e)):this.setHand(s,o)},a.prototype.setHand=function(e,t,n){var i,r=Math.atan2(e,-t),a="hours"===this.currentView,s=Math.PI/(a||n?6:30),o=Math.sqrt(e*e+t*t),u=this.options,l=a&&o<(M+U)/2,c=l?U:M;if(u.twelvehour&&(c=M),r<0&&(r=2*Math.PI+r),r=(i=Math.round(r/s))*s,u.twelvehour?a?0===i&&(i=12):(n&&(i*=5),60===i&&(i=0)):a?(12===i&&(i=0),i=l?0===i?12:i:0===i?0:i+12):(n&&(i*=5),60===i&&(i=0)),this[this.currentView]!==i&&m&&this.options.vibrate&&(this.vibrateTimer||(navigator[m](10),this.vibrateTimer=setTimeout(A.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=i,a?this.spanHours.html(i):this.spanMinutes.html(C(i)),O){var d=Math.sin(r)*(c-N),h=-Math.cos(r)*(c-N),f=Math.sin(r)*c,p=-Math.cos(r)*c;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",h),this.bg.setAttribute("cx",f),this.bg.setAttribute("cy",p)}else this[a?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var e=A(this);e.toggleClass("active",i===+e.html())})},a.prototype.done=function(){x(this.options.beforeDone),this.hide(),this.label.addClass("active");var e=this.input.prop("value"),t=C(this.hours)+":"+C(this.minutes);this.options.twelvehour&&(t+=this.amOrPm),this.input.prop("value",t),t!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),x(this.options.afterDone)},a.prototype.clear=function(){this.hide(),this.label.removeClass("active");var e=this.input.prop("value"),t="";this.input.prop("value",t),t!==e&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur")},
a.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(i.off("resize.clockpicker"+this.id),this.popover.remove())},A.fn.pickatime=function(i){var r=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=A(this),t=e.data("clockpicker");if(t)"function"==typeof t[i]&&t[i].apply(t,r);else{var n=A.extend({},a.DEFAULTS,e.data(),"object"==typeof i&&i);e.data("clockpicker",new a(e,n))}})}}(),function(i){function t(){var e=+i(this).attr("data-length"),t=+i(this).val().length,n=t<=e;i(this).parent().find('span[class="character-counter"]').html(t+"/"+e),a(n,i(this))}function n(e){var t=e.parent().find('span[class="character-counter"]');t.length||(t=i("<span/>").addClass("character-counter").css("float","right").css("font-size","12px").css("height",1),e.parent().append(t))}function r(){i(this).parent().find('span[class="character-counter"]').html("")}function a(e,t){var n=t.hasClass("invalid");e&&n?t.removeClass("invalid"):e||n||(t.removeClass("valid"),t.addClass("invalid"))}i.fn.characterCounter=function(){return this.each(function(){var e=i(this);e.parent().find('span[class="character-counter"]').length||e.attr("data-length")!==undefined&&(e.on("input",t),e.on("focus",t),e.on("blur",r),n(e))})},i(document).on("ready turbolinks:load",function(){i("input, textarea").characterCounter()})}(jQuery),function(H){var t={init:function(F){var e={duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null};F=H.extend(e,F);var q=Materialize.objectSelectorString(H(this));return this.each(function(e){function t(){"undefined"!=typeof window.ontouchstart&&(N[0].addEventListener("touchstart",l),N[0].addEventListener("touchmove",c),N[0].addEventListener("touchend",d)),N[0].addEventListener("mousedown",l),N[0].addEventListener("mousemove",c),N[0].addEventListener("mouseup",d),N[0].addEventListener("mouseleave",d),N[0].addEventListener("click",o)}function i(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientX:e.clientX}function r(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientY:e.clientY}function h(e){return T<=e?e%T:e<0?h(T+e%T):e}function a(e){var t,n,i,r,a,s,o;!0,N.hasClass("scrolling")||N.addClass("scrolling"),null!=M&&window.clearTimeout(M),M=window.setTimeout(function(){!1,N.removeClass("scrolling")},F.duration);var u=v;if(g="number"==typeof e?e:g,v=Math.floor((g+_/2)/_),a=-(r=(i=g-v*_)<0?1:-1)*i*2/_,n=T>>1,F.fullWidth?o="translateX(0)":(o="translateX("+(N[0].clientWidth-p)/2+"px) ",o+="translateY("+(N[0].clientHeight-m)/2+"px)"),j){var l=v%T,c=R.find(".indicator-item.active");c.index()!==l&&(c.removeClass("active"),R.find(".indicator-item").eq(l).addClass("active"))}for((!F.noWrap||0<=v&&v<T)&&(s=f[h(v)],H(s).hasClass("active")||(N.find(".carousel-item").removeClass("active"),H(s).addClass("active")),s.style[x]=o+" translateX("+-i/2+"px) translateX("+r*F.shift*a*t+"px) translateZ("+F.dist*a+"px)",s.style.zIndex=0,F.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*a,s.style.opacity=tweenedOpacity,s.style.display="block"),t=1;t<=n;++t)F.fullWidth?(zTranslation=F.dist,tweenedOpacity=t===n&&i<0?1-a:1):(zTranslation=F.dist*(2*t+a*r),tweenedOpacity=1-.2*(2*t+a*r)),(!F.noWrap||v+t<T)&&((s=f[h(v+t)]).style[x]=o+" translateX("+(F.shift+(_*t-i)/2)+"px) translateZ("+zTranslation+"px)",s.style.zIndex=-t,s.style.opacity=tweenedOpacity,s.style.display="block"),F.fullWidth?(zTranslation=F.dist,tweenedOpacity=t===n&&0<i?1-a:1):(zTranslation=F.dist*(2*t-a*r),tweenedOpacity=1-.2*(2*t-a*r)),(!F.noWrap||0<=v-t)&&((s=f[h(v-t)]).style[x]=o+" translateX("+(-F.shift+(-_*t-i)/2)+"px) translateZ("+zTranslation+"px)",s.style.zIndex=-t,s.style.opacity=tweenedOpacity,s.style.display="block");if((!F.noWrap||0<=v&&v<T)&&((s=f[h(v)]).style[x]=o+" translateX("+-i/2+"px) translateX("+r*F.shift*a+"px) translateZ("+F.dist*a+"px)",s.style.zIndex=0,F.fullWidth?tweenedOpacity=1:tweenedOpacity=1-.2*a,s.style.opacity=tweenedOpacity,s.style.display="block"),u!==v&&"function"==typeof F.onCycleTo){var d=N.find(".carousel-item").eq(h(v));F.onCycleTo.call(this,d,I)}"function"==typeof U&&(U.call(this,d,I),U=null)}function n(){var e,t,n;t=(e=Date.now())-P,P=e,n=g-A,A=g,E=.8*(1e3*n/(1+t))+.2*E}function s(){var e,t;k&&(e=Date.now()-P,2<(t=k*Math.exp(-e/F.duration))||t<-2?(a(C-t),requestAnimationFrame(s)):a(C))}function o(e){if(I)return e.preventDefault(),e.stopPropagation(),!1;if(!F.fullWidth){var t=H(e.target).closest(".carousel-item").index();0!==h(v)-t&&(e.preventDefault(),e.stopPropagation()),u(t)}}function u(e){var t=v%T-e;F.noWrap||(t<0?Math.abs(t+T)<Math.abs(t)&&(t+=T):0<t&&Math.abs(t-T)<t&&(t-=T)),t<0?N.trigger("carouselNext",[Math.abs(t)]):0<t&&N.trigger("carouselPrev",[t])}function l(e){"mousedown"===e.type&&e.preventDefault(),L=I=!(b=!0),S=i(e),w=r(e),E=k=0,A=g,P=Date.now(),clearInterval(O),O=setInterval(n,100)}function c(e){var t,n;if(b)if(t=i(e),y=r(e),n=S-t,Math.abs(w-y)<30&&!L)(2<n||n<-2)&&(I=!0,S=t,a(g+n));else{if(I)return e.preventDefault(),e.stopPropagation(),!1;L=!0}if(I)return e.preventDefault(),e.stopPropagation(),!1}function d(e){if(b)return b=!1,clearInterval(O),C=g,(10<E||E<-10)&&(C=g+(k=.9*E)),C=Math.round(C/_)*_,F.noWrap&&(_*(T-1)<=C?C=_*(T-1):C<0&&(C=0)),k=C-g,P=Date.now(),requestAnimationFrame(s),I&&(e.preventDefault(),e.stopPropagation()),!1}var f,p,m,g,v,b,_,T,S,w,k,C,E,x,A,P,O,I,L,D=q+e,R=H('<ul class="indicators"></ul>'),M=null,U=null,N=H(this),j=N.attr("data-indicators")||F.indicators,B=function(){var e=N.find(".carousel-item img").first();if(e.length)e.prop("complete")?N.css("height",e.height()):e.on("load",function(){N.css("height",H(this).height())});else{var t=N.find(".carousel-item").first().height();N.css("height",t)}};if(F.fullWidth&&(F.dist=0,B(),j&&N.find(".carousel-fixed-item").addClass("with-indicators")),N.hasClass("initialized"))return H(window).trigger("resize"),H(this).trigger("carouselNext",[1e-6]),!0;N.addClass("initialized"),b=!1,g=C=0,f=[],p=N.find(".carousel-item").first().innerWidth(),m=N.find(".carousel-item").first().innerHeight(),_=2*p+F.padding,N.find(".carousel-item").each(function(e){if(f.push(H(this)[0]),j){var t=H('<li class="indicator-item"></li>');0===e&&t.addClass("active"),t.click(function(e){e.stopPropagation(),u(H(this).index())}),R.append(t)}}),j&&N.append(R),T=f.length,x="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return"undefined"==typeof document.body.style[t]||(x=t,!1)}),H(window).off("resize.carousel-"+D).on("resize.carousel-"+D,function(){F.fullWidth?(p=N.find(".carousel-item").first().innerWidth(),m=N.find(".carousel-item").first().innerHeight(),_=2*p+F.padding,C=g=2*v*p):a()}),t(),a(g),H(this).on("carouselNext",function(e,t,n){t===undefined&&(t=1),"function"==typeof n&&(U=n),C=_*Math.round(g/_)+_*t,g!==C&&(k=C-g,P=Date.now(),requestAnimationFrame(s))}),H(this).on("carouselPrev",function(e,t,n){t===undefined&&(t=1),"function"==typeof n&&(U=n),C=_*Math.round(g/_)-_*t,g!==C&&(k=C-g,P=Date.now(),requestAnimationFrame(s))}),H(this).on("carouselSet",function(e,t,n){t===undefined&&(t=0),"function"==typeof n&&(U=n),u(t)})})},next:function(e,t){H(this).trigger("carouselNext",[e,t])},prev:function(e,t){H(this).trigger("carouselPrev",[e,t])},set:function(e,t){H(this).trigger("carouselSet",[e,t])}};H.fn.carousel=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void H.error("Method "+e+" does not exist on jQuery.carousel"):t.init.apply(this,arguments)}}(jQuery),function(B){var t={init:function(r){return this.each(function(){var R=B("#"+B(this).attr("data-activates")),M=(B("body"),B(this)),U=M.parent(".tap-target-wrapper"),N=U.find(".tap-target-wave"),t=U.find(".tap-target-origin"),j=M.find(".tap-target-content");U.length||(U=M.wrap(B('<div class="tap-target-wrapper"></div>')).parent()),j.length||(j=B('<div class="tap-target-content"></div>'),M.append(j)),N.length||(N=B('<div class="tap-target-wave"></div>'),t.length||((t=R.clone(!0,!0)).addClass("tap-target-origin"),t.removeAttr("id"),t.removeAttr("style"),N.append(t)),U.append(N));var e=function(){U.is(".open")||(U.addClass("open"),setTimeout(function(){t.off("click.tapTarget").on("click.tapTarget",function(){n(),t.off("click.tapTarget")}),B(document).off("click.tapTarget").on("click.tapTarget",function(){n(),B(document).off("click.tapTarget")});var e=Materialize.throttle(function(){i()},200);B(window).off("resize.tapTarget").on("resize.tapTarget",e)},0))},n=function(){U.is(".open")&&(U.removeClass("open"),t.off("click.tapTarget"),B(document).off("click.tapTarget"),B(window).off("resize.tapTarget"))},i=function(){var e="fixed"===R.css("position");if(!e)for(var t=R.parents(),n=0;n<t.length&&!(e="fixed"==B(t[n]).css("position"));n++);var i=R.outerWidth(),r=R.outerHeight(),a=e?R.offset().top-B(document).scrollTop():R.offset().top,s=e?R.offset().left-B(document).scrollLeft():R.offset().left,o=B(window).width(),u=B(window).height(),l=o/2,c=u/2,d=s<=l,h=l<s,f=a<=c,p=c<a,m=.25*o<=s&&s<=.75*o,g=M.outerWidth(),y=M.outerHeight(),v=a+r/2-y/2,b=s+i/2-g/2,_=e?"fixed":"absolute",T=m?g:g/2+i,S=y/2,w=f?y/2:0,k=0,C=d&&!m?g/2-i:0,E=0,x=i,A=p?"bottom":"top",P=2*i,O=P,I=y/2-O/2,L=g/2-P/2,D={};D.top=f?v:"",D.right=h?o-b-g:"",D.bottom=p?u-v-y:"",D.left=d?b:"",D.position=_,U.css(D),j.css({width:T,height:S,top:w,right:E,bottom:k,left:C,padding:x,verticalAlign:A}),N.css({top:I,left:L,width:P,height:O})};"open"==r&&(i(),e()),"close"==r&&n()})},open:function(){},close:function(){}};B.fn.tapTarget=function(e){if(t[e]||"object"==typeof e)return t.init.apply(this,arguments);B.error("Method "+e+" does not exist on jQuery.tap-target")}}(jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],t):(e=e||self).videojs=t(e.window,e.document)}(this,function(Et,xt){function n(t){var i,r="info",a=function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i("log",r,t)};return i=Qe(t,a),a.createLogger=function(e){return n(t+": "+e)},a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},a.history=function(){return Ke?[].concat(Ke):[]},a.history.filter=function(t){return(Ke||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},a.history.clear=function(){Ke&&(Ke.length=0)},a.history.disable=function(){null!==Ke&&(Ke.length=0,Ke=null)},a.history.enable=function(){null===Ke&&(Ke=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("error",r,t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("warn",r,t)},a.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i("debug",r,t)},a}function S(t,n){Ze(t).forEach(function(e){return n(t[e],e)})}function w(n,i,e){return void 0===e&&(e=0),Ze(n).reduce(function(e,t){return i(e,n[t],t)},e)}function At(n){for(var e=arguments.length,t=new Array(1<e?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Object.assign?Object.assign.apply(Object,[n].concat(t)):(t.forEach(function(e){e&&S(e,function(e,t){n[t]=e})}),n)}function s(e){return!!e&&"object"==typeof e}function H(e){return s(e)&&"[object Object]"===Je.call(e)&&e.constructor===Object}function ne(e,t){if(!e||!t)return"";if("function"!=typeof Et.getComputedStyle)return"";var n=Et.getComputedStyle(e);return n?n.getPropertyValue(t)||n[t]:""}function r(e){return"string"==typeof e&&/\S/.test(e)}function i(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function a(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function o(){return xt===Et.document}function u(e){return s(e)&&1===e.nodeType}function k(){try{return Et.parent!==Et.self}catch(e){return!0}}function e(i){return function(e,t){if(!r(e))return xt[i](null);r(t)&&(t=xt.querySelector(t));var n=u(t)?t:xt;return n[i]&&n[i](e)}}function ie(e,n,t,i){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===t&&(t={});var r=xt.createElement(e);return Object.getOwnPropertyNames(n).forEach(function(e){var t=n[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(en.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+t+"."),r.setAttribute(e,t)):"textContent"===e?b(r,t):r[e]=t}),Object.getOwnPropertyNames(t).forEach(function(e){r.setAttribute(e,t[e])}),i&&d(r,i),r}function b(e,t){return"undefined"==typeof e.textContent?e.innerText=t:e.textContent=t,e}function Pt(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Ot(e,t){return i(t),e.classList?e.classList.contains(t):a(t).test(e.className)}function It(e,t){return e.classList?e.classList.add(t):Ot(e,t)||(e.className=(e.className+" "+t).trim()),e}function Lt(e,t){return e.classList?e.classList.remove(t):(i(t),e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")),e}function re(e,t,n){var i=Ot(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?It(e,t):Lt(e,t),e}function I(n,i){Object.getOwnPropertyNames(i).forEach(function(e){var t=i[e];null==t||!1===t?n.removeAttribute(e):n.setAttribute(e,!0===t?"":t)})}function Dt(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&0<e.attributes.length)for(var i=e.attributes,r=i.length-1;0<=r;r--){var a=i[r].name,s=i[r].value;"boolean"!=typeof e[a]&&-1===n.indexOf(","+a+",")||(s=null!==s),t[a]=s}return t}function ae(e,t){return e.getAttribute(t)}function se(e,t,n){e.setAttribute(t,n)}function oe(e,t){e.removeAttribute(t)}function m(){xt.body.focus(),xt.onselectstart=function(){return!1}}function g(){xt.onselectstart=function(){return!0}}function C(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(e){t[e]!==undefined&&(n[e]=t[e])}),n.height||(n.height=parseFloat(ne(e,"height"))),n.width||(n.width=parseFloat(ne(e,"width"))),n}}function c(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=xt.documentElement,i=xt.body,r=n.clientLeft||i.clientLeft||0,a=Et.pageXOffset||i.scrollLeft,s=t.left+a-r,o=n.clientTop||i.clientTop||0,u=Et.pageYOffset||i.scrollTop,l=t.top+u-o;return{left:Math.round(s),top:Math.round(l)}}function y(e,t){var n={},i=c(e),r=e.offsetWidth,a=e.offsetHeight,s=i.top,o=i.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(s-u+a)/a)),n.x=Math.max(0,Math.min(1,(l-o)/r)),n}function t(e){return s(e)&&3===e.nodeType}function _(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function l(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return"function"==typeof e&&(e=e()),u(e)||t(e)?e:"string"==typeof e&&/\S/.test(e)?xt.createTextNode(e):void 0}).filter(function(e){return e})}function d(t,e){return l(e).forEach(function(e){return t.appendChild(e)}),t}function T(e,t){return d(_(e),t)}function Rt(e){return e.button===undefined&&e.buttons===undefined||(0===e.button&&e.buttons===undefined||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}function h(e,t){t&&(Ye=t),Et.setTimeout(it,e)}function f(){nt=!0,Et.removeEventListener("load",f)}function Mt(){return at++}function p(e,t){if(rt.has(e)){var n=rt.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&rt["delete"](e)}}function v(t,n,e,i){e.forEach(function(e){t(n,e,i)})}function E(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var i=e||Et.event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||xt),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&e.clientX!==undefined){var a=xt.documentElement,s=xt.body;e.pageX=e.clientX+(a&&a.scrollLeft||s&&s.scrollLeft||0)-(a&&a.clientLeft||s&&s.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||s&&s.scrollTop||0)-(a&&a.clientTop||s&&s.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&e.button!==undefined&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}function Ut(o,e,t){if(Array.isArray(e))return v(Ut,o,e,t);rt.has(o)||rt.set(o,{});var u=rt.get(o);if(u.handlers||(u.handlers={}),u.handlers[e]||(u.handlers[e]=[]),t.guid||(t.guid=Mt()),u.handlers[e].push(t),u.dispatcher||(u.disabled=!1,u.dispatcher=function(e,t){if(!u.disabled){e=E(e);var n=u.handlers[e.type];if(n)for(var i=n.slice(0),r=0,a=i.length;r<a&&!e.isImmediatePropagationStopped();r++)try{i[r].call(o,e,t)}catch(s){en.error(s)}}}),1===u.handlers[e].length)if(o.addEventListener){var n=!1;st&&-1<ut.indexOf(e)&&(n={passive:!0}),o.addEventListener(e,u.dispatcher,n)}else o.attachEvent&&o.attachEvent("on"+e,u.dispatcher)}function Nt(e,t,n){if(rt.has(e)){var i=rt.get(e);if(i.handlers){if(Array.isArray(t))return v(Nt,e,t,n);var r=function r(e,t){i.handlers[t]=[],p(e,t)};if(t!==undefined){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);p(e,t)}else r(e,t)}else for(var o in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},o)&&r(e,o)}}}function x(e,t,n){var i=rt.has(e)?rt.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=E(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)x.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){rt.has(t.target)||rt.set(t.target,{});var a=rt.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function A(e,t,n){if(Array.isArray(t))return v(A,e,t,n);var i=function i(){Nt(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Mt(),Ut(e,t,i)}function P(e,t,n){var i=function i(){Nt(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Mt(),Ut(e,t,i)}function jt(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=ie("span",{className:"vjs-event-bus"});return At(e,_t),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on("dispose",function(){e.off(),Et.setTimeout(function(){e.eventBusEl_=null},0)}),e}function ue(e,t){return At(e,Tt),e.state=At({},e.state,t),"function"==typeof e.handleStateChanged&&on(e)&&e.on("statechanged",e.handleStateChanged),e}function Bt(){for(var n={},e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(e){e&&S(e,function(e,t){H(e)?(H(n[t])||(n[t]={}),n[t]=Bt(n[t],e)):n[t]=e})}),n}function Ft(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function O(e,t){return(O=Object.setPrototypeOf||function n(e,t){return e.__proto__=t,e})(e,t)}function L(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function D(e,t,n){return(D=L()?Reflect.construct:function a(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&O(r,n.prototype),r}).apply(null,arguments)}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e,t,n){if("number"!=typeof t||t<0||n<t)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}function M(e,t,n,i){return R(e,i,n.length-1),n[i][t]}function U(e){return e===undefined||0===e.length?{length:0,start:function t(){throw new Error("This TimeRanges object is empty")},end:function n(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:M.bind(null,"start",0,e),end:M.bind(null,"end",1,e)}}function Ht(e,t){return Array.isArray(e)?U(e):e===undefined||t===undefined?U():U([[e,t]])}function Vt(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=Ht(0,0));for(var a=0;a<e.length;a++)n=e.start(a),t<(i=e.end(a))&&(i=t),r+=i-n;return r/t}function Wt(e){if(e instanceof Wt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:s(e)&&("number"==typeof e.code&&(this.code=e.code),At(this,e)),this.message||(this.message=Wt.defaultMessages[this.code]||"")}function N(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(r){i=r}return[i,n]}function zt(e){return e!==undefined&&null!==e&&"function"==typeof e.then}function Gt(e){zt(e)&&e.then(null,function(){})}function j(e,t){return e(t={exports:{}},t.exports),t.exports}function B(e){var t=gi.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}function F(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)ea.call(n,i)&&(e[i]=n[i])}return e}function q(e,t){for(var n=0;n<e.length;n++)t(e[n])}function V(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function W(e,t,n){var i=e;return mi(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=Zr(t,{uri:e}),i.callback=n,i}function z(e,t,n){return G(t=W(e,t,n))}function G(i){function e(){4===l.readyState&&setTimeout(n,0)}function r(){var e=undefined;if(e=l.response?l.response:l.responseText||$(l),g)try{e=JSON.parse(e)}catch(t){}return e}function t(e){return clearTimeout(c),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,u(e,y)}function n(){if(!s){var e;clearTimeout(c),e=i.useXDR&&l.status===undefined?200:1223===l.status?204:l.status;var t=y,n=null;return 0!==e?(t={body:r(),statusCode:e,method:h,headers:{},url:d,rawRequest:l},l.getAllResponseHeaders&&(t.headers=Jr(l.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),u(n,t,t.body)}}if("undefined"==typeof i.callback)throw new Error("callback argument missing");var a,s,o=!1,u=function v(e,t,n){o||(o=!0,i.callback(e,t,n))},l=i.xhr||null;l||(l=i.cors||i.useXDR?new z.XDomainRequest:new z.XMLHttpRequest);var c,d=l.url=i.uri||i.url,h=l.method=i.method||"GET",f=i.body||i.data,p=l.headers=i.headers||{},m=!!i.sync,g=!1,y={body:undefined,headers:{},statusCode:0,method:h,url:d,rawRequest:l};if("json"in i&&!1!==i.json&&(g=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),f=JSON.stringify(!0===i.json?f:i.json))),l.onreadystatechange=e,l.onload=n,l.onerror=t,l.onprogress=function(){},l.onabort=function(){s=!0},l.ontimeout=t,l.open(h,d,!m,i.username,i.password),m||(l.withCredentials=!!i.withCredentials),!m&&0<i.timeout&&(c=setTimeout(function(){if(!s){s=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},i.timeout)),l.setRequestHeader)for(a in p)p.hasOwnProperty(a)&&l.setRequestHeader(a,p[a]);else if(i.headers&&!V(i.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in i&&(l.responseType=i.responseType),"beforeSend"in i&&"function"==typeof i.beforeSend&&i.beforeSend(l),l.send(f||null),l}function $(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function X(){}function Y(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function K(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function Q(){this.values=ma(null)}function J(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var s=r[a].split(n);if(2===s.length)t(s[0],s[1])}}function Z(t,e,s){function n(){var e=K(t);if(null===e)throw new Y(Y.Errors.BadTimeStamp,"Malformed timestamp: "+a);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function i(e,t){var a=new Q;J(e,function(e,t){switch(e){case"region":for(var n=s.length-1;0<=n;n--)if(s[n].id===t){a.set(e,s[n].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),r=i[0];a.integer(e,r),a.percent(e,r)&&a.set("snapToLines",!1),a.alt(e,r,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),t.region=a.get("region",null),t.vertical=a.get("vertical",""),t.line=a.get("line","auto"),t.lineAlign=a.get("lineAlign","start"),t.snapToLines=a.get("snapToLines",!0),t.size=a.get("size",100),t.align=a.get("align","middle"),t.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}function r(){t=t.replace(/^\s+/,"")}var a=t;if(r(),e.startTime=n(),r(),"-->"!==t.substr(0,3))throw new Y(Y.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+a);t=t.substr(3),r(),e.endTime=n(),r(),i(t,e)}function ee(a,n){function e(){function e(e){return n=n.substr(e.length),e}if(!n)return null;var t=n.match(/^([^<]*)(<[^>]*>?)?/);return e(t[1]?t[1]:t[2])}function t(e){return ga[e]}function i(e){for(;f=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(f[0],t);return e}function r(e,t){return!ba[t.localName]||ba[t.localName]===e.localName}function s(e,t){var n=ya[e];if(!n)return null;var i=a.document.createElement(n);i.localName=n;var r=va[e];return r&&t&&(i[r]=t.trim()),i}for(var o,u=a.document.createElement("div"),l=u,c=[];null!==(o=e());)if("<"!==o[0])l.appendChild(a.document.createTextNode(i(o)));else{if("/"===o[1]){c.length&&c[c.length-1]===o.substr(2).replace(">","")&&(c.pop(),l=l.parentNode);continue}var d,h=K(o.substr(1,o.length-2));if(h){d=a.document.createProcessingInstruction("timestamp",h),l.appendChild(d);continue}var f=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!f)continue;if(!(d=s(f[1],f[3])))continue;if(!r(l,d))continue;f[2]&&(d.className=f[2].substr(1).replace("."," ")),c.push(f[1]),l.appendChild(d),l=d}return u}function te(e){for(var t=0;t<_a.length;t++){var n=_a[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function le(e){function r(e,t){for(var n=t.childNodes.length-1;0<=n;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?i[e.length=0]:n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}var t=[],n="";if(!e||!e.childNodes)return"ltr";for(r(t,e);n=a(t);)for(var i=0;i<n.length;i++)if(te(n.charCodeAt(i)))return"rtl";return"ltr"}function ce(e){if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}function de(){}function he(e,t,n){de.call(this),this.cue=t,this.cueDiv=ee(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:le(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"middle":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function fe(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=t!==undefined?t:e.lineHeight}function pe(e,t,o,u){function n(e,t){for(var n,i=new fe(e),r=1,a=0;a<t.length;a++){for(;e.overlapsOppositeAxis(o,t[a])||e.within(o)&&e.overlapsAny(u);)e.move(t[a]);if(e.within(o))return e;var s=e.intersectPercentage(o);s<r&&(n=new fe(e),r=s),e=new fe(i)}return n||i}var i=new fe(t),r=t.cue,a=ce(r),s=[];if(r.snapToLines){var l;switch(r.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var c=i.lineHeight,d=c*Math.round(a),h=o[l]+c,f=s[0];Math.abs(d)>h&&(d=d<0?-1:1,d*=Math.ceil(h/c)*c),a<0&&(d+=""===r.vertical?o.height:o.width,s=s.reverse()),i.move(f,d)}else{var p=i.lineHeight/o.height*100;switch(r.lineAlign){case"middle":a-=p/2;break;case"end":a-=p}switch(r.vertical){case"":t.applyStyles({top:t.formatStyle(a,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(a,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],i=new fe(t)}var m=n(i,s);t.move(m.toCSSCompatValues(o))}function me(){}function ge(e){return"string"==typeof e&&(!!Ea[e.toLowerCase()]&&e.toLowerCase())}function ye(e){return"string"==typeof e&&(!!xa[e.toLowerCase()]&&e.toLowerCase())}function ve(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,s=t,o=n,u=null,l="",c=!0,d="auto",h="start",f=50,p="middle",m=50,g="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function y(){return i},set:function v(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function b(){return r},set:function _(e){r=!!e}},startTime:{enumerable:!0,get:function T(){return a},set:function S(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function w(){return s},set:function k(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");s=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function C(){return o},set:function E(e){o=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function x(){return u},set:function A(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function P(){return l},set:function O(e){var t=ge(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");l=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function I(){return c},set:function L(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function D(){return d},set:function R(e){if("number"!=typeof e&&e!==Ca)throw new SyntaxError(
"An invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function M(){return h},set:function U(e){var t=ye(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function N(){return f},set:function j(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");f=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function B(){return p},set:function F(e){var t=ye(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function q(){return m},set:function H(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");m=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function V(){return g},set:function W(e){var t=ye(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}}}),this.displayState=undefined}function be(e){return"string"==typeof e&&(!!Pa[e.toLowerCase()]&&e.toLowerCase())}function _e(e){return"number"==typeof e&&0<=e&&e<=100}function Te(){var t=100,n=3,i=0,r=100,a=0,s=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function e(){return t},set:function u(e){if(!_e(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function l(){return n},set:function c(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");n=e}},regionAnchorY:{enumerable:!0,get:function d(){return r},set:function h(e){if(!_e(e))throw new Error("RegionAnchorX must be between 0 and 100.");r=e}},regionAnchorX:{enumerable:!0,get:function f(){return i},set:function p(e){if(!_e(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function m(){return s},set:function g(e){if(!_e(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function y(){return a},set:function v(e){if(!_e(e))throw new Error("ViewportAnchorX must be between 0 and 100.");a=e}},scroll:{enumerable:!0,get:function b(){return o},set:function _(e){var t=be(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");o=t}}})}function Se(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var s=new pa.text.TrackClass(r);return a.addTrack(s),s}function we(e,t){Da[e]=Da[e]||[],Da[e].push(t)}function $t(e,t,n){e.setTimeout(function(){return xe(t,Da[t.type],n,e)},1)}function Xt(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function Yt(e,t,n){return e.reduceRight(ke(n),t[n]())}function Kt(e,t,n,i){return t[n](e.reduce(ke(n),i))}function Qt(e,t,n,i){void 0===i&&(i=null);var r="call"+ln(n),a=e.reduce(ke(r),i),s=a===Ma,o=s?null:t[n](a);return Ce(e,n,o,s),o}function ke(n){return function(e,t){return e===Ma?Ma:t[n]?t[n](e):e}}function Ce(e,t,n,i){for(var r=e.length-1;0<=r;r--){var a=e[r];a[t]&&a[t](i,n)}}function Jt(e){Ra[e.id()]=null}function Ee(e,t){var n=Ra[e.id()],i=null;if(n===undefined||null===n)return i=t(e),Ra[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],s=a[0],o=a[1];s===t&&(i=o)}return null===i&&(i=t(e),n.push([t,i])),i}function xe(n,e,i,r,a,s){void 0===n&&(n={}),void 0===e&&(e=[]),void 0===a&&(a=[]),void 0===s&&(s=!1);var t=e,o=t[0],u=t.slice(1);if("string"==typeof o)xe(n,Da[o],i,r,a,s);else if(o){var l=Ee(r,o);if(!l.setSource)return a.push(l),xe(n,u,i,r,a,s);l.setSource(At({},n),function(e,t){if(e)return xe(n,u,i,r,a,s);a.push(l),xe(t,n.type===t.type?u:Da[t.type],i,r,a,s)})}else u.length?xe(n,u,i,r,a,s):s?i(n,a):xe(n,Da["*"],i,r,a,!0)}function Ae(e){if(!e.type){var t=Fa(e.src);t&&(e.type=t)}return e}function Pe(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Oe(e,t,n){try{e.style[t]=n}catch(i){return}}function Ie(e){ns=e}function Le(){ns=ts}function De(e,t){return void 0===t&&(t=e),ns(e,t)}function Re(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}function Me(e,t){return Re(e.options[e.options.selectedIndex].value,t)}function Ue(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(Re(e.options[i].value,n)===t){e.selectedIndex=i;break}}function Ne(e,n,t){var i=Ne.getPlayer(e);if(i)return n&&en.warn('Player "'+e+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var r="string"==typeof e?nn("#"+Xo(e)):e;if(!u(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||en.warn("The element supplied is not included in the DOM"),n=n||{},Ne.hooks("beforesetup").forEach(function(e){var t=e(r,Bt(n));s(t)&&!Array.isArray(t)?n=Bt(n,t):en.error("please return an object in beforesetup hooks")});var a=dn.getComponent("Player");return i=new a(r,n,t),Ne.hooks("setup").forEach(function(e){return e(i)}),i}function je(){return(je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function Be(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qe(e){for(var t=Et.atob(e||""),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function He(e,t){return e(t={exports:{}},t.exports),t.exports}function Ve(e){for(var t=Et.atob(e),n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}function We(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}function ze(a,s){return function o(e){var t=this;if(!s)return new Rh(a);if(Rh&&!e){var n=Ge(s.toString().replace(/^function.+?{/,"").slice(0,-1));return this[Oh]=new Rh(n),$e(this[Oh],n),this[Oh]}var i={postMessage:function r(e){t.onmessage&&setTimeout(function(){t.onmessage({data:e,target:i})})}};s.call(i),this.postMessage=function(e){setTimeout(function(){i.onmessage({data:e,target:t})})},this.isThisThread=!0}}function Ge(e){try{return Dh.createObjectURL(new Blob([e],{type:Ih}))}catch(n){var t=new Lh;return t.append(e),Dh.createObjectURL(t.getBlob(type))}}function $e(e,t){if(e&&t){var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&Dh.revokeObjectURL(e.objURL),n.call(e)}}}function Xe(){}Et=Et&&Et.hasOwnProperty("default")?Et["default"]:Et,xt=xt&&xt.hasOwnProperty("default")?xt["default"]:xt;var Ye,Zt="7.6.5",Ke=[],Qe=function Qe(s,o){return function(e,t,n){var i=o.levels[t],r=new RegExp("^("+i+")$");if("log"!==e&&n.unshift(e.toUpperCase()+":"),n.unshift(s+":"),Ke&&Ke.push([].concat(n)),Et.console){var a=Et.console[e];a||"debug"!==e||(a=Et.console.info||Et.console.log),a&&i&&r.test(e)&&a[Array.isArray(n)?"apply":"call"](Et.console,n)}}},en=n("VIDEOJS"),tn=en.createLogger,Je=Object.prototype.toString,Ze=function Ze(e){return s(e)?Object.keys(e):[]},nn=e("querySelector"),et=e("querySelectorAll"),tt=Object.freeze({isReal:o,isEl:u,isInFrame:k,createEl:ie,textContent:b,prependTo:Pt,hasClass:Ot,addClass:It,removeClass:Lt,toggleClass:re,setAttributes:I,getAttributes:Dt,getAttribute:ae,setAttribute:se,removeAttribute:oe,blockTextSelection:m,unblockTextSelection:g,getBoundingClientRect:C,findPosition:c,getPointerPosition:y,isTextNode:t,emptyEl:_,normalizeContent:l,appendContent:d,insertContent:T,isSingleLeftClick:Rt,$:nn,$$:et}),nt=!1,it=function it(){if(o()&&!1!==Ye.options.autoSetup){var e=Array.prototype.slice.call(xt.getElementsByTagName("video")),t=Array.prototype.slice.call(xt.getElementsByTagName("audio")),n=Array.prototype.slice.call(xt.getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&0<i.length)for(var r=0,a=i.length;r<a;r++){var s=i[r];if(!s||!s.getAttribute){h(1);break}s.player===undefined&&null!==s.getAttribute("data-setup")&&Ye(s)}else nt||h(1)}};o()&&("complete"===xt.readyState?f():Et.addEventListener("load",f));var rn=function rn(e){var t=xt.createElement("style");return t.className=e,t},an=function an(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},rt=new WeakMap,at=3,st=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function t(){st=!0}});Et.addEventListener("test",null,e),Et.removeEventListener("test",null,e)}catch(n){}}();var ot,ut=["touchstart","touchmove"],lt=Object.freeze({fixEvent:E,on:Ut,off:Nt,trigger:x,one:A,any:P}),ct=30,sn=function sn(e,t,n){t.guid||(t.guid=Mt());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},dt=function dt(t,n){var i=Et.performance.now(),r=function r(){var e=Et.performance.now();n<=e-i&&(t.apply(void 0,arguments),i=e)};return r},ht=function ht(r,a,s,o){var u;void 0===o&&(o=Et);var e=function e(){o.clearTimeout(u),u=null},l=function l(){var e=this,t=arguments,n=function i(){n=u=null,s||r.apply(e,t)};!u&&s&&r.apply(e,t),o.clearTimeout(u),u=o.setTimeout(n,a)};return l.cancel=e,l},ft=function ft(){};ft.prototype.allowedEvents_={},ft.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ut(this,e,t),this.addEventListener=n},ft.prototype.addEventListener=ft.prototype.on,ft.prototype.off=function(e,t){Nt(this,e,t)},ft.prototype.removeEventListener=ft.prototype.off,ft.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},A(this,e,t),this.addEventListener=n},ft.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},P(this,e,t),this.addEventListener=n},ft.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=E(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),x(this,e)},ft.prototype.dispatchEvent=ft.prototype.trigger,ft.prototype.queueTrigger=function(e){var t=this;ot||(ot=new Map);var n=e.type||e,i=ot.get(this);i||(i=new Map,ot.set(this,i));var r=i.get(n);i["delete"](n),Et.clearTimeout(r);var a=Et.setTimeout(function(){0===i.size&&(i=null,ot["delete"](t)),t.trigger(e)},0);i.set(n,a)};var on=function on(t){return t instanceof ft||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},un=function un(e,t){on(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},pt=function pt(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},mt=function mt(e){if(!e.nodeName&&!on(e))throw new Error("Invalid target; must be a DOM node or evented object.")},gt=function gt(e){if(!pt(e))throw new Error("Invalid event type; must be a non-empty string or array.")},yt=function yt(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},vt=function vt(e,t){var n,i,r,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return a?(n=e.eventBusEl_,3<=t.length&&t.shift(),i=t[0],r=t[1]):(n=t[0],i=t[1],r=t[2]),mt(n),gt(i),yt(r),{isTargetingSelf:a,target:n,type:i,listener:r=sn(e,r)}},bt=function bt(e,t,n,i){mt(e),e.nodeName?lt[t](e,n,i):e[t](n,i)},_t={on:function Ut(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=vt(this,n),a=r.isTargetingSelf,s=r.target,o=r.type,u=r.listener;if(bt(s,"on",o,u),!a){var l=function l(){return e.off(s,o,u)};l.guid=u.guid;var c=function c(){return e.off("dispose",l)};c.guid=u.guid,bt(this,"on","dispose",l),bt(s,"on","dispose",c)}},one:function A(){for(var i=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=vt(this,t),a=r.isTargetingSelf,s=r.target,o=r.type,u=r.listener;if(a)bt(s,"one",o,u);else{var l=function l(){i.off(s,o,l);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u.apply(null,t)};l.guid=u.guid,bt(s,"one",o,l)}},any:function P(){for(var i=this,e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=vt(this,t),a=r.isTargetingSelf,s=r.target,o=r.type,u=r.listener;if(a)bt(s,"any",o,u);else{var l=function l(){i.off(s,o,l);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];u.apply(null,t)};l.guid=u.guid,bt(s,"any",o,l)}},off:function Gp(e,t,n){if(!e||pt(e))Nt(this.eventBusEl_,e,t);else{var i=e,r=t;mt(i),gt(r),yt(n),n=sn(this,n),this.off("dispose",n),i.nodeName?(Nt(i,r,n),Nt(i,"dispose",n)):on(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function $p(e,t){return x(this.eventBusEl_,e,t)}},Tt={state:{},setState:function Xp(e){var n,i=this;return"function"==typeof e&&(e=e()),S(e,function(e,t){i.state[t]!==e&&((n=n||{})[t]={from:i.state[t],to:e}),i.state[t]=e}),n&&on(this)&&this.trigger({changes:n,type:"statechanged"}),n}},St=function St(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCase()})},ln=function ln(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toUpperCase()})},cn=function cn(e,t){return ln(e)===ln(t)},dn=function(){function l(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.parentComponent_=null,this.options_=Bt({},this.options_),t=this.options_=Bt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+Mt()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&jt(this,{eventBusKey:this.el_?"el_":null}),ue(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,(this.clearingTimersOnDispose_=!1)!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var e=l.prototype;return e.dispose=function t(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;0<=e;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),rt.has(this.el_)&&rt["delete"](this.el_),this.el_=null),this.player_=null},e.player=function n(){return this.player_},e.options=function i(e){return e&&(this.options_=Bt(this.options_,e)),this.options_},e.el=function r(){return this.el_},e.createEl=function a(e,t,n){return ie(e,t,n)},e.localize=function c(e,r,t){void 0===t&&(t=e);var n=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[n],s=n&&n.split("-")[0],o=i&&i[s],u=t;return a&&a[e]?u=a[e]:o&&o[e]&&(u=o[e]),r&&(u=u.replace(/\{(\d+)\}/g,function(e,t){var n=r[t-1],i=n;return void 0===n&&(i=e),i})),u},e.contentEl=function s(){return this.contentEl_||this.el_},e.id=function o(){return this.id_},e.name=function u(){return this.name_},e.children=function d(){return this.children_},e.getChildById=function h(e){return this.childIndex_[e]},e.getChild=function f(e){if(e)return this.childNameIndex_[e]},e.addChild=function p(e,t,n){var i,r;if(void 0===t&&(t={}),void 0===n&&(n=this.children_.length),"string"==typeof e){r=ln(e);var a=t.componentClass||r;t.name=r;var s=l.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,t)}else i=e;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(n,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(r=r||i.name&&ln(i.name()))&&(this.childNameIndex_[r]=i,this.childNameIndex_[St(r)]=i),"function"==typeof i.el&&i.el()){var o=this.contentEl().children[n]||null;this.contentEl().insertBefore(i.el(),o)}return i},e.removeChild=function m(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ln(e.name())]=null,this.childNameIndex_[St(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},e.initChildren=function g(){var r=this,i=this.options_.children;if(i){var e,a=this.options_,s=function s(e){var t=e.name,n=e.opts;if(a[t]!==undefined&&(n=a[t]),!1!==n){!0===n&&(n={}),n.playerOptions=r.options_.playerOptions;var i=r.addChild(t,n);i&&(r[t]=i)}},n=l.getComponent("Tech");(e=Array.isArray(i)?i:Object.keys(i)).concat(Object.keys(this.options_).filter(function(t){return!e.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var t,n;return"string"==typeof e?n=i[t=e]||r.options_[t]||{}:(t=e.name,n=e),{name:t,opts:n}}).filter(function(e){var t=l.getComponent(e.opts.componentClass||ln(e.name));return t&&!n.isTech(t)}).forEach(s)}},e.buildCSSClass=function y(){return""},e.ready=function v(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},e.triggerReady=function b(){this.isReady_=!0,this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[],e&&0<e.length&&e.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},e.$=function _(e,t){return nn(e,t||this.contentEl())},e.$$=function T(e,t){return et(e,t||this.contentEl())},e.hasClass=function S(e){return Ot(this.el_,e)},e.addClass=function w(e){It(this.el_,e)},e.removeClass=function k(e){Lt(this.el_,e)},e.toggleClass=function C(e,t){re(this.el_,e,t)},e.show=function E(){this.removeClass("vjs-hidden")},e.hide=function x(){this.addClass("vjs-hidden")},e.lockShowing=function A(){this.addClass("vjs-lock-showing")},e.unlockShowing=function P(){this.removeClass("vjs-lock-showing")},e.getAttribute=function O(e){return ae(this.el_,e)},e.setAttribute=function I(e,t){se(this.el_,e,t)},e.removeAttribute=function L(e){oe(this.el_,e)},e.width=function D(e,t){return this.dimension("width",e,t)},e.height=function R(e,t){return this.dimension("height",e,t)},e.dimensions=function M(e,t){this.width(e,!0),this.height(t)},e.dimension=function U(e,t,n){if(t!==undefined)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+ln(e)],10)},e.currentDimension=function N(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=ne(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+ln(e);t=this.el_[n]}return t},e.currentDimensions=function j(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function B(){return this.currentDimension("width")},e.currentHeight=function F(){return this.currentDimension("height")},e.focus=function q(){this.el_.focus()},e.blur=function H(){this.el_.blur()},e.handleKeyDown=function V(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},e.handleKeyPress=function W(e){this.handleKeyDown(e)},e.emitTapEvents=function z(){var r,t=0,a=null,s=10,n=200;this.on("touchstart",function(e){1===e.touches.length&&(a={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},t=Et.performance.now(),r=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)r=!1;else if(a){var t=e.touches[0].pageX-a.pageX,n=e.touches[0].pageY-a.pageY,i=Math.sqrt(t*t+n*n);s<i&&(r=!1)}});var e=function e(){r=!1};this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",function(e){!(a=null)===r&&(Et.performance.now()-t<n&&(e.preventDefault(),this.trigger("tap")))})},e.enableTouchActivity=function G(){if(this.player()&&this.player().reportUserActivity){var e,t=sn(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var n=function n(){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},e.setTimeout=function $(e,t){var n,i=this;return e=sn(this,e),this.clearTimersOnDispose_(),n=Et.setTimeout(function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_["delete"](n),e()},t),this.setTimeoutIds_.add(n),n},e.clearTimeout=function X(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_["delete"](e),Et.clearTimeout(e)),e},e.setInterval=function Y(e,t){e=sn(this,e),this.clearTimersOnDispose_();var n=Et.setInterval(e,t);return this.setIntervalIds_.add(n),n},e.clearInterval=function K(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_["delete"](e),Et.clearInterval(e)),e},e.requestAnimationFrame=function Q(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=sn(this,e),t=Et.requestAnimationFrame(function(){n.rafIds_.has(t)&&n.rafIds_["delete"](t),e()}),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},e.cancelAnimationFrame=function J(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_["delete"](e),Et.cancelAnimationFrame(e)),e):this.clearTimeout(e)},e.clearTimersOnDispose_=function Z(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var t=e[0],n=e[1];i[t].forEach(i[n],i)}),i.clearingTimersOnDispose_=!1}))},l.registerComponent=function ee(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var n,i=l.getComponent("Tech"),r=i&&i.isTech(t),a=l===t||l.prototype.isPrototypeOf(t.prototype);if(r||!a)throw n=r?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+n+".");e=ln(e),l.components_||(l.components_={});var s=l.getComponent("Player");if("Player"===e&&s&&s.players){var o=s.players,u=Object.keys(o);if(o&&0<u.length&&u.map(function(e){return o[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return l.components_[e]=t,l.components_[St(e)]=t},l.getComponent=function te(e){if(e&&l.components_)return l.components_[e]},l}();dn.prototype.supportsRaf_="function"==typeof Et.requestAnimationFrame&&"function"==typeof Et.cancelAnimationFrame,dn.registerComponent("Component",dn);for(var wt,kt,Ct,hn,fn,pn=Et.navigator&&Et.navigator.userAgent||"",mn=/AppleWebKit\/([\d.]+)/i.exec(pn),gn=mn?parseFloat(mn.pop()):null,yn=/iPad/i.test(pn),vn=/iPhone/i.test(pn)&&!yn,bn=/iPod/i.test(pn),_n=vn||yn||bn,Tn=(wt=pn.match(/OS (\d+)_/i))&&wt[1]?wt[1]:null,Sn=/Android/i.test(pn),wn=function(){var e=pn.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),kn=Sn&&wn<5&&gn<537,Cn=/Firefox/i.test(pn),En=/Edge/i.test(pn),xn=!En&&(/Chrome/i.test(pn)||/CriOS/i.test(pn)),An=(kt=pn.match(/(Chrome|CriOS)\/(\d+)/))&&kt[2]?parseFloat(kt[2]):null,Pn=(Ct=/MSIE\s(\d+)\.\d/.exec(pn),!(hn=Ct&&parseFloat(Ct[1]))&&/Trident\/7.0/i.test(pn)&&/rv:11.0/.test(pn)&&(hn=11),hn),On=/Safari/i.test(pn)&&!xn&&!Sn&&!En,In=(On||_n)&&!xn,Ln=/Windows/i.test(pn),Dn=(o()&&("ontouchstart"in Et||Et.navigator.maxTouchPoints||Et.DocumentTouch&&Et.document instanceof Et.DocumentTouch)),Rn=Object.freeze({IS_IPAD:yn,IS_IPHONE:vn,IS_IPOD:bn,IS_IOS:_n,IOS_VERSION:Tn,IS_ANDROID:Sn,ANDROID_VERSION:wn,IS_NATIVE_ANDROID:kn,IS_FIREFOX:Cn,IS_EDGE:En,IS_CHROME:xn,CHROME_VERSION:An,IE_VERSION:Pn,IS_SAFARI:On,IS_ANY_SAFARI:In,IS_WINDOWS:Ln,TOUCH_ENABLED:Dn}),Mn={prefixed:!0},Un=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Nn=Un[0],jn=0;jn<Un.length;jn++)if(Un[jn][1]in xt){fn=Un[jn];break}if(fn){for(var Bn=0;Bn<fn.length;Bn++)Mn[Nn[Bn]]=fn[Bn];Mn.prefixed=fn[0]!==Nn[0]}Wt.prototype.code=0,Wt.prototype.message="",Wt.prototype.status=null,Wt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Wt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Fn=0;Fn<Wt.errorTypes.length;Fn++)Wt[Wt.errorTypes[Fn]]=Fn,Wt.prototype[Wt.errorTypes[Fn]]=Fn;var qn=N,Hn=function Hn(n){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,t){return n[t]&&(e[t]=n[t]),e},{cues:n.cues&&Array.prototype.map.call(n.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})})},Vn=function Vn(e){var t=e.$$("track"),n=Array.prototype.map.call(t,function(e){return e.track});return Array.prototype.map.call(t,function(e){var t=Hn(e.track);return e.src&&(t.src=e.src),t}).concat(Array.prototype.filter.call(e.textTracks(),function(e){return-1===n.indexOf(e)}).map(Hn))},Wn=function Wn(e,n){return e.forEach(function(e){var t=n.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach(function(e){return t.addCue(e)})}),n.textTracks()},zn={textTracksToJson:Vn,jsonToTextTracks:Wn,trackToJson_:Hn},Gn=j(function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return s[e];var n,i=String(e);return(n=r[i.toLowerCase()])?n:(n=a[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):undefined)}n.isEventKey=function u(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||n===undefined)return!1;if("string"==typeof t){var i;if(i=r[t.toLowerCase()])return i===n;if(i=a[t.toLowerCase()])return i===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var s=t.names=t.title={};for(i in r)s[r[i]]=i;for(var o in a)r[o]=a[o]}),$n=(Gn.code,Gn.codes,Gn.aliases,Gn.names,Gn.title,"vjs-modal-dialog"),Xn=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=ie("div",{className:$n+"-content"},{role:"document"}),n.descEl_=ie("p",{className:$n+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),b(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function r(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function a(){return $n+" vjs-hidden "+i.prototype.buildCSSClass.call(this)},t.label=function s(){return this.localize(this.options_.label||"Modal Window")},t.description=function o(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},t.open=function u(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function l(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},t.close=function c(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function e(t){if("boolean"==typeof t){var e=this.closeable_=!!t,n=this.getChild("closeButton");if(e&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close)}!e&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},t.fill=function d(){this.fillWith(this.content())},t.fillWith=function h(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),T(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},t.empty=function f(){this.trigger("beforemodalempty"),_(this.contentEl()),this.trigger("modalempty")},t.content=function p(e){return void 0!==e&&(this.content_=e),this.content_},t.conditionalFocus_=function m(){var e=xt.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},t.conditionalBlur_=function g(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function y(e){if(e.stopPropagation(),Gn.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Gn.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}xt.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},t.focusableEls_=function v(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof Et.HTMLAnchorElement||e instanceof Et.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Et.HTMLInputElement||e instanceof Et.HTMLSelectElement||e instanceof Et.HTMLTextAreaElement||e instanceof Et.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Et.HTMLIFrameElement||e instanceof Et.HTMLObjectElement||e instanceof Et.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},e}(dn);Xn.prototype.options_={pauseOnOpen:!0,temporary:!0},dn.registerComponent("ModalDialog",Xn);var Yn=function(r){function e(e){var t;void 0===e&&(e=[]),(t=r.call(this)||this).tracks_=[],Object.defineProperty(qt(t),"length",{get:function i(){return this.tracks_.length}});for(var n=0;n<e.length;n++)t.addTrack(e[n]);return t}Ft(e,r);var t=e.prototype;return t.addTrack=function i(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function n(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},t.removeTrack=function a(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},t.getTrackById=function s(e){for(var t=null,n=0,
i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(ft);for(var Kn in Yn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Yn.prototype.allowedEvents_)Yn.prototype["on"+Kn]=null;var Qn,Jn=function Jn(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Zn=function(i){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].enabled){Jn(e,e[n]);break}return(t=i.call(this,e)||this).changing_=!1,t}Ft(e,i);var t=e.prototype;return t.addTrack=function n(e){var t=this;e.enabled&&Jn(this,e),i.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){t.changing_||(t.changing_=!0,Jn(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},t.removeTrack=function r(e){i.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(Yn),ei=function Jn(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},ti=function(a){function e(e){var t;void 0===e&&(e=[]);for(var n=e.length-1;0<=n;n--)if(e[n].selected){ei(e,e[n]);break}return(t=a.call(this,e)||this).changing_=!1,Object.defineProperty(qt(t),"selectedIndex",{get:function i(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function r(){}}),t}Ft(e,a);var t=e.prototype;return t.addTrack=function n(e){var t=this;e.selected&&ei(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){t.changing_||(t.changing_=!0,ei(t,e),t.changing_=!1,t.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},t.removeTrack=function i(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(Yn),ni=function(n){function e(){return n.apply(this,arguments)||this}Ft(e,n);var t=e.prototype;return t.addTrack=function i(e){var t=this;n.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return t.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return t.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function r(e){n.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(Yn),ii=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function i(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function i(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function n(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function r(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function a(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),ri=function(){function n(e){n.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function t(){return this.length_}})}var e=n.prototype;return e.setCues_=function a(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function r(e){""+e in this||Object.defineProperty(this,""+e,{get:function t(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},e.getCueById=function s(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},n}(),ai={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},si={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},oi={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},ui={disabled:"disabled",hidden:"hidden",showing:"showing"},li=function(n){function e(e){var i;void 0===e&&(e={}),i=n.call(this)||this;var r={id:e.id||"vjs_track_"+Mt(),kind:e.kind||"",label:e.label||"",language:e.language||""},a=function a(e){Object.defineProperty(qt(i),e,{get:function t(){return r[e]},set:function n(){}})};for(var t in r)a(t);return i}return Ft(e,n),e}(ft),ci=function ci(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=xt.createElement("a");n.href=e;var i,r=""===n.host&&"file:"!==n.protocol;r&&((i=xt.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),xt.body.appendChild(i));for(var a={},s=0;s<t.length;s++)a[t[s]]=n[t[s]];return"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,"")),"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,"")),a.protocol||(a.protocol=Et.location.protocol),r&&xt.body.removeChild(i),a},di=function di(e){if(!e.match(/^https?:\/\//)){var t=xt.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},hi=function hi(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},fi=function fi(e){var t=Et.location,n=ci(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},pi=Object.freeze({parseUrl:ci,getAbsoluteURL:di,getFileExtension:hi,isCrossOrigin:fi}),mi=B,gi=Object.prototype.toString,yi="Function.prototype.bind called on incompatible ",vi=Array.prototype.slice,bi=Object.prototype.toString,_i="[object Function]",Ti=function sn(t){var n=this;if("function"!=typeof n||bi.call(n)!==_i)throw new TypeError(yi+n);for(var i,r=vi.call(arguments,1),a=function a(){if(this instanceof i){var e=n.apply(this,r.concat(vi.call(arguments)));return Object(e)===e?e:this}return n.apply(t,r.concat(vi.call(arguments)))},e=Math.max(0,n.length-r.length),s=[],o=0;o<e;o++)s.push("$"+o);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(a),n.prototype){var u=function u(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i},Si=Function.prototype.bind||Ti,wi=Object.prototype.toString,ki=function ki(e){var t=wi.call(e),n="[object Arguments]"===t;return n||(n="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&0<=e.length&&"[object Function]"===wi.call(e.callee)),n};if(!Object.keys){var Ci=Object.prototype.hasOwnProperty,Ei=Object.prototype.toString,xi=ki,Ai=Object.prototype.propertyIsEnumerable,Pi=!Ai.call({toString:null},"toString"),Oi=Ai.call(function(){},"prototype"),Ii=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Li=function Li(e){var t=e.constructor;return t&&t.prototype===e},Di={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},Ri=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!Di["$"+e]&&Ci.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{Li(window[e])}catch(t){return!0}}catch(t){return!0}return!1}(),Mi=function Mi(e){if("undefined"==typeof window||!Ri)return Li(e);try{return Li(e)}catch(t){return!1}};Qn=function Ze(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===Ei.call(e),i=xi(e),r=t&&"[object String]"===Ei.call(e),a=[];if(!t&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var s=Oi&&n;if(r&&0<e.length&&!Ci.call(e,0))for(var o=0;o<e.length;++o)a.push(String(o));if(i&&0<e.length)for(var u=0;u<e.length;++u)a.push(String(u));else for(var l in e)s&&"prototype"===l||!Ci.call(e,l)||a.push(String(l));if(Pi)for(var c=Mi(e),d=0;d<Ii.length;++d)c&&"constructor"===Ii[d]||!Ci.call(e,Ii[d])||a.push(Ii[d]);return a}}var Ui=Qn,Ni=Array.prototype.slice,ji=Object.keys,Bi=ji?function Ze(e){return ji(e)}:Ui,Fi=Object.keys;Bi.shim=function Yp(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function t(e){return ki(e)?Fi(Ni.call(e)):Fi(e)}):Object.keys=Bi;return Object.keys||Bi};var qi=Bi,Hi="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),Vi=Object.prototype.toString,Wi=Array.prototype.concat,zi=Object.defineProperty,Gi=function B(e){return"function"==typeof e&&"[object Function]"===Vi.call(e)},$i=function $i(){var e={};try{for(var t in zi(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(n){return!1}},Xi=zi&&$i(),Yi=function Yi(e,t,n,i){(!(t in e)||Gi(i)&&i())&&(Xi?zi(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},Ki=function Ki(e,t,n){var i=2<arguments.length?n:{},r=qi(t);Hi&&(r=Wi.call(r,Object.getOwnPropertySymbols(t)));for(var a=0;a<r.length;a+=1)Yi(e,r[a],t[r[a]],i[r[a]])};Ki.supportsDescriptors=!!Xi;var Qi,Ji=Ki,Zi=Object.getOwnPropertyDescriptor?function(){return Object.getOwnPropertyDescriptor(arguments,"callee").get}():function(){throw new TypeError},er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,tr=Object.getPrototypeOf||function(e){return e.__proto__},nr=Qi,ir=Qi,rr=Qi,ar="undefined"==typeof Uint8Array?Qi:tr(Uint8Array),sr={"$ %Array%":Array,"$ %ArrayBuffer%":"undefined"==typeof ArrayBuffer?Qi:ArrayBuffer,"$ %ArrayBufferPrototype%":"undefined"==typeof ArrayBuffer?Qi:ArrayBuffer.prototype,"$ %ArrayIteratorPrototype%":er?tr([][Symbol.iterator]()):Qi,"$ %ArrayPrototype%":Array.prototype,"$ %ArrayProto_entries%":Array.prototype.entries,"$ %ArrayProto_forEach%":Array.prototype.forEach,"$ %ArrayProto_keys%":Array.prototype.keys,"$ %ArrayProto_values%":Array.prototype.values,"$ %AsyncFromSyncIteratorPrototype%":Qi,"$ %AsyncFunction%":ir,"$ %AsyncFunctionPrototype%":Qi,"$ %AsyncGenerator%":Qi,"$ %AsyncGeneratorFunction%":rr,"$ %AsyncGeneratorPrototype%":Qi,"$ %AsyncIteratorPrototype%":Qi,"$ %Atomics%":"undefined"==typeof Atomics?Qi:Atomics,"$ %Boolean%":Boolean,"$ %BooleanPrototype%":Boolean.prototype,"$ %DataView%":"undefined"==typeof DataView?Qi:DataView,"$ %DataViewPrototype%":"undefined"==typeof DataView?Qi:DataView.prototype,"$ %Date%":Date,"$ %DatePrototype%":Date.prototype,"$ %decodeURI%":decodeURI,"$ %decodeURIComponent%":decodeURIComponent,"$ %encodeURI%":encodeURI,"$ %encodeURIComponent%":encodeURIComponent,"$ %Error%":Error,"$ %ErrorPrototype%":Error.prototype,"$ %eval%":eval,"$ %EvalError%":EvalError,"$ %EvalErrorPrototype%":EvalError.prototype,"$ %Float32Array%":"undefined"==typeof Float32Array?Qi:Float32Array,"$ %Float32ArrayPrototype%":"undefined"==typeof Float32Array?Qi:Float32Array.prototype,"$ %Float64Array%":"undefined"==typeof Float64Array?Qi:Float64Array,"$ %Float64ArrayPrototype%":"undefined"==typeof Float64Array?Qi:Float64Array.prototype,"$ %Function%":Function,"$ %FunctionPrototype%":Function.prototype,"$ %Generator%":Qi,"$ %GeneratorFunction%":nr,"$ %GeneratorPrototype%":Qi,"$ %Int8Array%":"undefined"==typeof Int8Array?Qi:Int8Array,"$ %Int8ArrayPrototype%":"undefined"==typeof Int8Array?Qi:Int8Array.prototype,"$ %Int16Array%":"undefined"==typeof Int16Array?Qi:Int16Array,"$ %Int16ArrayPrototype%":"undefined"==typeof Int16Array?Qi:Int8Array.prototype,"$ %Int32Array%":"undefined"==typeof Int32Array?Qi:Int32Array,"$ %Int32ArrayPrototype%":"undefined"==typeof Int32Array?Qi:Int32Array.prototype,"$ %isFinite%":isFinite,"$ %isNaN%":isNaN,"$ %IteratorPrototype%":er?tr(tr([][Symbol.iterator]())):Qi,"$ %JSON%":JSON,"$ %JSONParse%":JSON.parse,"$ %Map%":"undefined"==typeof Map?Qi:Map,"$ %MapIteratorPrototype%":"undefined"!=typeof Map&&er?tr((new Map)[Symbol.iterator]()):Qi,"$ %MapPrototype%":"undefined"==typeof Map?Qi:Map.prototype,"$ %Math%":Math,"$ %Number%":Number,"$ %NumberPrototype%":Number.prototype,"$ %Object%":Object,"$ %ObjectPrototype%":Object.prototype,"$ %ObjProto_toString%":Object.prototype.toString,"$ %ObjProto_valueOf%":Object.prototype.valueOf,"$ %parseFloat%":parseFloat,"$ %parseInt%":parseInt,"$ %Promise%":"undefined"==typeof Promise?Qi:Promise,"$ %PromisePrototype%":"undefined"==typeof Promise?Qi:Promise.prototype,"$ %PromiseProto_then%":"undefined"==typeof Promise?Qi:Promise.prototype.then,"$ %Promise_all%":"undefined"==typeof Promise?Qi:Promise.all,"$ %Promise_reject%":"undefined"==typeof Promise?Qi:Promise.reject,"$ %Promise_resolve%":"undefined"==typeof Promise?Qi:Promise.resolve,"$ %Proxy%":"undefined"==typeof Proxy?Qi:Proxy,"$ %RangeError%":RangeError,"$ %RangeErrorPrototype%":RangeError.prototype,"$ %ReferenceError%":ReferenceError,"$ %ReferenceErrorPrototype%":ReferenceError.prototype,"$ %Reflect%":"undefined"==typeof Reflect?Qi:Reflect,"$ %RegExp%":RegExp,"$ %RegExpPrototype%":RegExp.prototype,"$ %Set%":"undefined"==typeof Set?Qi:Set,"$ %SetIteratorPrototype%":"undefined"!=typeof Set&&er?tr((new Set)[Symbol.iterator]()):Qi,"$ %SetPrototype%":"undefined"==typeof Set?Qi:Set.prototype,"$ %SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?Qi:SharedArrayBuffer,"$ %SharedArrayBufferPrototype%":"undefined"==typeof SharedArrayBuffer?Qi:SharedArrayBuffer.prototype,"$ %String%":String,"$ %StringIteratorPrototype%":er?tr(""[Symbol.iterator]()):Qi,"$ %StringPrototype%":String.prototype,"$ %Symbol%":er?Symbol:Qi,"$ %SymbolPrototype%":er?Symbol.prototype:Qi,"$ %SyntaxError%":SyntaxError,"$ %SyntaxErrorPrototype%":SyntaxError.prototype,"$ %ThrowTypeError%":Zi,"$ %TypedArray%":ar,"$ %TypedArrayPrototype%":ar?ar.prototype:Qi,"$ %TypeError%":TypeError,"$ %TypeErrorPrototype%":TypeError.prototype,"$ %Uint8Array%":"undefined"==typeof Uint8Array?Qi:Uint8Array,"$ %Uint8ArrayPrototype%":"undefined"==typeof Uint8Array?Qi:Uint8Array.prototype,"$ %Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?Qi:Uint8ClampedArray,"$ %Uint8ClampedArrayPrototype%":"undefined"==typeof Uint8ClampedArray?Qi:Uint8ClampedArray.prototype,"$ %Uint16Array%":"undefined"==typeof Uint16Array?Qi:Uint16Array,"$ %Uint16ArrayPrototype%":"undefined"==typeof Uint16Array?Qi:Uint16Array.prototype,"$ %Uint32Array%":"undefined"==typeof Uint32Array?Qi:Uint32Array,"$ %Uint32ArrayPrototype%":"undefined"==typeof Uint32Array?Qi:Uint32Array.prototype,"$ %URIError%":URIError,"$ %URIErrorPrototype%":URIError.prototype,"$ %WeakMap%":"undefined"==typeof WeakMap?Qi:WeakMap,"$ %WeakMapPrototype%":"undefined"==typeof WeakMap?Qi:WeakMap.prototype,"$ %WeakSet%":"undefined"==typeof WeakSet?Qi:WeakSet,"$ %WeakSetPrototype%":"undefined"==typeof WeakSet?Qi:WeakSet.prototype},or=function or(e,t){if(1<arguments.length&&"boolean"!=typeof t)throw new TypeError('"allowMissing" argument must be a boolean');var n="$ "+e;if(!(n in sr))throw new SyntaxError("intrinsic "+e+" does not exist!");if("undefined"==typeof sr[n]&&!t)throw new TypeError("intrinsic "+e+" exists, but is not available. Please file an issue!");return sr[n]},ur=Si.call(Function.call,Object.prototype.hasOwnProperty),lr=or("%TypeError%"),cr=or("%SyntaxError%"),dr={"Property Descriptor":function Kp(e,t){if("Object"!==e.Type(t))return!1;var n={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var i in t)if(ur(t,i)&&!n[i])return!1;var r=ur(t,"[[Value]]"),a=ur(t,"[[Get]]")||ur(t,"[[Set]]");if(r&&a)throw new lr("Property Descriptors may not be both accessor and data descriptors");return!0}},hr=function hr(e,t,n,i){var r=dr[t];if("function"!=typeof r)throw new cr("unknown record type: "+t);if(!r(e,i))throw new lr(n+" must be a "+t);console.log(r(e,i),i)},fr=Number.isNaN||function Qp(e){return e!=e},pr=Number.isNaN||function(e){return e!=e},mr=Number.isFinite||function(e){return"number"==typeof e&&!pr(e)&&e!==Infinity&&e!==-Infinity},gr=function gr(e){return 0<=e?1:-1},yr=function yr(e,t){var n=e%t;return Math.floor(0<=n?n:n+t)},vr=Function.prototype.toString,br=/^\s*class\b/,_r=function Jp(e){try{var t=vr.call(e);return br.test(t)}catch(n){return!1}},Tr=function Zp(e){try{return!_r(e)&&(vr.call(e),!0)}catch(t){return!1}},Sr=Object.prototype.toString,wr="[object Function]",kr="[object GeneratorFunction]",Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Er=function Er(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(Cr)return Tr(e);if(_r(e))return!1;var t=Sr.call(e);return t===wr||t===kr},xr=function xr(e){return null===e||"function"!=typeof e&&"object"!=typeof e},Ar=Object.prototype.toString,Pr={"[[DefaultValue]]":function em(e,t){var n;if((n=1<arguments.length?t:"[object Date]"===Ar.call(e)?String:Number)!==String&&n!==Number)throw new TypeError("invalid [[DefaultValue]] hint supplied");var i,r,a=n===String?["toString","valueOf"]:["valueOf","toString"];for(r=0;r<a.length;++r)if(Er(e[a[r]])&&(i=e[a[r]](),xr(i)))return i;throw new TypeError("No default value")}},Or=function tm(e,t){return xr(e)?e:1<arguments.length?Pr["[[DefaultValue]]"](e,t):Pr["[[DefaultValue]]"](e)},Ir=or("%Object%"),Lr=or("%TypeError%"),Dr=or("%String%"),Rr={ToPrimitive:Or,ToBoolean:function nm(e){return!!e},ToNumber:function im(e){return+e},ToInteger:function rm(e){var t=this.ToNumber(e);return fr(t)?0:0!==t&&mr(t)?gr(t)*Math.floor(Math.abs(t)):t},ToInt32:function am(e){return this.ToNumber(e)>>0},ToUint32:function sm(e){return this.ToNumber(e)>>>0},ToUint16:function om(e){var t=this.ToNumber(e);if(fr(t)||0===t||!mr(t))return 0;var n=gr(t)*Math.floor(Math.abs(t));return yr(n,65536)},ToString:function um(e){return Dr(e)},ToObject:function lm(e){return this.CheckObjectCoercible(e),Ir(e)},CheckObjectCoercible:function cm(e,t){if(null==e)throw new Lr(t||"Cannot call method on "+e);return e},IsCallable:Er,SameValue:function dm(e,t){return e===t?0!==e||1/e==1/t:fr(e)&&fr(t)},Type:function hm(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e||"object"==typeof e?"Object":"number"==typeof e?"Number":"boolean"==typeof e?"Boolean":"string"==typeof e?"String":void 0},IsPropertyDescriptor:function fm(e){if("Object"!==this.Type(e))return!1;var t={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var n in e)if(ur(e,n)&&!t[n])return!1;var i=ur(e,"[[Value]]"),r=ur(e,"[[Get]]")||ur(e,"[[Set]]");if(i&&r)throw new Lr("Property Descriptors may not be both accessor and data descriptors");return!0},IsAccessorDescriptor:function pm(e){return void 0!==e&&(hr(this,"Property Descriptor","Desc",e),!(!ur(e,"[[Get]]")&&!ur(e,"[[Set]]")))},IsDataDescriptor:function mm(e){return void 0!==e&&(hr(this,"Property Descriptor","Desc",e),!(!ur(e,"[[Value]]")&&!ur(e,"[[Writable]]")))},IsGenericDescriptor:function gm(e){return void 0!==e&&(hr(this,"Property Descriptor","Desc",e),!this.IsAccessorDescriptor(e)&&!this.IsDataDescriptor(e))},FromPropertyDescriptor:function ym(e){if(void 0===e)return e;if(hr(this,"Property Descriptor","Desc",e),this.IsDataDescriptor(e))return{value:e["[[Value]]"],writable:!!e["[[Writable]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};if(this.IsAccessorDescriptor(e))return{get:e["[[Get]]"],set:e["[[Set]]"],enumerable:!!e["[[Enumerable]]"],configurable:!!e["[[Configurable]]"]};throw new Lr("FromPropertyDescriptor must be called with a fully populated Property Descriptor")},ToPropertyDescriptor:function vm(e){if("Object"!==this.Type(e))throw new Lr("ToPropertyDescriptor requires an object");var t={};if(ur(e,"enumerable")&&(t["[[Enumerable]]"]=this.ToBoolean(e.enumerable)),ur(e,"configurable")&&(t["[[Configurable]]"]=this.ToBoolean(e.configurable)),ur(e,"value")&&(t["[[Value]]"]=e.value),ur(e,"writable")&&(t["[[Writable]]"]=this.ToBoolean(e.writable)),ur(e,"get")){var n=e.get;if(void 0!==n&&!this.IsCallable(n))throw new TypeError("getter must be a function");t["[[Get]]"]=n}if(ur(e,"set")){var i=e.set;if(void 0!==i&&!this.IsCallable(i))throw new Lr("setter must be a function");t["[[Set]]"]=i}if((ur(t,"[[Get]]")||ur(t,"[[Set]]"))&&(ur(t,"[[Value]]")||ur(t,"[[Writable]]")))throw new Lr("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return t}},Mr=Si.call(Function.call,String.prototype.replace),Ur=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Nr=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,jr=function bm(){var e=Rr.ToString(Rr.CheckObjectCoercible(this));return Mr(Mr(e,Ur,""),Nr,"")},Br="\u200b",Fr=function _m(){return String.prototype.trim&&Br.trim()===Br?String.prototype.trim:jr},qr=function Tm(){var e=Fr();return Ji(String.prototype,{trim:e},{trim:function t(){return String.prototype.trim!==e}}),e},Hr=Si.call(Function.call,Fr());Ji(Hr,{getPolyfill:Fr,implementation:jr,shim:qr});var Vr=Hr,Wr=Object.prototype.toString,zr=Object.prototype.hasOwnProperty,Gr=function Gr(e,t,n){for(var i=0,r=e.length;i<r;i++)zr.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},$r=function $r(e,t,n){for(var i=0,r=e.length;i<r;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},Xr=function Xr(e,t,n){for(var i in e)zr.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},Yr=function Yr(e,t,n){if(!Er(t))throw new TypeError("iterator must be a function");var i;3<=arguments.length&&(i=n),"[object Array]"===Wr.call(e)?Gr(e,t,i):"string"==typeof e?$r(e,t,i):Xr(e,t,i)},Kr=Yr,Qr=function Qr(e){return"[object Array]"===Object.prototype.toString.call(e)},Jr=function Jr(e){if(!e)return{};var r={};return Kr(Vr(e).split("\n"),function(e){var t=e.indexOf(":"),n=Vr(e.slice(0,t)).toLowerCase(),i=Vr(e.slice(t+1));"undefined"==typeof r[n]?r[n]=i:Qr(r[n])?r[n].push(i):r[n]=[r[n],i]}),r},Zr=F,ea=Object.prototype.hasOwnProperty,ta=z;z.XMLHttpRequest=Et.XMLHttpRequest||X,z.XDomainRequest="withCredentials"in new z.XMLHttpRequest?z.XMLHttpRequest:Et.XDomainRequest,q(["get","put","post","patch","head","delete"],function(i){z["delete"===i?"del":i]=function(e,t,n){return(t=W(e,t,n)).method=i.toUpperCase(),G(t)}});var na=function na(e,t){var n=new Et.WebVTT.Parser(Et,Et.vttjs,Et.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),0<i.length&&(Et.console&&Et.console.groupCollapsed&&Et.console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach(function(e){return en.error(e)}),Et.console&&Et.console.groupEnd&&Et.console.groupEnd()),n.flush()},ia=function ia(e,i){var t={uri:e},n=fi(e);n&&(t.cors=n),ta(t,sn(this,function(e,t,n){if(e)return en.error(e,t);i.loaded_=!0,"function"!=typeof Et.WebVTT?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(e){if("vttjserror"!==e.type)return na(n,i);en.error("vttjs failed to load, stopping trying to process "+i.src)}):na(n,i)}))},ra=function(y){function e(e){var t;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var n=Bt(e,{kind:oi[e.kind]||"subtitles",language:e.language||e.srclang||""}),i=ui[n.mode]||"disabled",r=n["default"];"metadata"!==n.kind&&"chapters"!==n.kind||(i="hidden"),(t=y.call(this,n)||this).tech_=n.tech,t.cues_=[],t.activeCues_=[];var a=new ri(t.cues_),s=new ri(t.activeCues_),o=!1,u=sn(qt(t),function(){this.activeCues=this.activeCues,o&&(this.trigger("cuechange"),o=!1)});return"disabled"!==i&&t.tech_.ready(function(){t.tech_.on("timeupdate",u)},!0),Object.defineProperties(qt(t),{"default":{get:function l(){return r},set:function c(){}},mode:{get:function d(){return i},set:function h(e){var t=this;ui[e]&&("disabled"!==(i=e)?this.tech_.ready(function(){t.tech_.on("timeupdate",u)},!0):this.tech_.off("timeupdate",u),this.trigger("modechange"))}},cues:{get:function f(){return this.loaded_?a:null},set:function p(){}},activeCues:{get:function m(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e?t.push(r):r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e&&t.push(r)}if(o=!1,t.length!==this.activeCues_.length)o=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(o=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function g(){}}}),n.src?(t.src=n.src,ia(n.src,qt(t))):t.loaded_=!0,t}Ft(e,y);var t=e.prototype;return t.addCue=function a(e){var t=e;if(Et.vttjs&&!(e instanceof Et.vttjs.VTTCue)){for(var n in t=new Et.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},t.removeCue=function i(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},e}(li);ra.prototype.allowedEvents_={cuechange:"cuechange"};var aa=function(s){function e(e){var t;void 0===e&&(e={});var n=Bt(e,{kind:si[e.kind]||""});t=s.call(this,n)||this;var i=!1;return Object.defineProperty(qt(t),"enabled",{get:function r(){return i},set:function a(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),n.enabled&&(t.enabled=n.enabled),t.loaded_=!0,t}return Ft(e,s),e}(li),sa=function(s){function e(e){var t;void 0===e&&(e={});var n=Bt(e,{kind:ai[e.kind]||""});t=s.call(this,n)||this;var i=!1;return Object.defineProperty(qt(t),"selected",{get:function r(){return i},set:function a(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),n.selected&&(t.selected=n.selected),t}return Ft(e,s),e}(li),oa=0,ua=1,la=2,ca=3,da=function(s){function e(e){var t,n;void 0===e&&(e={}),t=s.call(this)||this;var i=new ra(e);return t.kind=i.kind,t.src=i.src,t.srclang=i.language,t.label=i.label,t["default"]=i["default"],Object.defineProperties(qt(t),{readyState:{get:function r(){return n}},track:{get:function a(){return i}}}),n=oa,i.addEventListener("loadeddata",function(){n=la,t.trigger({type:"load",target:qt(t)})}),t}return Ft(e,s),e}(ft);da.prototype.allowedEvents_={load:"load"},da.NONE=oa,da.LOADING=ua,da.LOADED=la,da.ERROR=ca;var ha={audio:{ListClass:Zn,TrackClass:aa,capitalName:"Audio"},video:{ListClass:ti,TrackClass:sa,capitalName:"Video"},text:{ListClass:ni,TrackClass:ra,capitalName:"Text"}};Object.keys(ha).forEach(function(e){ha[e].getterName=e+"Tracks",ha[e].privateName=e+"Tracks_"});var fa={remoteText:{ListClass:ni,TrackClass:ra,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ii,TrackClass:da,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},pa=Bt(ha,fa);fa.names=Object.keys(fa),ha.names=Object.keys(ha),pa.names=[].concat(fa.names).concat(ha.names);var ma=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();Y.prototype=ma(Error.prototype),(Y.prototype.constructor=Y).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Q.prototype={set:function Kt(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function Yt(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function Ci(e){return e in this.values},alt:function Sm(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function wm(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function km(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var ga={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},ya={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},va={v:"title",lang:"lang"},ba={rt:"ruby"},_a=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];de.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},de.prototype.formatStyle=function(e,t){return 0===e?0:e+t},he.prototype=ma(de.prototype),he.prototype.constructor=he,fe.prototype.move=function(e,t){switch(t=t!==undefined?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},fe.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},fe.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},fe.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},fe.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},fe.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},fe.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},fe.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},me.StringDecoder=function(){return{decode:function t(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},me.convertCueToDOMTree=function(e,t){return e&&t?ee(e,t):null};var Ta=.05,Sa="sans-serif",wa="1.5%";me.processCues=function(i,r,e){function t(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}if(!i||!r||!e)return null;for(;e.firstChild;)e.removeChild(e.firstChild);var a=i.document.createElement("div");if(a.style.position="absolute",a.style.left="0",a.style.right="0",a.style.top="0",a.style.bottom="0",a.style.margin=wa,e.appendChild(a),t(r)){var s=[],o=fe.getSimpleBoxPosition(a),u={font:Math.round(o.height*Ta*100)/100+"px "+Sa};!function(){for(var e,
t,n=0;n<r.length;n++)t=r[n],e=new he(i,t,u),a.appendChild(e.div),pe(i,e,o,s),t.displayState=e.div,s.push(fe.getSimpleBoxPosition(e))}()}else for(var n=0;n<r.length;n++)a.appendChild(r[n].displayState)},me.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},me.Parser.prototype={reportOrThrowError:function Cm(e){if(!(e instanceof Y))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function ul(e){function t(){for(var e=a.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,a.buffer=e.substr(t),n}function n(e){var r=new Q;if(J(e,function(e,t){switch(e){case"id":r.set(e,t);break;case"width":r.percent(e,t);break;case"lines":r.integer(e,t);break;case"regionanchor":case"viewportanchor":var n=t.split(",");if(2!==n.length)break;var i=new Q;if(i.percent("x",n[0]),i.percent("y",n[1]),!i.has("x")||!i.has("y"))break;r.set(e+"X",i.get("x")),r.set(e+"Y",i.get("y"));break;case"scroll":r.alt(e,t,["up"])}},/=/,/\s/),r.has("id")){var t=new(a.vttjs.VTTRegion||a.window.VTTRegion);t.width=r.get("width",100),t.lines=r.get("lines",3),t.regionAnchorX=r.get("regionanchorX",0),t.regionAnchorY=r.get("regionanchorY",100),t.viewportAnchorX=r.get("viewportanchorX",0),t.viewportAnchorY=r.get("viewportanchorY",100),t.scroll=r.get("scroll",""),a.onregion&&a.onregion(t),a.regionList.push({id:r.get("id"),region:t})}}function i(e){var n=new Q;J(e,function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",K(t))}},/[^\d]:/,/,/),a.ontimestampmap&&a.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}function r(e){e.match(/X-TIMESTAMP-MAP/)?J(e,function(e,t){switch(e){case"X-TIMESTAMP-MAP":i(t)}},/=/):J(e,function(e,t){switch(e){case"Region":n(t)}},/:/)}var a=this;e&&(a.buffer+=a.decoder.decode(e,{stream:!0}));try{var s;if("INITIAL"===a.state){if(!/\r\n|\n/.test(a.buffer))return this;var o=(s=t()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Y(Y.Errors.BadSignature);a.state="HEADER"}for(var u=!1;a.buffer;){if(!/\r\n|\n/.test(a.buffer))return this;switch(u?u=!1:s=t(),a.state){case"HEADER":/:/.test(s)?r(s):s||(a.state="ID");continue;case"NOTE":s||(a.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){a.state="NOTE";break}if(!s)continue;if(a.cue=new(a.vttjs.VTTCue||a.window.VTTCue)(0,0,""),a.state="CUE",-1===s.indexOf("-->")){a.cue.id=s;continue}case"CUE":try{Z(s,a.cue,a.regionList)}catch(c){a.reportOrThrowError(c),a.cue=null,a.state="BADCUE";continue}a.state="CUETEXT";continue;case"CUETEXT":var l=-1!==s.indexOf("-->");if(!s||l&&(u=!0)){a.oncue&&a.oncue(a.cue),a.cue=null,a.state="ID";continue}a.cue.text&&(a.cue.text+="\n"),a.cue.text+=s;continue;case"BADCUE":s||(a.state="ID");continue}}}catch(c){a.reportOrThrowError(c),"CUETEXT"===a.state&&a.cue&&a.oncue&&a.oncue(a.cue),a.cue=null,a.state="INITIAL"===a.state?"BADWEBVTT":"BADCUE"}return this},flush:function Em(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Y(Y.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}};var ka=me,Ca="auto",Ea={"":1,lr:1,rl:1},xa={start:1,middle:1,end:1,left:1,right:1};ve.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var Aa=ve,Pa={"":!0,up:!0},Oa=Te,Ia=j(function(e){var t=e.exports={WebVTT:ka,VTTCue:Aa,VTTRegion:Oa};Et.vttjs=t,Et.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=Et.VTTCue,a=Et.VTTRegion;t.shim=function(){Et.VTTCue=n,Et.VTTRegion=i},t.restore=function(){Et.VTTCue=r,Et.VTTRegion=a},Et.VTTCue||t.shim()}),La=(Ia.WebVTT,Ia.VTTCue,Ia.VTTRegion,function(t){function n(n,e){var i;return void 0===n&&(n={}),void 0===e&&(e=function e(){}),n.reportTouchActivity=!1,(i=t.call(this,null,n,e)||this).hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),pa.names.forEach(function(e){var t=pa[e];n&&n[t.getterName]&&(i[t.privateName]=n[t.getterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===n["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)}),!1===n.nativeCaptions||!1===n.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new pa.text.ListClass,i.initTrackListeners(),n.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Ft(n,t);var e=n.prototype;return e.triggerSourceset=function i(e){var t=this;this.isReady_||this.one("ready",function(){return t.setTimeout(function(){return t.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},e.manualProgressOn=function r(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},e.manualProgressOff=function a(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},e.trackProgress=function s(){this.stopTrackingProgress(),this.progressInterval=this.setInterval(sn(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),1===(this.bufferedPercent_=e)&&this.stopTrackingProgress()}),500)},e.onDurationChange=function o(){this.duration_=this.duration()},e.buffered=function u(){return Ht(0,0)},e.bufferedPercent=function l(){return Vt(this.buffered(),this.duration_)},e.stopTrackingProgress=function c(){this.clearInterval(this.progressInterval)},e.manualTimeUpdatesOn=function d(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},e.manualTimeUpdatesOff=function h(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},e.trackCurrentTime=function f(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},e.stopTrackingCurrentTime=function p(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.dispose=function m(){this.clearTracks(ha.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},e.clearTracks=function g(e){var r=this;(e=[].concat(e)).forEach(function(e){for(var t=r[e+"Tracks"]()||[],n=t.length;n--;){var i=t[n];"text"===e&&r.removeRemoteTextTrack(i),t.removeTrack(i)}})},e.cleanupAutoTextTracks=function y(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},e.reset=function v(){},e.error=function b(e){return e!==undefined&&(this.error_=new Wt(e),this.trigger("error")),this.error_},e.played=function _(){return this.hasStarted_?Ht(0,0):Ht()},e.setCurrentTime=function T(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},e.initTrackListeners=function S(){var r=this;ha.names.forEach(function(e){var t=ha[e],n=function n(){r.trigger(e+"trackchange")},i=r[t.getterName]();i.addEventListener("removetrack",n),i.addEventListener("addtrack",n),r.on("dispose",function(){i.removeEventListener("removetrack",n),i.removeEventListener("addtrack",n)})})},e.addWebVttScript_=function w(){var e=this;if(!Et.WebVTT)if(xt.body.contains(this.el())){if(!this.options_["vtt.js"]&&H(Ia)&&0<Object.keys(Ia).length)return void this.trigger("vttjsloaded");var t=xt.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){t.onload=null,t.onerror=null}),Et.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},e.emulateTextTracks=function k(){var e=this,n=this.textTracks(),t=this.remoteTextTracks(),i=function i(e){return n.addTrack(e.track)},r=function r(e){return n.removeTrack(e.track)};t.on("addtrack",i),t.on("removetrack",r),this.addWebVttScript_();var a=function a(){return e.trigger("texttrackchange")},s=function s(){a();for(var e=0;e<n.length;e++){var t=n[e];t.removeEventListener("cuechange",a),"showing"===t.mode&&t.addEventListener("cuechange",a)}};s(),n.addEventListener("change",s),n.addEventListener("addtrack",s),n.addEventListener("removetrack",s),this.on("dispose",function(){t.off("addtrack",i),t.off("removetrack",r),n.removeEventListener("change",s),n.removeEventListener("addtrack",s),n.removeEventListener("removetrack",s);for(var e=0;e<n.length;e++){n[e].removeEventListener("cuechange",a)}})},e.addTextTrack=function C(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return Se(this,e,t,n)},e.createRemoteTextTrack=function E(e){var t=Bt(e,{tech:this});return new fa.remoteTextEl.TrackClass(t)},e.addRemoteTextTrack=function x(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(en.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(i.track)}),i},e.removeRemoteTextTrack=function A(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},e.getVideoPlaybackQuality=function P(){return{}},e.requestPictureInPicture=function O(){var e=this.options_.Promise||Et.Promise;if(e)return e.reject()},e.setPoster=function I(){},e.playsinline=function L(){},e.setPlaysinline=function D(){},e.overrideNativeAudioTracks=function R(){},e.overrideNativeVideoTracks=function M(){},e.canPlayType=function U(){return""},n.canPlayType=function N(){return""},n.canPlaySource=function j(e){return n.canPlayType(e.type)},n.isTech=function B(e){return e.prototype instanceof n||e instanceof n||e===n},n.registerTech=function F(e,t){if(n.techs_||(n.techs_={}),!n.isTech(t))throw new Error("Tech "+e+" must be a Tech");if(!n.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!n.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ln(e),n.techs_[e]=t,n.techs_[St(e)]=t,"Tech"!==e&&n.defaultTechOrder_.push(e),t},n.getTech=function q(e){if(e)return n.techs_&&n.techs_[e]?n.techs_[e]:(e=ln(e),Et&&Et.videojs&&Et.videojs[e]?(en.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Et.videojs[e]):void 0)},n}(dn));pa.names.forEach(function(e){var t=pa[e];La.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),La.prototype.featuresVolumeControl=!0,La.prototype.featuresMuteControl=!0,La.prototype.featuresFullscreenResize=!1,La.prototype.featuresPlaybackRate=!1,La.prototype.featuresProgressEvents=!1,La.prototype.featuresSourceset=!1,La.prototype.featuresTimeupdateEvents=!1,La.prototype.featuresNativeTextTracks=!1,La.withSourceHandlers=function(r){r.registerSourceHandler=function(e,t){var n=r.sourceHandlers;n||(n=r.sourceHandlers=[]),t===undefined&&(t=n.length),n.splice(t,0,e)},r.canPlayType=function(e){for(var t,n=r.sourceHandlers||[],i=0;i<n.length;i++)if(t=n[i].canPlayType(e))return t;return""},r.selectSourceHandler=function(e,t){for(var n=r.sourceHandlers||[],i=0;i<n.length;i++)if(n[i].canHandleSource(e,t))return n[i];return null},r.canPlaySource=function(e,t){var n=r.selectSourceHandler(e,t);return n?n.canHandleSource(e,t):""},["seekable","seeking","duration"].forEach(function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})},r.prototype),r.prototype.setSource=function(e){var t=r.selectSourceHandler(e,this.options_);t||(r.nativeSourceHandler?t=r.nativeSourceHandler:en.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),t!==r.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=t.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler)},r.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},dn.registerComponent("Tech",La),La.registerTech("Tech",La),La.defaultTechOrder_=[];var Da={},Ra={},Ma={},Ua={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},Na={setCurrentTime:1,setVolume:1},ja={play:1,pause:1},Ba={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Fa=function Fa(e){void 0===e&&(e="");var t=hi(e);return Ba[t.toLowerCase()]||""},qa=function qa(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter(function(e){return e.src===t});if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return Fa(t)},Ha=function Ha(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){e=Ha(e),Array.isArray(e)?t=t.concat(e):s(e)&&t.push(e)}),e=t}else e="string"==typeof e&&e.trim()?[Ae({src:e})]:s(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[Ae(e)]:[];return e},Va=function(l){function e(e,t,n){var i,r=Bt({createEl:!1},t);if(i=l.call(this,e,r,n)||this,t.playerOptions.sources&&0!==t.playerOptions.sources.length)e.src(t.playerOptions.sources);else for(var a=0,s=t.playerOptions.techOrder;a<s.length;a++){var o=ln(s[a]),u=La.getTech(o);if(o||(u=dn.getComponent(o)),u&&u.isSupported()){e.loadTech_(o);break}}return i}return Ft(e,l),e}(dn);dn.registerComponent("MediaLoader",Va);var Wa=function(r){function e(e,t){var n;return(n=r.call(this,e,t)||this).emitTapEvents(),n.enable(),n}Ft(e,r);var t=e.prototype;return t.createEl=function a(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=At({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&en.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=At({role:"button"},n),this.tabIndex_=t.tabIndex;var i=r.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(i),i},t.dispose=function n(){this.controlTextEl_=null,r.prototype.dispose.call(this)},t.createControlTextEl=function i(e){return this.controlTextEl_=ie("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},t.controlText=function s(e,t){if(void 0===t&&(t=this.el()),e===undefined)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,b(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},t.buildCSSClass=function o(){return"vjs-control vjs-button "+r.prototype.buildCSSClass.call(this)},t.enable=function u(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!=typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},t.disable=function l(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!=typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},t.handleClick=function c(){},t.handleKeyDown=function d(e){Gn.isEventKey(e,"Space")||Gn.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):r.prototype.handleKeyDown.call(this,e)},e}(dn);dn.registerComponent("ClickableComponent",Wa);var za=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update(),e.on("posterchange",sn(qt(n),n.update)),n}Ft(e,i);var t=e.prototype;return t.dispose=function n(){this.player().off("posterchange",this.update),i.prototype.dispose.call(this)},t.createEl=function r(){return ie("div",{className:"vjs-poster",tabIndex:-1})},t.update=function a(){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},t.setSrc=function s(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},t.handleClick=function o(){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Gt(this.player_.play()):this.player_.pause())},e}(Wa);dn.registerComponent("PosterImage",za);var Ga="#222",$a="#ccc",Xa={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Ya=function(a){function e(n,e,t){var i;i=a.call(this,n,e,t)||this;var r=sn(qt(i),i.updateDisplay);return n.on("loadstart",sn(qt(i),i.toggleDisplay)),n.on("texttrackchange",r),n.on("loadedmetadata",sn(qt(i),i.preselectTrack)),n.ready(sn(qt(i),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",r),n.on("playerresize",r),Et.addEventListener("orientationchange",r),n.on("dispose",function(){return Et.removeEventListener("orientationchange",r)});for(var e=this.options_.playerOptions.tracks||[],t=0;t<e.length;t++)this.player_.addRemoteTextTrack(e[t],!0);this.preselectTrack()}})),i}Ft(e,a);var t=e.prototype;return t.preselectTrack=function u(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<r.length;s++){var o=r[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in i?o.kind===a.kind?n=o:n||(n=o):a&&!a.enabled?t=e=n=null:o["default"]&&("descriptions"!==o.kind||e?o.kind in i&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=function n(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function i(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function r(){"function"==typeof Et.WebVTT&&Et.WebVTT.processCues(Et,[],this.el_)},t.updateDisplay=function l(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,s=null,o=e.length;o--;){var u=e[o];"showing"===u.mode&&("descriptions"===u.kind?a=u:s=u)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},t.updateDisplayState=function o(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r=n[i];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&Oe(a.firstChild,"color",Pe(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Oe(a.firstChild,"backgroundColor",Pe(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Oe(a,"backgroundColor",Pe(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+Ga+", 2px 2px 4px "+Ga+", 2px 2px 5px "+Ga:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+Ga+", 2px 2px "+Ga+", 3px 3px "+Ga:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+$a+", 0 1px "+$a+", -1px -1px "+Ga+", 0 -1px "+Ga:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+Ga+", 0 0 4px "+Ga+", 0 0 4px "+Ga+", 0 0 4px "+Ga)),t.fontPercent&&1!==t.fontPercent){var s=Et.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Xa[t.fontFamily])}}},t.updateForTrack=function c(e){if(Array.isArray(e)||(e=[e]),"function"==typeof Et.WebVTT&&!e.every(function(e){return!e.activeCues})){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);Et.WebVTT.processCues(Et,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var u=s.activeCues[o].displayState;It(u,"vjs-text-track-cue"),It(u,"vjs-text-track-cue-"+(s.language?s.language:a))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},e}(dn);dn.registerComponent("TextTrackDisplay",Ya);var Ka=function(r){function e(){return r.apply(this,arguments)||this}return Ft(e,r),e.prototype.createEl=function a(){var e=this.player_.isAudio(),t=this.localize(e?"Audio Player":"Video Player"),n=ie("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[t])}),i=r.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(n),i},e}(dn);dn.registerComponent("LoadingSpinner",Ka);var Qa=function(t){function e(){return t.apply(this,arguments)||this}Ft(e,t);var n=e.prototype;return n.createEl=function r(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),e="button",t=At({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=At({type:"button"},n);var i=dn.prototype.createEl.call(this,e,t,n);return this.createControlTextEl(i),i},n.addChild=function i(e,t){void 0===t&&(t={});var n=this.constructor.name;return en.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),dn.prototype.addChild.call(this,e,t)},n.enable=function a(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function s(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function o(e){Gn.isEventKey(e,"Space")||Gn.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(Wa);dn.registerComponent("Button",Qa);var Ja=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).mouseused_=!1,n.on("mousedown",n.handleMouseDown),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-big-play-button"},t.handleClick=function a(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return Gt(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var r=function r(){return i.focus()};zt(t)?t.then(r,function(){}):this.setTimeout(r,1)}else this.player_.tech(!0).focus()},t.handleKeyDown=function r(e){this.mouseused_=!1,i.prototype.handleKeyDown.call(this,e)},t.handleMouseDown=function s(){this.mouseused_=!0},e}(Qa);Ja.prototype.controlText_="Play Video",dn.registerComponent("BigPlayButton",Ja);var Za=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).controlText(t&&t.controlText||n.localize("Close")),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-close-button "+i.prototype.buildCSSClass.call(this)},t.handleClick=function r(){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function a(e){Gn.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):i.prototype.handleKeyDown.call(this,e)},e}(Qa);dn.registerComponent("CloseButton",Za);var es=function(i){function e(e,t){var n;return void 0===t&&(t={}),n=i.call(this,e,t)||this,t.replay=t.replay===undefined||t.replay,n.on(e,"play",n.handlePlay),n.on(e,"pause",n.handlePause),t.replay&&n.on(e,"ended",n.handleEnded),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-play-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function r(){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleSeeked=function a(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},t.handlePlay=function s(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function o(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function u(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Qa);es.prototype.controlText_="Play",dn.registerComponent("PlayToggle",es);var ts=function ts(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===Infinity)&&(r=i=n="-"),(r=0<r||0<s?r+":":"")+(i=((r||10<=a)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)},ns=ts,is=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).throttledUpdateContent=dt(sn(qt(n),n.updateContent),ct),n.on(e,"timeupdate",n.throttledUpdateContent),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){var e=this.buildCSSClass(),t=i.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\xa0</span>"});return this.contentEl_=ie("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),t.appendChild(this.contentEl_),t},t.dispose=function r(){this.contentEl_=null,this.textNode_=null,i.prototype.dispose.call(this)},t.updateTextNode_=function a(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=xt.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},t.formatTime_=function s(e){return De(e)},t.updateFormattedTime_=function o(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},t.updateContent=function u(){},e}(dn);is.prototype.labelText_="Time",is.prototype.controlText_="Time",dn.registerComponent("TimeDisplay",is);var rs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"ended",n.handleEnded),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-current-time"},t.updateContent=function r(){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},t.handleEnded=function a(){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(is);rs.prototype.labelText_="Current Time",rs.prototype.controlText_="Current Time",dn.registerComponent("CurrentTimeDisplay",rs);var as=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"durationchange",n.updateContent),n.on(e,"loadstart",n.updateContent),n.on(e,"loadedmetadata",n.throttledUpdateContent),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-duration"},t.updateContent=function r(){var e=this.player_.duration();this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},e}(is);as.prototype.labelText_="Duration",as.prototype.controlText_="Duration",dn.registerComponent("DurationDisplay",as);var ss=function(e){function t(){return e.apply(this,arguments)||this}return Ft(t,e),t.prototype.createEl=function n(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(dn);dn.registerComponent("TimeDivider",ss);var os=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"durationchange",n.throttledUpdateContent),n.on(e,"ended",n.handleEnded),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-remaining-time"},t.createEl=function r(){var e=i.prototype.createEl.call(this);return e.insertBefore(ie("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},t.updateContent=function a(){"number"==typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.handleEnded=function s(){this.player_.duration()&&this.updateFormattedTime_(0)},e}(is);os.prototype.labelText_="Remaining Time",os.prototype.controlText_="Remaining Time",dn.registerComponent("RemainingTimeDisplay",os);var us=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateShowing(),n.on(n.player(),"durationchange",n.updateShowing),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){var e=i.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ie("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\xa0</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},t.dispose=function r(){this.contentEl_=null,i.prototype.dispose.call(this)},t.updateShowing=function a(){this.player().duration()===Infinity?this.show():this.hide()},e}(dn);dn.registerComponent("LiveDisplay",us);var ls=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateLiveEdgeStatus(),n.player_.liveTracker&&n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatus),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){var e=i.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=ie("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},t.updateLiveEdgeStatus=function r(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function a(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function s(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,i.prototype.dispose.call(this)},e}(Qa);ls.prototype.controlText_="Seek to live, currently playing live",dn.registerComponent("SeekToLive",ls);var cs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}Ft(e,i);var t=e.prototype;return t.enabled=function n(){return this.enabled_},t.enable=function r(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function a(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}
},t.createEl=function s(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),t.className=t.className+" vjs-slider",t=At({tabIndex:0},t),n=At({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n),i.prototype.createEl.call(this,e,t,n)},t.handleMouseDown=function o(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||xn||e.preventDefault(),m(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},t.handleMouseMove=function u(){},t.handleMouseUp=function l(){var e=this.bar.el_.ownerDocument;g(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},t.update=function c(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===Infinity)&&(e=0);var n=(100*e).toFixed(2)+"%",i=t.el().style,r=this.vertical()?"height":"width";return i[r]!==n&&(i[r]=n),e}}},t.calculateDistance=function d(e){var t=y(this.el_,e);return this.vertical()?t.y:t.x},t.handleKeyDown=function h(e){Gn.isEventKey(e,"Left")||Gn.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):Gn.isEventKey(e,"Right")||Gn.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):i.prototype.handleKeyDown.call(this,e)},t.handleClick=function f(e){e.stopPropagation(),e.preventDefault()},t.vertical=function p(e){if(e===undefined)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(dn);dn.registerComponent("Slider",cs);var ds=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).partEls_=[],n.on(e,"progress",n.update),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},t.dispose=function r(){this.partEls_=null,i.prototype.dispose.call(this)},t.update=function h(){var e=this.player_.liveTracker,t=this.player_.buffered(),n=e&&e.isLive()?e.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),r=this.partEls_,a=this.$(".vjs-control-text-loaded-percentage"),s=function s(e,t,n){var i=e/t||0;return i=100*(1<=i?1:i),n&&(i=i.toFixed(2)),i+"%"};this.el_.style.width=s(i,n),b(a,s(i,n,!0));for(var o=0;o<t.length;o++){var u=t.start(o),l=t.end(o),c=r[o];c||(c=this.el_.appendChild(ie()),r[o]=c),c.style.left=s(u,i),c.style.width=s(l-u,i)}for(var d=r.length;d>t.length;d--)this.el_.removeChild(r[d-1]);r.length=t.length},e}(dn);dn.registerComponent("LoadProgressBar",ds);var hs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=dt(sn(qt(n),n.update),ct),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function l(e,t,n){var i=C(this.el_),r=C(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),u=i.width/2;s<u?u+=u-s:o<u&&(u=o),u<0?u=0:u>i.width&&(u=i.width),this.el_.style.right="-"+u+"px",this.write(n)}},t.write=function r(e){b(this.el_,e)},t.updateTime=function c(r,a,s,o){var u=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var e,t=u.player_.duration();if(u.player_.liveTracker&&u.player_.liveTracker.isLive()){var n=u.player_.liveTracker.liveWindow(),i=n-a*n;e=(i<1?"":"-")+De(i,n)}else e=De(s,t);u.update(r,a,e),o&&o()})},e}(dn);dn.registerComponent("TimeTooltip",hs);var fs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=dt(sn(qt(n),n.update),ct),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function r(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},e}(dn);fs.prototype.options_={children:[]},_n||Sn||fs.prototype.options_.children.push("timeTooltip"),dn.registerComponent("PlayProgressBar",fs);var ps=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).update=dt(sn(qt(n),n.update),ct),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function r(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,function(){n.el_.style.left=e.width*t+"px"})},e}(dn);ps.prototype.options_={children:["timeTooltip"]},dn.registerComponent("MouseTimeDisplay",ps);var ms=5,gs=12,ys=30,vs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).setEventHandlers_(),n}Ft(e,i);var t=e.prototype;return t.setEventHandlers_=function n(){this.update=dt(sn(this,this.update),ys),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in xt&&"visibilityState"in xt&&this.on(xt,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function r(e){xt.hidden?this.disableInterval_(e):(this.enableInterval_(),this.requestAnimationFrame(this.update))},t.enableInterval_=function a(){var e=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval(function(){e.requestAnimationFrame(e.update)},ys)},t.disableInterval_=function s(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==e.type||this.clearInterval(this.updateInterval)},t.createEl=function o(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update_=function u(e,t){var n=this.player_.liveTracker,i=this.player_.duration();n&&n.isLive()&&(i=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[De(e,i),De(i,i)],"{1} of {2}")),this.bar&&this.bar.update(C(this.el_),t)},t.update=function l(){if(null!==this.el().offsetParent){var e=i.prototype.update.call(this);return this.update_(this.getCurrentTime_(),e),e}},t.getCurrentTime_=function c(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.handleEnded=function d(){this.update_(this.player_.duration(),1)},t.getPercent=function h(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),1<=e?1:e||0},t.handleMouseDown=function f(e){Rt(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),i.prototype.handleMouseDown.call(this,e))},t.handleMouseMove=function p(e){if(Rt(e)){var t,n=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){var r=i.seekableStart(),a=i.liveCurrentTime();if(a<=(t=r+n*i.liveWindow())&&(t=a),t<=r&&(t=r+.1),t===Infinity)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},t.enable=function m(){i.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=function g(){i.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},t.handleMouseUp=function y(e){i.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&Gt(this.player_.play())},t.stepForward=function v(){this.player_.currentTime(this.player_.currentTime()+ms)},t.stepBack=function b(){this.player_.currentTime(this.player_.currentTime()-ms)},t.handleAction=function _(){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function T(e){if(Gn.isEventKey(e,"Space")||Gn.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(Gn.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(0);else if(Gn.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(Gn(e))){e.preventDefault(),e.stopPropagation();var t=10*(Gn.codes[Gn(e)]-Gn.codes[0])/100;this.player_.currentTime(this.player_.duration()*t)}else Gn.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-ms*gs)):Gn.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+ms*gs)):i.prototype.handleKeyDown.call(this,e)},e}(cs);vs.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},_n||Sn||vs.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),dn.registerComponent("SeekBar",vs);var bs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).handleMouseMove=dt(sn(qt(n),n.handleMouseMove),ct),n.throttledHandleMouseSeek=dt(sn(qt(n),n.handleMouseSeek),ct),n.enable(),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function s(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("mouseTimeDisplay"),i=t.el(),r=C(i),a=y(i,e).x;1<a?a=1:a<0&&(a=0),n&&n.update(r,a)}},t.handleMouseSeek=function r(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},t.enabled=function a(){return this.enabled_},t.disable=function o(){this.children().forEach(function(e){return e.disable&&e.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},t.enable=function u(){this.children().forEach(function(e){return e.enable&&e.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.handleMouseDown=function l(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},t.handleMouseUp=function c(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},e}(dn);bs.prototype.options_={children:["seekBar"]},dn.registerComponent("ProgressControl",bs);var _s=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],n.handlePictureInPictureChange),xt.pictureInPictureEnabled||n.disable(),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-picture-in-picture-control "+i.prototype.buildCSSClass.call(this)},t.handlePictureInPictureChange=function r(){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},t.handleClick=function a(){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Qa);_s.prototype.controlText_="Picture-in-Picture",dn.registerComponent("PictureInPictureToggle",_s);var Ts=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"fullscreenchange",n.handleFullscreenChange),!1===xt[e.fsApi_.fullscreenEnabled]&&n.disable(),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-fullscreen-control "+i.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function r(){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function a(){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Qa);Ts.prototype.controlText_="Fullscreen",dn.registerComponent("FullscreenToggle",Ts);var Ss=function Ss(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},ws=function(e){function t(){return e.apply(this,arguments)||this}return Ft(t,e),t.prototype.createEl=function n(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(dn);dn.registerComponent("VolumeLevel",ws);var ks=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on("slideractive",n.updateLastVolume_),n.on(e,"volumechange",n.updateARIAAttributes),e.ready(function(){return n.updateARIAAttributes()}),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){return i.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function r(e){Rt(e)&&i.prototype.handleMouseDown.call(this,e)},t.handleMouseMove=function a(e){Rt(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},t.checkMuted=function s(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function o(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function u(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function l(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function c(){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},t.volumeAsPercentage_=function d(){return Math.round(100*this.player_.volume())},t.updateLastVolume_=function h(){var e=this,t=this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(t)})},e}(cs);ks.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ks.prototype.playerEvent="volumechange",dn.registerComponent("VolumeBar",ks);var Cs=function(i){function e(e,t){var n;return void 0===t&&(t={}),t.vertical=t.vertical||!1,("undefined"==typeof t.volumeBar||H(t.volumeBar))&&(t.volumeBar=t.volumeBar||{},t.volumeBar.vertical=t.vertical),n=i.call(this,e,t)||this,Ss(qt(n),e),n.throttledHandleMouseMove=dt(sn(qt(n),n.handleMouseMove),ct),n.on("mousedown",n.handleMouseDown),n.on("touchstart",n.handleMouseDown),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},t.handleMouseDown=function r(){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},t.handleMouseUp=function a(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},t.handleMouseMove=function s(e){this.volumeBar.handleMouseMove(e)},e}(dn);Cs.prototype.options_={children:["volumeBar"]},dn.registerComponent("VolumeControl",Cs);var Es=function Es(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},xs=function(i){function e(e,t){var n;return n=i.call(this,e,t)||this,Es(qt(n),e),n.on(e,["loadstart","volumechange"],n.update),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-mute-control "+i.prototype.buildCSSClass.call(this)},t.handleClick=function r(){var e=this.player_.volume(),t=this.player_.lastVolume_();if(0===e){var n=t<.1?.1:t;this.player_.volume(n),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function a(){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function s(){var e=this.player_.volume(),t=3;_n&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)Lt(this.el_,"vjs-vol-"+n);It(this.el_,"vjs-vol-"+t)},t.updateControlText_=function o(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},e}(Qa);xs.prototype.controlText_="Mute",dn.registerComponent("MuteToggle",xs);var As=function(i){function e(e,t){var n;return void 0===t&&(t={}),"undefined"!=typeof t.inline?t.inline=t.inline:t.inline=!0,("undefined"==typeof t.volumeControl||H(t.volumeControl))&&(t.volumeControl=t.volumeControl||{},t.volumeControl.vertical=!t.inline),(n=i.call(this,e,t)||this).on(e,["loadstart"],n.volumePanelState_),n.on(n.muteToggle,"keyup",n.handleKeyPress),n.on(n.volumeControl,"keyup",n.handleVolumeControlKeyUp),n.on("keydown",n.handleKeyPress),n.on("mouseover",n.handleMouseOver),n.on("mouseout",n.handleMouseOut),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}Ft(e,i);var t=e.prototype;return t.sliderActive_=function n(){this.addClass("vjs-slider-active")},t.sliderInactive_=function r(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function a(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function s(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),i.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},t.dispose=function o(){this.handleMouseOut(),i.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function u(e){Gn.isEventKey(e,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function l(){this.addClass("vjs-hover"),Ut(xt,"keyup",sn(this,this.handleKeyPress))},t.handleMouseOut=function c(){this.removeClass("vjs-hover"),Nt(xt,"keyup",sn(this,this.handleKeyPress))},t.handleKeyPress=function d(e){Gn.isEventKey(e,"Esc")&&this.handleMouseOut()},e}(dn);As.prototype.options_={children:["muteToggle","volumeControl"]},dn.registerComponent("VolumePanel",As);var Ps=function(i){function e(e,t){var n;return n=i.call(this,e,t)||this,t&&(n.menuButton_=t.menuButton),n.focusedChild_=-1,n.on("keydown",n.handleKeyDown),n.boundHandleBlur_=sn(qt(n),n.handleBlur),n.boundHandleTapClick_=sn(qt(n),n.handleTapClick),n}Ft(e,i);var t=e.prototype;return t.addEventListenerForItem=function n(e){e instanceof dn&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function r(e){e instanceof dn&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function a(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),i.prototype.removeChild.call(this,e)},t.addItem=function s(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},t.createEl=function o(){var e=this.options_.contentElType||"ul";this.contentEl_=ie(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var t=i.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),Ut(t,"click",function(e){e.preventDefault(),e.stopImmediatePropagation()}),t},t.dispose=function u(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,i.prototype.dispose.call(this)},t.handleBlur=function l(e){var t=e.relatedTarget||xt.activeElement;if(!this.children().some(function(e){return e.el()===t})){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},t.handleTapClick=function c(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var n=e.filter(function(e){return e.el()===t.target})[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},t.handleKeyDown=function d(e){Gn.isEventKey(e,"Left")||Gn.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Gn.isEventKey(e,"Right")||Gn.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},t.stepForward=function h(){var e=0;this.focusedChild_!==undefined&&(e=this.focusedChild_+1),this.focus(e)},t.stepBack=function f(){var e=0;this.focusedChild_!==undefined&&(e=this.focusedChild_-1),this.focus(e)},t.focus=function p(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),0<t.length&&(e<0?e=0:e>=t.length&&(e=t.length-1),t[this.focusedChild_=e].el_.focus())},e}(dn);dn.registerComponent("Menu",Ps);var Os=function(r){function e(e,t){var n;void 0===t&&(t={}),(n=r.call(this,e,t)||this).menuButton_=new Qa(e,t),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var i=Qa.prototype.buildCSSClass();return n.menuButton_.el_.className=n.buildCSSClass()+" "+i,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0,n.on(n.menuButton_,"tap",n.handleClick),n.on(n.menuButton_,"click",n.handleClick),n.on(n.menuButton_,"keydown",n.handleKeyDown),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),Ut(xt,"keyup",sn(qt(n),n.handleMenuKeyUp))}),n.on("mouseleave",n.handleMouseLeave),n.on("keydown",n.handleSubmenuKeyDown),n}Ft(e,r);var t=e.prototype;return t.update=function n(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},t.createMenu=function a(){var e=new Ps(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=ie("li",{className:"vjs-menu-title",innerHTML:ln(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new dn(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},t.createItems=function i(){},t.createEl=function s(){return r.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function o(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Qa.prototype.buildCSSClass()+" "+r.prototype.buildCSSClass.call(this)},t.buildCSSClass=function u(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+r.prototype.buildCSSClass.call(this)},t.controlText=function l(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},t.dispose=function c(){this.handleMouseLeave(),r.prototype.dispose.call(this)},t.handleClick=function d(){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function h(){this.removeClass("vjs-hover"),Nt(xt,"keyup",sn(this,this.handleMenuKeyUp))},t.focus=function f(){this.menuButton_.focus()},t.blur=function p(){this.menuButton_.blur()},t.handleKeyDown=function m(e){Gn.isEventKey(e,"Esc")||Gn.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Gn.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Gn.isEventKey(e,"Up")||Gn.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function g(e){(Gn.isEventKey(e,"Esc")||Gn.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function y(e){this.handleSubmenuKeyDown(e)},t.handleSubmenuKeyDown=function v(e){(Gn.isEventKey(e,"Esc")||Gn.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Gn.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},t.pressButton=function b(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),_n&&k())return;this.menu.focus()}},t.unpressButton=function _(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function T(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function S(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(dn);dn.registerComponent("MenuButton",Os);var Is=function(a){function e(e,t){var n,i=t.tracks;if((n=a.call(this,e,t)||this).items.length<=1&&n.hide(),!i)return qt(n);var r=sn(qt(n),n.update);return i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),n.player_.on("ready",r),n.player_.on("dispose",function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}),n}return Ft(e,a),e}(Os);dn.registerComponent("TrackButton",Is);var Ls=["Tab","Esc","Up","Down","Right","Left"],Ds=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).selectable=t.selectable,n.isSelected_=t.selected||!1,n.multiSelectable=t.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}Ft(e,i);var t=e.prototype;return t.createEl=function r(e,t,n){return this.nonIconControl=!0,i.prototype.createEl.call(this,"li",At({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},t),n)},t.handleKeyDown=function n(t){Ls.some(function(e){return Gn.isEventKey(t,e)})||i.prototype.handleKeyDown.call(this,t)},t.handleClick=function a(){this.selected(!0)},t.selected=function s(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Wa);dn.registerComponent("MenuItem",Ds);var Rs=function(u){function e(e,t){var i,n=t.track,r=e.textTracks();t.label=n.label||n.language||"Unknown",t.selected="showing"===n.mode,(i=u.call(this,e,t)||this).track=n,i.kinds=(t.kinds||[t.kind||i.track.kind]).filter(Boolean);var a,s=function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(qt(i),t)},o=function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(qt(i),t)};(e.on(["loadstart","texttrackchange"],s),r.addEventListener("change",s),r.addEventListener("selectedlanguagechange",o),i.on("dispose",function(){e.off(["loadstart","texttrackchange"],s),r.removeEventListener("change",s),r.removeEventListener("selectedlanguagechange",o)}),r.onchange===undefined)&&i.on(["tap","click"],function(){if("object"!=typeof Et.Event)try{a=new Et.Event("change")}catch(e){}a||(a=xt.createEvent("Event")).initEvent("change",!0,!0),r.dispatchEvent(a)});return i.handleTracksChange(),i}Ft(e,u);var t=e.prototype;return t.handleClick=function a(e){var t=this.track,n=this.player_.textTracks();if(u.prototype.handleClick.call(this,e),n)for(var i=0;i<n.length;i++){var r=n[i];-1!==this.kinds.indexOf(r.kind)&&(r===t?"showing"!==r.mode&&(r.mode="showing"):"disabled"!==r.mode&&(r.mode="disabled"))}},t.handleTracksChange=function n(){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},t.handleSelectedLanguageChange=function i(){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function r(){this.track=null,u.prototype.dispose.call(this)},e}(Ds);dn.registerComponent("TextTrackMenuItem",Rs);var Ms=function(n){function e(e,t){return t.track={player:e,kind:t.kind,kinds:t.kinds,"default":!1,mode:"disabled"},t.kinds||(t.kinds=[t.kind]),t.label?t.track.label=t.label:t.track.label=t.kinds.join(" and ")+" off",t.selectable=!0,t.multiSelectable=!1,n.call(this,e,t)||this}Ft(e,n);var t=e.prototype;return t.handleTracksChange=function a(){for(var e=this.player().textTracks(),t=!0,n=0,i=e.length;n<i;n++){var r=e[n];if(-1<this.options_.kinds.indexOf(r.kind)&&"showing"===r.mode){t=!1;break}}t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function s(){for(var e=this.player().textTracks(),t=!0,n=0,i=e.length;n<i;n++){var r=e[n];if(-1<["captions","descriptions","subtitles"].indexOf(r.kind)&&"showing"===r.mode){t=!1;break}}t&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Rs);dn.registerComponent("OffTextTrackMenuItem",Ms);var Us=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.textTracks(),n.call(this,e,t)||this}return Ft(e,n),e.prototype.createItems=function o(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Rs),this.label_&&(n=this.label_+" off"),e.push(new Ms(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(-1<this.kinds_.indexOf(a.kind)){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},e}(Is);dn.registerComponent("TextTrackButton",Us);var Ns=function(s){function e(e,t){var n,i=t.track,r=t.cue,a=e.currentTime();return t.selectable=!0,t.multiSelectable=!1,t.label=r.text,t.selected=r.startTime<=a&&a<r.endTime,(n=s.call(this,e,t)||this).track=i,n.cue=r,i.addEventListener("cuechange",sn(qt(n),n.update)),n}Ft(e,s);var t=e.prototype;return t.handleClick=function n(){s.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},t.update=function i(){var e=this.cue,t=this.player_.currentTime();this.selected(e.startTime<=t&&t<e.endTime)},e}(Ds);dn.registerComponent("ChaptersTrackMenuItem",Ns);var js=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-chapters-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function r(){return"vjs-chapters-button "+i.prototype.buildWrapperCSSClass.call(this)},t.update=function a(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),i.prototype.update.call(this)},t.setTrack=function s(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},t.findChaptersTrack=function o(){for(var e=this.player_.textTracks()||[],t=e.length-1;0<=t;t--){var n=e[t];if(n.kind===this.kind_)return n}},t.getMenuCaption=function u(){return this.track_&&this.track_.label?this.track_.label:this.localize(ln(this.kind_))},t.createMenu=function l(){
return this.options_.title=this.getMenuCaption(),i.prototype.createMenu.call(this)},t.createItems=function c(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new Ns(this.player_,{track:this.track_,cue:r});e.push(a)}return e},e}(Us);js.prototype.kind_="chapters",js.prototype.controlText_="Chapters",dn.registerComponent("ChaptersButton",js);var Bs=function(s){function e(e,t,n){var i;i=s.call(this,e,t,n)||this;var r=e.textTracks(),a=sn(qt(i),i.handleTracksChange);return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}Ft(e,s);var t=e.prototype;return t.handleTracksChange=function a(){for(var e=this.player().textTracks(),t=!1,n=0,i=e.length;n<i;n++){var r=e[n];if(r.kind!==this.kind_&&"showing"===r.mode){t=!0;break}}t?this.disable():this.enable()},t.buildCSSClass=function n(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function i(){return"vjs-descriptions-button "+s.prototype.buildWrapperCSSClass.call(this)},e}(Us);Bs.prototype.kind_="descriptions",Bs.prototype.controlText_="Descriptions",dn.registerComponent("DescriptionsButton",Bs);var Fs=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-subtitles-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function r(){return"vjs-subtitles-button "+i.prototype.buildWrapperCSSClass.call(this)},e}(Us);Fs.prototype.kind_="subtitles",Fs.prototype.controlText_="Subtitles",dn.registerComponent("SubtitlesButton",Fs);var qs=function(i){function e(e,t){var n;return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(n=i.call(this,e,t)||this).addClass("vjs-texttrack-settings"),n.controlText(", opens "+t.kind+" settings dialog"),n}return Ft(e,i),e.prototype.handleClick=function t(){this.player().getChild("textTrackSettings").open()},e}(Rs);dn.registerComponent("CaptionSettingsMenuItem",qs);var Hs=function(i){function e(e,t,n){return i.call(this,e,t,n)||this}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-captions-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function r(){return"vjs-captions-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function a(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new qs(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),i.prototype.createItems.call(this,e)},e}(Us);Hs.prototype.kind_="captions",Hs.prototype.controlText_="Captions",dn.registerComponent("CaptionsButton",Hs);var Vs=function(r){function e(){return r.apply(this,arguments)||this}return Ft(e,r),e.prototype.createEl=function a(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",r.prototype.createEl.call(this,e,At({innerHTML:i},t),n)},e}(Rs);dn.registerComponent("SubsCapsMenuItem",Vs);var Ws=function(i){function e(e,t){var n;return void 0===t&&(t={}),(n=i.call(this,e,t)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions"),n.menuButton_.controlText(ln(n.label_)),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-subs-caps-button "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function r(){return"vjs-subs-caps-button "+i.prototype.buildWrapperCSSClass.call(this)},t.createItems=function a(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new qs(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=i.prototype.createItems.call(this,e,Vs)},e}(Us);Ws.prototype.kinds_=["captions","subtitles"],Ws.prototype.controlText_="Subtitles",dn.registerComponent("SubsCapsButton",Ws);var zs=function(s){function e(e,t){var i,n=t.track,r=e.audioTracks();t.label=n.label||n.language||"Unknown",t.selected=n.enabled,(i=s.call(this,e,t)||this).track=n,i.addClass("vjs-"+n.kind+"-menu-item");var a=function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(qt(i),t)};return r.addEventListener("change",a),i.on("dispose",function(){r.removeEventListener("change",a)}),i}Ft(e,s);var t=e.prototype;return t.createEl=function r(e,t,n){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",s.prototype.createEl.call(this,e,At({innerHTML:i},t),n)},t.handleClick=function a(e){var t=this.player_.audioTracks();s.prototype.handleClick.call(this,e);for(var n=0;n<t.length;n++){var i=t[n];i.enabled=i===this.track}},t.handleTracksChange=function n(){this.selected(this.track.enabled)},e}(Ds);dn.registerComponent("AudioTrackMenuItem",zs);var Gs=function(n){function e(e,t){return void 0===t&&(t={}),t.tracks=e.audioTracks(),n.call(this,e,t)||this}Ft(e,n);var t=e.prototype;return t.buildCSSClass=function i(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function r(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function a(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new zs(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},e}(Is);Gs.prototype.controlText_="Audio Track",dn.registerComponent("AudioTrackButton",Gs);var $s=function(a){function e(e,t){var n,i=t.rate,r=parseFloat(i,10);return t.label=i,t.selected=1===r,t.selectable=!0,t.multiSelectable=!1,(n=a.call(this,e,t)||this).label=i,n.rate=r,n.on(e,"ratechange",n.update),n}Ft(e,a);var t=e.prototype;return t.handleClick=function n(){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function i(){this.selected(this.player().playbackRate()===this.rate)},e}(Ds);$s.prototype.contentElType="button",dn.registerComponent("PlaybackRateMenuItem",$s);var Xs=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).updateVisibility(),n.updateLabel(),n.on(e,"loadstart",n.updateVisibility),n.on(e,"ratechange",n.updateLabel),n}Ft(e,i);var t=e.prototype;return t.createEl=function n(){var e=i.prototype.createEl.call(this);return this.labelEl_=ie("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},t.dispose=function r(){this.labelEl_=null,i.prototype.dispose.call(this)},t.buildCSSClass=function a(){return"vjs-playback-rate "+i.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function s(){return"vjs-playback-rate "+i.prototype.buildWrapperCSSClass.call(this)},t.createMenu=function o(){var e=new Ps(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;0<=n;n--)e.addChild(new $s(this.player(),{rate:t[n]+"x"}));return e},t.updateARIAAttributes=function u(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function l(){for(var e=this.player().playbackRate(),t=this.playbackRates(),n=t[0],i=0;i<t.length;i++)if(t[i]>e){n=t[i];break}this.player().playbackRate(n)},t.playbackRates=function c(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},t.playbackRateSupported=function d(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},t.updateVisibility=function h(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function f(){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Os);Xs.prototype.controlText_="Playback Rate",dn.registerComponent("PlaybackRateMenuButton",Xs);var Ys=function(e){function t(){return e.apply(this,arguments)||this}Ft(t,e);var n=t.prototype;return n.buildCSSClass=function i(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function r(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(dn);dn.registerComponent("Spacer",Ys);var Ks=function(t){function e(){return t.apply(this,arguments)||this}Ft(e,t);var n=e.prototype;return n.buildCSSClass=function i(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function r(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="\xa0",e},e}(Ys);dn.registerComponent("CustomControlSpacer",Ks);var Qs=function(e){function t(){return e.apply(this,arguments)||this}return Ft(t,e),t.prototype.createEl=function n(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(dn);Qs.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in xt&&Qs.prototype.options_.children.splice(Qs.prototype.options_.children.length-1,0,"pictureInPictureToggle"),dn.registerComponent("ControlBar",Qs);var Js=function(i){function e(e,t){var n;return(n=i.call(this,e,t)||this).on(e,"error",n.open),n}Ft(e,i);var t=e.prototype;return t.buildCSSClass=function n(){return"vjs-error-display "+i.prototype.buildCSSClass.call(this)},t.content=function r(){var e=this.player().error();return e?this.localize(e.message):""},e}(Xn);Js.prototype.options_=Bt(Xn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),dn.registerComponent("ErrorDisplay",Js);var Zs="vjs-text-track-settings",eo=["#000","Black"],to=["#00F","Blue"],no=["#0FF","Cyan"],io=["#0F0","Green"],ro=["#F0F","Magenta"],ao=["#F00","Red"],so=["#FFF","White"],oo=["#FF0","Yellow"],uo=["1","Opaque"],lo=["0.5","Semi-Transparent"],co=["0","Transparent"],ho={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[eo,so,ao,io,to,oo,ro,no]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[uo,lo,co]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[so,eo,ao,io,to,oo,ro,no]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:function xm(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[uo,lo]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[co,lo,uo]}};ho.windowColor.options=ho.backgroundColor.options;var fo=function(i){function e(e,t){var n;return t.temporary=!1,(n=i.call(this,e,t)||this).updateDisplay=sn(qt(n),n.updateDisplay),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=ie("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),t.persistTextTrackSettings===undefined&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),S(ho,function(e){n.on(n.$(e.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}Ft(e,i);var t=e.prototype;return t.dispose=function n(){this.endDialog=null,i.prototype.dispose.call(this)},t.createElSelect_=function o(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=ho[e],a=r.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(r.options.map(function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',i.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function r(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function a(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=function s(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},t.createElColors_=function u(){return ie("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function l(){return ie("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function c(){var e=this.localize("restore all settings to the default values");return ie("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function d(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function h(){return this.localize("Caption Settings Dialog")},t.description=function f(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function p(){return i.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function m(){var r=this;return w(ho,function(e,t,n){var i=Me(r.$(t.selector),t.parser);return i!==undefined&&(e[n]=i),e},{})},t.setValues=function g(n){var i=this;S(ho,function(e,t){Ue(i.$(e.selector),n[t],e.parser)})},t.setDefaults=function y(){var n=this;S(ho,function(e){var t=e.hasOwnProperty("default")?e["default"]:0;n.$(e.selector).selectedIndex=t})},t.restoreSettings=function v(){var e;try{e=JSON.parse(Et.localStorage.getItem(Zs))}catch(t){en.warn(t)}e&&this.setValues(e)},t.saveSettings=function b(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Et.localStorage.setItem(Zs,JSON.stringify(e)):Et.localStorage.removeItem(Zs)}catch(t){en.warn(t)}}},t.updateDisplay=function _(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},t.conditionalBlur_=function T(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},e}(Xn);dn.registerComponent("TextTrackSettings",fo);var po=function(a){function e(e,t){var n,i=t.ResizeObserver||Et.ResizeObserver;null===t.ResizeObserver&&(i=!1);var r=Bt({createEl:!i,reportTouchActivity:!1},t);return(n=a.call(this,e,r)||this).ResizeObserver=t.ResizeObserver||Et.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=ht(function(){n.resizeHandler()},100,!1,qt(n)),i?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(e.el())):(n.loadListener_=function(){if(n.el_&&n.el_.contentWindow){var e=n.debouncedHandler_,t=n.unloadListener_=function(){Nt(this,"resize",e),Nt(this,"unload",t),t=null};Ut(n.el_.contentWindow,"unload",t),Ut(n.el_.contentWindow,"resize",e)}},n.one("load",n.loadListener_)),n}Ft(e,a);var t=e.prototype;return t.createEl=function n(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},t.resizeHandler=function i(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},t.dispose=function r(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},e}(dn);dn.registerComponent("ResizeManager",po);var mo=function mo(e){var t=Math.floor(e.length/2),n=[].concat(e).sort(function(e,t){return e-t});return e.length%2!=0?n[t]:(n[t-1]+n[t])/2},go=function(r){function e(e,t){var n,i=Bt({createEl:!1},t);return(n=r.call(this,e,i)||this).reset_(),n.on(n.player_,"durationchange",n.handleDurationchange),Pn&&"hidden"in xt&&"visibilityState"in xt&&n.on(xt,"visibilitychange",n.handleVisibilityChange),n}Ft(e,r);var t=e.prototype;return t.handleVisibilityChange=function n(){this.player_.duration()===Infinity&&(xt.hidden?this.stopTracking():this.startTracking())},t.isBehind_=function i(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),n=2*this.seekableIncrement_+.07;return e!==Infinity&&t<=e-n},t.trackLive_=function a(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var t=this.seekableEnd();t!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(t-this.lastSeekEnd_)),3<this.seekableIncrementList_.length&&(this.seekableIncrement_=mo(this.seekableIncrementList_))),this.pastSeekEnd_=0,this.lastSeekEnd_=t,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},t.handleDurationchange=function s(){this.player_.duration()===Infinity?this.startTracking():this.stopTracking()},t.startTracking=function o(){var e=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},t.handlePlay=function u(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},t.reset_=function l(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},t.stopTracking=function c(){this.isTracking()&&this.reset_()},t.seekableEnd=function d(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:Infinity},t.seekableStart=function h(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},t.liveWindow=function f(){var e=this.liveCurrentTime();return e===Infinity?Infinity:e-this.seekableStart()},t.isLive=function p(){return this.isTracking()},t.atLiveEdge=function m(){return!this.behindLiveEdge()},t.liveCurrentTime=function g(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function y(){return this.pastSeekEnd_},t.behindLiveEdge=function v(){return this.behindLiveEdge_},t.isTracking=function b(){return"number"==typeof this.trackingInterval_},t.seekToLiveEdge=function _(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},t.dispose=function T(){this.stopTracking(),r.prototype.dispose.call(this)},e}(dn);dn.registerComponent("LiveTracker",go);var yo=function yo(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===i.indexOf(s)&&i.push(s)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},vo=Object.defineProperty({},"innerHTML",{get:function Yt(){return this.cloneNode(!0).innerHTML},set:function Kt(e){var t=xt.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=xt.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Et.Element.prototype.appendChild.call(this,n),this.innerHTML}}),bo=function bo(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},_o=function _o(e){return bo([e.el(),Et.HTMLMediaElement.prototype,Et.Element.prototype,vo],"innerHTML")},To=function To(a){var s=a.el();if(!s.resetSourceWatch_){var t={},e=_o(a),n=function n(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=r.apply(s,t);return yo(a),i}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){s[e]&&(t[e]=s[e],s[e]=n(t[e]))}),Object.defineProperty(s,"innerHTML",Bt(e,{set:n(e.set)})),s.resetSourceWatch_=function(){s.resetSourceWatch_=null,Object.keys(t).forEach(function(e){s[e]=t[e]}),Object.defineProperty(s,"innerHTML",e)},a.one("sourceset",s.resetSourceWatch_)}},So=Object.defineProperty({},"src",{get:function Yt(){return this.hasAttribute("src")?di(Et.Element.prototype.getAttribute.call(this,"src")):""},set:function Kt(e){return Et.Element.prototype.setAttribute.call(this,"src",e),e}}),wo=function wo(e){return bo([e.el(),Et.HTMLMediaElement.prototype,So],"src")},ko=function ko(i){if(i.featuresSourceset){var r=i.el();if(!r.resetSourceset_){var n=wo(i),a=r.setAttribute,t=r.load;Object.defineProperty(r,"src",Bt(n,{set:function s(e){var t=n.set.call(r,e);return i.triggerSourceset(r.src),t}})),r.setAttribute=function(e,t){var n=a.call(r,e,t);return/src/i.test(e)&&i.triggerSourceset(r.src),n},r.load=function(){var e=t.call(r);return yo(i)||(i.triggerSourceset(""),To(i)),e},r.currentSrc?i.triggerSourceset(r.currentSrc):yo(i)||To(i),r.resetSourceset_=function(){r.resetSourceset_=null,r.load=t,r.setAttribute=a,Object.defineProperty(r,"src",n),r.resetSourceWatch_&&r.resetSourceWatch_()}}}},Co=function(c){function o(e,t){var n;n=c.call(this,e,t)||this;var i=e.source,r=!1;if(i&&(n.el_.currentSrc!==i.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(i):n.handleLateInit_(n.el_),e.enableSourceset&&n.setupSourcesetHandling_(),n.el_.hasChildNodes()){for(var a=n.el_.childNodes,s=a.length,o=[];s--;){var u=a[s];"track"===u.nodeName.toLowerCase()&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(u),n.remoteTextTracks().addTrack(u.track),n.textTracks().addTrack(u.track),r||n.el_.hasAttribute("crossorigin")||!fi(u.src)||(r=!0)):o.push(u))}for(var l=0;l<o.length;l++)n.el_.removeChild(o[l])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&r&&en.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),n.restoreMetadataTracksInIOSNativePlayer_(),(Dn||vn||kn)&&!0===e.nativeControlsForTouch&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}Ft(o,c);var e=o.prototype;return e.dispose=function t(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),o.disposeMediaElement(this.el_),this.options_=null,c.prototype.dispose.call(this)},e.setupSourcesetHandling_=function n(){ko(this)},e.restoreMetadataTracksInIOSNativePlayer_=function s(){var n,i=this.textTracks(),r=function r(){n=[];for(var e=0;e<i.length;e++){var t=i[e];"metadata"===t.kind&&n.push({track:t,storedMode:t.mode})}};r(),i.addEventListener("change",r),this.on("dispose",function(){return i.removeEventListener("change",r)});var a=function a(){for(var e=0;e<n.length;e++){var t=n[e];"disabled"===t.track.mode&&t.track.mode!==t.storedMode&&(t.track.mode=t.storedMode)}i.removeEventListener("change",a)};this.on("webkitbeginfullscreen",function(){i.removeEventListener("change",r),i.removeEventListener("change",a),i.addEventListener("change",a)}),this.on("webkitendfullscreen",function(){i.removeEventListener("change",r),i.addEventListener("change",r),i.removeEventListener("change",a)})},e.overrideNative_=function r(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach(function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])}),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},e.overrideNativeAudioTracks=function i(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function a(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function d(e){var n=this,t=ha[e],r=this.el()[t.getterName],a=this[t.getterName]();if(this["featuresNative"+t.capitalName+"Tracks"]&&r&&r.addEventListener){var i={change:function o(){a.trigger({type:"change",target:a,currentTarget:a,srcElement:a})},addtrack:function u(e){a.addTrack(e.track)},removetrack:function l(e){a.removeTrack(e.track)}},s=function s(){for(var e=[],t=0;t<a.length;t++){for(var n=!1,i=0;i<r.length;i++)if(r[i]===a[t]){n=!0;break}n||e.push(a[t])}for(;e.length;)a.removeTrack(e.shift())};this[t.getterName+"Listeners_"]=i,Object.keys(i).forEach(function(e){var t=i[e];r.addEventListener(e,t),n.on("dispose",function(){return r.removeEventListener(e,t)})}),this.on("loadstart",s),this.on("dispose",function(){return n.off("loadstart",s)})}},e.proxyNativeTracks_=function u(){var t=this;ha.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},e.createEl=function l(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),o.disposeMediaElement(e),e=t}else{e=xt.createElement("video");var n=Bt({},this.options_.tag&&Dt(this.options_.tag));Dn&&!0===this.options_.nativeControlsForTouch||delete n.controls,I(e,At(n,{id:this.options_.techId,"class":"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&se(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],r=0;r<i.length;r++){var a=i[r],s=this.options_[a];void 0!==s&&(s?se(e,a,a):oe(e,a),e[a]=s)}return e},e.handleLateInit_=function h(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function n(){t=!0};this.on("loadstart",n);var i=function i(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")})}var r=["loadstart"];r.push("loadedmetadata"),2<=e.readyState&&r.push("loadeddata"),3<=e.readyState&&r.push("canplay"),4<=e.readyState&&r.push("canplaythrough"),this.ready(function(){r.forEach(function(e){this.trigger(e)},this)})}},e.setCurrentTime=function f(e){try{this.el_.currentTime=e}catch(t){en(t,"Video is not ready. (Video.js)")}},e.duration=function p(){var e=this;if(this.el_.duration===Infinity&&Sn&&xn&&0===this.el_.currentTime){var t=function t(){0<e.el_.currentTime&&(e.el_.duration===Infinity&&e.trigger("durationchange"),e.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN},e.width=function m(){return this.el_.offsetWidth},e.height=function g(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=function y(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function t(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function n(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)})}},e.supportsFullScreen=function v(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=Et.navigator&&Et.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},e.enterFullScreen=function b(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause(),e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()},e.exitFullScreen=function _(){this.el_.webkitExitFullScreen()},e.requestPictureInPicture=function T(){return this.el_.requestPictureInPicture()},e.src=function S(e){if(e===undefined)return this.el_.src;this.setSrc(e)},e.reset=function w(){o.resetMediaElement(this.el_)},e.currentSrc=function k(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},e.setControls=function C(e){this.el_.controls=!!e},e.addTextTrack=function E(e,t,n){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,t,n):c.prototype.addTextTrack.call(this,e,t,n)},e.createRemoteTextTrack=function x(e){if(!this.featuresNativeTextTracks)return c.prototype.createRemoteTextTrack.call(this,e);var t=xt.createElement("track");return e.kind&&(t.kind=e.kind),e.label&&(t.label=e.label),(e.language||e.srclang)&&(t.srclang=e.language||e.srclang),e["default"]&&(t["default"]=e["default"]),e.id&&(t.id=e.id),e.src&&(t.src=e.src),t},e.addRemoteTextTrack=function A(e,t){var n=c.prototype.addRemoteTextTrack.call(this,e,t);return this.featuresNativeTextTracks&&this.el().appendChild(n),n},e.removeRemoteTextTrack=function P(e){if(c.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var t=this.$$("track"),n=t.length;n--;)e!==t[n]&&e!==t[n].track||this.el().removeChild(t[n])},e.getVideoPlaybackQuality=function O(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return"undefined"!=typeof this.el().webkitDroppedFrameCount&&"undefined"!=typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Et.performance&&"function"==typeof Et.performance.now?e.creationTime=Et.performance.now():Et.performance&&Et.performance.timing&&"number"==typeof Et.performance.timing.navigationStart&&(e.creationTime=Et.Date.now()-Et.performance.timing.navigationStart),e},o}(La);if(o()){Co.TEST_VID=xt.createElement("video");var Eo=xt.createElement("track")
;Eo.kind="captions",Eo.srclang="en",Eo.label="English",Co.TEST_VID.appendChild(Eo)}Co.isSupported=function(){try{Co.TEST_VID.volume=.5}catch(e){return!1}return!(!Co.TEST_VID||!Co.TEST_VID.canPlayType)},Co.canPlayType=function(e){return Co.TEST_VID.canPlayType(e)},Co.canPlaySource=function(e){return Co.canPlayType(e.type)},Co.canControlVolume=function(){try{var e=Co.TEST_VID.volume;return Co.TEST_VID.volume=e/2+.1,e!==Co.TEST_VID.volume}catch(t){return!1}},Co.canMuteVolume=function(){try{var e=Co.TEST_VID.muted;return Co.TEST_VID.muted=!e,Co.TEST_VID.muted?se(Co.TEST_VID,"muted","muted"):oe(Co.TEST_VID,"muted","muted"),e!==Co.TEST_VID.muted}catch(t){return!1}},Co.canControlPlaybackRate=function(){if(Sn&&xn&&An<58)return!1;try{var e=Co.TEST_VID.playbackRate;return Co.TEST_VID.playbackRate=e/2+.1,e!==Co.TEST_VID.playbackRate}catch(t){return!1}},Co.canOverrideAttributes=function(){try{var e=function e(){};Object.defineProperty(xt.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(xt.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(xt.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(xt.createElement("audio"),"innerHTML",{get:e,set:e})}catch(t){return!1}return!0},Co.supportsNativeTextTracks=function(){return In||_n&&xn},Co.supportsNativeVideoTracks=function(){return!(!Co.TEST_VID||!Co.TEST_VID.videoTracks)},Co.supportsNativeAudioTracks=function(){return!(!Co.TEST_VID||!Co.TEST_VID.audioTracks)},Co.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Co.prototype.featuresVolumeControl=Co.canControlVolume(),Co.prototype.featuresMuteControl=Co.canMuteVolume(),Co.prototype.featuresPlaybackRate=Co.canControlPlaybackRate(),Co.prototype.featuresSourceset=Co.canOverrideAttributes(),Co.prototype.movingMediaElementInDOM=!_n,Co.prototype.featuresFullscreenResize=!0,Co.prototype.featuresProgressEvents=!0,Co.prototype.featuresTimeupdateEvents=!0,Co.prototype.featuresNativeTextTracks=Co.supportsNativeTextTracks(),Co.prototype.featuresNativeVideoTracks=Co.supportsNativeVideoTracks(),Co.prototype.featuresNativeAudioTracks=Co.supportsNativeAudioTracks();var xo=Co.TEST_VID&&Co.TEST_VID.constructor.prototype.canPlayType,Ao=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Co.patchCanPlayType=function(){4<=wn&&!Cn&&!xn&&(Co.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&Ao.test(e)?"maybe":xo.call(this,e)})},Co.unpatchCanPlayType=function(){var e=Co.TEST_VID.constructor.prototype.canPlayType;return Co.TEST_VID.constructor.prototype.canPlayType=xo,e},Co.patchCanPlayType(),Co.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(e){}}()}},Co.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){Co.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Co.prototype["set"+ln(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(e){Co.prototype[e]=function(){return this.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Co.prototype["set"+ln(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(e){Co.prototype[e]=function(){return this.el_[e]()}}),La.withSourceHandlers(Co),Co.nativeSourceHandler={},Co.nativeSourceHandler.canPlayType=function(e){try{return Co.TEST_VID.canPlayType(e)}catch(t){return""}},Co.nativeSourceHandler.canHandleSource=function(e){if(e.type)return Co.nativeSourceHandler.canPlayType(e.type);if(e.src){var t=hi(e.src);return Co.nativeSourceHandler.canPlayType("video/"+t)}return""},Co.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},Co.nativeSourceHandler.dispose=function(){},Co.registerSourceHandler(Co.nativeSourceHandler),La.registerTech("Html5",Co);var Po=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Oo={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Io=["tiny","xsmall","small","medium","large","xlarge","huge"],Lo={};Io.forEach(function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Lo[e]="vjs-layout-"+t});var Do={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity},Ro=function(c){function l(e,t,n){var i;if(e.id=e.id||t.id||"vjs_video_"+Mt(),(t=At(l.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var r=e.closest("[lang]");r&&r.getAttribute&&(t.language=r.getAttribute("lang"))}else for(var a=e;a&&1===a.nodeType;){if(Dt(a).hasOwnProperty("lang")){t.language=a.getAttribute("lang");break}a=a.parentNode}if((i=c.call(this,null,t,n)||this).boundDocumentFullscreenChange_=sn(qt(i),i.documentFullscreenChange_),i.boundFullWindowOnEscKey_=sn(qt(i),i.fullWindowOnEscKey),i.log=tn(i.id_),i.fsApi_=Mn,i.isPosterFromTech_=!1,i.queuedCallbacks_=[],i.isReady_=!1,i.hasStarted_=!1,i.userActive_=!1,!i.options_||!i.options_.techOrder||!i.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(i.tag=e,i.tagAttributes=e&&Dt(e),i.language(i.options_.language),t.languages){var s={};Object.getOwnPropertyNames(t.languages).forEach(function(e){s[e.toLowerCase()]=t.languages[e]}),i.languages_=s}else i.languages_=l.prototype.options_.languages;i.resetCache_(),i.poster_=t.poster||"",i.controls_=!!t.controls,e.controls=!1,e.removeAttribute("controls"),i.changingSrc_=!1,i.playCallbacks_=[],i.playTerminatedQueue_=[],e.hasAttribute("autoplay")?i.autoplay(!0):i.autoplay(i.options_.autoplay),t.plugins&&Object.keys(t.plugins).forEach(function(e){if("function"!=typeof i[e])throw new Error('plugin "'+e+'" does not exist')}),i.scrubbing_=!1,i.el_=i.createEl(),jt(qt(i),{eventBusKey:"el_"}),i.fluid_&&i.on("playerreset",i.updateStyleEl_);var o=Bt(i.options_);t.plugins&&Object.keys(t.plugins).forEach(function(e){i[e](t.plugins[e])}),i.options_.playerOptions=o,i.middleware_=[],i.initChildren(),i.isAudio("audio"===e.nodeName.toLowerCase()),i.controls()?i.addClass("vjs-controls-enabled"):i.addClass("vjs-controls-disabled"),i.el_.setAttribute("role","region"),i.isAudio()?i.el_.setAttribute("aria-label",i.localize("Audio Player")):i.el_.setAttribute("aria-label",i.localize("Video Player")),i.isAudio()&&i.addClass("vjs-audio"),i.flexNotSupported_()&&i.addClass("vjs-no-flex"),Dn&&i.addClass("vjs-touch-enabled"),_n||i.addClass("vjs-workinghover"),l.players[i.id_]=qt(i);var u=Zt.split(".")[0];return i.addClass("vjs-v"+u),i.userActive(!0),i.reportUserActivity(),i.one("play",i.listenForUserActivity_),i.on("stageclick",i.handleStageClick_),i.on("keydown",i.handleKeyDown),i.breakpoints(i.options_.breakpoints),i.responsive(i.options_.responsive),i}Ft(l,c);var e=l.prototype;return e.dispose=function t(){var i=this;this.trigger("dispose"),this.off("dispose"),Nt(xt,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Nt(xt,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),l.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Jt(this),pa.names.forEach(function(e){var t=pa[e],n=i[t.getterName]();n&&n.off&&n.off()}),c.prototype.dispose.call(this)},e.createEl=function d(){var t,n=this.tag,e=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();e?t=this.el_=n.parentNode:i||(t=this.el_=c.prototype.createEl.call(this,"div"));var r=Dt(n);if(i){for(t=this.el_=n,n=this.tag=xt.createElement("video");t.children.length;)n.appendChild(t.firstChild);Ot(t,"video-js")||It(t,"video-js"),t.appendChild(n),e=this.playerElIngest_=t,Object.keys(t).forEach(function(e){n[e]=t[e]})}if(n.setAttribute("tabindex","-1"),r.tabindex="-1",(Pn||xn&&Ln)&&(n.setAttribute("role","application"),r.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in r&&delete r.width,"height"in r&&delete r.height,Object.getOwnPropertyNames(r).forEach(function(e){i&&"class"===e||t.setAttribute(e,r[e]),i&&n.setAttribute(e,r[e])}),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==Et.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=rn("vjs-styles-dimensions");var a=nn(".vjs-styles-defaults"),s=nn("head");s.insertBefore(this.styleEl_,a?a.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=n.getElementsByTagName("a"),u=0;u<o.length;u++){var l=o.item(u);It(l,"vjs-hidden"),l.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!e&&n.parentNode.insertBefore(t,n),Pt(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t},e.width=function n(e){return this.dimension("width",e)},e.height=function i(e){return this.dimension("height",e)},e.dimension=function r(e,t){var n=e+"_";if(t===undefined)return this[n]||0;if(""===t)return this[n]=undefined,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?en.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},e.fluid=function a(e){if(e===undefined)return!!this.fluid_;this.fluid_=!!e,on(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),un(function(){this.on("playerreset",this.updateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},e.fill=function s(e){if(e===undefined)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},e.aspectRatio=function o(e){if(e===undefined)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},e.updateStyleEl_=function u(){if(!0!==Et.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(this.aspectRatio_!==undefined&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=this.width_!==undefined?this.width_:this.height_!==undefined?this.height_/r:this.videoWidth()||300,t=this.height_!==undefined?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),an(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(0<=a&&(o.width=a),0<=s&&(o.height=s))}},e.loadTech_=function h(e,t){var n=this;this.tech_&&this.unloadTech_();var i=ln(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(La.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};pa.names.forEach(function(e){var t=pa[e];a[t.getterName]=n[t.privateName]}),At(a,this.options_[i]),At(a,this.options_[r]),At(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var s=La.getTech(e);if(!s)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(sn(this,this.handleTechReady_),!0),zn.jsonToTextTracks(this.textTracksJson_||[],this.tech_),Po.forEach(function(e){n.on(n.tech_,e,n["handleTech"+ln(e)+"_"])}),Object.keys(Oo).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Oo[t]+"_"].bind(n),event:e}):n["handleTech"+Oo[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||Pt(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},e.unloadTech_=function f(){var n=this;pa.names.forEach(function(e){var t=pa[e];n[t.privateName]=n[t.getterName]()}),this.textTracksJson_=zn.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},e.tech=function p(e){return e===undefined&&en.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},e.addTechControlsListeners_=function m(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},e.removeTechControlsListeners_=function g(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},e.handleTechReady_=function y(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},e.handleTechLoadStart_=function v(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},e.manualAutoplay_=function b(e){var i=this;if(this.tech_&&"string"==typeof e){var t,r=function r(){var e=i.muted();i.muted(!0);var t=function t(){i.muted(e)};i.playTerminatedQueue_.push(t);var n=i.play();if(zt(n))return n["catch"](t)};if("any"===e&&!0!==this.muted()?zt(t=this.play())&&(t=t["catch"](r)):t="muted"===e&&!0!==this.muted()?r():this.play(),zt(t))return t.then(function(){i.trigger({type:"autoplay-success",autoplay:e})})["catch"](function(){i.trigger({type:"autoplay-failure",autoplay:e})})}},e.updateSourceCaches_=function _(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=qa(this,t)),this.cache_.source=Bt({},e,{src:t,type:n});for(var i=this.cache_.sources.filter(function(e){return e.src&&e.src===t}),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var u=Dt(a[o]);r.push(u),u.src&&u.src===t&&s.push(u.src)}s.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},e.handleTechSourceset_=function T(e){var n=this;if(!this.changingSrc_){var t=function t(e){return n.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(t=function t(){}),t(r),e.src||this.tech_.any(["sourceset","loadstart"],function(e){if("sourceset"!==e.type){var t=n.techGet("currentSrc");n.lastSource_.tech=t,n.updateSourceCaches_(t)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},e.hasStarted=function S(e){if(e===undefined)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},e.handleTechPlay_=function w(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},e.handleTechRateChange_=function k(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},e.handleTechWaiting_=function C(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime(),n=function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))};this.on("timeupdate",n)},e.handleTechCanPlay_=function E(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function x(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function A(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function P(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=function O(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},e.handleTechFirstPlay_=function I(){this.options_.starttime&&(en.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},e.handleTechPause_=function L(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=function D(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},e.handleTechDurationChange_=function R(){this.duration(this.techGet_("duration"))},e.handleTechClick_=function M(e){Rt(e)&&this.controls_&&(this.paused()?Gt(this.play()):this.pause())},e.handleTechDoubleClick_=function U(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||this.options_!==undefined&&this.options_.userActions!==undefined&&this.options_.userActions.doubleClick!==undefined&&!1===this.options_.userActions.doubleClick||(this.options_!==undefined&&this.options_.userActions!==undefined&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},e.handleTechTap_=function N(){this.userActive(!this.userActive())},e.handleTechTouchStart_=function j(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=function B(){this.userWasActive&&this.reportUserActivity()},e.handleTechTouchEnd_=function F(e){e.preventDefault()},e.handleStageClick_=function q(){this.reportUserActivity()},e.toggleFullscreenClass_=function H(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},e.documentFullscreenChange_=function V(){var e=this.el(),t=xt[this.fsApi_.fullscreenElement]===e;!t&&e.matches?t=e.matches(":"+this.fsApi_.fullscreen):!t&&e.msMatchesSelector&&(t=e.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(t),!1===this.isFullscreen()&&Nt(xt,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger("fullscreenchange")},e.handleTechFullscreenChange_=function W(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},e.togglePictureInPictureClass_=function z(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},e.handleTechEnterPictureInPicture_=function G(){this.isInPictureInPicture(!0)},e.handleTechLeavePictureInPicture_=function $(){this.isInPictureInPicture(!1)},e.handleTechError_=function X(){var e=this.tech_.error();this.error(e)},e.handleTechTextData_=function Y(e,t){var n=null;1<arguments.length&&(n=t),this.trigger("textdata",n)},e.getCache=function K(){return this.cache_},e.resetCache_=function Q(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},e.techCall_=function J(t,n){this.ready(function(){if(t in Na)return Kt(this.middleware_,this.tech_,t,n);if(t in ja)return Qt(this.middleware_,this.tech_,t,n);try{this.tech_&&this.tech_[t](n)}catch(e){throw en(e),e}},!0)},e.techGet_=function Z(e){if(this.tech_&&this.tech_.isReady_){if(e in Ua)return Yt(this.middleware_,this.tech_,e);if(e in ja)return Qt(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(this.tech_[e]===undefined)throw en("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw en("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw en(t),t}}},e.play=function ee(){var t=this,e=this.options_.Promise||Et.Promise;return e?new e(function(e){t.play_(e)}):this.play_()},e.play_=function te(e){var t=this;void 0===e&&(e=Gt),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!In&&!_n||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},e.runPlayTerminatedQueue_=function ne(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(e){e()})},e.runPlayCallbacks_=function ie(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach(function(e){e(t)})},e.pause=function re(){this.techCall_("pause")},e.paused=function ae(){return!1!==this.techGet_("paused")},e.played=function se(){return this.techGet_("played")||Ht(0,0)},e.scrubbing=function oe(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},e.currentTime=function ue(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},e.duration=function le(e){if(e===undefined)return this.cache_.duration!==undefined?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=Infinity),e!==this.cache_.duration&&((this.cache_.duration=e)===Infinity?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},e.remainingTime=function ce(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=function de(){return Math.floor(this.duration())-Math.floor(this.currentTime())},e.buffered=function e(){var e=this.techGet_("buffered");return e&&e.length||(e=Ht(0,0)),e},e.bufferedPercent=function he(){return Vt(this.buffered(),this.duration())},e.bufferedEnd=function fe(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return t<n&&(n=t),n},e.volume=function pe(e){var t;return e!==undefined?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(0<t&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},e.muted=function me(e){if(e===undefined)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},e.defaultMuted=function ge(e){return e!==undefined?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},e.lastVolume_=function ye(e){if(e===undefined||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},e.supportsFullScreen=function ve(){return this.techGet_("supportsFullScreen")||!1},e.isFullscreen=function be(e){return e!==undefined?(this.isFullscreen_=!!e,void this.toggleFullscreenClass_()):!!this.isFullscreen_},e.requestFullscreen=function _e(e){var t;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(Ut(xt,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==undefined&&(t=e)),Gt(this.el_[this.fsApi_.requestFullscreen](t))):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.exitFullscreen=function Te(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?Gt(xt[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},e.enterFullWindow=function Se(){this.isFullWindow=!0,this.docOrigOverflow=xt.documentElement.style.overflow,Ut(xt,"keydown",this.boundFullWindowOnEscKey_),xt.documentElement.style.overflow="hidden",It(xt.body,"vjs-full-window"),this.trigger("enterFullWindow")},e.fullWindowOnEscKey=function we(e){Gn.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},e.exitFullWindow=function ke(){this.isFullWindow=!1,Nt(xt,"keydown",this.boundFullWindowOnEscKey_),xt.documentElement.style.overflow=this.docOrigOverflow,Lt(xt.body,"vjs-full-window"),this.trigger("exitFullWindow")},e.isInPictureInPicture=function Ce(e){return e!==undefined?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},e.requestPictureInPicture=function Ee(){if("pictureInPictureEnabled"in xt)return this.techGet_("requestPictureInPicture")},e.exitPictureInPicture=function xe(){if("pictureInPictureEnabled"in xt)return xt.exitPictureInPicture()},e.handleKeyDown=function Ae(e){var t=this.options_.userActions;if(t&&t.hotkeys){var n=function n(e){var t=e.tagName.toLowerCase();return!!e.isContentEditable||("input"===t?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type):-1!==["textarea"].indexOf(t))};n(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},e.handleHotkeys=function Pe(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=void 0===n?function(e){return Gn.isEventKey(e,"f")}:n,r=t.muteKey,a=void 0===r?function(e){return Gn.isEventKey(e,"m")}:r,s=t.playPauseKey,o=void 0===s?function(e){return Gn.isEventKey(e,"k")||Gn.isEventKey(e,"Space")}:s;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var u=dn.getComponent("FullscreenToggle");!1!==xt[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation(),dn.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(o.call(this,e)){e.preventDefault(),e.stopPropagation(),dn.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},e.canPlayType=function Oe(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=La.getTech(r);if(a||(a=dn.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else en.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},e.selectSource=function Ie(e){var i=this,t=this.options_.techOrder.map(function(e){return[e,La.getTech(e)]}).filter(function(e){var t=e[0],n=e[1];return n?n.isSupported():(en.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),a=function a(e,n,i){var r;return e.some(function(t){return n.some(function(e){if(r=i(t,e))return!0})}),r},r=function r(n){return function(e,t){return n(t,e)}},s=function s(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return(this.options_.sourceOrder?a(e,t,r(s)):a(t,e,s))||!1},e.src=function Le(e){var n=this;if(void 0===e)return this.cache_.src||"";var i=Ha(e);i.length?(this.changingSrc_=!0,this.cache_.sources=i,this.updateSourceCaches_(i[0]),$t(this,i[0],function(e,t){if(n.middleware_=t,n.cache_.sources=i,n.updateSourceCaches_(e),n.src_(e))return 1<i.length?n.src(i.slice(1)):(n.changingSrc_=!1,n.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void n.triggerReady());Xt(t,n.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},e.src_=function De(e){var t=this,n=this.selectSource([e]);return!n||(cn(n.tech,this.techName_)?this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(function(){t.changingSrc_=!1})),!1)},e.load=function Re(){this.techCall_("load")},e.reset=function Me(){var e=this,t=this.options_.Promise||Et.Promise;this.paused()||!t?this.doReset_():Gt(this.play().then(function(){return e.doReset_()}))},e.doReset_=function Ue(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),on(this)&&this.trigger("playerreset")},e.resetControlBarUI_=function Ne(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},e.resetProgressBar_=function je(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},e.resetPlaybackRate_=function Be(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},e.resetVolumeBar_=function Fe(){this.volume(1),this.trigger("volumechange")},e.currentSources=function qe(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},e.currentSource=function He(){return this.cache_.source||{}},e.currentSrc=function Ve(){return this.currentSource()&&this.currentSource().src||""},e.currentType=function We(){return this.currentSource()&&this.currentSource().type||""},e.preload=function ze(e){return e!==undefined?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=function Ge(e){if(e===undefined
)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},e.playsinline=function $e(e){return e!==undefined?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},e.loop=function Xe(e){return e!==undefined?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},e.poster=function Ye(e){if(e===undefined)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},e.handleTechPosterChange_=function Ke(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},e.controls=function Qe(e){if(e===undefined)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},e.usingNativeControls=function Je(e){if(e===undefined)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},e.error=function Ze(e){if(e===undefined)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&e.message&&e.message===this.localize(this.options_.notSupportedMessage)){var t=function t(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",function(){this.off(["click","touchstart"],t)})}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Wt(e),this.addClass("vjs-error"),en.error("(CODE:"+this.error_.code+" "+Wt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},e.reportUserActivity=function et(){this.userActivity_=!0},e.userActive=function tt(e){if(e===undefined)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(e){e.stopPropagation(),e.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},e.listenForUserActivity_=function nt(){var e,t,n,i=sn(this,this.reportUserActivity),r=function r(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())},a=function a(){i(),this.clearInterval(e),e=this.setInterval(i,250)},s=function s(){i(),this.clearInterval(e)};this.on("mousedown",a),this.on("mousemove",r),this.on("mouseup",s);var o,u=this.getChild("controlBar");!u||_n||Sn||(u.on("mouseenter",function(){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0}),u.on("mouseleave",function(){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var e=this.options_.inactivityTimeout;e<=0||(o=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)},e.playbackRate=function it(e){if(e===undefined)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},e.defaultPlaybackRate=function rt(e){return e!==undefined?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},e.isAudio=function at(e){if(e===undefined)return!!this.isAudio_;this.isAudio_=!!e},e.addTextTrack=function st(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},e.addRemoteTextTrack=function ot(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},e.removeRemoteTextTrack=function ut(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},e.getVideoPlaybackQuality=function lt(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function ct(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=function dt(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},e.language=function ht(e){if(e===undefined)return this.language_;this.language_=String(e).toLowerCase()},e.languages=function ft(){return Bt(l.prototype.options_.languages,this.languages_)},e.toJSON=function pt(){var e=Bt(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=Bt(i)).player=undefined,e.tracks[n]=i}return e},e.createModal=function mt(e,t){var n=this;(t=t||{}).content=e||"";var i=new Xn(this,t);return this.addChild(i),i.on("dispose",function(){n.removeChild(i)}),i.open(),i},e.updateCurrentBreakpoint_=function gt(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Io.length;n++){var i=Io[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Lo[e]),this.addClass(Lo[i]),this.breakpoint_=i;break}}},e.removeCurrentBreakpoint_=function yt(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},e.breakpoints=function vt(e){return e===undefined||(this.breakpoint_="",this.breakpoints_=At({},Do,e),this.updateCurrentBreakpoint_()),At(this.breakpoints_)},e.responsive=function bt(e){return e===undefined?this.responsive_:(e=Boolean(e))!==this.responsive_?((this.responsive_=e)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},e.currentBreakpoint=function _t(){return this.breakpoint_},e.currentBreakpointClass=function Tt(){return Lo[this.breakpoint_]||""},e.loadMedia=function St(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Bt(e);var i=this.cache_.media,r=i.artwork,a=i.poster,s=i.src,o=i.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:Fa(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&&o.forEach(function(e){return n.addRemoteTextTrack(e,!1)}),this.ready(t)}},e.getMedia=function wt(){if(this.cache_.media)return Bt(this.cache_.media);var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}})};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Fa(t.poster)}]),t},l.getTagSettings=function kt(e){var t={sources:[],tracks:[]},n=Dt(e),i=n["data-setup"];if(Ot(e,"vjs-fill")&&(n.fill=!0),Ot(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=qn(i||"{}"),a=r[0],s=r[1];a&&en.error(a),At(n,s)}if(At(t,n),e.hasChildNodes())for(var o=e.childNodes,u=0,l=o.length;u<l;u++){var c=o[u],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(Dt(c)):"track"===d&&t.tracks.push(Dt(c))}return t},e.flexNotSupported_=function Ct(){var e=xt.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},l}(dn);pa.names.forEach(function(e){var t=pa[e];Ro.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),Ro.players={};var Mo=Et.navigator;Ro.prototype.options_={techOrder:La.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Mo&&(Mo.languages&&Mo.languages[0]||Mo.userLanguage||Mo.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(e){Ro.prototype[e]=function(){return this.techGet_(e)}}),Po.forEach(function(e){Ro.prototype["handleTech"+ln(e)+"_"]=function(){return this.trigger(e)}}),dn.registerComponent("Player",Ro);var Uo="plugin",No="activePlugins_",jo={},Bo=function Bo(e){return jo.hasOwnProperty(e)},Fo=function Fo(e){return Bo(e)?jo[e]:undefined},qo=function qo(e,t){e[No]=e[No]||{},e[No][t]=!0},Ho=function Ho(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},Vo=function Vo(t,n){var i=function i(){Ho(this,{name:t,plugin:n,instance:null},!0);var e=n.apply(this,arguments);return qo(this,t),Ho(this,{name:t,plugin:n,instance:e}),e};return Object.keys(n).forEach(function(e){i[e]=n[e]}),i},Wo=function Wo(r,a){return a.prototype.name=r,function(){Ho(this,{name:r,plugin:a,instance:null},!0);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=D(a,[this].concat(t));return this[r]=function(){return i},Ho(this,i.getEventHash()),i}},zo=function(){function n(e){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,jt(this),delete this.trigger,ue(this,this.constructor.defaultState),qo(e,this.name),this.dispose=sn(this,this.dispose),e.on("dispose",this.dispose)}var e=n.prototype;return e.version=function t(){return this.constructor.VERSION},e.getEventHash=function i(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},e.trigger=function r(e,t){return void 0===t&&(t={}),x(this.eventBusEl_,e,this.getEventHash(t))},e.handleStateChanged=function a(){},e.dispose=function s(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t[No][e]=!1,this.player=this.state=null,t[e]=Wo(e,jo[e])},n.isBasic=function o(e){var t="string"==typeof e?Fo(e):e;return"function"==typeof t&&!n.prototype.isPrototypeOf(t.prototype)},n.registerPlugin=function u(e,t){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Bo(e))en.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Ro.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof t)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof t+".");return jo[e]=t,e!==Uo&&(n.isBasic(t)?Ro.prototype[e]=Vo(e,t):Ro.prototype[e]=Wo(e,t)),t},n.deregisterPlugin=function l(e){if(e===Uo)throw new Error("Cannot de-register base plugin.");Bo(e)&&(delete jo[e],delete Ro.prototype[e])},n.getPlugins=function c(e){var n;return void 0===e&&(e=Object.keys(jo)),e.forEach(function(e){var t=Fo(e);t&&((n=n||{})[e]=t)}),n},n.getPluginVersion=function d(e){var t=Fo(e);return t&&t.VERSION||""},n}();zo.getPlugin=Fo,zo.BASE_PLUGIN_NAME=Uo,zo.registerPlugin(Uo,zo),Ro.prototype.usingPlugin=function(e){return!!this[No]&&!0===this[No][e]},Ro.prototype.hasPlugin=function(e){return!!Bo(e)};var Go=function Go(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)},$o=function F(e,t){void 0===t&&(t={});var n=function n(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),Go(n,e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},Xo=function Xo(e){return 0===e.indexOf("#")?e.slice(1):e};if(Ne.hooks_={},Ne.hooks=function(e,t){return Ne.hooks_[e]=Ne.hooks_[e]||[],t&&(Ne.hooks_[e]=Ne.hooks_[e].concat(t)),Ne.hooks_[e]},Ne.hook=function(e,t){Ne.hooks(e,t)},Ne.hookOnce=function(n,e){Ne.hooks(n,[].concat(e).map(function(e){var t=function t(){return Ne.removeHook(n,t),e.apply(void 0,arguments)};return t}))},Ne.removeHook=function(e,t){var n=Ne.hooks(e).indexOf(t);return!(n<=-1)&&(Ne.hooks_[e]=Ne.hooks_[e].slice(),Ne.hooks_[e].splice(n,1),!0)},!0!==Et.VIDEOJS_NO_DYNAMIC_STYLE&&o()){var Yo=nn(".vjs-styles-defaults");if(!Yo){Yo=rn("vjs-styles-defaults");var Ko=nn("head");Ko&&Ko.insertBefore(Yo,Ko.firstChild),an(Yo,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}h(1,Ne),Ne.VERSION=Zt,Ne.options=Ro.prototype.options_,Ne.getPlayers=function(){return Ro.players},Ne.getPlayer=function(e){var t,n=Ro.players;if("string"==typeof e){var i=Xo(e),r=n[i];if(r)return r;t=nn("#"+i)}else t=e;if(u(t)){var a=t,s=a.player,o=a.playerId;if(s||n[o])return s||n[o]}},Ne.getAllPlayers=function(){return Object.keys(Ro.players).map(function(e){return Ro.players[e]}).filter(Boolean)},Ne.players=Ro.players,Ne.getComponent=dn.getComponent,Ne.registerComponent=function(e,t){La.isTech(t)&&en.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),dn.registerComponent.call(dn,e,t)},Ne.getTech=La.getTech,Ne.registerTech=La.registerTech,Ne.use=we,Object.defineProperty(Ne,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ne.middleware,"TERMINATOR",{value:Ma,writeable:!1,enumerable:!0}),Ne.browser=Rn,Ne.TOUCH_ENABLED=Dn,Ne.extend=$o,Ne.mergeOptions=Bt,Ne.bind=sn,Ne.registerPlugin=zo.registerPlugin,Ne.deregisterPlugin=zo.deregisterPlugin,Ne.plugin=function(e,t){return en.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),zo.registerPlugin(e,t)},Ne.getPlugins=zo.getPlugins,Ne.getPlugin=zo.getPlugin,Ne.getPluginVersion=zo.getPluginVersion,Ne.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Ne.options.languages=Bt(Ne.options.languages,((n={})[e]=t,n)),Ne.options.languages[e]},Ne.log=en,Ne.createLogger=tn,Ne.createTimeRange=Ne.createTimeRanges=Ht,Ne.formatTime=De,Ne.setFormatTime=Ie,Ne.resetFormatTime=Le,Ne.parseUrl=ci,Ne.isCrossOrigin=fi,Ne.EventTarget=ft,Ne.on=Ut,Ne.one=A,Ne.off=Nt,Ne.trigger=x,Ne.xhr=ta,Ne.TextTrack=ra,Ne.AudioTrack=aa,Ne.VideoTrack=sa,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Ne[e]=function(){return en.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),tt[e].apply(null,arguments)}}),Ne.computedStyle=ne,Ne.dom=tt,Ne.url=pi;var Qo,Jo,Zo,eu,tu,nu,iu=j(function(e){var n,c,t,i,d;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,t=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function h(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=d.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var u=a.path,l=u.substring(0,u.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(l)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function r(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function a(e){for(e=e.split("").reverse().join("").replace(t,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function s(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d}),ru=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function n(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function i(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},t.trigger=function s(e,t){var n,i,r,a=this.listeners[e];if(a)if(2===arguments.length)for(i=a.length,n=0;n<i;++n)a[n].call(this,t);else for(r=Array.prototype.slice.call(arguments,1),i=a.length,n=0;n<i;++n)a[n].apply(this,r)},t.dispose=function r(){this.listeners={}},t.pipe=function a(t){this.on("data",function(e){t.push(e)})},e}(),au=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return Be(e,t),e.prototype.push=function n(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},e}(ru),su=function su(){return new RegExp("(?:^|,)("+("(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")")+")")},ou=function ou(e){for(var t,n=e.split(su()),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i},uu=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}Be(e,t);var n=e.prototype;return n.push=function r(i){var u,l,c=this;0!==(i=i.trim()).length&&("#"===i[0]?this.tagMappers.reduce(function(e,t){var n=t(i);return n===i?e:e.concat([n])},[i]).forEach(function(e){for(var t=0;t<c.customParsers.length;t++)if(c.customParsers[t].call(c,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),u=/^#EXTM3U/.exec(e))c.trigger("data",{type:"tag",tagType:"m3u"});else{if(u=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return l={type:"tag",tagType:"inf"},u[1]&&(l.duration=parseFloat(u[1])),u[2]&&(l.title=u[2]),void c.trigger("data",l);if(u=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return l={type:"tag",tagType:"targetduration"},u[1]&&(l.duration=parseInt(u[1],10)),void c.trigger("data",l);if(u=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return l={type:"tag",tagType:"totalduration"},u[1]&&(l.duration=parseInt(u[1],10)),void c.trigger("data",l);if(u=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return l={type:"tag",tagType:"version"},u[1]&&(l.version=parseInt(u[1],10)),void c.trigger("data",l);if(u=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return l={type:"tag",tagType:"media-sequence"},u[1]&&(l.number=parseInt(u[1],10)),void c.trigger("data",l);if(u=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return l={type:"tag",tagType:"discontinuity-sequence"},u[1]&&(l.number=parseInt(u[1],10)),void c.trigger("data",l);if(u=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return l={type:"tag",tagType:"playlist-type"},u[1]&&(l.playlistType=u[1]),void c.trigger("data",l);if(u=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return l={type:"tag",tagType:"byterange"},u[1]&&(l.length=parseInt(u[1],10)),u[2]&&(l.offset=parseInt(u[2],10)),void c.trigger("data",l);if(u=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return l={type:"tag",tagType:"allow-cache"},u[1]&&(l.allowed=!/NO/.test(u[1])),void c.trigger("data",l);if(u=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(l={type:"tag",tagType:"map"},u[1]){var n=ou(u[1]);if(n.URI&&(l.uri=n.URI),n.BYTERANGE){var i=n.BYTERANGE.split("@"),r=i[0],a=i[1];l.byterange={},r&&(l.byterange.length=parseInt(r,10)),a&&(l.byterange.offset=parseInt(a,10))}}c.trigger("data",l)}else if(u=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(l={type:"tag",tagType:"stream-inf"},u[1]){if(l.attributes=ou(u[1]),l.attributes.RESOLUTION){var s=l.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),l.attributes.RESOLUTION=o}l.attributes.BANDWIDTH&&(l.attributes.BANDWIDTH=parseInt(l.attributes.BANDWIDTH,10)),l.attributes["PROGRAM-ID"]&&(l.attributes["PROGRAM-ID"]=parseInt(l.attributes["PROGRAM-ID"],10))}c.trigger("data",l)}else{if(u=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return l={type:"tag",tagType:"media"},u[1]&&(l.attributes=ou(u[1])),void c.trigger("data",l);if(u=/^#EXT-X-ENDLIST/.exec(e))c.trigger("data",{type:"tag",tagType:"endlist"});else if(u=/^#EXT-X-DISCONTINUITY/.exec(e))c.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(u=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return l={type:"tag",tagType:"program-date-time"},u[1]&&(l.dateTimeString=u[1],l.dateTimeObject=new Date(u[1])),void c.trigger("data",l);if(u=/^#EXT-X-KEY:?(.*)$/.exec(e))return l={type:"tag",tagType:"key"},u[1]&&(l.attributes=ou(u[1]),l.attributes.IV&&("0x"===l.attributes.IV.substring(0,2).toLowerCase()&&(l.attributes.IV=l.attributes.IV.substring(2)),l.attributes.IV=l.attributes.IV.match(/.{8}/g),l.attributes.IV[0]=parseInt(l.attributes.IV[0],16),l.attributes.IV[1]=parseInt(l.attributes.IV[1],16),l.attributes.IV[2]=parseInt(l.attributes.IV[2],16),l.attributes.IV[3]=parseInt(l.attributes.IV[3],16),l.attributes.IV=new Uint32Array(l.attributes.IV))),void c.trigger("data",l);if(u=/^#EXT-X-START:?(.*)$/.exec(e))return l={type:"tag",tagType:"start"},u[1]&&(l.attributes=ou(u[1]),l.attributes["TIME-OFFSET"]=parseFloat(l.attributes["TIME-OFFSET"]),l.attributes.PRECISE=/YES/.test(l.attributes.PRECISE)),void c.trigger("data",l);if(u=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return l={type:"tag",tagType:"cue-out-cont"},u[1]?l.data=u[1]:l.data="",void c.trigger("data",l);if(u=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return l={type:"tag",tagType:"cue-out"},u[1]?l.data=u[1]:l.data="",void c.trigger("data",l);if(u=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return l={type:"tag",tagType:"cue-in"},u[1]?l.data=u[1]:l.data="",void c.trigger("data",l);c.trigger("data",{type:"tag",data:e.slice(4)})}}}else c.trigger("data",{type:"comment",text:e.slice(1)})}):this.trigger("data",{type:"uri",uri:i}))},n.addParser=function s(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function r(e){return e}),this.customParsers.push(function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0})},n.addTagMapper=function a(e){var t=e.expression,n=e.map,i=function i(e){return t.test(e)?n(e):e};this.tagMappers.push(i)},e}(ru),lu=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new au,e.parseStream=new uu,e.lineStream.pipe(e.parseStream);var S,w,k=Fe(e),C=[],E={},x=function x(){},A={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},P="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",O=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(v){var b,_;({tag:function T(){({"allow-cache":function e(){this.manifest.allowCache=v.allowed,"allowed"in v||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function e(){var e={};"length"in v&&((E.byterange=e).length=v.length,"offset"in v||(this.trigger("info",{message:"defaulting offset to zero"}),v.offset=0)),"offset"in v&&((E.byterange=e).offset=v.offset)},endlist:function t(){this.manifest.endList=!0},inf:function n(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<v.duration&&(E.duration=v.duration),0===v.duration&&(E.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=C},key:function i(){if(v.attributes)if("NONE"!==v.attributes.METHOD)if(v.attributes.URI){if(v.attributes.KEYFORMAT===P)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(v.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===v.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==v.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):v.attributes.KEYID&&"0x"===v.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:v.attributes.KEYFORMAT,keyId:v.attributes.KEYID.substring(2)},pssh:qe(v.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));v.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),w={method:v.attributes.METHOD||"AES-128",uri:v.attributes.URI},"undefined"!=typeof v.attributes.IV&&(w.iv=v.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else w=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function r(){isFinite(v.number)?this.manifest.mediaSequence=v.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+v.number})},"discontinuity-sequence":function a(){isFinite(v.number)?(this.manifest.discontinuitySequence=v.number,O=v.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+v.number})},"playlist-type":function s(){/VOD|EVENT/.test(v.playlistType)?this.manifest.playlistType=v.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+v.playlist})},map:function o(){S={},v.uri&&(S.uri=v.uri),v.byterange&&(S.byterange=v.byterange)},"stream-inf":function u(){this.manifest.playlists=C,this.manifest.mediaGroups=this.manifest.mediaGroups||A,v.attributes?(E.attributes||(E.attributes={}),je(E.attributes,v.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function l(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||A,v.attributes&&v.attributes.TYPE&&v.attributes["GROUP-ID"]&&v.attributes.NAME){var e=this.manifest.mediaGroups[v.attributes.TYPE];e[v.attributes["GROUP-ID"]]=e[v.attributes["GROUP-ID"]]||{},b=e[v.attributes["GROUP-ID"]],(_={"default":/yes/i.test(v.attributes.DEFAULT)})["default"]?_.autoselect=!0:_.autoselect=/yes/i.test(v.attributes.AUTOSELECT),v.attributes.LANGUAGE&&(_.language=v.attributes.LANGUAGE),v.attributes.URI&&(_.uri=v.attributes.URI),v.attributes["INSTREAM-ID"]&&(_.instreamId=v.attributes["INSTREAM-ID"]),v.attributes.CHARACTERISTICS&&(_.characteristics=v.attributes.CHARACTERISTICS),v.attributes.FORCED&&(_.forced=/yes/i.test(v.attributes.FORCED)),b[v.attributes.NAME]=_}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function c(){O+=1,E.discontinuity=!0,this.manifest.discontinuityStarts.push(C.length)},"program-date-time":function d(){"undefined"==typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=v.dateTimeString,this.manifest.dateTimeObject=v.dateTimeObject),E.dateTimeString=v.dateTimeString,E.dateTimeObject=v.dateTimeObject},targetduration:function h(){!isFinite(v.duration)||v.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+v.duration}):this.manifest.targetDuration=v.duration},totalduration:function f(){!isFinite(v.duration)||v.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+v.duration}):this.manifest.totalDuration=v.duration},start:function p(){v.attributes&&!isNaN(v.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:v.attributes["TIME-OFFSET"],precise:v.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function m(){E.cueOut=v.data},"cue-out-cont":function g(){E.cueOutCont=v.data},"cue-in":function y(){E.cueIn=v.data}}[v.tagType]||x).call(k)},uri:function e(){E.uri=v.uri,C.push(E),!this.manifest.targetDuration||"duration"in E||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),E.duration=this.manifest.targetDuration),w&&(E.key=w),E.timeline=O,S&&(E.map=S),E={}},comment:function t(){},custom:function n(){v.segment?(E.custom=E.custom||{},E.custom[v.customType]=v.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[v.customType]=v.data)}})[v.type].call(k)}),e}Be(e,t);var n=e.prototype;return n.push=function i(e){this.lineStream.push(e)},n.end=function r(){this.lineStream.push("\n")},n.addParser=function a(e){this.parseStream.addParser(e)},n.addTagMapper=function s(e){this.parseStream.addTagMapper(e)},e}(ru),cu=function s(e){return!!e&&"object"==typeof e},du=function du(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(t,n){return Object.keys(n).forEach(function(e){Array.isArray(t[e])&&Array.isArray(n[e])?t[e]=t[e].concat(n[e]):cu(t[e])&&cu(n[e])?t[e]=du(t[e],n[e]):t[e]=n[e]}),t},{})},hu=function hu(t){return Object.keys(t).map(function(e){return t[e]})},fu=function fu(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n},pu=function pu(e){return e.reduce(function(e,t){return e.concat(t)},[])},mu=function mu(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},gu=function gu(e,i){return e.reduce(function(e,t,n){return t[i]&&e.push(n),e},[])},yu={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},vu=He(function(e){var n,c,t,i,d;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,t=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function h(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=d.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=d.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var u=a.path,l=u.substring(0,u.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(l)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function r(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function a(e){for(e=e.split("").reverse().join("").replace(t,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function s(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=d}),bu=function bu(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=vu.buildAbsoluteURL(Et.location.href,e)),vu.buildAbsoluteURL(e,t))},_u=function _u(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,r=void 0===i?"":i,a=e.range,s=void 0===a?"":a,o=e.indexRange,u=void 0===o?"":o,l={uri:r,resolvedUri:bu(n||"",r)};if(s||u){var c=(s||u).split("-"),d=parseInt(c[0],10),h=parseInt(c[1],10);l.byterange={length:h-d+1,offset:d}}return l},Tu=function Tu(e){var t=e.offset+e.length-1;return e.offset+"-"+t},Su={"static":function Am(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration;return{start:0,end:Math.ceil(r/(t/i))}},dynamic:function Pm(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,
o=e.start,u=void 0===o?0:o,l=e.minimumUpdatePeriod,c=void 0===l?0:l,d=e.timeShiftBufferDepth,h=void 0===d?Infinity:d,f=(t+n)/1e3,p=i+u,m=f+c-p,g=Math.ceil(m*a/s),y=Math.floor((f-p-h)*a/s),v=Math.floor((f-p)*a/s);return{start:Math.max(0,y),end:Math.min(g,v)}}},wu=function wu(o){return function(e,t){var n=o.duration,i=o.timescale,r=void 0===i?1:i,a=o.periodIndex,s=o.startNumber;return{number:(void 0===s?1:s)+e,duration:n/r,timeline:a,time:t*n}}},ku=function ku(e){var t=e.type,n=void 0===t?"static":t,i=e.duration,r=e.timescale,a=void 0===r?1:r,s=e.sourceDuration,o=Su[n](e),u=o.start,l=o.end,c=fu(u,l).map(wu(e));if("static"===n){var d=c.length-1;c[d].duration=s-i/a*d}return c},Cu=function Cu(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.timescale,s=void 0===a?1:a,o=e.indexRange,u=void 0===o?"":o,l=e.duration;if(!t)throw new Error(yu.NO_BASE_URL);var c=_u({baseUrl:t,source:i.sourceURL,range:i.range}),d=_u({baseUrl:t,source:t,indexRange:u});if(d.map=c,l){var h=ku(e);h.length&&(d.duration=h[0].duration,d.timeline=h[0].timeline)}else r&&(d.duration=r/s,d.timeline=0);return d.number=0,[d]},Eu=function Eu(e,t,n){for(var i=e.sidx.map?e.sidx.map:null,r=e.sidx.duration,a=e.timeline||0,s=e.sidx.byterange,o=s.offset+s.length,u=t.timescale,l=t.references.filter(function(e){return 1!==e.referenceType}),c=[],d=o+t.firstOffset,h=0;h<l.length;h++){var f=t.references[h],p=f.referencedSize,m=f.subsegmentDuration,g=Cu({baseUrl:n,timescale:u,timeline:a,periodIndex:a,duration:m,sourceDuration:r,indexRange:d+"-"+(d+p-1)})[0];i&&(g.map=i),c.push(g),d+=p}return e.segments=c,e},xu=function xu(e){return hu(e.reduce(function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");e[i]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):e[i]=t;return e},{})).map(function(e){return e.discontinuityStarts=gu(e.segments,"discontinuity"),e})},Au=function Au(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var i=e[n];if(i.sidx){var r=i.sidx.uri+"-"+Tu(i.sidx.byterange),a=t[r]&&t[r].sidx;i.sidx&&a&&Eu(i,a,i.sidx.resolvedUri)}}return e},Pu=function Pu(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),r&&(a.sidx=r),a},Ou=function Ou(e){var t,n=e.attributes,i=e.segments;return void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration),{attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1}},Iu=function Iu(e,s){var o;void 0===s&&(s={});var t=e.reduce(function(e,t){var n=t.attributes.role&&t.attributes.role.value||"",i=t.attributes.lang||"",r="main";if(i){var a=n?" ("+n+")":"";r=""+t.attributes.lang+a}return e[r]&&e[r].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[r]={language:i,autoselect:!0,"default":"main"===n,playlists:Au([Pu(t)],s),uri:""},void 0===o&&"main"===n&&((o=t)["default"]=!0)),e},{});o||(t[Object.keys(t)[0]]["default"]=!0);return t},Lu=function Lu(e,i){return void 0===i&&(i={}),e.reduce(function(e,t){var n=t.attributes.lang||"text";return e[n]||(e[n]={language:n,"default":!1,autoselect:!1,playlists:Au([Ou(t)],i),uri:""}),e},{})},Du=function Du(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),r&&(a.sidx=r),a},Ru=function Ru(e,t){var n;if(void 0===t&&(t={}),!e.length)return{};var i=e[0].attributes,r=i.sourceDuration,a=i.minimumUpdatePeriod,s=void 0===a?0:a,o=function o(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType},u=function u(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType},l=function l(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},c=xu(e.filter(o)).map(Du),d=xu(e.filter(u)),h=e.filter(l),f={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:r,playlists:Au(c,t),minimumUpdatePeriod:1e3*s};return d.length&&(f.mediaGroups.AUDIO.audio=Iu(d,t)),h.length&&(f.mediaGroups.SUBTITLES.subs=Lu(h,t)),f},Mu=function Mu(e,t,n){var i=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,u=e.start,l=void 0===u?0:u,c=e.minimumUpdatePeriod,d=(i+r)/1e3+(void 0===c?0:c)-(a+l);return Math.ceil((d*o-t)/n)},Uu=function Uu(e,t){for(var n=e.type,i=void 0===n?"static":n,r=e.minimumUpdatePeriod,a=void 0===r?0:r,s=e.media,o=void 0===s?"":s,u=e.sourceDuration,l=e.timescale,c=void 0===l?1:l,d=e.startNumber,h=void 0===d?1:d,f=e.periodIndex,p=[],m=-1,g=0;g<t.length;g++){var y=t[g],v=y.d,b=y.r||0,_=y.t||0;m<0&&(m=_),_&&m<_&&(m=_);var T=void 0;if(b<0){var S=g+1;T=S===t.length?"dynamic"===i&&0<a&&0<o.indexOf("$Number$")?Mu(e,m,v):(u*c-m)/v:(t[S].t-m)/v}else T=b+1;for(var w=h+p.length+T,k=h+p.length;k<w;)p.push({number:k,duration:v/c,time:m,timeline:f}),m+=v,k++}return p},Nu=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ju=function ju(a){return function(e,t,n,i){if("$$"===e)return"$";if("undefined"==typeof a[t])return e;var r=""+a[t];return"RepresentationID"===t?r:(i=n?parseInt(i,10):1,r.length>=i?r:""+new Array(i-r.length+1).join("0")+r)}},Bu=function Bu(e,t){return e.replace(Nu,ju(t))},Fu=function Fu(e,t){return e.duration||t?e.duration?ku(e):Uu(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]},qu=function qu(n,e){var i={RepresentationID:n.id,Bandwidth:n.bandwidth||0},t=n.initialization,r=void 0===t?{sourceURL:"",range:""}:t,a=_u({baseUrl:n.baseUrl,source:Bu(r.sourceURL,i),range:r.range});return Fu(n,e).map(function(e){i.Number=e.number,i.Time=e.time;var t=Bu(n.media||"",i);return{uri:t,timeline:e.timeline,duration:e.duration,resolvedUri:bu(n.baseUrl||"",t),map:a,number:e.number}})},Hu=function Hu(e,t){var n=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,a=_u({baseUrl:n,source:r.sourceURL,range:r.range}),s=_u({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=a,s},Vu=function Vu(t,e){var n=t.duration,i=t.segmentUrls,r=void 0===i?[]:i;if(!n&&!e||n&&e)throw new Error(yu.SEGMENT_TIME_UNSPECIFIED);var a,s=r.map(function(e){return Hu(t,e)});return n&&(a=ku(t)),e&&(a=Uu(t,e)),a.map(function(e,t){if(s[t]){var n=s[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}}).filter(function(e){return e})},Wu=function Wu(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=qu,t=du(i,r.template)):r.base?(n=Cu,t=du(i,r.base)):r.list&&(n=Vu,t=du(i,r.list));var a={attributes:i};if(!n)return a;var s=n(t,r.timeline);if(t.duration){var o=t,u=o.duration,l=o.timescale,c=void 0===l?1:l;t.duration=u/c}else s.length?t.duration=s.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},zu=function zu(e){return e.map(Wu)},Gu=function Gu(e,t){return mu(e.childNodes).filter(function(e){return e.tagName===t})},$u=function $u(e){return e.textContent.trim()},Xu=function Xu(e){var t=31536e3,n=2592e3,i=86400,r=3600,a=60,s=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!s)return 0;var o=s.slice(1),u=o[0],l=o[1],c=o[2],d=o[3],h=o[4],f=o[5];return parseFloat(u||0)*t+parseFloat(l||0)*n+parseFloat(c||0)*i+parseFloat(d||0)*r+parseFloat(h||0)*a+parseFloat(f||0)},Yu=function Yu(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),Date.parse(e)},Ku={mediaPresentationDuration:function Om(e){return Xu(e)},availabilityStartTime:function Im(e){return Yu(e)/1e3},minimumUpdatePeriod:function Lm(e){return Xu(e)},timeShiftBufferDepth:function Dm(e){return Xu(e)},start:function Rm(e){return Xu(e)},width:function Mm(e){return parseInt(e,10)},height:function Um(e){return parseInt(e,10)},bandwidth:function Nm(e){return parseInt(e,10)},startNumber:function jm(e){return parseInt(e,10)},timescale:function Zo(e){return parseInt(e,10)},duration:function Cd(e){var t=parseInt(e,10);return isNaN(t)?Xu(e):t},d:function Bm(e){return parseInt(e,10)},t:function Fm(e){return parseInt(e,10)},r:function qm(e){return parseInt(e,10)},DEFAULT:function Hm(e){return e}},Qu=function ou(e){return e&&e.attributes?mu(e.attributes).reduce(function(e,t){var n=Ku[t.name]||Ku.DEFAULT;return e[t.name]=n(t.value),e},{}):{}},Ju={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Zu=function Zu(e,n){return n.length?pu(e.map(function(t){return n.map(function(e){return bu(t,$u(e))})})):e},el=function el(e){var t=Gu(e,"SegmentTemplate")[0],n=Gu(e,"SegmentList")[0],i=n&&Gu(n,"SegmentURL").map(function(e){return du({tag:"SegmentURL"},Qu(e))}),r=Gu(e,"SegmentBase")[0],a=n||t,s=a&&Gu(a,"SegmentTimeline")[0],o=n||r||t,u=o&&Gu(o,"Initialization")[0],l=t&&Qu(t);l&&u?l.initialization=u&&Qu(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var c={template:l,timeline:s&&Gu(s,"S").map(function(e){return Qu(e)}),list:n&&du(Qu(n),{segmentUrls:i,initialization:Qu(u)}),base:r&&du(Qu(r),{initialization:Qu(u)})};return Object.keys(c).forEach(function(e){c[e]||delete c[e]}),c},tl=function tl(a,s,o){return function(e){var t=Gu(e,"BaseURL"),n=Zu(s,t),i=du(a,Qu(e)),r=el(e);return n.map(function(e){return{segmentInfo:du(o,r),attributes:du(i,{baseUrl:e})}})}},nl=function nl(e){return e.reduce(function(e,t){var n=Qu(t),i=Ju[n.schemeIdUri];if(i){e[i]={attributes:n};var r=Gu(t,"cenc:pssh")[0];if(r){var a=$u(r),s=a&&Ve(a);e[i].pssh=s}}return e},{})},il=function il(c,d,h){return function(e){var t=Qu(e),n=Zu(d,Gu(e,"BaseURL")),i=Gu(e,"Role")[0],r={role:Qu(i)},a=du(c,t,r),s=nl(Gu(e,"ContentProtection"));Object.keys(s).length&&(a=du(a,{contentProtection:s}));var o=el(e),u=Gu(e,"Representation"),l=du(h,o);return pu(u.map(tl(a,n,l)))}},rl=function rl(l,c){return function(e,t){var n=Zu(c,Gu(e,"BaseURL")),i=Qu(e),r=parseInt(i.id,10),a=Et.isNaN(r)?t:r,s=du(l,{periodIndex:a}),o=Gu(e,"AdaptationSet"),u=el(e);return pu(o.map(il(s,n,u)))}},al=function al(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,r=void 0===i?"":i,a=n.NOW,s=void 0===a?Date.now():a,o=n.clientOffset,u=void 0===o?0:o,l=Gu(e,"Period");if(!l.length)throw new Error(yu.INVALID_NUMBER_OF_PERIOD);var c=Qu(e),d=Zu([r],Gu(e,"BaseURL"));return c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=u,pu(l.map(rl(c,d)))},sl=function sl(e){if(""===e)throw new Error(yu.DASH_EMPTY_MANIFEST);var t=(new Et.DOMParser).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&0<n.getElementsByTagName("parsererror").length)throw new Error(yu.DASH_INVALID_XML);return n},ol=function ol(e){var t=Gu(e,"UTCTiming")[0];if(!t)return null;var n=Qu(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(yu.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},ul=function ul(e,t){return void 0===t&&(t={}),Ru(zu(al(sl(e),t)),t.sidxMapping)},ll=function ll(e){return ol(sl(e))},cl=function cl(e){return e>>>0},dl=function dl(e){return("00"+e.toString(16)).slice(-2)},hl={toUnsigned:cl,toHexString:dl},fl=hl.toUnsigned,pl=hl.toHexString;Zo=function Zo(e){var t={};return Qo(e,["moov","trak"]).reduce(function(e,t){var n,i,r,a,s;return(n=Qo(t,["tkhd"])[0])?(i=n[0],a=fl(n[r=0===i?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(s=Qo(t,["mdia","mdhd"])[0])?(r=0===(i=s[0])?12:20,e[a]=fl(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3]),e):null):null},t)},eu=function eu(r,e){var t,n,i;return t=Qo(e,["moof","traf"]),n=[].concat.apply([],t.map(function(i){return Qo(i,["tfhd"]).map(function(e){var t,n;return t=fl(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),n=r[t]||9e4,(Qo(i,["tfdt"]).map(function(e){var t,n;return t=e[0],n=fl(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=fl(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n})[0]||Infinity)/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},tu=function tu(e){var t=Qo(e,["moov","trak"]),o=[];return t.forEach(function(e){var t=Qo(e,["mdia","hdlr"]),s=Qo(e,["tkhd"]);t.forEach(function(e,t){var n,i,r=Jo(e.subarray(8,12)),a=s[t];"vide"===r&&(i=0===(n=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0)?n.getUint32(12):n.getUint32(20),o.push(i))})}),o},nu=function nu(e){var t=Qo(e,["moov","trak"]),f=[];return t.forEach(function(e){var t,n,i={},r=Qo(e,["tkhd"])[0];r&&(n=(t=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0),i.id=0===n?t.getUint32(12):t.getUint32(20));var a=Qo(e,["mdia","hdlr"])[0];if(a){var s=Jo(a.subarray(8,12));i.type="vide"===s?"video":"soun"===s?"audio":s}var o=Qo(e,["mdia","minf","stbl","stsd"])[0];if(o){var u=o.subarray(8);i.codec=Jo(u.subarray(4,8));var l,c=Qo(u,[i.codec])[0];c&&(/^[a-z]vc[1-9]$/i.test(i.codec)?(l=c.subarray(78),"avcC"===Jo(l.subarray(4,8))&&11<l.length?(i.codec+=".",i.codec+=pl(l[9]),i.codec+=pl(l[10]),i.codec+=pl(l[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)&&(l=c.subarray(28),"esds"===Jo(l.subarray(4,8))&&20<l.length&&0!==l[19]?(i.codec+="."+pl(l[19]),i.codec+="."+pl(l[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"))}var d=Qo(e,["mdia","mdhd"])[0];if(d&&r){var h=0===n?12:20;i.timescale=fl(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])}f.push(i)}),f};var ml,gl,yl={findBox:Qo=function Vm(e,t){var n,i,r,a,s,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=fl(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),r=Jo(e.subarray(n+4,n+8)),a=1<i?n+i:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(n+8,a)):(s=Qo(e.subarray(n+8,a),t.slice(1))).length&&(o=o.concat(s))),n=a;return o},parseType:Jo=function Jo(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},timescale:Zo,startTime:eu,videoTrackIds:tu,tracks:nu},vl=yl.parseType,bl=function bl(e){return new Date(1e3*e-20828448e5)},_l=function _l(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Tl=function Tl(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31)}return r},Sl={avc1:function Wm(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:ml(e.subarray(78,e.byteLength))}},avcC:function zm(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),s={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(i=6,r=0;r<o;r++)n=a.getUint16(i),i+=2,s.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,s.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return s},btrt:function Gm(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function $m(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function Xm(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:vl(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;i<e.byteLength;)n.compatibleBrands.push(vl(e.subarray(i,i+4))),i+=4;return n},dinf:function Ym(e){return{boxes:ml(e)}},dref:function Km(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:ml(e.subarray(8))}},hdlr:function Qm(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:vl(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function Jm(e){return{byteLength:e.byteLength,nals:Tl(e)}},mdhd:function Zm(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=bl(n.getUint32(i)),i+=8,r.modificationTime=bl(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8):(r.creationTime=bl(n.getUint32(i)),i+=4,r.modificationTime=bl(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4),r.duration=n.getUint32(i),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function eg(e){return{boxes:ml(e)}},mfhd:function tg(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function ng(e){return{boxes:ml(e)}},mp4a:function ig(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(n.streamDescriptor=ml(e.subarray(28))[0]),n},moof:function rg(e){return{boxes:ml(e)}},moov:function ag(e){return{boxes:ml(e)}},mvex:function sg(e){return{boxes:ml(e)}},mvhd:function og(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=bl(t.getUint32(n)),n+=8,i.modificationTime=bl(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8):(i.creationTime=bl(t.getUint32(n)),n+=4,i.modificationTime=bl(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4),i.duration=t.getUint32(n),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function ug(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function lg(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function cg(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},r=n.getUint16(22);for(t=24;r;t+=12,r--)i.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return i},smhd:function dg(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function hg(e){return{boxes:ml(e)}},stco:function fg(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function pg(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function mg(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:ml(e.subarray(8))}},stsz:function gg(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function yg(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function vg(e){return Sl.ftyp(e)},tfdt:function bg(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function _g(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],s=8&i.flags[2],o=16&i.flags[2],u=32&i.flags[2],l=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(i.defaultSampleDuration=n.getUint32(t),t+=4),o&&(i.defaultSampleSize=n.getUint32(t),t+=4),u&&(i.defaultSampleFlags=n.getUint32(t)),l&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},tkhd:function Tg(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=bl(t.getUint32(n)),n+=8,i.modificationTime=bl(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8):(i.creationTime=bl(t.getUint32(n)),n+=4,i.modificationTime=bl(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4),i.duration=t.getUint32(n),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/16,i},traf:function Sg(e){return{boxes:ml(e)}},trak:function wg(e){return{boxes:ml(e)}},trex:function kg(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function Cg(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=i.getUint32(4),d=8;for(r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:_l(e.subarray(d,d+4))},d+=4,s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),l&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);c--;)t={},s&&(t.duration=i.getUint32(d),d+=4),o&&(t.size=i.getUint32(d),d+=4),u&&(t.flags=_l(e.subarray(d,d+4)),d+=4),l&&(t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},"url ":function Eg(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function xg(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},wl={inspect:ml=function ml(e){for(var t,n,i,r,a,s=0,o=[],u=new ArrayBuffer(e.length),l=new Uint8Array(u),c=0;c<e.length;++c)l[c]=e[c];for(t=new DataView(u);s<e.byteLength;)n=t.getUint32(s),i=vl(e.subarray(s+4,s+8)),r=1<n?s+n:e.byteLength,(a=(Sl[i]||function(e){return{data:e}})(e.subarray(s+8,r))).size=n,a.type=i,o.push(a),s=r;return o},textify:gl=function Ag(e,t){var a;return t=t||0,a=new Array(2*t+1).join(" "),e.map(function(r){return a+r.type+"\n"+Object.keys(r).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=a+"  "+e+": ",n=r[e];if(n instanceof Uint8Array||n instanceof Uint32Array){var i=Array.prototype.slice.call(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return i?1===i.length?t+"<"+i.join("").slice(1)+">":t+"<\n"+i.map(function(e){return a+"  "+e}).join("\n")+"\n"+a+"  >":t+"<>"}return t+JSON.stringify(n,null,2).split("\n").map(function(e,t){return 0===t?e:a+"  "+e}).join("\n")}).join("\n")+(r.boxes?"\n"+gl(r.boxes,t+1):"")}).join("\n")},parseTfdt:Sl.tfdt,parseHdlr:Sl.hdlr,parseTfhd:Sl.tfhd,parseTrun:Sl.trun,parseSidx:Sl.sidx},kl=4,Cl=128,El=function El(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&e[t]!==Cl;){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&i===kl){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n},xl=function xl(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Al=function Al(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},Pl=function Pl(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},Ol={parseSei:El,parseUserData:xl,parseCaptionPackets:Al,discardEmulationPreventionBytes:Pl,USER_DATA_REGISTERED_ITU_T_T35:kl},Il=function ru(){this.init=function(){var s={};this.on=function(e,t){s[e]||(s[e]=[]),s[e]=s[e].concat(t)},this.off=function(e,t){var n;return!!s[e]&&(n=s[e].indexOf(t),s[e]=s[e].slice(),s[e].splice(n,1),-1<n)},this.trigger=function(e,t){var n,i,r,a;if(n=s[e])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,t);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){s={}}}};Il.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},Il.prototype.push=function(e){this.trigger("data",e)},Il.prototype.flush=function(e){this.trigger("done",e)},Il.prototype.partialFlush=function(e){this.trigger("partialdone",e)},Il.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},Il.prototype.reset=function(e){this.trigger("reset",e)};var Ll=Il,Dl=function Dl(){Dl.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Bl(0,0),new Bl(0,1),new Bl(1,0),new Bl(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};Dl.prototype=new Ll,Dl.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Ol.parseSei(e.escapedRBSP)).payloadType===Ol.USER_DATA_REGISTERED_ITU_T_T35&&(n=Ol.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Ol.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Dl.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},Dl.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},Dl.prototype.flush=function(){return this.flushStream("flush")},Dl.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Dl.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Dl.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Dl.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Dl.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Dl.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Rl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ml=function Ml(e){return null===e?"":(e=Rl[e]||e,String.fromCharCode(e))},Ul=14,Nl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],jl=function jl(){for(var e=[],t=Ul+1;t--;)e.push("");return e},Bl=function Bl(e,t){Bl.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(
t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=jl();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=jl();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=jl()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Ml((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Ml((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=Nl.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Ml(i),a+=Ml(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Bl.prototype=new Ll,Bl.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(t){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Bl.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=jl(),this.nonDisplayed_=jl(),this.lastControlCode_=null,this.column_=0,this.row_=Ul,this.rollUpRows_=2,this.formatting_=[]},Bl.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Bl.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},Bl.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},Bl.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},Bl.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},Bl.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},Bl.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},Bl.prototype.isNormalChar=function(e){return 32<=e&&e<=127},Bl.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=Ul,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=jl(),this.displayed_=jl()),t!==undefined&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";t===undefined&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Bl.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},Bl.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},Bl.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Bl.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Bl.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<Ul+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Bl.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Fl={CaptionStream:Dl,Cea608Stream:Bl},ql=Ol.discardEmulationPreventionBytes,Hl=Fl.CaptionStream,Vl=function Vl(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},Wl=function Wl(e,t,n){var i,r,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),u=[];for(r=0;r+4<e.length;r+=a)if(a=o.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var l=e.subarray(r+1,r+1+a),c=Vl(r,t);i={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:ql(l),trackId:n},c?(i.pts=c.pts,i.dts=c.dts,s=c):(i.pts=s.pts,i.dts=s.dts),u.push(i)}return u},zl=function zl(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,o=[];return e.forEach(function(e){var t=wl.parseTrun(e).samples;t.forEach(function(e){e.duration===undefined&&(e.duration=r),e.size===undefined&&(e.size=a),e.trackId=s,e.dts=i,e.compositionTimeOffset===undefined&&(e.compositionTimeOffset=0),e.pts=i+e.compositionTimeOffset,i+=e.duration}),o=o.concat(t)}),o},Gl=function Gl(e,d){var i=yl.findBox(e,["moof","traf"]),t=yl.findBox(e,["mdat"]),h={},r=[];return t.forEach(function(e,t){var n=i[t];r.push({mdat:e,traf:n})}),r.forEach(function(e){var t,n,i=e.mdat,r=e.traf,a=yl.findBox(r,["tfhd"]),s=wl.parseTfhd(a[0]),o=s.trackId,u=yl.findBox(r,["tfdt"]),l=0<u.length?wl.parseTfdt(u[0]).baseMediaDecodeTime:0,c=yl.findBox(r,["trun"]);d===o&&0<c.length&&(t=zl(c,l,s),n=Wl(i,t,o),h[o]||(h[o]=[]),h[o]=h[o].concat(n))}),h},$l=function $l(e,t,n){return null===t?null:{seiNals:Gl(e,t)[t],timescale:n}},Xl=function Xl(){var t,a,s,o,u,n,i=!1;this.isInitialized=function(){return i},this.init=function(e){t=new Hl,i=!0,n=!!e&&e.isPartial,t.on("data",function(e){e.startTime=e.startPts/o,e.endTime=e.endPts/o,u.captions.push(e),u.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(s!==e[0]||o!==t[s])},this.parse=function(e,t,n){var i;if(!this.isInitialized())return null;if(!t||!n)return null;if(this.isNewInit(t,n))s=t[0],o=n[s];else if(null===s||!o)return a.push(e),null;for(;0<a.length;){var r=a.shift();this.parse(r,t,n)}return null!==(i=$l(e,s,o))&&i.seiNals?(this.pushNals(i.seiNals),this.flushStream(),u):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;n?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){a=[],o=s=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()},Yl=Xl,Kl={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ql=8589934592,Jl=4294967296,Zl="shared",ec=function ec(e,t){var n=1;for(t<e&&(n=-1);Math.abs(t-e)>Jl;)e+=n*Ql;return e},tc=function tc(e){var t,n;tc.prototype.init.call(this),this.type_=e||Zl,this.push=function(e){this.type_!==Zl&&e.type!==this.type_||(n===undefined&&(n=e.dts),e.dts=ec(e.dts,n),e.pts=ec(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};tc.prototype=new Ll;var nc,ic,rc,ac,sc,oc,uc,lc=function lc(e){var t=31&e[1];return t<<=8,t|=e[2]},cc=function cc(e){return!!(64&e[1])},dc=function dc(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t},hc=function hc(e){var t=cc(e),n=4+dc(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},fc=function fc(e){var t={},n=cc(e),i=4+dc(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},pc=function pc(e,t){switch(t[lc(e)]){case Kl.H264_STREAM_TYPE:return"video";case Kl.ADTS_STREAM_TYPE:return"audio";case Kl.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},mc=function mc(e){if(!cc(e))return null;var t=4+dc(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},gc=function gc(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},yc=function yc(e){for(var t=4+dc(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===gc(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===gc(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===gc(31&n[r+3])&&(a=!0),a},vc={parseType:function Jo(e,t){var n=lc(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:hc,parsePmt:fc,parsePayloadUnitStartIndicator:cc,parsePesType:pc,parsePesTime:mc,videoPacketContainsKeyFrame:yc},bc=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],_c=function _c(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Tc=function Tc(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Sc=function Sc(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},wc=function wc(e,t,n){return unescape(Sc(e,t,n))},kc=function kc(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},Cc=function Cc(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},Ec=function Ec(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return bc[(60&e[t+2])>>>2];t++}return null},xc=function xc(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=Tc(e.subarray(10,14)));do{if((n=Tc(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==wc(i,0,r))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}}t+=10,t+=n}while(t<e.byteLength);return null},Ac={isLikelyAacData:_c,parseId3TagSize:kc,parseAdtsSize:Cc,parseType:function Jo(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:Ec,parseAacTimestamp:xc},Pc=9e4;sc=function sc(e,t){return nc(ac(e,t))},oc=function oc(e,t){return ic(rc(e),t)},uc=function uc(e,t,n){return rc(n?e:e-t)};var Oc={ONE_SECOND_IN_TS:Pc,secondsToVideoTs:nc=function nc(e){return e*Pc},secondsToAudioTs:ic=function ic(e,t){return e*t},videoTsToSeconds:rc=function rc(e){return e/Pc},audioTsToSeconds:ac=function ac(e,t){return e/t},audioTsToVideoTs:sc,videoTsToAudioTs:oc,metadataTsToSeconds:uc},Ic={TimestampRolloverStream:tc,handleRollover:ec}.handleRollover,Lc={};Lc.ts=vc,Lc.aac=Ac;var Dc=Oc.ONE_SECOND_IN_TS,Rc=188,Mc=71,Uc=function Uc(e,t){for(var n,i=0,r=Rc;r<e.byteLength;)if(e[i]!==Mc||e[r]!==Mc)i++,r++;else{switch(n=e.subarray(i,r),Lc.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=Lc.ts.parsePat(n));break;case"pmt":t.table||(t.table=Lc.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=Rc,r+=Rc}},Nc=function Nc(e,t,n){for(var i,r,a,s,o=0,u=Rc,l=!1;u<=e.byteLength;)if(e[o]!==Mc||e[u]!==Mc&&u!==e.byteLength)o++,u++;else{switch(i=e.subarray(o,u),Lc.ts.parseType(i,t.pid)){case"pes":r=Lc.ts.parsePesType(i,t.table),a=Lc.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Lc.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),l=!0)}if(l)break;o+=Rc,u+=Rc}for(o=(u=e.byteLength)-Rc,l=!1;0<=o;)if(e[o]!==Mc||e[u]!==Mc&&u!==e.byteLength)o--,u--;else{switch(i=e.subarray(o,u),Lc.ts.parseType(i,t.pid)){case"pes":r=Lc.ts.parsePesType(i,t.table),a=Lc.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=Lc.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),l=!0)}if(l)break;o-=Rc,u-=Rc}},jc=function jc(e,t,n){for(var i,r,a,s,o,u,l,c=0,d=Rc,h=!1,f={data:[],size:0};d<e.byteLength;)if(e[c]!==Mc||e[d]!==Mc)c++,d++;else{switch(i=e.subarray(c,d),Lc.ts.parseType(i,t.pid)){case"pes":if(r=Lc.ts.parsePesType(i,t.table),a=Lc.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(s=Lc.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0),!n.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),u=0;f.data.length;)l=f.data.shift(),o.set(l,u),u+=l.byteLength;if(Lc.ts.videoPacketContainsKeyFrame(o)){var p=Lc.ts.parsePesTime(o);p?(n.firstKeyFrame=p,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}f.size=0}f.data.push(i),f.size+=i.byteLength}}if(h&&n.firstKeyFrame)break;c+=Rc,d+=Rc}for(c=(d=e.byteLength)-Rc,h=!1;0<=c;)if(e[c]!==Mc||e[d]!==Mc)c--,d--;else{switch(i=e.subarray(c,d),Lc.ts.parseType(i,t.pid)){case"pes":r=Lc.ts.parsePesType(i,t.table),a=Lc.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=Lc.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0)}if(h)break;c-=Rc,d-=Rc}},Bc=function Bc(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=Ic(e.dts,n),e.pts=Ic(e.pts,n),e.dtsTime=e.dts/Dc,e.ptsTime=e.pts/Dc})}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=Ic(e.dts,i),e.pts=Ic(e.pts,i),e.dtsTime=e.dts/Dc,e.ptsTime=e.pts/Dc}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Ic(r.dts,i),r.pts=Ic(r.pts,i),r.dtsTime=r.dts/Dc,r.ptsTime=r.dts/Dc}}},Fc=function Fc(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(Lc.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=Lc.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=Lc.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Lc.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=Lc.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var u=Dc/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*u,pts:a+1024*i*u}]}},qc=function qc(e){var t={pid:null,table:null},n={};for(var i in Uc(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case Kl.H264_STREAM_TYPE:n.video=[],jc(e,t,n),0===n.video.length&&delete n.video;break;case Kl.ADTS_STREAM_TYPE:n.audio=[],Nc(e,t,n),0===n.audio.length&&delete n.audio}}return n},Hc=function Hc(e,t){var n;return(n=Lc.aac.isLikelyAacData(e)?Fc(e):qc(e))&&(n.audio||n.video)?(Bc(n,t),n):null},Vc={inspect:Hc,parseAudioPes_:Nc},Wc=function Wc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},zc=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),Gc=function Gc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$c=function $c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Xc=function Xc(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,u=[],l=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=l[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*u[d=u[c=u[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*u[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e},Yc=null,Kc=function(){function c(e){Wc(this,c),Yc||(Yc=Xc()),this._tables=[[Yc[0][0].slice(),Yc[0][1].slice(),Yc[0][2].slice(),Yc[0][3].slice(),Yc[0][4].slice()],[Yc[1][0].slice(),Yc[1][1].slice(),Yc[1][2].slice(),Yc[1][3].slice(),Yc[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=u;t<4*u+28;t++)i=r[t-1],(t%u==0||8===u&&t%u==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%u==0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),r[t]=r[t-u]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}return c.prototype.decrypt=function w(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],u=i^s[1],l=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,p=s.length/4-2,m=void 0,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],S=y[4];for(m=0;m<p;m++)d=v[o>>>24]^b[u>>16&255]^_[l>>8&255]^T[255&c]^s[g],h=v[u>>>24]^b[l>>16&255]^_[c>>8&255]^T[255&o]^s[g+1],f=v[l>>>24]^b[c>>16&255]^_[o>>8&255]^T[255&u]^s[g+2],c=v[c>>>24]^b[o>>16&255]^_[u>>8&255]^T[255&l]^s[g+3],g+=4,o=d,u=h,l=f;for(m=0;m<4;m++)r[(3&-m)+a]=S[o>>>24]<<24^S[u>>16&255]<<16^S[l>>8&255]<<8^S[255&c]^s[g++],d=o,o=u,u=l,l=c,c=d},c}(),Qc=function(){function e(){Wc(this,e),this.listeners={}}return e.prototype.on=function n(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function i(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},e.prototype.trigger=function u(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,a)},e.prototype.dispose=function t(){this.listeners={}},e.prototype.pipe=function r(t){this.on("data",function(e){t.push(e)})},e}(),Jc=function(t){function n(){Wc(this,n);var e=$c(this,t.call(this,Qc));return e.jobs=[],e.delay=1,e.timeout_=null,e}return Gc(n,t),n.prototype.processJob_=function e(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function i(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(Qc),Zc=function Zc(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},ed=function ed(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new Kc(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0;for(o=n[0],u=n[1],l=n[2],c=n[3],m=0;m<i.length;m+=4)d=Zc(i[m]),h=Zc(i[m+1]),f=Zc(i[m+2]),p=Zc(i[m+3]),r.decrypt(d,h,f,p,s,m),s[m]=Zc(s[m]^o),s[m+1]=Zc(s[m+1]^u),s[m+2]=Zc(s[m+2]^l),s[m+3]=Zc(s[m+3]^c),o=d,u=h,l=f,c=p;return a},td=function(){function u(e,t,n,i){Wc(this,u);var r=u.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new Jc,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([Zc(a[o-4]),Zc(a[o-3]),Zc(a[o-2]),Zc(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){i(null,We(s))})}return u.prototype.decryptChunk_=function e(t,n,i,r){return function(){var e=ed(t,n,i);r.set(e,t.byteOffset)}},zc(u,null,[{key:"STEP",get:function t(){return 32e3}}]),u}(),nd=function bu(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=iu.buildAbsoluteURL(Et.location.href,e)),iu.buildAbsoluteURL(e,t))},id=function id(e,t,n){return e&&n.responseURL&&t!==n.responseURL?n.responseURL:t},rd=function Wc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},ad=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),sd=function Yt(e,t,n){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,t);if(i===undefined){var r=Object.getPrototypeOf(e);return null===r?undefined:Yt(r,t,n)}if("value"in i)return i.value;var a=i.get;return a===undefined?undefined:a.call(n)},od=function Gc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},ud=function $c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},ld=function(){function n(e,t){var n=[],i=!0,r=!1,a=undefined;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),cd=Ne.mergeOptions,dd=Ne.EventTarget,hd=Ne.log,fd=function fd(r,a){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var n in r.mediaGroups[e][t]){var i=r.mediaGroups[e][t][n];a(i,e,t,n)}})},pd=function pd(e,t,n){var i=t.slice();n=n||0;for(var r=Math.min(e.length,t.length+n),a=n;a<r;a++)i[a-n]=cd(e[a],i[a-n]);return i},md=function md(e,t){e.resolvedUri||(e.resolvedUri=nd(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=nd(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=nd(t,e.map.uri))},gd=function gd(e,t){var n=cd(e,{}),i=n.playlists[t.uri];if(!i)return null;if(i.segments&&t.segments&&i.segments.length===t.segments.length&&i.endList===t.endList&&i.mediaSequence===t.mediaSequence)return null;var r=cd(i,t);i.segments&&(r.segments=pd(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),r.segments.forEach(function(e){md(e,r.resolvedUri)});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=r);return n.playlists[t.uri]=r,n},yd=function yd(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];(e.playlists[n.uri]=n).resolvedUri=nd(e.uri,n.uri),n.id=t,n.attributes||(n.attributes={},hd.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},vd=function vd(t){fd(t,function(e){e.uri&&(e.resolvedUri=nd(t.uri,e.uri))})},bd=function bd(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},_d=function(){function c(e,t,n){var i=2<arguments.length&&n!==undefined?n:{};rd(this,c);var r=ud(this,(c.__proto__||Object.getPrototypeOf(c)).call(this)),a=i.withCredentials,s=a!==undefined&&a,o=i.handleManifestRedirects,u=o!==undefined&&o;r.srcUrl=e,r.hls_=t,r.withCredentials=s,r.handleManifestRedirects=u;var l=t.options_;if(r.customTagParsers=l&&l.customTagParsers||[],r.customTagMappers=l&&l.customTagMappers||[],!r.srcUrl)throw new Error("A non-empty playlist URL is required");return r.state="HAVE_NOTHING",r.on("mediaupdatetimeout",function(){"HAVE_METADATA"===r.state&&(r.state="HAVE_CURRENT_METADATA",r.request=r.hls_.xhr({uri:nd(r.master.uri,r.media().uri),withCredentials:r.withCredentials},function(e){if(r.request)return e?r.playlistRequestError(r.request,r.media().uri,"HAVE_METADATA"):void r.haveMetadata(r.request,r.media().uri)}))}),r}return od(c,dd),ad(c,[{key:"playlistRequestError",value:function i(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t+".",responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function a(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var i=new lu;this.customTagParsers.forEach(function(e){return i.addParser(e)}),this.customTagMappers.forEach(function(e){return i.addTagMapper(e)}),i.push(e.responseText),i.end(),i.manifest.uri=t,i.manifest.attributes=i.manifest.attributes||{};var r=gd(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(Et.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=Et.setTimeout(function(){n.trigger("mediaupdatetimeout")},bd(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function e(){this.stopRequest(),Et.clearTimeout(this.mediaUpdateTimeout),Et.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function t(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function s(n,e){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}if(Et.clearTimeout(this.finalRenditionTimeout),e){var t=n.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=Et.setTimeout(this.media.bind(this,n,!1),t)}else{var r=this.state,a=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(a&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(a){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(i.request){if(n.resolvedUri=id(i.handleManifestRedirects,n.resolvedUri,t),e)return i.playlistRequestError(i.request,n.uri,r);i.haveMetadata(t,n.uri),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}}},{key:"pause",value:function n(){this.stopRequest(),Et.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function r(e){var t=this;Et.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Et.setTimeout(function(){return t.load()},i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function o(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.srcUrl+".",responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var n=new lu;return i.customTagParsers.forEach(function(e){return n.addParser(e)}),i.customTagMappers.forEach(function(e){return n.addTagMapper(e)}),n.push(t.responseText),n.end(),i.state="HAVE_MASTER",i.srcUrl=id(i.handleManifestRedirects,i.srcUrl,t),n.manifest.uri=i.srcUrl,n.manifest.playlists?(i.master=n.manifest,yd(i.master),vd(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(n.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Et.location.href,playlists:[{uri:i.srcUrl,id:0,resolvedUri:i.srcUrl,attributes:{}}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.haveMetadata(t,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),c}(),Td=Ne.createTimeRange,Sd=function Sd(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if("undefined"!=typeof(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,"undefined"!=typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},wd=function wd(e,t){for(var n=0,i=void 0,r=t-e.mediaSequence;r<e.segments.length;r++){if("undefined"!=typeof(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!=typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},kd=function kd(e,t,n){var i=void 0,r=void 0;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=Sd(e,t)).precise?i.result:(r=wd(e,t)).precise?r.result:i.result+n},Cd=function Cd(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Et.Infinity}return kd(e,t,n)},Ed=function Ed(e,t,n){var i=0;if(n<t){var r=[n,t];t=r[0],n=r[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)i+=e.targetDuration;t=0}for(var s=t;s<n;s++)i+=e.segments[s].duration;return i},xd=function xd(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,i=n+2*e.targetDuration;t--&&!(i<=(n+=e.segments[t].duration)););return Math.max(0,t)},Ad=function Ad(e,t,n){if(!e||!e.segments)return null;if(e.endList)return Cd(e);if(null===t)return null;t=t||0;var i=n?xd(e):e.segments.length;return kd(e,e.mediaSequence+i,t)},Pd=function Pd(e,t){var n=t||0,i=Ad(e,t,!0);return null===i?Td():Td(n,i)},Od=function Od(e){return e-Math.floor(e)==0},Id=function Id(e,t){if(Od(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),a=t*r;if(Od(a)||i===n)return(a+e)/r}},Ld=Id.bind(null,1),Dd=Id.bind(null,-1),Rd=function Rd(e,t,n,i){var r=void 0,a=void 0,s=e.segments.length,o=t-i;if(o<0){if(0<n)for(r=n-1;0<=r;r--)if(a=e.segments[r],0<(o+=Dd(a.duration)))return{mediaIndex:r,startTime:i-Ed(e,n,r)};return{mediaIndex:0,startTime:t}}if(n<0){for(r=n;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(r=n;r<s;r++)if(a=e.segments[r],(o-=Ld(a.duration))<0)return{mediaIndex:r,startTime:i+Ed(e,n,r)};return{mediaIndex:s-1,startTime:t}},Md=function Md(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Ud=function Ud(e){return e.excludeUntil&&e.excludeUntil===Infinity},Nd=function Nd(e){var t=Md(e);return!e.disabled&&!t},jd=function jd(e){return e.disabled},Bd=function Bd(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},Fd=function Fd(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},qd=function qd(e,t){return t.attributes&&t.attributes[e]},Hd=function Hd(e,t,n,i){var r=3<arguments.length&&i!==undefined?i:0;return qd("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},Vd=function Vd(e,t){if(1===e.playlists.length)return!0
;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!Nd(e)&&(e.attributes.BANDWIDTH||0)<n}).length},Wd={duration:Cd,seekable:Pd,safeLiveIndex:xd,getMediaInfoForTime:Rd,isEnabled:Nd,isDisabled:jd,isBlacklisted:Md,isIncompatible:Ud,playlistEnd:Ad,isAes:Bd,isFmp4:Fd,hasAttribute:qd,estimateSegmentRequestTime:Hd,isLowestEnabledRendition:Vd},zd=Ne.xhr,Gd=Ne.mergeOptions,$d=function $d(){return function s(e,i){e=Gd({timeout:45e3},e);var t=s.beforeRequest||Ne.Hls.xhr.beforeRequest;if(t&&"function"==typeof t){var n=t(e);n&&(e=n)}var r=zd(e,function(e,t){var n=r.response;!e&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),t.headers&&(r.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(r.timedout=!0),e||r.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),i(e,r)}),a=r.abort;return r.abort=function(){return r.aborted=!0,a.apply(r,arguments)},r.uri=e.uri,r.requestTime=Date.now(),r}},Xd=function Xd(e){var t=void 0;return t=e.offset+e.length-1,"bytes="+e.offset+"-"+t},Yd=function Yd(e){var t={};return e.byterange&&(t.Range=Xd(e.byterange)),t},Kd=function Kd(e,t){return e.start(t)+"-"+e.end(t)},Qd=function Qd(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Jd=function Jd(e){return 32<=e&&e<126?String.fromCharCode(e):"."},Zd=function Zd(n){var i={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i},eh=function eh(e){var t=e.byterange||{length:Infinity,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},th=function th(e){return e.resolvedUri},nh=function nh(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=0;r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(Qd).join("")+" "+t.slice(r*n,r*n+n).map(Jd).join("")+"\n";return i},ih=function ih(e){var t=e.bytes;return nh(t)},rh=function rh(e){var t="",n=void 0;for(n=0;n<e.length;n++)t+=Kd(e,n)+" ";return t},ah=Object.freeze({createTransferableMessage:Zd,initSegmentId:eh,segmentKeyId:th,hexDump:nh,tagDump:ih,textRanges:rh}),sh=.25,oh=function oh(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)},uh=function uh(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},lh=function lh(e,t){var n=void 0;try{n=new Date(e)}catch(u){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1;r++){if(i=t.segments[r],n<t.segments[r+1].dateTimeObject)break}var a=t.segments[t.segments.length-1],s=a.dateTimeObject,o=a.videoTimingInfo?uh(a.videoTimingInfo):a.duration+a.duration*sh;return new Date(s.getTime()+1e3*o)<n?null:(s<n&&(i=a),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Wd.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})},ch=function ch(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n=0,i=void 0,r=0;r<t.segments.length&&!(e<=(n=(i=t.segments[r]).videoTimingInfo?i.videoTimingInfo.transmuxedPresentationEnd:n+i.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(n<e){if(e>n+a.duration*sh)return null;i=a}return{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:n-i.duration,type:i.videoTimingInfo?"accurate":"estimate"}},dh=function dh(e,t){var n=void 0,i=void 0;try{n=new Date(e),i=new Date(t)}catch(a){}var r=n.getTime();return(i.getTime()-r)/1e3},hh=function hh(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++){if(!e.segments[t].dateTimeObject)return!1}return!0},fh=function fh(e){var t=e.playlist,n=e.time,i=n===undefined?undefined:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||i===undefined)return r({message:"getProgramTime: playlist and time must be provided"});var a=ch(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:i},o=oh(i,a.segment);return o&&(s.programDateTime=o.toISOString()),r(null,s)},ph=function ph(e){var t=e.programTime,n=e.playlist,i=e.retryCount,r=i===undefined?2:i,a=e.seekTo,s=e.pauseAfterSeek,o=s===undefined||s,u=e.tech,l=e.callback;if(!l)throw new Error("seekToProgramTime: callback must be provided");if(void 0===t||!n||!a)return l({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!n.endList&&!u.hasStarted_)return l({message:"player must be playing a live stream to start buffering"});if(!hh(n))return l({message:"programDateTime tags must be provided in the manifest "+n.resolvedUri});var c=lh(t,n);if(!c)return l({message:t+" was not found in the stream"});var d=c.segment,h=dh(d.dateTimeObject,t);if("estimate"===c.type)return 0===r?l({message:t+" is not buffered yet. Try again"}):(a(c.estimatedStart+h),void u.one("seeked",function(){ph({programTime:t,playlist:n,retryCount:r-1,seekTo:a,pauseAfterSeek:o,tech:u,callback:l})}));var f=d.start+h,p=function p(){return l(null,u.currentTime())};u.one("seeked",p),o&&u.pause(),a(f)},mh=1/30,gh=3*mh,yh=function yh(e,t){var n=[],i=void 0;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return Ne.createTimeRanges(n)},vh=function vh(e,n){return yh(e,function(e,t){return e-gh<=n&&n<=t+gh})},bh=function bh(e,t){return yh(e,function(e){return t<=e-mh})},_h=function _h(e){if(e.length<2)return Ne.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return Ne.createTimeRanges(t)},Th=function Th(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Sh=function Sh(e,t,n){var i=2<arguments.length&&n!==undefined?n:1;return((e.length?e.end(e.length-1):0)-t)/i},wh=function wh(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},kh=function kh(e,t,n){var i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},Ch=function Ch(e,t,n){var i=void 0,r=void 0;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=t&&r.endTime>=e&&n.removeCue(r)},Eh=function Eh(e){Object.defineProperties(e.frame,{id:{get:function t(){return Ne.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function n(){return Ne.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function i(){return Ne.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},xh=function xh(e){return isNaN(e)||Math.abs(e)===Infinity?Number.MAX_VALUE:e},Ah=function Ah(e,t,n){var i=Et.WebKitDataCue||Et.VTTCue;if(t&&t.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new i(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},e),n){var r=xh(e.mediaSource_.duration);if(n.forEach(function(e){var n=e.cueTime+this.timestampOffset;!("number"!=typeof n||Et.isNaN(n)||n<0)&&n<Infinity&&e.frames.forEach(function(e){var t=new i(n,n,e.value||e.url||e.data||"");t.frame=e,t.value=e,Eh(t),this.metadataTrack_.addCue(t)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var a=e.metadataTrack_.cues,s=[],o=0;o<a.length;o++)a[o]&&s.push(a[o]);var u=s.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),l=Object.keys(u).sort(function(e,t){return Number(e)-Number(t)});l.forEach(function(e,t){var n=u[e],i=Number(l[t+1])||r;n.forEach(function(e){e.endTime=i})})}}},Ph="undefined"!=typeof window?window:{},Oh="undefined"==typeof Symbol?"__target":Symbol(),Ih="application/javascript",Lh=Ph.BlobBuilder||Ph.WebKitBlobBuilder||Ph.MozBlobBuilder||Ph.MSBlobBuilder,Dh=Ph.URL||Ph.webkitURL||Dh&&Dh.msURL,Rh=Ph.Worker;if(Rh){var Mh,Uh=Ge("self.onmessage = function () {}"),Nh=new Uint8Array(1);try{(Mh=new Rh(Uh)).postMessage(Nh,[Nh.buffer])}catch(Pg){Rh=null}finally{Dh.revokeObjectURL(Uh),Mh&&Mh.terminate()}}var jh=new ze("./transmuxer-worker.worker.js",function(){var pn=this;!function(){var e=function e(){this.init=function(){var s={};this.on=function(e,t){s[e]||(s[e]=[]),s[e]=s[e].concat(t)},this.off=function(e,t){var n;return!!s[e]&&(n=s[e].indexOf(t),s[e]=s[e].slice(),s[e].splice(n,1),-1<n)},this.trigger=function(e,t){var n,i,r,a;if(n=s[e])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,t);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){s={}}}};e.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),this.on("partialdone",function(e){t.partialFlush(e)}),this.on("endedtimeline",function(e){t.endTimeline(e)}),this.on("reset",function(e){t.reset(e)}),t},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var l,t,n,r,a,i,s,o,u,c,d,h,f,p,m,g,y,v,b,_,T,S,w,k,C,E,x,A,P,O,I,L,D,R,M,U,N,j,B,F,q=e,H=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:E,audio:x},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=L,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M=L,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),l=function l(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},t=function t(){return l(S.dinf,l(S.dref,I))},n=function n(e){return l(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function m(e){return l(S.hdlr,A[e])},p=function p(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),l(S.mdhd,t)},f=function f(e){return l(S.mdia,p(e),m(e.type),i(e))},a=function a(e){return l(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},i=function i(e){return l(S.minf,"video"===e.type?l(S.vmhd,P):l(S.smhd,O),t(),y(e))},s=function s(e,t){for(var n=[],i=t.length;i--;)n[i]=b(t[i]);return l.apply(null,[S.moof,a(e)].concat(n))},o=function o(e){for(var t=e.length,n=[];t--;)n[t]=d(e[t]);return l.apply(null,[S.moov,c(4294967295)].concat(n).concat(u(e)))},u=function u(e){for(var t=e.length,n=[];t--;)n[t]=_(e[t]);return l.apply(null,[S.mvex].concat(n))},c=function c(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return l(S.mvhd,t)},g=function g(e){var t,n,i=e.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return l(S.sdtp,r)},y=function y(e){return l(S.stbl,v(e),l(S.stts,M),l(S.stsc,D),l(S.stsz,R),l(S.stco,L))},v=function Xt(e){return l(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?U(e):N(e))},U=function U(e){var t,n,i=e.sps||[],r=e.pps||[],a=[],s=[];for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));for(t=0;t<r.length;t++)s.push((65280&r[t].byteLength)>>>8),s.push(255&r[t].byteLength),s=s.concat(Array.prototype.slice.call(r[t]));if(n=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),l(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],a,[r.length],s))),l(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var o=e.sarRatio[0],u=e.sarRatio[1];n.push(l(S.pasp,new Uint8Array([(4278190080&o)>>24,(16711680&o)>>16,(65280&o)>>8,255&o,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return l.apply(null,n)},N=function N(e){return l(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))},h=function h(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return l(S.tkhd,t)},b=function b(e){var t,n,i,r,a,s,o;return t=l(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(H+1)),o=Math.floor(e.baseMediaDecodeTime%(H+1)),n=l(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),a=92,"audio"===e.type?(i=T(e,a),l(S.traf,t,n,i)):(r=g(e),i=T(e,r.length+a),l(S.traf,t,n,i,r))},d=function d(e){return e.duration=e.duration||4294967295,l(S.trak,h(e),f(e))},_=function _(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),l(S.trex,t)},F=function F(e,t){var n=0,i=0,r=0,a=0;return e.length&&(e[0].duration!==undefined&&(n=1),e[0].size!==undefined&&(i=2),e[0].flags!==undefined&&(r=4),e[0].compositionTimeOffset!==undefined&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function B(e,t){var n,i,r,a;for(t+=20+16*(i=e.samples||[]).length,n=F(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return l(S.trun,new Uint8Array(n))},j=function j(e,t){var n,i,r,a;for(t+=20+8*(i=e.samples||[]).length,n=F(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return l(S.trun,new Uint8Array(n))},T=function Yt(e,t){return"audio"===e.type?j(e,t):B(e,t)};var V,W,z,G,$,X,Y,K={ftyp:r=function r(){return l(S.ftyp,w,k,w,C)},mdat:function Kt(e){return l(S.mdat,e)},moof:s,moov:o,initSegment:function Qt(e){var t,n=r(),i=o(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}},Q=function Q(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},J=function J(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},Z=function Z(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ee=function ee(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},te=function te(e,t){var n=ee();return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne=function ne(e,t){var n,i,r,a,s,o=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s=a[i],o+=(r=te(s,o)).size,u.push(r);return u},ie=function ie(e){var t,n,i,r,a,s,o=0,u=e.byteLength,l=e.nalCount,c=new Uint8Array(u+4*l),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},re=function re(e,t){var n,i=[];return n=te(e,t||0),i.push(n),i},ae=function ae(e){var t,n,i=0,r=e.byteLength,a=e.length,s=new Uint8Array(r+4*a),o=new DataView(s.buffer);for(t=0;t<e.length;t++)n=e[t],o.setUint32(i,n.data.byteLength),i+=4,s.set(n.data,i),i+=n.data.byteLength;return s},se={groupNalsIntoFrames:Q,groupFramesIntoGops:J,extendFirstKeyFrame:Z,generateSampleTable:ne,concatenateNalData:ie,generateSampleTableForFrame:re,concatenateNalDataForFrame:ae},oe=[33,16,5,32,164,27],ue=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],le=function le(e){for(var t=[];e--;)t.push(0);return t},ce=function ce(n){return Object.keys(n).reduce(function(e,t){return e[t]=new Uint8Array(n[t].reduce(function(e,t){return e.concat(t)},[])),e},{})},de={96e3:[oe,[227,64],le(154),[56]],88200:[oe,[231],le(170),[56]],64e3:[oe,[248,192],le(240),[56]],48e3:[oe,[255,192],le(268),[55,148,128],le(54),[112]],44100:[oe,[255,192],le(268),[55,163,128],le(84),[112]],32e3:[oe,[255,192],le(268),[55,234],le(226),[112]],24e3:[oe,[255,192],le(268),[55,255,128],le(268),[111,112],le(126),[224]],16e3:[oe,[255,192],le(268),[55,255,128],le(268),[111,255],le(269),[223,108],le(195),[1,192]],12e3:[ue,le(268),[3,127,248],le(268),[6,255,240],le(268),[13,255,224],le(268),[27,253,128],le(259),[56]],11025:[ue,le(268),[3,127,248],le(268),[6,255,240],le(268),[13,255,224],le(268),[27,255,192],le(268),[55,175,128],le(108),[112]],8e3:[ue,le(268),[3,121,16],le(47),[7]]},he=ce(de),fe=9e4;$=function $(e,t){return V(G(e,t))},X=function X(e,t){return W(z(e),t)},Y=function Y(e,t,n){return z(n?e:e-t)};var pe={ONE_SECOND_IN_TS:fe,secondsToVideoTs:V=function V(e){return e*fe},secondsToAudioTs:W=function W(e,t){return e*t},videoTsToSeconds:z=function z(e){return e/fe},audioTsToSeconds:G=function G(e,t){return e/t},audioTsToVideoTs:$,videoTsToAudioTs:X,metadataTsToSeconds:Y},me=function me(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n},ge=function ge(e,t,n,i){var r,a,s,o,u=0,l=0,c=0,d=0;if(t.length&&(r=pe.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),u=Math.ceil(pe.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),d=(c=Math.floor(l/u))*u),!(c<1||d>pe.ONE_SECOND_IN_TS/2))){for((a=he[e.samplerate])||(a=t[0].data),s=0;s<c;s++)o=t[0],t.splice(0,0,{data:a,dts:o.dts-u,pts:o.pts-u});e.baseMediaDecodeTime-=Math.floor(pe.videoTsToAudioTs(d,e.samplerate))}},ye=function ye(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=Infinity,e.filter(function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},ve=function ve(e){var t,n,i=0,r=new Uint8Array(me(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},be={prefixWithSilence:ge,trimAdtsFramesByEarliestDts:ye,generateSampleTable:function ne(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},concatenateFrameData:ve},_e=pe.ONE_SECOND_IN_TS,Te=function Te(e,t){"number"==typeof t.pts&&(e.timelineStartInfo.pts===undefined&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts===undefined?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts===undefined?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(e.timelineStartInfo.dts===undefined&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts===undefined?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts===undefined?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Se=function Se(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},we=function we(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/_e,n=Math.floor(n)),n},ke={clearDtsInfo:Se,calculateTrackBaseMediaDecodeTime:we,collectDtsInfo:Te},Ce=4,Ee=128,xe=function xe(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&e[t]!==Ee;){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&i===Ce){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n},Ae=function Ae(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Pe=function Pe(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},Oe=function Oe(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},Ie={parseSei:xe,parseUserData:Ae,parseCaptionPackets:Pe,discardEmulationPreventionBytes:Oe,USER_DATA_REGISTERED_ITU_T_T35:Ce},Le=function Le(){Le.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new je(0,0),new je(0,1),new je(1,0),new je(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))},this)};Le.prototype=new q,Le.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=Ie.parseSei(e.escapedRBSP)).payloadType===Ie.USER_DATA_REGISTERED_ITU_T_T35&&(n=Ie.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=Ie.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},Le.prototype.flushCCStreams=function(t){this.ccStreams_.forEach(function(e){return"flush"===t?e.flush():e.partialFlush()},this)},Le.prototype.flushStream=function(e){this.captionPackets_.length&&(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0),this.flushCCStreams(e)},Le.prototype.flush=function(){return this.flushStream("flush")},Le.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Le.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},Le.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},Le.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},Le.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},Le.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var De={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Re=function Re(e){return null===e?"":(e=De[e]||e,String.fromCharCode(e))},Me=14,Ue=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ne=function Ne(){for(var e=[],t=Me+1;t--;)e.push("");return e},je=function je(e,t){je.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ne();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ne();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ne()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Re((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Re((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=Ue.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Re(i),a+=Re(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};je.prototype=new q,je.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(Pg){return console.error("Skipping malformed caption."),""}}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},je.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ne(),this.nonDisplayed_=Ne(),this.lastControlCode_=null,this.column_=0,this.row_=Me,this.rollUpRows_=2,this.formatting_=[]},je.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},je.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},je.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},je.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},je.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},je.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},je.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},je.prototype.isNormalChar=function(e){return 32<=e&&e<=127},je.prototype.setRollUp=function(e,t){if(
"rollUp"!==this.mode_&&(this.row_=Me,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ne(),this.displayed_=Ne()),t!==undefined&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";t===undefined&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},je.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},je.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},je.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},je.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},je.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<Me+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},je.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Be={CaptionStream:Le,Cea608Stream:je},Fe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},qe=8589934592,He=4294967296,Ve="shared",We=function We(e,t){var n=1;for(t<e&&(n=-1);Math.abs(t-e)>He;)e+=n*qe;return e},ze=function ze(e){var t,n;ze.prototype.init.call(this),this.type_=e||Ve,this.push=function(e){this.type_!==Ve&&e.type!==this.type_||(n===undefined&&(n=e.dts),e.dts=We(e.dts,n),e.pts=We(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){t=n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ze.prototype=new q;var Ge,$e={TimestampRolloverStream:ze,handleRollover:We},Xe=function Xe(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},Ye=function Ye(e,t,n){return decodeURIComponent(Xe(e,t,n))},Ke=function Ke(e,t,n){return unescape(Xe(e,t,n))},Qe=function Qe(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Je={TXXX:function Jt(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ye(e.data,1,t),e.value=Ye(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function Zt(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ye(e.data,1,t),e.url=Ye(e.data,t+1,e.data.length);break}},PRIV:function en(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ke(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Ge=function tn(e){var t,u={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},l=0,c=[],d=0;if(Ge.prototype.init.call(this),this.dispatchType=Fe.METADATA_STREAM_TYPE.toString(16),u.descriptor)for(t=0;t<u.descriptor.length;t++)this.dispatchType+=("00"+u.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,i,r,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))u.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(e),d+=e.data.byteLength,1===c.length&&(l=Qe(e.data.subarray(6,10)),l+=10),!(d<l)){for(t={data:new Uint8Array(l),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<l;)t.data.set(c[0].data.subarray(0,l-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();n=10,64&t.data[5]&&(n+=4,n+=Qe(t.data.subarray(10,14)),l-=Qe(t.data.subarray(16,20)));do{if((i=Qe(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=r.id,Je[r.id]&&(Je[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var s=r.data,o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;o*=4,o+=3&s[7],r.timeStamp=o,t.pts===undefined&&t.dts===undefined&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),n+=10,n+=i}while(n<l);this.trigger("data",t)}}}).prototype=new q;var Ze,et,tt,nt=Ge,it=$e.TimestampRolloverStream,rt=188,at=71;(Ze=function nn(){var r=new Uint8Array(rt),a=0;Ze.prototype.init.call(this),this.push=function(e){var t,n=0,i=rt;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;i<t.byteLength;)t[n]!==at||t[i]!==at?(n++,i++):(this.trigger("data",t.subarray(n,i)),n+=rt,i+=rt);n<t.byteLength&&(r.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){a===rt&&r[0]===at&&(this.trigger("data",r),a=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){a=0,this.trigger("reset")}}).prototype=new q,(et=function rn(){var i,r,s,o;et.prototype.init.call(this),(o=this).packetsWaitingForPmt=[],this.programMapTable=undefined,i=function i(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?r(e.subarray(n),t):s(e.subarray(n),t)},r=function r(e,t){t.section_number=e[7],t.last_section_number=e[8],o.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=o.pmtPid},s=function s(e,t){var n,i;if(1&e[5]){for(o.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var r=e[i],a=(31&e[i+1])<<8|e[i+2];r===Fe.H264_STREAM_TYPE&&null===o.programMapTable.video?o.programMapTable.video=a:r===Fe.ADTS_STREAM_TYPE&&null===o.programMapTable.audio?o.programMapTable.audio=a:r===Fe.METADATA_STREAM_TYPE&&(o.programMapTable["timed-metadata"][a]=r),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=o.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",i(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",i(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===undefined?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Fe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Fe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new q,et.STREAM_TYPES={h264:27,adts:15},(tt=function an(){var r,l=this,a={data:[],size:0},s={data:[],size:0},o={data:[],size:0},c=function c(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},d=function d(e,t,n){var i,r=new Uint8Array(e.size),a={type:t},s=0,o=0,u=!1;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,s=0;s<e.data.length;s++)i=e.data[s],r.set(i.data,o),o+=i.data.byteLength;c(r,a),u="video"===t||a.packetLength<=e.size,(n||u)&&(e.size=0,e.data.length=0),u&&l.trigger("data",a)}};tt.prototype.init.call(this),this.push=function(n){({pat:function e(){},pes:function i(){var e,t;switch(n.streamType){case Fe.H264_STREAM_TYPE:case Fe.H264_STREAM_TYPE:e=a,t="video";break;case Fe.ADTS_STREAM_TYPE:e=s,t="audio";break;case Fe.METADATA_STREAM_TYPE:e=o,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&d(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function t(){var e={type:"metadata",tracks:[]};null!==(r=n.programMapTable).video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.video,codec:"avc",type:"video"}),null!==r.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+r.audio,codec:"adts",type:"audio"}),l.trigger("data",e)}})[n.type]()},this.reset=function(){a.size=0,a.data.length=0,s.size=0,s.data.length=0,this.trigger("reset")},this.flushStreams_=function(){d(a,"video"),d(s,"audio"),d(o,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new q;var st={PAT_PID:0,MP2T_PACKET_LENGTH:rt,TransportPacketStream:Ze,TransportParseStream:et,ElementaryStream:tt,TimestampRolloverStream:it,CaptionStream:Be.CaptionStream,Cea608Stream:Be.Cea608Stream,MetadataStream:nt};for(var ot in Fe)Fe.hasOwnProperty(ot)&&(st[ot]=Fe[ot]);var ut,lt=st,ct=pe.ONE_SECOND_IN_TS,dt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ut=function sn(u){var l,c=0;ut.prototype.init.call(this),this.push=function(e){var t,n,i,r,a,s,o=0;if(u||(c=0),"audio"===e.type)for(l?(r=l,(l=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),l.set(e.data,r.byteLength)):l=e.data;o+5<l.length;)if(255===l[o]&&240==(246&l[o+1])){if(n=2*(1&~l[o+1]),t=(3&l[o+3])<<11|l[o+4]<<3|(224&l[o+5])>>5,s=(a=1024*(1+(3&l[o+6])))*ct/dt[(60&l[o+2])>>>2],i=o+t,l.byteLength<i)return;if(this.trigger("data",{pts:e.pts+c*s,dts:e.dts+c*s,sampleCount:a,audioobjecttype:1+(l[o+2]>>>6&3),channelcount:(1&l[o+2])<<2|(192&l[o+3])>>>6,samplerate:dt[(60&l[o+2])>>>2],samplingfrequencyindex:(60&l[o+2])>>>2,samplesize:16,data:l.subarray(o+7+n,i)}),c++,l.byteLength===i)return void(l=undefined);l=l.subarray(i)}else o++},this.flush=function(){c=0,this.trigger("done")},this.reset=function(){l=void 0,this.trigger("reset")},this.endTimeline=function(){l=void 0,this.trigger("endedtimeline")}}).prototype=new q;var ht,ft,pt,mt=ut,gt=function on(i){var r=i.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=i.byteLength-r,t=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");t.set(i.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),n=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(ft=function un(){var i,r,a=0;ft.prototype.init.call(this),this.push=function(e){var t;r?((t=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),t.set(e.data,r.byteLength),r=t):r=e.data;for(var n=r.byteLength;a<n-3;a++)if(1===r[a+2]){i=a+5;break}for(;i<n;)switch(r[i]){case 0:if(0!==r[i-1]){i+=2;break}if(0!==r[i-2]){i++;break}for(a+3!==i-2&&this.trigger("data",r.subarray(a+3,i-2));1!==r[++i]&&i<n;);a=i-2,i+=3;break;case 1:if(0!==r[i-1]||0!==r[i-2]){i+=3;break}this.trigger("data",r.subarray(a+3,i-2)),a=i-2,i+=3;break;default:i+=3}r=r.subarray(a),i-=a,a=0},this.reset=function(){r=null,a=0,this.trigger("reset")},this.flush=function(){r&&3<r.byteLength&&this.trigger("data",r.subarray(a+3)),r=null,a=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new q,pt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ht=function Mt(){var n,i,r,a,o,b,_,t=new ft;ht.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(i=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:i,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=o(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=o(e.subarray(1)),t.config=b(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),t.on("partialdone",function(){n.trigger("partialdone")}),t.on("reset",function(){n.trigger("reset")}),t.on("endedtimeline",function(){n.trigger("endedtimeline")}),this.flush=function(){t.flush()},this.partialFlush=function(){t.partialFlush()},this.reset=function(){t.reset()},this.endTimeline=function(){t.endTimeline()},_=function _(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},o=function o(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},b=function b(e){var t,n,i,r,a,s,o,u,l,c,d,h,f,p=0,m=0,g=0,y=0,v=1;if(n=(t=new gt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),pt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)t.readBoolean()&&_(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),o=t.readUnsignedExpGolomb(),f=0;f<o;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(v=h[0]/h[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*p-2*m)*v),height:(2-c)*(l+1)*16-2*g-2*y,sarRatio:h}}}).prototype=new q;var yt,vt={H264Stream:ht,NalByteStream:ft},bt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],_t=function _t(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},Tt=function Qe(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},St=function Xe(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},wt=function Ke(e,t,n){return unescape(St(e,t,n))},kt=function kt(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},Ct=function Ct(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},Et=function Et(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},xt=function xt(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return bt[(60&e[t+2])>>>2];t++}return null},At=function At(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=Tt(e.subarray(10,14)));do{if((n=Tt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==wt(i,0,r))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}}t+=10,t+=n}while(t<e.byteLength);return null},Pt={isLikelyAacData:_t,parseId3TagSize:kt,parseAdtsSize:Ct,parseType:Et,parseSampleRate:xt,parseAacTimestamp:At};(yt=function ln(){var o=new Uint8Array,u=0;yt.prototype.init.call(this),this.setTimestamp=function(e){u=e},this.push=function(e){var t,n,i,r,a=0,s=0;for(o.length?(r=o.length,(o=new Uint8Array(e.byteLength+r)).set(o.subarray(0,r)),o.set(e,r)):o=e;3<=o.length-s;)if(o[s]!=="I".charCodeAt(0)||o[s+1]!=="D".charCodeAt(0)||o[s+2]!=="3".charCodeAt(0))if(255!=(255&o[s])||240!=(240&o[s+1]))s++;else{if(o.length-s<7)break;if(s+(a=Pt.parseAdtsSize(o,s))>o.length)break;i={type:"audio",data:o.subarray(s,s+a),pts:u,dts:u},this.trigger("data",i),s+=a}else{if(o.length-s<10)break;if(s+(a=Pt.parseId3TagSize(o,s))>o.length)break;n={type:"timed-metadata",data:o.subarray(s,s+a)},this.trigger("data",n),s+=a}t=o.length-s,o=0<t?o.subarray(s):new Uint8Array},this.reset=function(){o=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){o=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new q;var Ot,It,Lt,Dt,Rt=yt,Mt=vt.H264Stream,Ut=Pt.isLikelyAacData,Nt=pe.ONE_SECOND_IN_TS,jt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Bt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ft=function Ft(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},qt=function qt(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};(It=function cn(a,s){var o=[],u=0,l=0,c=0,d=Infinity;s=s||{},It.prototype.init.call(this),this.push=function(t){ke.collectDtsInfo(a,t),a&&jt.forEach(function(e){a[e]=t[e]}),o.push(t)},this.setEarliestDts=function(e){l=e-a.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){d=e},this.setAudioAppendStart=function(e){c=e},this.flush=function(){var e,t,n,i,r;0!==o.length&&(e=be.trimAdtsFramesByEarliestDts(o,a,l),a.baseMediaDecodeTime=ke.calculateTrackBaseMediaDecodeTime(a,s.keepOriginalTimestamps),be.prefixWithSilence(a,e,c,d),a.samples=be.generateSampleTable(e),n=K.mdat(be.concatenateFrameData(e)),o=[],t=K.moof(u,[a]),i=new Uint8Array(t.byteLength+n.byteLength),u++,i.set(t),i.set(n,t.byteLength),ke.clearDtsInfo(a),r=Math.ceil(1024*Nt/a.samplerate),e.length&&this.trigger("timingInfo",{start:e[0].dts,end:e[0].dts+e.length*r}),this.trigger("data",{track:a,boxes:i})),this.trigger("done","AudioSegmentStream")},this.reset=function(){ke.clearDtsInfo(a),o=[],this.trigger("reset")}}).prototype=new q,(Ot=function dn(c,d){var t,n,h=0,f=[],p=[];d=d||{},Ot.prototype.init.call(this),delete c.minPTS,this.gopCache_=[],this.push=function(e){ke.collectDtsInfo(c,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,c.sps=[e.data],Bt.forEach(function(e){c[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,c.pps=[e.data]),f.push(e)},this.flush=function(){for(var e,t,n,i,r,a,s,o,u=0;f.length&&"access_unit_delimiter_rbsp"!==f[0].nalUnitType;)f.shift();if(0===f.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=se.groupNalsIntoFrames(f),(n=se.groupFramesIntoGops(e))[0][0].keyFrame||((t=this.getGopForFusion_(f[0],c))?(u=t.duration,n.unshift(t),n.byteLength+=t.byteLength,n.nalCount+=t.nalCount,n.pts=t.pts,n.dts=t.dts,n.duration+=t.duration):n=se.extendFirstKeyFrame(n)),p.length){var l;if(!(l=d.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ke.clearDtsInfo(c),n=l}ke.collectDtsInfo(c,n),c.samples=se.generateSampleTable(n),r=K.mdat(se.concatenateNalData(n)),c.baseMediaDecodeTime=ke.calculateTrackBaseMediaDecodeTime(c,d.keepOriginalTimestamps),this.trigger("processedGopsInfo",n.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),s=n[0],o=n[n.length-1],this.trigger("segmentTimingInfo",qt(c.baseMediaDecodeTime,s.dts,s.pts,o.dts+o.duration,o.pts+o.duration,u)),this.trigger("timingInfo",{start:n[0].dts,end:n[n.length-1].dts+n[n.length-1].duration}),this.gopCache_.unshift({gop:n.pop(),pps:c.pps,sps:c.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),f=[],this.trigger("baseMediaDecodeTime",c.baseMediaDecodeTime),this.trigger("timelineStartInfo",c.timelineStartInfo),i=K.moof(h,[c]),a=new Uint8Array(i.byteLength+r.byteLength),h++,a.set(i),a.set(r,i.byteLength),this.trigger("data",{track:c,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),f=[],this.gopCache_.length=0,p.length=0,this.trigger("reset")},this.resetStream_=function(){ke.clearDtsInfo(c),t=undefined,n=undefined},this.getGopForFusion_=function(e){var t,n,i,r,a,s=45e3,o=1e4,u=Infinity;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,c.pps&&Ft(c.pps[0],r.pps[0])&&c.sps&&Ft(c.sps[0],r.sps[0])&&(i.dts<c.timelineStartInfo.dts||-o<=(t=e.dts-i.dts-i.duration)&&t<=s&&(!n||t<u)&&(n=r,u=t));return n?n.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,o,u;for(a=e.byteLength,s=e.nalCount,o=e.duration,t=n=0;t<p.length&&n<e.length&&(i=p[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,o-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=o,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,o;for(t=p.length-1,n=e.length-1,a=null,s=!1;0<=t&&0<=n;){if(i=p[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===p.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(o=s?n:a))return e;var u=e.slice(o),l=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){p=e}}).prototype=new q,(Dt=function hn(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Dt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new q,Dt.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,Bt.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,jt.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=K.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=pe.metadataTsToSeconds(t.startPts,o,this.keepOriginalTimestamps),t.endTime=pe.metadataTsToSeconds(t.endPts,o,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=pe.metadataTsToSeconds(n.pts,o,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)n=s.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Dt.prototype.setRemux=function(e){this.remuxTracks=e},(Lt=function fn(i){var r,a,s=this,n=!0;Lt.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new lt.MetadataStream,t.aacStream=new Rt,t.audioTimestampRolloverStream=new lt.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new lt.TimestampRolloverStream("timed-metadata"),t.adtsStream=new mt,t.coalesceStream=new Dt(i,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new It(a,i),t.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new lt.MetadataStream,n.packetStream=new lt.TransportPacketStream,n.parseStream=new lt.TransportParseStream,n.elementaryStream=new lt.ElementaryStream,n.timestampRolloverStream=new lt.TimestampRolloverStream,n.adtsStream=new mt,n.h264Stream=new Mt,n.captionStream=new lt.CaptionStream,n.coalesceStream=new Dt(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream).pipe(n.timestampRolloverStream),n.timestampRolloverStream.pipe(n.h264Stream),n.timestampRolloverStream.pipe(n.adtsStream),n.timestampRolloverStream.pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new Ot(r,i),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("segmentTimingInfo",s.trigger.bind(s,"videoSegmentTimingInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.videoSegmentStream.on("timingInfo",s.trigger.bind(s,"videoTimingInfo")),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new It(a,i),n.audioSegmentStream.on("timingInfo",s.trigger.bind(s,"audioTimingInfo")),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream)),s.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!r})}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("id3Frame",function(e){e.dispatchType=n.metadataStream.dispatchType,s.trigger("id3Frame",e)}),n.coalesceStream.on("caption",this.trigger.bind(this,"caption")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;i.keepOriginalTimestamps||(this.baseMediaDecodeTime=e),a&&(a.timelineStartInfo.dts=undefined,a.timelineStartInfo.pts=undefined,ke.clearDtsInfo(a),i.keepOriginalTimestamps||(a.timelineStartInfo.baseMediaDecodeTime=e),t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[]),r.timelineStartInfo.dts=undefined,r.timelineStartInfo.pts=undefined,ke.clearDtsInfo(r),t.captionStream.reset(),i.keepOriginalTimestamps||(r.timelineStartInfo.baseMediaDecodeTime=e)),t.timestampRolloverStream&&t.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(e){var t=this.transmuxPipeline_;i.remux=e,t&&t.coalesceStream&&t.coalesceStream.setRemux(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=Ut(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new q;var Ht={Transmuxer:Lt,VideoSegmentStream:Ot,AudioSegmentStream:It,AUDIO_PROPERTIES:jt,VIDEO_PROPERTIES:Bt,generateVideoSegmentTimingInfo:qt},Vt=function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Wt=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),zt=function zt(i,e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,i.postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){i.postMessage({action:"caption",data:e})}),e.on("done",function(){i.postMessage({action:"done"})}),e.on("gopInfo",function(e){i.postMessage({action:"gopInfo",gopInfo:e})}),e.on("videoSegmentTimingInfo",function(e){i.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:e})})},Gt=function(){function n(e,t){Vt(this,n),this.options=t||{},this.self=e,this.init()}return Wt(n,[{key:"init",value:function e(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ht.Transmuxer(this.options),zt(this.self,this.transmuxer)}},{key:"push",value:function i(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function t(){this.init()}},{key:"setTimestampOffset",value:function r(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function a(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function s(){this.transmuxer.flush()}},{key:"resetCaptions",value:function o(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function u(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),n}(),$t=function $t(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Gt(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new Gt(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}};new $t(pn)}()}),Bh={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},Fh=function Fh(e){return e.map(function(e){return e.replace(
/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})},qh=function qh(e){var t=0<arguments.length&&e!==undefined?e:"",n={codecCount:0},i=void 0;return n.codecCount=t.split(",").length,n.codecCount=n.codecCount||2,(i=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t))&&(n.videoCodec=i[2],n.videoObjectTypeIndicator=i[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),n.audioProfile=n.audioProfile&&n.audioProfile[2],n},Hh=function Hh(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return Fh([e])[0]})},Vh=function Vh(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'},Wh=function Wh(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"},zh=function zh(e){var t=e.attributes||{};return t.CODECS?qh(t.CODECS):Bh},Gh=function Gh(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r["default"]&&r.playlists)return qh(r.playlists[0].attributes.CODECS).audioProfile}return null},$h=function $h(e,t){var n=Wh(t),i=zh(t),r=t.attributes||{},a=!0,s=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var o=e.mediaGroups.AUDIO[r.AUDIO];if(o)for(var u in a=!(s=!0),o)if(!o[u].uri&&!o[u].playlists){a=!0;break}}s&&!i.audioProfile&&(a||(i.audioProfile=Gh(e,r.AUDIO)),i.audioProfile||(Ne.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=Bh.audioProfile));var l={};i.videoCodec&&(l.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(l.audio="mp4a.40."+i.audioProfile);var c=Vh("audio",n,[l.audio]),d=Vh("video",n,[l.video]),h=Vh("video",n,[l.video,l.audio]);return s?!a&&l.video?[d,c]:a||l.video?[h,c]:[c,c]:l.video?[h]:[c]},Xh=function Xh(e){var r={type:"",parameters:{}},t=e.trim().split(";");return r.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var n=t[0].replace(/"/g,"").trim(),i=t[1].replace(/"/g,"").trim();r.parameters[n]=i}}),r},Yh=function Yh(e){return/mp4a\.\d+.\d+/i.test(e)},Kh=function Kh(e){return/avc1\.[\da-f]+/i.test(e)},Qh=function Qh(e,t,n){if(null==t||!e.length)return[];var i=Math.ceil(9e4*(t-n+3)),r=void 0;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)},Jh=function Jh(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)},Zh=function Zh(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),a=Math.ceil(9e4*(n-i)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var u=o+1;u--&&!(e[u].pts<=r););return u=Math.max(u,0),s.splice(u,o-u+1),s},ef=function ef(e,t,n){var i=null,r=null,a=0,s=[],o=[];if(!e&&!t)return Ne.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Ne.createTimeRange();for(var u=e.buffered,l=t.buffered,c=u.length;c--;)s.push({time:u.start(c),type:"start"}),s.push({time:u.end(c),type:"end"});for(c=l.length;c--;)s.push({time:l.start(c),type:"start"}),s.push({time:l.end(c),type:"end"});for(s.sort(function(e,t){return e.time-t.time}),c=0;c<s.length;c++)"start"===s[c].type?2===++a&&(i=s[c].time):"end"===s[c].type&&1===--a&&(r=s[c].time),null!==i&&null!==r&&(o.push([i,r]),r=i=null);return Ne.createTimeRanges(o)},tf=9e4,nf=function nf(e,t){var i=e.addSourceBuffer(t),r=Object.create(null);r.updating=!1,r.realBuffer_=i;var a=function a(t){"function"==typeof i[t]?r[t]=function(){return i[t].apply(i,arguments)}:"undefined"==typeof r[t]&&Object.defineProperty(r,t,{get:function e(){return i[t]},set:function n(e){return i[t]=e}})};for(var n in i)a(n);return r},rf=function(e){function s(e,t){rd(this,s);var n=ud(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,Ne.EventTarget));n.timestampOffset_=0,n.pendingBuffers_=[],n.bufferUpdating_=!1,n.mediaSource_=e,n.codecs_=t,n.audioCodec_=null,n.videoCodec_=null,n.audioDisabled_=!1,n.appendAudioInitSegment_=!0,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=11<=Ne.browser.IE_VERSION;var i={remux:!1,alignGopsAtEnd:n.safeAppend_};return n.codecs_.forEach(function(e){Yh(e)?n.audioCodec_=e:Kh(e)&&(n.videoCodec_=e)}),n.transmuxer_=new jh,n.transmuxer_.postMessage({action:"init",options:i}),n.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?n.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(n,"timestampOffset",{get:function r(){return this.timestampOffset_},set:function a(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(n,"appendWindowStart",{get:function r(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function a(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(n,"updating",{get:function r(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(n,"buffered",{get:function r(){return ef(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),n}return od(s,e),ad(s,[{key:"data_",value:function n(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),kh(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function t(){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function i(e){var t={start:{decode:e.start.dts/tf,presentation:e.start.pts/tf},end:{decode:e.end.dts/tf,presentation:e.end.pts/tf},baseMediaDecodeTime:e.baseMediaDecodeTime/tf};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/tf),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function a(){var i=this,r=["audio","video"];r.forEach(function(t){if(i[t+"Codec_"]&&!i[t+"Buffer_"]){var n=null;if(i.mediaSource_[t+"Buffer_"])(n=i.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+i[t+"Codec_"]+'"';n=nf(i.mediaSource_.nativeMediaSource_,e),i.mediaSource_[t+"Buffer_"]=n}i[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!i.audioDisabled_)return"updateend"===e&&(i[t+"Buffer_"].updating=!1),r.every(function(e){return!("audio"!==e||!i.audioDisabled_)||(t===e||!i[e+"Buffer_"]||!i[e+"Buffer_"].updating)})?i.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function r(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Qh(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function o(e){this.gopBuffer_=Jh(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function u(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=Zh(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Ch(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Ch(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function l(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),Ah(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function c(e,t){var n=0,i=void 0;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach(function(e){i.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(i)}catch(r){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:r.message,originalError:r})}}}},{key:"abort",value:function d(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),s}(Ne.EventTarget),af=function(e){function i(){rd(this,i);var a=ud(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),e=void 0;for(e in a.nativeMediaSource_=new Et.MediaSource,a.nativeMediaSource_)e in i.prototype||"function"!=typeof a.nativeMediaSource_[e]||(a[e]=a.nativeMediaSource_[e].bind(a.nativeMediaSource_));return a.duration_=NaN,Object.defineProperty(a,"duration",{get:function t(){return this.duration_===Infinity?this.duration_:this.nativeMediaSource_.duration},set:function n(e){(this.duration_=e)===Infinity||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(a,"seekable",{get:function t(){return this.duration_===Infinity?Ne.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(a,"readyState",{get:function t(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(a,"activeSourceBuffers",{get:function t(){return this.activeSourceBuffers_}}),a.sourceBuffers=[],a.activeSourceBuffers_=[],a.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var n=!1,i=!0,t=0;t<a.player_.audioTracks().length;t++){var r=a.player_.audioTracks()[t];if(r.enabled&&"main"!==r.kind){i=!(n=!0);break}}a.sourceBuffers.forEach(function(e,t){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=n;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,i=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=t?i:!i,e.audioDisabled_))return;a.activeSourceBuffers_.push(e)})},a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},a.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},a.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},a),a.on("sourceopen",function(){var e=xt.querySelector('[src="'+a.url_+'"]');e&&(a.player_=Ne(e.parentNode),a.player_&&(a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)))}),a.on("sourceended",function(){for(var e=xh(a.duration),t=0;t<a.sourceBuffers.length;t++){var n=a.sourceBuffers[t],i=n.metadataTrack_&&n.metadataTrack_.cues;i&&i.length&&(i[i.length-1].endTime=e)}}),a.on("sourceclose",function(){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),a}return od(i,e),ad(i,[{key:"addSeekableRange_",value:function r(e,t){var n=void 0;if(this.duration!==Infinity)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function a(e){var t=void 0,n=Xh(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=(i=Fh(i)).filter(function(e){return Yh(e)||Kh(e)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new rf(this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),i}(Ne.EventTarget),sf=0;Ne.mediaSources={};var of=function of(e,t){var n=Ne.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},uf=function uf(){return!!Et.MediaSource&&!!Et.MediaSource.isTypeSupported&&Et.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},lf=function lf(){if(this.MediaSource={open:of,supportsNativeMediaSources:uf},uf())return new af;throw new Error("Cannot use create a virtual MediaSource for this video")};lf.open=of,lf.supportsNativeMediaSources=uf;var cf={createObjectURL:function Og(e){var t="blob:vjs-media-source/",n=void 0;return e instanceof af?(n=Et.URL.createObjectURL(e.nativeMediaSource_),e.url_=n):e instanceof af?(n=t+sf,sf++,Ne.mediaSources[n]=e,n):(n=Et.URL.createObjectURL(e),e.url_=n)}};Ne.MediaSource=lf,Ne.URL=cf;var df=Ne.EventTarget,hf=Ne.mergeOptions,ff=function Ig(e,t){for(var s=void 0,o=hf(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),n=0;n<t.playlists.length;n++){var i=gd(o,t.playlists[n]);i?o=i:s=!0}return fd(t,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r=e.playlists[0].uri,a=gd(o,e.playlists[0]);a&&((o=a).mediaGroups[t][n][i].playlists[0]=o.playlists[r],s=!1)}}),s?null:o},pf=function pf(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},mf=function mf(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},gf=function gf(e,t){var n={};for(var i in e){var r=e[i].sidx;if(r){var a=pf(r);if(!t[a])break;var s=t[a].sidxInfo;mf(s,r)&&(n[a]=t[a])}}return n},yf=function yf(e,t,n,i){var r=ul(e,{manifestUri:t,clientOffset:n}),a=gf(r.playlists,i);return fd(r,function(e){if(e.playlists&&e.playlists.length){var t=e.playlists;a=hf(a,gf(t,i))}}),a},vf=function vf(e,t,n,i,r){var a={uri:id(i.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return n(Ne.mergeOptions(a,{responseType:"arraybuffer",headers:Yd(a)}),r)},bf=function(){function d(e,t,n,i){var r=2<arguments.length&&n!==undefined?n:{},a=i;rd(this,d);var s=ud(this,(d.__proto__||Object.getPrototypeOf(d)).call(this)),o=r.withCredentials,u=o!==undefined&&o,l=r.handleManifestRedirects,c=l!==undefined&&l;if(s.hls_=t,s.withCredentials=u,s.handleManifestRedirects=c,!e)throw new Error("A non-empty playlist URL or playlist is required");return s.on("minimumUpdatePeriod",function(){s.refreshXml_()}),s.on("mediaupdatetimeout",function(){s.refreshMedia_(s.media().uri)}),s.state="HAVE_NOTHING",s.loadedPlaylists_={},"string"==typeof e?(s.srcUrl=e,s.sidxMapping_={},ud(s)):(s.setupChildLoader(a,e),s)}return od(d,df),ad(d,[{key:"setupChildLoader",value:function n(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function e(){this.stopRequest(),this.loadedPlaylists_={},Et.clearTimeout(this.minimumUpdatePeriodTimeout_),Et.clearTimeout(this.mediaRequest_),Et.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function t(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function i(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function l(r,a,s,o){var u=this;return function(e,t){if(u.request){if(u.request=null,e)return u.error={status:t.status,message:"DASH playlist request error at URL: "+r.uri,response:t.response,code:2},s&&(u.state=s),u.trigger("error"),o(a,null);var n=new Uint8Array(t.response),i=wl.parseSidx(n.subarray(8));return o(a,i)}}}},{key:"media",value:function o(n){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var e=!this.media_||n.uri!==this.media_.uri;if(e&&this.loadedPlaylists_[n.uri]&&this.loadedPlaylists_[n.uri].endList)return this.state="HAVE_METADATA",this.media_=n,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e)if(this.media_&&this.trigger("mediachanging"),n.sidx){var t=void 0,a=void 0;this.masterPlaylistLoader_?(t=this.masterPlaylistLoader_.master,a=this.masterPlaylistLoader_.sidxMapping_):(t=this.master,a=this.sidxMapping_);var s=pf(n.sidx);a[s]={sidxInfo:n.sidx},this.request=vf(n.sidx,n,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(n,t,r,function(e,t){if(!e||!t)throw new Error("failed to request sidx");a[s].sidx=t,i.haveMetadata({startingState:r,playlist:e.playlists[n.uri]})}))}else this.mediaRequest_=Et.setTimeout(this.haveMetadata.bind(this,{startingState:r,playlist:n}),0)}},{key:"haveMetadata",value:function r(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.uri]=n,this.mediaRequest_=null,this.refreshMedia_(n.uri),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function a(){this.stopRequest(),Et.clearTimeout(this.mediaUpdateTimeout),Et.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function s(e){var t=this;Et.clearTimeout(this.mediaUpdateTimeout),Et.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Et.setTimeout(function(){return t.load()},i)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function u(){var a=ul(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});a.uri=this.srcUrl;for(var e=0;e<a.playlists.length;e++){var t="placeholder-uri-"+e;a.playlists[e].uri=t,a.playlists[t]=a.playlists[e]}return fd(a,function(e,t,n,i){if(e.playlists&&e.playlists.length){var r="placeholder-uri-"+t+"-"+n+"-"+i;e.playlists[0].uri=r,a.playlists[r]=e.playlists[0]}}),yd(a),vd(a),a}},{key:"start",value:function c(){var n=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=Et.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(n.request){if(n.request=null,e)return n.error={status:t.status,message:"DASH playlist request error at URL: "+n.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===n.state&&(n.started=!1),n.trigger("error");n.masterXml_=t.responseText,t.responseHeaders&&t.responseHeaders.date?n.masterLoaded_=Date.parse(t.responseHeaders.date):n.masterLoaded_=Date.now(),n.srcUrl=id(n.handleManifestRedirects,n.srcUrl,t),n.syncClientServerClock_(n.onClientServerClockSync_.bind(n))}})}},{key:"syncClientServerClock_",value:function h(i){var r=this,a=ll(this.masterXml_);return null===a?(this.clientOffset_=this.masterLoaded_-Date.now(),i()):"DIRECT"===a.method?(this.clientOffset_=a.value-Date.now(),i()):void(this.request=this.hls_.xhr({uri:nd(this.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(e,t){if(r.request){if(e)return r.clientOffset_=r.masterLoaded_-Date.now(),i();var n=void 0;n="HEAD"===a.method?t.responseHeaders&&t.responseHeaders.date?Date.parse(t.responseHeaders.date):r.masterLoaded_:Date.parse(t.responseText),r.clientOffset_=n-Date.now(),i()}}))}},{key:"haveMaster_",value:function f(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function p(){var e=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=Et.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function m(){var o=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(o.request){if(o.request=null,e)return o.error={status:t.status,message:"DASH playlist request error at URL: "+o.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===o.state&&(o.started=!1),o.trigger("error");o.masterXml_=t.responseText,o.sidxMapping_=yf(o.masterXml_,o.srcUrl,o.clientOffset_,o.sidxMapping_);var n=o.parseMasterXml(),i=ff(o.master,n),r=o.media().sidx;if(i)if(r){var a=pf(r);if(!o.sidxMapping_[a]){var s=o.media();o.request=vf(s.sidx,s,o.hls_.xhr,{handleManifestRedirects:o.handleManifestRedirects},o.sidxRequestFinished_(s,n,o.state,function(e,t){if(!e||!t)throw new Error("failed to request sidx on minimumUpdatePeriod");o.sidxMapping_[a].sidx=t,o.minimumUpdatePeriodTimeout_=Et.setTimeout(function(){o.trigger("minimumUpdatePeriod")},o.master.minimumUpdatePeriod),o.refreshMedia_(o.media().uri)}))}}else o.master=i;o.minimumUpdatePeriodTimeout_=Et.setTimeout(function(){o.trigger("minimumUpdatePeriod")},o.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function g(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media uri");var n=void 0,i=void 0;this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,i=this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,i=this.parseMasterXml());var r=ff(n,i);r?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=r:this.master=r,this.media_=r.playlists[e]):(this.media_=i.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=Et.setTimeout(function(){t.trigger("mediaupdatetimeout")},bd(this.media(),!!r))),this.trigger("loadedplaylist")}}]),d}(),_f=function _f(e){return Ne.log.debug?Ne.log.debug.bind(Ne,"VHS:",e+" >"):function(){}},Tf=function(){function r(e,t,n,i){rd(this,r),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=n,this.mimeType_=t,this.logger_=_f("SourceUpdater["+n+"]["+t+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,t,i)):this.createSourceBuffer_(t,i)}return ad(r,[{key:"createSourceBuffer_",value:function i(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function e(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.sourceBuffer_.removing=!1,t.logger_("buffered ["+Th(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function n(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function a(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(e.bytes)},function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()})}},{key:"buffered",value:function t(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Ne.createTimeRanges()}},{key:"remove",value:function s(e,t,n){var i=this,r=2<arguments.length&&n!==undefined?n:Xe;this.processedAppend_&&this.queueCallback_(function(){i.logger_("remove ["+e+" => "+t+"]"),i.sourceBuffer_.removing=!0,i.sourceBuffer_.remove(e,t)},r)}},{key:"updating",value:function o(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Xe}},{key:"timestampOffset",value:function u(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function l(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function c(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function d(){var e=this,t=function t(){e.sourceBuffer_&&"open"===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener("updateend",t)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),r}(),Sf={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},wf={FAILURE:2,TIMEOUT:-101,ABORTED:-102},kf=function kf(e){e.forEach(function(e){e.abort()})},Cf=function Cf(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},Ef=function Ef(e){var t=e.target,n=Date.now()-t.requestTime,i={bandwidth:Infinity,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},xf=function xf(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:wf.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:wf.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:wf.FAILURE,xhr:t}:null},Af=function Af(a,s){return function(e,t){var n=t.response,i=xf(e,t);if(i)return s(i,a);if(16!==n.byteLength)return s({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:wf.FAILURE,xhr:t},a);var r=new DataView(n);return a.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),s(null,a)}},Pf=function Pf(r,a,s){return function(e,t){var n=t.response,i=xf(e,t);return i?s(i,r):0===n.byteLength?s({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:wf.FAILURE,xhr:t},r):(r.map.bytes=new Uint8Array(t.response),a&&!a.isInitialized()&&a.init(),r.map.timescales=yl.timescale(r.map.bytes),r.map.videoTrackIds=yl.videoTrackIds(r.map.bytes),s(null,r))}},Of=function Of(a,s,o){return function(e,t){var n=t.response,i=xf(e,t),r=void 0;return i?o(i,a):0===n.byteLength?o({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:wf.FAILURE,xhr:t},a):(a.stats=Cf(t),a.key?a.encryptedBytes=new Uint8Array(t.response):a.bytes=new Uint8Array(t.response),s&&a.map&&a.map.bytes&&(s.isInitialized()||s.init(),(r=s.parse(a.bytes,a.map.videoTrackIds,a.map.timescales))&&r.captions&&(a.captionStreams=r.captionStreams,a.fmp4Captions=r.captions)),o(null,a))}},If=function If(n,i,r){var a=function a(e){if(e.data.source===i.requestId){n.removeEventListener("message",a);var t=e.data.decrypted;return i.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),r(null,i)}};n.addEventListener("message",a);var e=void 0;e=i.key.bytes.slice?i.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.key.bytes)),n.postMessage(Zd({source:i.requestId,encrypted:i.encryptedBytes,key:e,iv:i.key.iv}),[i.encryptedBytes.buffer,e.buffer])},Lf=function Lf(n,i,r){var a=0,s=!1;return function(e,t){if(!s)return e?(s=!0,kf(n),r(e,t)):(a+=1)===n.length?(t.endOfAllRequests=Date.now(),t.encryptedBytes?If(i,t,r):r(null,t)):void 0}},Df=function Df(t,n){return function(e){return t.stats=Ne.mergeOptions(t.stats,Ef(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}},Rf=function Rf(e,t,n,i,r,a,s){var o=[],u=Lf(o,n,s);if(r.key&&!r.key.bytes){var l=e(Ne.mergeOptions(t,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Af(r,u));o.push(l)}if(r.map&&!r.map.bytes){var c=e(Ne.mergeOptions(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Yd(r.map)}),Pf(r,i,u));o.push(c)}var d=e(Ne.mergeOptions(t,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Yd(r)}),Of(r,i,u));return d.addEventListener("progress",Df(r,a)),o.push(d),function(){return kf(o)}},Mf=function Mf(e,t){var n=void 0;return e&&(n=Et.getComputedStyle(e))?n[t]:""},Uf=function Uf(e,i){var r=e.slice();e.sort(function(e,t){var n=i(e,t);return 0===n?r.indexOf(e)-r.indexOf(t):n})},Nf=function Nf(e,t){var n=void 0,i=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Et.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i=i||Et.Number.MAX_VALUE)},jf=function jf(e,t){var n=void 0,i=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Et.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||Et.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},Bf=function Bf(e,t,n,i,r){var a=e.playlists.map(function(e){var t=void 0,n=void 0;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||Et.Number.MAX_VALUE,width:t,height:n,playlist:e}});Uf(a,function(e,t){return e.bandwidth-t.bandwidth});var s=(a=a.filter(function(e){return!Wd.isIncompatible(e.playlist)})).filter(function(e){return Wd.isEnabled(e.playlist)});s.length||(s=a.filter(function(e){return!Wd.isDisabled(e.playlist)}));var o=s.filter(function(e){return e.bandwidth*Sf.BANDWIDTH_VARIANCE<t}),u=o[o.length-1],l=o.filter(function(e){return e.bandwidth===u.bandwidth})[0];if(!1===r){var c=l||s[0]||a[0];return c?c.playlist:null}var d=o.filter(function(e){return e.width&&e.height});Uf(d,function(e,t){return e.width-t.width});var h=d.filter(function(e){return e.width===n&&e.height===i});u=h[h.length-1];var f=h.filter(function(e){
return e.bandwidth===u.bandwidth})[0],p=void 0,m=void 0,g=void 0;f||(m=(p=d.filter(function(e){return e.width>n||e.height>i})).filter(function(e){return e.width===p[0].width&&e.height===p[0].height}),u=m[m.length-1],g=m.filter(function(e){return e.bandwidth===u.bandwidth})[0]);var y=g||f||l||s[0]||a[0];return y?y.playlist:null},Ff=function Ff(){return Bf(this.playlists.master,this.systemBandwidth,parseInt(Mf(this.tech_.el(),"width"),10),parseInt(Mf(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},qf=function qf(e){var t=e.master,n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,u=e.syncController,l=t.playlists.filter(function(e){return!Wd.isIncompatible(e)}),c=l.filter(Wd.isEnabled);c.length||(c=l.filter(function(e){return!Wd.isDisabled(e)}));var d=c.filter(Wd.hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=u.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:Wd.estimateSegmentRequestTime(a,i,e)*t-s}}),h=d.filter(function(e){return e.rebufferingImpact<=0});return Uf(h,function(e,t){return Nf(t.playlist,e.playlist)}),h.length?h[0]:(Uf(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)},Hf=function Hf(){var e=this.playlists.master.playlists.filter(Wd.isEnabled);return Uf(e,function(e,t){return Nf(e,t)}),e.filter(function(e){return qh(e.attributes.CODECS).videoCodec})[0]||null},Vf=function Vf(e,t,n){for(var i in n)if(!e[i]){t.trigger({type:"usage",name:"hls-608"});var r=t.textTracks().getTrackById(i);e[i]=r||t.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}},Wf=function Wf(e){var r=e.inbandTextTracks,t=e.captionArray,a=e.timestampOffset;if(t){var s=window.WebKitDataCue||window.VTTCue;t.forEach(function(e){var t=e.stream,n=e.startTime,i=e.endTime;r[t]&&(n+=a,i+=a,r[t].addCue(new s(n,i,e.text)))})}},zf=500,Gf=function Gf(e,t,n){if(!e||!t)return!1;var i=n===e.segments.length;return e.endList&&"open"===t.readyState&&i},$f=function $f(e){return"number"==typeof e&&isFinite(e)},Xf=function Xf(e,t,n){return"main"===e&&t&&n?n.containsAudio||n.containsVideo?t.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null},Yf=function Yf(e,t,n){var i=void 0;return i=e.length&&0<e.start(0)&&e.start(0)<t?e.start(0):t-30,Math.min(i,t-n)},Kf=function Kf(e){var t=e.segment,n=t.start,i=t.end,r=e.playlist,a=r.mediaSequence,s=r.id,o=r.segments,u=o===undefined?[]:o,l=e.mediaIndex,c=e.timeline;return["appending ["+l+"] of ["+a+", "+(a+u.length)+"] from playlist ["+s+"]","["+n+" => "+i+"] in timeline ["+c+"]"].join(" ")},Qf=function(e){function r(e){rd(this,r);var t=ud(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return t.bandwidth=e.bandwidth,t.throughput={rate:0,count:0},t.roundTrip=NaN,t.resetStats_(),t.mediaIndex=null,t.hasPlayed_=e.hasPlayed,t.currentTime_=e.currentTime,t.seekable_=e.seekable,t.seeking_=e.seeking,t.duration_=e.duration,t.mediaSource_=e.mediaSource,t.hls_=e.hls,t.loaderType_=e.loaderType,t.startingMedia_=void 0,t.segmentMetadataTrack_=e.segmentMetadataTrack,t.goalBufferLength_=e.goalBufferLength,t.sourceType_=e.sourceType,t.inbandTextTracks_=e.inbandTextTracks,t.state_="INIT",t.checkBufferTimeout_=null,t.error_=void 0,t.currentTimeline_=-1,t.pendingSegment_=null,t.mimeType_=null,t.sourceUpdater_=null,t.xhrOptions_=null,t.activeInitSegmentId_=null,t.initSegments_={},t.cacheEncryptionKeys_=e.cacheEncryptionKeys,t.keyCache_={},"main"===t.loaderType_?t.captionParser_=new Yl:t.captionParser_=null,t.decrypter_=e.decrypter,t.syncController_=e.syncController,t.syncPoint_={segmentIndex:0,time:0},t.syncController_.on("syncinfoupdate",function(){return t.trigger("syncinfoupdate")}),t.mediaSource_.addEventListener("sourceopen",function(){return t.ended_=!1}),t.fetchAtBuffer_=!1,t.logger_=_f("SegmentLoader["+t.loaderType_+"]"),Object.defineProperty(t,"state",{get:function n(){return this.state_},set:function i(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),t}return od(r,e),ad(r,[{key:"resetStats_",value:function t(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function n(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function i(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function a(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function s(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function o(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function u(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Ne.createTimeRanges()}},{key:"initSegment",value:function l(e,t){var n=1<arguments.length&&t!==undefined&&t;if(!e)return null;var i=eh(e),r=this.initSegments_[i];return n&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"segmentKey",value:function c(e,t){var n=1<arguments.length&&t!==undefined&&t;if(!e)return null;var i=th(e),r=this.keyCache_[i];this.cacheEncryptionKeys_&&n&&!r&&e.bytes&&(this.keyCache_[i]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var a={resolvedUri:(r||e).resolvedUri};return r&&(a.bytes=r.bytes),a}},{key:"couldBeginLoading_",value:function d(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function h(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function f(){return this.state="READY",this.sourceUpdater_=new Tf(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function p(e,t){var n=1<arguments.length&&t!==undefined?t:{};if(e){var i=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var a=null;if(i&&(i.id?a=i.id:i.uri&&(a=i.uri)),this.logger_("playlist update ["+a+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var s=e.mediaSequence-i.mediaSequence;this.logger_("live window shift ["+s+"]"),null!==this.mediaIndex&&(this.mediaIndex-=s),r&&(r.mediaIndex-=s,0<=r.mediaIndex&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function m(){this.checkBufferTimeout_&&(Et.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function g(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function y(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function v(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function b(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function _(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function T(e,t,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),Ch(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var i in this.inbandTextTracks_)Ch(e,t,this.inbandTextTracks_[i])}},{key:"monitorBuffer_",value:function S(){this.checkBufferTimeout_&&Et.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Et.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function w(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Et.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Et.setTimeout(this.monitorBufferTick_.bind(this),zf)}},{key:"fillBuffer_",value:function k(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function C(e,t){var n=1<arguments.length&&t!==undefined?t:this.playlist_;return Gf(n,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function E(e,t,n,i,r,a){var s=0,o=void 0;e.length&&(s=e.end(e.length-1));var u=Math.max(0,s-r);if(!t.segments.length)return null;if(u>=this.goalBufferLength_())return null;if(!i&&1<=u)return null;if(null===a)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){t.segments[n];return o=s,this.generateSegmentInfo_(t,n+1,o,!1)}if(this.fetchAtBuffer_){var l=Wd.getMediaInfoForTime(t,s,a.segmentIndex,a.time);n=l.mediaIndex,o=l.startTime}else{var c=Wd.getMediaInfoForTime(t,r,a.segmentIndex,a.time);n=c.mediaIndex,o=c.startTime}return this.generateSegmentInfo_(t,n,o,!1)}},{key:"getSyncSegmentCandidate_",value:function x(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function A(e,t,n,i){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function P(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Wd.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=Sh(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var s=qf({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,u=.5;return a<=mh&&(u=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<u?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*Sf.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function O(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function I(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Rf(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function L(){var e=Yf(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<e&&this.remove(0,e)}},{key:"createSimplifiedSegmentObj_",value:function D(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=i}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function R(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===wf.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===wf.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function M(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(Vf(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),Wf({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function U(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,n=t.segment,i=this.syncController_.probeSegmentInfo(t);"undefined"==typeof this.startingMedia_&&i&&(i.containsAudio||i.containsVideo)&&(this.startingMedia_={containsAudio:i.containsAudio,containsVideo:i.containsVideo});var r=Xf(this.loaderType_,this.startingMedia_,i);if(r)return this.error({message:r,blacklistDuration:Infinity}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(i&&i.segmentTimestampInfo){var a=i.segmentTimestampInfo[0].ptsTime,s=i.segmentTimestampInfo[0].dtsTime;t.timestampOffset-=a-s}this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset")}var o=this.syncController_.mappingForTimeline(t.timeline);if(null!==o&&this.trigger({type:"segmenttimemapping",mapping:o}),this.state="APPENDING",n.map){var u=eh(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==u){var l=this.initSegment(n.map);this.sourceUpdater_.appendBuffer({bytes:l.bytes},function(){e.activeInitSegmentId_=u})}}t.byteLength=t.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_(Kf(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function N(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function j(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function B(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function F(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if($f(n)&&$f(i)){Ch(n,i,this.segmentMetadataTrack_);var r=Et.WebKitDataCue||Et.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:i},s=new r(n,i,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),r}(Ne.EventTarget),Jf=function Jf(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Zf=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),ep=function(){function r(e,t){var n=1<arguments.length&&t!==undefined?t:{};rd(this,r);var i=ud(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,n));return i.mediaSource_=null,i.subtitlesTrack_=null,i}return od(r,Qf),ad(r,[{key:"buffered_",value:function i(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Ne.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Ne.createTimeRanges([[t,n]])}},{key:"initSegment",value:function o(e,t){var n=1<arguments.length&&t!==undefined&&t;if(!e)return null;var i=eh(e),r=this.initSegments_[i];if(n&&!r&&e.bytes){var a=Zf.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(Zf,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function t(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function n(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function a(e,t){Ch(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function s(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){var n=function n(){e.state="READY",e.paused()||e.monitorBuffer_()};return this.syncController_.one("timestampoffset",n),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function u(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function l(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,n=e.segment;if("function"!=typeof Et.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var i=void 0,r=function r(){t.subtitlesTrack_.tech_.off("vttjsloaded",i),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")};return i=function i(){t.subtitlesTrack_.tech_.off("vttjserror",r),t.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",r)}n.requested=!0;try{this.parseVTTCues_(e)}catch(Pg){return this.error({message:Pg.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function c(t){var e=void 0,n=!1;"function"==typeof Et.TextDecoder?e=new Et.TextDecoder("utf8"):(e=Et.WebVTT.StringDecoder(),n=!0);var i=new Et.WebVTT.Parser(Et,Et.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){return t.timestampmap=e},i.onparsingerror=function(e){Ne.log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;n&&(r=Jf(r)),i.parse(r)}var a=t.bytes;n&&(a=Jf(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function d(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-i.duration)}}}else i.empty=!0}}]),r}(),tp=function tp(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},np=function np(e,t,n){var i=2<arguments.length&&n!==undefined?n:0;if(e.segments)for(var r=i,a=void 0,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=tp(t,r+o.duration/2)),a){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&((a=new Et.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),t.addCue(a)),"cueOutCont"in o){var u=void 0,l=void 0,c=o.cueOutCont.split("/").map(parseFloat),d=ld(c,2);u=d[0],l=d[1],(a=new Et.VTTCue(r,r+o.duration,"")).adStartTime=r-u,a.adEndTime=a.adStartTime+l,t.addCue(a)}r+=o.duration}},ip=Vc.inspect,rp=[{name:"VOD",run:function Lg(e,t,n){return n===Infinity?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function Lg(e,t,n,i,r){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],s=null,o=null;r=r||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.dateTimeObject){var c=l.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(r-c);if(null!==o&&(0===d||o<d))break;o=d,s={time:c,segmentIndex:u}}}return s}},{name:"Segment",run:function Lg(e,t,n,i,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===i&&"undefined"!=typeof l.start){var c=Math.abs(r-l.start);if(null!==o&&o<c)break;(!s||null===o||c<=o)&&(o=c,s={time:l.start,segmentIndex:u})}}return s}},{name:"Discontinuity",run:function Lg(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,c=e.discontinuities[l];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!a||null===s||d<=s)&&(s=d,a={time:c.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function Lg(e,t){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],ap=function(e){function t(){rd(this,t);var e=ud(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=undefined,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=_f("SyncController"),e}return od(t,e),ad(t,[{key:"getSyncPoint",value:function a(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function r(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<i.segmentIndex&&(i.time*=-1),Math.abs(i.time+Ed(e,i.segmentIndex,0))}},{key:"runStrategies_",value:function u(e,t,n,i){for(var r=[],a=0;a<rp.length;a++){var s=rp[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}))}return r}},{key:"selectSyncPoint_",value:function o(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function s(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var i=e.segments[n];if(i&&"undefined"!=typeof i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function n(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function i(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function l(e){var t=e.segment,n=e.playlist,i=void 0;return(i=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,i)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),i}},{key:"probeMp4Segment_",value:function c(e){var t=e.segment,n=yl.timescale(t.map.bytes),i=yl.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function d(e){var t=ip(e.bytes,this.inspectCache_),n=void 0,i=void 0,r=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime,r=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime,r=t.audio),{segmentTimestampInfo:r,start:n,end:i,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function h(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function f(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function p(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=i,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+i.time+"] [mapping: "+i.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function m(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var u=void 0;u=s<0?n.start-Ed(t,e.mediaIndex,r):n.end+Ed(t,e.mediaIndex+1,r),this.discontinuities[a]={time:u,accuracy:o}}}}}]),t}(Ne.EventTarget),sp=new ze("./decrypter-worker.worker.js",function(){var t=this;!function(){function l(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var d=function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},m=function m(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=void 0,s=void 0,o=void 0,u=[],l=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=l[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*u[d=u[c=u[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*u[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e},h=null,g=function(){function c(e){d(this,c),h||(h=m()),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,s=this._tables[0][4],o=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=u;t<4*u+28;t++)i=r[t-1],(t%u==0||8===u&&t%u==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%u==0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),r[t]=r[t-u]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}return c.prototype.decrypt=function w(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],u=i^s[1],l=n^s[2],c=t^s[3],d=void 0,h=void 0,f=void 0,p=s.length/4-2,m=void 0,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],S=y[4];for(m=0;m<p;m++)d=v[o>>>24]^b[u>>16&255]^_[l>>8&255]^T[255&c]^s[g],h=v[u>>>24]^b[l>>16&255]^_[c>>8&255]^T[255&o]^s[g+1],f=v[l>>>24]^b[c>>16&255]^_[o>>8&255]^T[255&u]^s[g+2],c=v[c>>>24]^b[o>>16&255]^_[u>>8&255]^T[255&l]^s[g+3],g+=4,o=d,u=h,l=f;for(m=0;m<4;m++)r[(3&-m)+a]=S[o>>>24]<<24^S[u>>16&255]<<16^S[l>>8&255]<<8^S[255&c]^s[g++],d=o,o=u,u=l,l=c,c=d},c}(),s=function(){function e(){d(this,e),this.listeners={}}return e.prototype.on=function n(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function i(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n},e.prototype.trigger=function u(e,t){var n=this.listeners[e];if(n)if(2===arguments.length)for(var i=n.length,r=0;r<i;++r)n[r].call(this,t);else for(var a=Array.prototype.slice.call(arguments,1),s=n.length,o=0;o<s;++o)n[o].apply(this,a)},e.prototype.dispose=function t(){this.listeners={}},e.prototype.pipe=function r(t){this.on("data",function(e){t.push(e)})},e}(),c=function(t){function n(){d(this,n);var e=a(this,t.call(this,s));return e.jobs=[],e.delay=1,e.timeout_=null,e}return r(n,t),n.prototype.processJob_=function e(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function i(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(s),y=function y(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},v=function v(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new g(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=void 0,
u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0;for(o=n[0],u=n[1],l=n[2],c=n[3],m=0;m<i.length;m+=4)d=y(i[m]),h=y(i[m+1]),f=y(i[m+2]),p=y(i[m+3]),r.decrypt(d,h,f,p,s,m),s[m]=y(s[m]^o),s[m+1]=y(s[m+1]^u),s[m+2]=y(s[m+2]^l),s[m+3]=y(s[m+3]^c),o=d,u=h,l=f,c=p;return a},o=function(){function u(e,t,n,i){d(this,u);var r=u.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new c,this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([y(a[o-4]),y(a[o-3]),y(a[o-2]),y(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){i(null,l(s))})}return u.prototype.decryptChunk_=function e(t,n,i,r){return function(){var e=v(t,n,i);r.set(e,t.byteOffset)}},n(u,null,[{key:"STEP",get:function t(){return 32e3}}]),u}(),u=function u(n){var i={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i},e=function e(a){a.onmessage=function(e){var n=e.data,t=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),r=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new o(t,i,r,function(e,t){a.postMessage(u({source:n.source,decrypted:t}),[t.buffer])})}};new e(t)}()}),op=function op(e){var t=e["default"]?"main":"alternative";return e.characteristics&&0<=e.characteristics.indexOf("public.accessibility.describes-video")&&(t="main-desc"),t},up=function up(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},lp=function lp(e,t){(t.activePlaylistLoader=e).load()},cp=function cp(o,u){return function(){var e=u.segmentLoaders,t=e[o],n=e.main,i=u.mediaTypes[o],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;up(t,i),a&&(a.playlistLoader?(t.resyncLoader(),lp(a.playlistLoader,i)):s&&n.resetEverything())}},dp=function dp(o,u){return function(){var e=u.segmentLoaders,t=e[o],n=e.main,i=u.mediaTypes[o],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;up(t,i),a&&(a.playlistLoader?(s!==a.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),lp(a.playlistLoader,i)):n.resetEverything())}},hp={AUDIO:function Dg(u,l){return function(){var e=l.segmentLoaders[u],t=l.mediaTypes[u],n=l.blacklistCurrentPlaylist;up(e,t);var i=t.activeTrack(),r=t.activeGroup(),a=(r.filter(function(e){return e["default"]})[0]||r[0]).id,s=t.tracks[a];if(i!==s){for(var o in Ne.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[o].enabled=t.tracks[o]===s;t.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function Rg(i,r){return function(){var e=r.segmentLoaders[i],t=r.mediaTypes[i];Ne.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),up(e,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}},fp={AUDIO:function Dg(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",hp[e](e,n))}},SUBTITLES:function Rg(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",hp[e](e,n))}},pp={AUDIO:function Dg(e,t){var n=t.hls,i=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],u=o.groups,l=o.tracks,c=t.masterPlaylistLoader;for(var d in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{"default":{"default":!0}}}),s[e])for(var h in u[d]||(u[d]=[]),s[e][d]){var f=s[e][d][h],p=void 0;if(p=f.resolvedUri?new _d(f.resolvedUri,n,a):f.playlists&&"dash"===i?new bf(f.playlists[0],n,a,c):null,f=Ne.mergeOptions({id:h,playlistLoader:p},f),fp[e](e,f.playlistLoader,t),u[d].push(f),"undefined"==typeof l[h]){var m=new Ne.AudioTrack({id:h,kind:op(f),enabled:!1,language:f.language,"default":f["default"],label:h});l[h]=m}}r.on("error",hp[e](e,t))},SUBTITLES:function Rg(e,t){var n=t.tech,i=t.hls,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,u=t.mediaTypes[e],l=u.groups,c=u.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var f in l[h]||(l[h]=[]),o[e][h])if(!o[e][h][f].forced){var p=o[e][h][f],m=void 0;if("hls"===r?m=new _d(p.resolvedUri,i,s):"dash"===r&&(m=new bf(p.playlists[0],i,s,d)),p=Ne.mergeOptions({id:f,playlistLoader:m},p),fp[e](e,p.playlistLoader,t),l[h].push(p),"undefined"==typeof c[f]){var g=n.addRemoteTextTrack({id:f,kind:"subtitles","default":p["default"]&&p.autoselect,language:p.language,label:f},!1).track;c[f]=g}}a.on("error",hp[e](e,t))},"CLOSED-CAPTIONS":function Mg(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var u in a[o]||(a[o]=[]),i[e][o]){var l=i[e][o][u];if(l.instreamId.match(/CC\d/)&&(a[o].push(Ne.mergeOptions({id:u},l)),"undefined"==typeof s[u])){var c=n.addRemoteTextTrack({id:l.instreamId,kind:"captions","default":l["default"]&&l.autoselect,language:l.language,label:u},!1).track;s[u]=c}}}},mp=function mp(a,s){return function(t){var e=s.masterPlaylistLoader,n=s.mediaTypes[a].groups,i=e.media();if(!i)return null;var r=null;return i.attributes[a]&&(r=n[i.attributes[a]]),r=r||n.main,void 0===t?r:null===t?null:r.filter(function(e){return e.id===t.id})[0]||null}},gp={AUDIO:function Dg(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function Rg(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}},yp=function yp(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){pp[e](e,t)});var n=t.mediaTypes,e=t.masterPlaylistLoader,i=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){n[e].activeGroup=mp(e,t),n[e].activeTrack=gp[e](e,t),n[e].onGroupChanged=cp(e,t),n[e].onTrackChanged=dp(e,t)});var a=n.AUDIO.activeGroup(),s=(a.filter(function(e){return e["default"]})[0]||a[0]).id;n.AUDIO.tracks[s].enabled=!0,n.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return n[e].onGroupChanged()})});var o=function o(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};for(var u in i.audioTracks().addEventListener("change",o),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",function(){i.audioTracks().removeEventListener("change",o),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[u])},vp=function vp(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Xe,activeTrack:Xe,onGroupChanged:Xe,onTrackChanged:Xe}}),t},bp=120,_p=void 0,Tp=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],Sp=function Sp(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},wp=function(e){function _(e){rd(this,_);var t=ud(this,(_.__proto__||Object.getPrototypeOf(_)).call(this)),n=e.url,i=e.handleManifestRedirects,r=e.withCredentials,a=e.tech,s=e.bandwidth,o=e.externHls,u=e.useCueTags,l=e.blacklistDuration,c=e.enableLowInitialPlaylist,d=e.sourceType,h=e.seekTo,f=e.cacheEncryptionKeys;if(!n)throw new Error("A non-empty playlist URL is required");_p=o,t.withCredentials=r,t.tech_=a,t.hls_=a.hls,t.seekTo_=h,t.sourceType_=d,t.useCueTags_=u,t.blacklistDuration=l,t.enableLowInitialPlaylist=c,t.useCueTags_&&(t.cueTagsTrack_=t.tech_.addTextTrack("metadata","ad-cues"),t.cueTagsTrack_.inBandMetadataTrackDispatchType=""),t.requestOptions_={withCredentials:r,handleManifestRedirects:i,timeout:null},t.mediaTypes_=vp(),t.mediaSource=new Ne.MediaSource,t.mediaSource.addEventListener("sourceopen",t.handleSourceOpen_.bind(t)),t.seekable_=Ne.createTimeRanges(),t.hasPlayed_=function(){return!1},t.syncController_=new ap(e),t.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,t.decrypter_=new sp,t.inbandTextTracks_={};var p={hls:t.hls_,mediaSource:t.mediaSource,currentTime:t.tech_.currentTime.bind(t.tech_),seekable:function m(){return t.seekable()},seeking:function g(){return t.tech_.seeking()},duration:function y(){return t.mediaSource.duration},hasPlayed:function v(){return t.hasPlayed_()},goalBufferLength:function b(){return t.goalBufferLength()},bandwidth:s,syncController:t.syncController_,decrypter:t.decrypter_,sourceType:t.sourceType_,inbandTextTracks:t.inbandTextTracks_,cacheEncryptionKeys:f};return t.masterPlaylistLoader_="dash"===t.sourceType_?new bf(n,t.hls_,t.requestOptions_):new _d(n,t.hls_,t.requestOptions_),t.setupMasterPlaylistLoaderListeners_(),t.mainSegmentLoader_=new Qf(Ne.mergeOptions(p,{segmentMetadataTrack:t.segmentMetadataTrack_,loaderType:"main"}),e),t.audioSegmentLoader_=new Qf(Ne.mergeOptions(p,{loaderType:"audio"}),e),t.subtitleSegmentLoader_=new ep(Ne.mergeOptions(p,{loaderType:"vtt"}),e),t.setupSegmentLoaderListeners_(),Tp.forEach(function(e){t[e+"_"]=Sp.bind(t,e)}),t.logger_=_f("MPC"),t.masterPlaylistLoader_.load(),t}return od(_,e),ad(_,[{key:"setupMasterPlaylistLoaderListeners_",value:function t(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=r.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;Vd(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=t,e.endList&&"none"!==r.tech_.preload()&&(r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.mainSegmentLoader_.load()),yp({sourceType:r.sourceType_,segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,hls:r.hls_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),e);try{r.setupSourceBuffers_()}catch(Pg){return Ne.log.warn("Failed to create SourceBuffers",Pg),r.mediaSource.endOfStream("decode")}r.setupFirstPlay(),!r.mediaTypes_.AUDIO.activePlaylistLoader||r.mediaTypes_.AUDIO.activePlaylistLoader.media()?r.trigger("selectedinitialmedia"):r.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){r.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=r.masterPlaylistLoader_.media();if(!e){r.excludeUnsupportedVariants_();var t=void 0;return r.enableLowInitialPlaylist&&(t=r.selectInitialPlaylist()),t||(t=r.selectPlaylist()),r.initialMedia_=t,void r.masterPlaylistLoader_.media(r.initialMedia_)}if(r.useCueTags_&&r.updateAdCues_(e),r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.updateDuration(),r.tech_.paused()||(r.mainSegmentLoader_.load(),r.audioSegmentLoader_&&r.audioSegmentLoader_.load()),!e.endList){var n=function n(){var e=r.seekable();0!==e.length&&r.mediaSource.addSeekableRange_(e.start(0),e.end(0))};if(r.duration()!==Infinity){var i=function i(){r.duration()===Infinity?n():r.tech_.one("durationchange",i)};r.tech_.one("durationchange",i)}else n()}}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=r.masterPlaylistLoader_.media(),t=1.5*e.targetDuration*1e3;Vd(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=t,r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=r.masterPlaylistLoader_.media();r.stuckAtPlaylistEnd_(e)&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),r.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function o(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a]){n.AUDIO[a][s].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),_p.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),_p.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(n.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function n(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist(),t=a.masterPlaylistLoader_.media(),n=a.tech_.buffered(),i=n.length?n.end(n.length-1)-a.tech_.currentTime():0,r=a.bufferLowWaterLine();(!t.endList||a.duration()<Sf.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r<=i)&&a.masterPlaylistLoader_.media(e),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},bp)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function i(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function r(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function a(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function s(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything(function(){Ne.browser.IE_VERSION||Ne.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))}},{key:"play",value:function u(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===Infinity&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function l(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Ne.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function c(){try{this.setupSourceBuffers_()}catch(Pg){return Ne.log.warn("Failed to create Source Buffers",Pg),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function d(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(Pg){Ne.log.warn("Failed to call media source endOfStream",Pg)}}}},{key:"stuckAtPlaylistEnd_",value:function h(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=_p.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=gh;var a=r.end(r.length-1);return a-i<=gh&&n-a<=gh}},{key:"blacklistCurrentPlaylist",value:function f(e,t){var n=0<arguments.length&&e!==undefined?e:{},i=t,r=void 0,a=void 0;if(r=n.playlist||this.masterPlaylistLoader_.media(),i=i||n.blacklistDuration||this.blacklistDuration,!r){this.error=n;try{return this.mediaSource.endOfStream("network")}catch(Pg){return this.trigger("error")}}var s=1===this.masterPlaylistLoader_.master.playlists.filter(Nd).length,o=this.masterPlaylistLoader_.master.playlists;return 1===o.length?(Ne.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s)):(s&&(Ne.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),o.forEach(function(e){e.excludeUntil!==Infinity&&delete e.excludeUntil}),this.tech_.trigger("retryplaylist")),r.excludeUntil=Date.now()+1e3*i,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),a=this.selectPlaylist(),Ne.log.warn("Problem encountered with the current HLS playlist."+(n.message?" "+n.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(a,s))}},{key:"pauseLoading",value:function p(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function m(e){var t=vh(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function g(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:_p.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function y(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function v(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==i&&0!==(e=_p.Playlist.seekable(n,i)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=_p.Playlist.seekable(n,i)).length)return}var r=void 0,a=void 0;this.seekable_&&this.seekable_.length&&(r=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Ne.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===r&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+Th(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function b(){var e=this,t=this.mediaSource.duration,n=_p.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function r(){e.logger_("Setting duration from "+e.mediaSource.duration+" => "+n);try{e.mediaSource.duration=n}catch(Pg){Ne.log.warn("Failed to set media source duration",Pg)}e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",r)};0<i.length&&(n=Math.max(n,i.end(i.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function T(){var i=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=i.mediaTypes_[e].groups;for(var n in t)t[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function S(){return this.masterPlaylistLoader_.master}},{key:"media",value:function w(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function k(){var e=this.masterPlaylistLoader_.media(),t=void 0;if(e&&"open"===this.mediaSource.readyState){if((t=$h(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function C(e){var t=1<e.length&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Ne.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function E(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&Et.MediaSource&&Et.MediaSource.isTypeSupported&&!Et.MediaSource.isTypeSupported('video/mp4; codecs="'+Hh(e.attributes.CODECS)+'"')&&(e.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function x(e){var n=2,i=null,t=void 0;e.attributes.CODECS&&(t=qh(e.attributes.CODECS),i=t.videoCodec,n=t.codecCount),this.master().playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};e.attributes.CODECS&&(t=qh(e.attributes.CODECS)),t.codecCount!==n&&(e.excludeUntil=Infinity),t.videoCodec!==i&&(e.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function A(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),np(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function P(){var e=this.tech_.currentTime(),t=Sf.GOAL_BUFFER_LENGTH,n=Sf.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Sf.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function O(){var e=this.tech_.currentTime(),t=Sf.BUFFER_LOW_WATER_LINE,n=Sf.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,Sf.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,i)}}]),_}(Ne.EventTarget),kp=function kp(r,a,s){return function(e){var t=r.master.playlists[a],n=Ud(t),i=Nd(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)}},Cp=function Cp(e,t,n){rd(this,Cp);var i=e.masterPlaylistController_,r=i[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(i);if(t.attributes.RESOLUTION){var a=t.attributes.RESOLUTION;this.width=a.width,this.height=a.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=n,this.enabled=kp(e.playlists,t.uri,r)},Ep=function Ep(t){var e=t.playlists;t.representations=function(){return e.master.playlists.filter(function(e){return!Ud(e)}).map(function(e){return new Cp(t,e,e.uri)})}},xp=["seeking","seeked","pause","playing","error"],Ap=function(){function s(e){var t=this;rd(this,s),this.tech_=e.tech,this.seekable=e.seekable,this.seekTo=e.seekTo,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=_f("PlaybackWatcher"),this.logger_("initialize");var n=function n(){return t.monitorCurrentTime_()},i=function i(){return t.techWaiting_()},r=function r(){return t.cancelTimer_()},a=function a(){return t.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(xp,r),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",i),t.tech_.off(xp,r),t.tech_.off("canplay",n),t.checkCurrentTimeTimeout_&&Et.clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}return ad(s,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Et.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Et.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function n(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+gh>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function t(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function i(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1));this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+gh);return void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+Th(e)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function r(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=vh(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function o(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=bh(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function u(e,t,n,i){var r=3<arguments.length&&i!==undefined&&i;if(!e.length)return!1;var a=e.end(e.length-1)+gh;return!n.endList&&r&&(a=e.end(e.length-1)+3*n.targetDuration),a<t}},{key:"beforeSeekableWindow_",value:function a(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-gh)}},{key:"videoUnderflow_",value:function l(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function c(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=bh(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.seekTo(i.start(0)+mh),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function d(e,t){for(var n=_h(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null}}]),s}(),Pp={errorInterval:30,getSource:function Ug(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Op=function Op(t,e){var n=0,i=0,r=Ne.mergeOptions(Pp,e);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function a(){i&&t.currentTime(i)},s=function s(e){null!==e&&e!==undefined&&(i=t.duration()!==Infinity&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},o=function o(){if(Date.now()-n<1e3*r.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return n=Date.now(),r.getSource.call(t,s);Ne.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function u(){t.off("loadedmetadata",a),t.off("error",o),t.off("dispose",u)},l=function l(e){u(),Op(t,e)};t.on("error",o),t.on("dispose",u),t.reloadSourceOnError=l},Ip=function Ip(e){Op(this,e)},Lp="1.10.6";Ne.use("*",function(t){return{setSource:function n(e,t){t(null,e)},setCurrentTime:function i(e){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(e),e},play:function e(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.tech_.currentTime())}}});var Dp={PlaylistLoader:_d,Playlist:Wd,Decrypter:td,AsyncStream:Jc,decrypt:ed,utils:ah,STANDARD_PLAYLIST_SELECTOR:Ff,INITIAL_PLAYLIST_SELECTOR:Hf,comparePlaylistBandwidth:Nf,comparePlaylistResolution:jf,xhr:$d()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(Dp,t,{get:function e(){return Ne.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Sf[t]},set:function n(e){Ne.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?Ne.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Sf[t]=e}})});var Rp="videojs-vhs",Mp=function Mp(e){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)?"hls":/^application\/dash\+xml/i.test(e)?"dash":null},Up=function Up(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.uri){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},Np=function Np(t,e){e.representations().forEach(function(e){t.addQualityLevel(e)}),Up(t,e.playlists)};Dp.canPlaySource=function(){return Ne.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var jp,Bp=function Bp(e,t,n){if(!e)return e;var i={};for(var r in e)i[r]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[r]&&t.contentProtection[r].pssh&&(i[r].pssh=t.contentProtection[r].pssh),"string"==typeof e[r]&&(i[r].url=e[r]);return Ne.mergeOptions(e,i)},Fp=function Fp(e){if("dash"===e.options_.sourceType){var t=Ne.players[e.tech_.options_.playerId];if(t.eme){var n=Bp(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(t.currentSource().keySystems=n,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}},qp=function qp(){if(!window.localStorage)return null;var e=window.localStorage.getItem(Rp);if(!e)return null;try{return JSON.parse(e)}catch(Pg){return null}},Hp=function Hp(e){
if(!window.localStorage)return!1;var t=qp();t=t?Ne.mergeOptions(t,e):e;try{window.localStorage.setItem(Rp,JSON.stringify(t))}catch(Pg){return!1}return t};Dp.supportsNativeHls=(jp=xt.createElement("video"),!!Ne.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(jp.canPlayType(e))})),Dp.supportsNativeDash=!!Ne.getTech("Html5").isSupported()&&/maybe|probably/i.test(xt.createElement("video").canPlayType("application/dash+xml")),Dp.supportsTypeNatively=function(e){return"hls"===e?Dp.supportsNativeHls:"dash"===e&&Dp.supportsNativeDash},Dp.isSupported=function(){return Ne.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Vp=Ne.getComponent("Component"),Wp=function(){function s(e,t,n){rd(this,s);var i=ud(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,t,n.hls));if(t.options_&&t.options_.playerId){var r=Ne(t.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function a(){return Ne.log.warn("player.hls is deprecated. Use player.tech().hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),i},configurable:!0}),r.vhs=i,(r.dash=i).player_=r}if(i.tech_=t,i.source_=e,i.stats={},i.setOptions_(),i.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(xt,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var e=xt.fullscreenElement||xt.webkitFullscreenElement||xt.mozFullScreenElement||xt.msFullscreenElement;e&&e.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()}),i.on(i.tech_,"seeking",function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),i.on(i.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),i.on(i.tech_,"play",i.play),i}return od(s,Vp),ad(s,[{key:"setOptions_",value:function n(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!=typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=qp();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Sf.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Sf.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach(function(e){"undefined"!=typeof t.source_[e]&&(t.options_[e]=t.source_[e])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function o(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Dp,this.options_.sourceType=Mp(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e),n.setCurrentTime(e)},this.masterPlaylistController_=new wp(this.options_),this.playbackWatcher_=new Ap(Ne.mergeOptions(this.options_,{seekable:function i(){return n.seekable()},media:function r(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",function(){Ne.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Dp.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Dp.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function a(){return this.masterPlaylistController_.selectPlaylist},set:function s(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function a(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function s(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function a(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function s(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function a(){var e=1/(this.bandwidth||1),t=void 0;return t=0<this.throughput?1/this.throughput:0,Math.floor(1/(e+t))},set:function s(){Ne.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function a(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function a(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function a(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function a(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function a(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function a(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function a(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function a(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function a(){return wh(n.tech_.buffered())},enumerable:!0},currentTime:{get:function a(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function a(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function a(){return n.tech_.name_},enumerable:!0},duration:{get:function a(){return n.tech_.duration()},enumerable:!0},master:{get:function a(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function a(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function a(){return wh(n.tech_.seekable())},enumerable:!0},timestamp:{get:function a(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function a(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){n.options_.useBandwidthFromLocalStorage&&Hp({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){Ep(n),Fp(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Ne.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function i(){var e=this,t=Ne.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Np(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Up(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function e(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function t(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function r(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function a(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function u(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,sd(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function l(e,t){return fh({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function c(e,t,n,i){var r=!(2<arguments.length&&n!==undefined)||n,a=3<arguments.length&&i!==undefined?i:2;return ph({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:a,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),s}(),zp={name:"videojs-http-streaming",VERSION:Lp,canHandleSource:function Ng(e,t){var n=1<arguments.length&&t!==undefined?t:{},i=Ne.mergeOptions(Ne.options,n);return zp.canPlayType(e.type,i)},handleSource:function jg(e,t,n){var i=2<arguments.length&&n!==undefined?n:{},r=Ne.mergeOptions(Ne.options,i);return t.hls=new Wp(e,t,r),t.hls.xhr=$d(),t.hls.src(e.src,e.type),t.hls},canPlayType:function xo(e,t){var n=1<arguments.length&&t!==undefined?t:{},i=Ne.mergeOptions(Ne.options,n).hls.overrideNative,r=Mp(e);return r&&(!Dp.supportsTypeNatively(r)||i)?"maybe":""}};return"undefined"!=typeof Ne.MediaSource&&"undefined"!=typeof Ne.URL||(Ne.MediaSource=lf,Ne.URL=cf),lf.supportsNativeMediaSources()&&Ne.getTech("Html5").registerSourceHandler(zp,0),Ne.HlsHandler=Wp,Ne.HlsSourceHandler=zp,Ne.Hls=Dp,Ne.use||Ne.registerComponent("Hls",Dp),Ne.options.hls=Ne.options.hls||{},Ne.registerPlugin?Ne.registerPlugin("reloadSourceOnError",Ip):Ne.plugin("reloadSourceOnError",Ip),Ne}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsContribHls=e()}}(function(){var o;return function Q(a,s,o){function u(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);var i=new Error("Cannot find module '"+n+"'");throw i.code="MODULE_NOT_FOUND",i}var r=s[n]={exports:{}};a[n][0].call(r.exports,function(e){var t=a[n][1][e];return u(t||e)},r,r.exports,Q,a,s,o)}return s[n].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)u(o[e]);return u}({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var h=function(){function n(e,t){var n=[],i=!0,r=!1,a=undefined;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=i(e("global/window")),p=function p(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},m=function m(e,t,n){var i=arguments.length<=2||n===undefined?0:arguments[2];if(e.segments)for(var r=i,a=undefined,s=0;s<e.segments.length;s++){var o=e.segments[s];if(a||(a=p(t,r+o.duration/2)),a){if("cueIn"in o){a.endTime=r,a.adEndTime=r,r+=o.duration,a=null;continue}if(r<a.endTime){r+=o.duration;continue}a.endTime+=o.duration}else if("cueOut"in o&&((a=new f["default"].VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,a.adEndTime=r+parseFloat(o.cueOut),t.addCue(a)),"cueOutCont"in o){var u=undefined,l=undefined,c=o.cueOutCont.split("/").map(parseFloat),d=h(c,2);u=d[0],l=d[1],(a=new f["default"].VTTCue(r,r+o.duration,"")).adStartTime=r-u,a.adEndTime=a.adStartTime+l,t.addCue(a)}r+=o.duration}};n["default"]={updateAdCues:m,findAdCue:p},t.exports=n["default"]},{"global/window":32}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function i(e,t){return e.start(t)+"-"+e.end(t)},a=function a(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},s=function s(e){return 32<=e&&e<126?String.fromCharCode(e):"."},r=function r(n){var i={};return Object.keys(n).forEach(function(e){var t=n[e];ArrayBuffer.isView(t)?i[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:i[e]=t}),i},o=function o(e){var t=e.byterange||{length:Infinity,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},u={hexDump:function l(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=(undefined,undefined,0);r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(a).join("")+" "+t.slice(r*n,r*n+n).map(s).join("")+"\n";return i},tagDump:function c(e){return u.hexDump(e.bytes)},textRanges:function d(e){var t="",n=undefined;for(n=0;n<e.length;n++)t+=i(e,n)+" ";return t},createTransferableMessage:r,initSegmentId:o};n["default"]=u,t.exports=n["default"]},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},t.exports=n["default"]},{}],4:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(e("global/window")),s=e("aes-decrypter"),o=e("./bin-utils"),r=function r(e){e.onmessage=function(e){var n=e.data,t=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),r=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new s.Decrypter(t,i,r,function(e,t){a["default"].postMessage((0,o.createTransferableMessage)({source:n.source,decrypted:t}),[t.buffer])})}};n["default"]=function(e){return new r(e)},t.exports=n["default"]},{"./bin-utils":2,"aes-decrypter":25,"global/window":32}],5:[function(r,e,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var P=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),O=function c(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},I=t(r("./playlist-loader")),L=r("./playlist.js"),D=t(r("./segment-loader")),R=t(r("./vtt-segment-loader")),M=t(r("./ranges")),U=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),N=t(r("./ad-cue-tags")),j=t(r("./sync-controller")),n=r("videojs-contrib-media-sources/es5/codec-utils"),B=t(r("webwackify")),F=t(r("./decrypter-worker")),q=t(r("./config")),H=r("./util/codecs.js"),V=r("./media-groups"),W=120,z=undefined,f={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},G=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],$=function $(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},X=function X(){var e=undefined;try{e=r.resolve("./decrypter-worker")}catch(Q){}return e},Y=function Y(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return(0,n.translateLegacyCodecs)([e])[0]})};a.mapLegacyAvcCodecs_=Y;var p=function p(e,t,n){return e+"/"+t+'; codecs="'+n.filter(function(e){return!!e}).join(", ")+'"'},m=function m(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"},g=function g(e){var t=e.attributes||{};return t.CODECS?(0,H.parseCodecs)(t.CODECS):f},K=function K(e,t){var n=m(t),i=g(t),r=t.attributes||{},a=!0,s=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&r.AUDIO){var o=e.mediaGroups.AUDIO[r.AUDIO];if(o)for(var u in a=!(s=!0),o)if(!o[u].uri){a=!0;break}}s&&!i.audioProfile&&(U["default"].log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),i.audioProfile=f.audioProfile);var l={};i.videoCodec&&(l.video=""+i.videoCodec+i.videoObjectTypeIndicator),i.audioProfile&&(l.audio="mp4a.40."+i.audioProfile);var c=p("audio",n,[l.audio]),d=p("video",n,[l.video]),h=p("video",n,[l.video,l.audio]);return s?!a&&l.video?[d,c]:[h,c]:l.video?[h]:[c]};a.mimeTypesForPlaylist_=K;var i=function(){function v(e){var t=this;x(this,v),O(Object.getPrototypeOf(v.prototype),"constructor",this).call(this);var n=e.url,i=e.handleManifestRedirects,r=e.withCredentials,a=e.mode,s=e.tech,o=e.bandwidth,u=e.externHls,l=e.useCueTags,c=e.blacklistDuration,d=e.enableLowInitialPlaylist;if(!n)throw new Error("A non-empty playlist URL is required");z=u,this.tech_=s,this.hls_=s.hls,this.mode_=a,this.useCueTags_=l,this.blacklistDuration=c,this.enableLowInitialPlaylist=d,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,handleManifestRedirects:i,timeout:null},this.mediaTypes_=(0,V.createMediaTypes)(),this.mediaSource=new U["default"].MediaSource({mode:a}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=U["default"].createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new j["default"](e),this.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=(0,B["default"])(F["default"],X());var h={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function f(){return t.seekable()},seeking:function p(){return t.tech_.seeking()},duration:function m(){return t.mediaSource.duration},hasPlayed:function g(){return t.hasPlayed_()},goalBufferLength:function y(){return t.goalBufferLength()},bandwidth:o,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new I["default"](n,this.hls_,this.requestOptions_),this.setupMasterPlaylistLoaderListeners_(),this.mainSegmentLoader_=new D["default"](U["default"].mergeOptions(h,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),e),this.audioSegmentLoader_=new D["default"](U["default"].mergeOptions(h,{loaderType:"audio"}),e),this.subtitleSegmentLoader_=new R["default"](U["default"].mergeOptions(h,{loaderType:"vtt"}),e),this.setupSegmentLoaderListeners_(),G.forEach(function(e){t[e+"_"]=$.bind(t,e)}),this.masterPlaylistLoader_.load()}return A(v,U["default"].EventTarget),P(v,[{key:"setupMasterPlaylistLoaderListeners_",value:function e(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=r.masterPlaylistLoader_.media(),t=1.5*r.masterPlaylistLoader_.targetDuration*1e3;(0,L.isLowestEnabledRendition)(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=t,e.endList&&"none"!==r.tech_.preload()&&(r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.mainSegmentLoader_.load()),(0,V.setupMediaGroups)({segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,mode:r.mode_,hls:r.hls_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),e);try{r.setupSourceBuffers_()}catch(Q){return U["default"].log.warn("Failed to create SourceBuffers",Q),r.mediaSource.endOfStream("decode")}r.setupFirstPlay(),r.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e,t,n=r.masterPlaylistLoader_.media();if(!n){var i=undefined;return r.enableLowInitialPlaylist&&(i=r.selectInitialPlaylist()),i||(i=r.selectPlaylist()),r.initialMedia_=i,void r.masterPlaylistLoader_.media(r.initialMedia_)}r.useCueTags_&&r.updateAdCues_(n),r.mainSegmentLoader_.playlist(n,r.requestOptions_),r.updateDuration(),r.tech_.paused()||r.mainSegmentLoader_.load(),n.endList||(t=function t(){var e=r.seekable();0!==e.length&&r.mediaSource.addSeekableRange_(e.start(0),e.end(0))},r.duration()!==Infinity?(e=function e(){r.duration()===Infinity?t():r.tech_.one("durationchange",e)},r.tech_.one("durationchange",e)):t())}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=r.masterPlaylistLoader_.media(),t=1.5*r.masterPlaylistLoader_.targetDuration*1e3;(0,L.isLowestEnabledRendition)(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=t,r.mainSegmentLoader_.playlist(e,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=r.masterPlaylistLoader_.media();r.stuckAtPlaylistEnd_(e)&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),r.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function o(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a]){n.AUDIO[a][s].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),z.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),z.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.length&&1<Object.keys(n.AUDIO[r[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function t(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=a.selectPlaylist(),t=a.masterPlaylistLoader_.media(),n=a.tech_.buffered(),i=n.length?n.end(n.length-1)-a.tech_.currentTime():0,r=a.bufferLowWaterLine();(!t.endList||a.duration()<q["default"].MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<t.attributes.BANDWIDTH||r<=i)&&a.masterPlaylistLoader_.media(e),a.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},W)}),this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function n(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function i(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function r(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function a(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===Infinity&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function s(){var e,t=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_())return!1;if(!n.endList){var i=(e=t.seekable()).length?U["default"].browser.IE_VERSION&&"html5"===t.mode_&&0===t.tech_.readyState()?(t.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(e.end(0)),t.hasPlayed_=function(){return!0}}),{v:!1}):(t.trigger("firstplay"),void t.tech_.setCurrentTime(e.end(0))):{v:!1};if("object"==typeof i)return i.v}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function u(){try{this.setupSourceBuffers_()}catch(Q){return U["default"].log.warn("Failed to create Source Buffers",Q),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function l(){var e=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=e&&this.audioSegmentLoader_.ended_),e&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function c(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=z.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=M["default"].SAFE_TIME_DELTA;var a=r.end(r.length-1);return a-i<=M["default"].SAFE_TIME_DELTA&&n-a<=M["default"].SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function d(e,t){e===undefined&&(e={});var n=undefined,i=undefined;if(n=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!n){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(Q){return this.trigger("error")}}var r=1===this.masterPlaylistLoader_.master.playlists.filter(L.isEnabled).length;return r?(U["default"].log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(r)):(n.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),i=this.selectPlaylist(),U["default"].log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(i))}},{key:"pauseLoading",value:function h(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function f(e){var t=M["default"].findRange(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length&&"flash"!==this.mode_?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function p(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:z.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function m(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function g(){var e=undefined,t=undefined;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var i=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==i&&0!==(e=z.Playlist.seekable(n,i)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(i=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=z.Playlist.seekable(n,i)).length)return}t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=U["default"].createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function y(){var e=this,t=this.mediaSource.duration,n=z.Playlist.duration(this.masterPlaylistLoader_.media()),i=this.tech_.buffered(),r=function r(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",r)};0<i.length&&(n=Math.max(n,i.end(i.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",r):r())}},{key:"dispose",value:function b(){var i=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var t=i.mediaTypes_[e].groups;for(var n in t)t[n].forEach(function(e){e.playlistLoader&&e.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function _(){return this.masterPlaylistLoader_.master}},{key:"media",value:function T(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function S(){var e=this.masterPlaylistLoader_.media(),t=undefined;if(e&&"open"===this.mediaSource.readyState){if((t=K(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(t[0]),t[1]&&this.audioSegmentLoader_.mimeType(t[1]),this.excludeIncompatibleVariants_(e)}}},{key:"excludeIncompatibleVariants_",value:function w(e){var t=this.masterPlaylistLoader_.master,i=2,r=null,n=undefined;e.attributes.CODECS&&(n=(0,H.parseCodecs)(e.attributes.CODECS),r=n.videoCodec,i=n.codecCount),t.playlists.forEach(function(e){var t={codecCount:2,videoCodec:null};if(e.attributes.CODECS){var n=e.attributes.CODECS;t=(0,H.parseCodecs)(n),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+Y(n)+'"')&&(e.excludeUntil=Infinity)}t.codecCount!==i&&(e.excludeUntil=Infinity),t.videoCodec!==r&&(e.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function k(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),N["default"].updateAdCues(e,
this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function C(){var e=this.tech_.currentTime(),t=q["default"].GOAL_BUFFER_LENGTH,n=q["default"].GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,q["default"].MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)}},{key:"bufferLowWaterLine",value:function E(){var e=this.tech_.currentTime(),t=q["default"].BUFFER_LOW_WATER_LINE,n=q["default"].BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,q["default"].MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,i)}}]),v}();a.MasterPlaylistController=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad-cue-tags":1,"./config":3,"./decrypter-worker":4,"./media-groups":6,"./playlist-loader":9,"./playlist.js":11,"./ranges":12,"./segment-loader":16,"./sync-controller":18,"./util/codecs.js":19,"./vtt-segment-loader":20,"videojs-contrib-media-sources/es5/codec-utils":65,webwackify:76}],6:[function(r,e,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var m=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),g=t(r("./playlist-loader")),n=function n(){},y=function y(e){var t=e["default"]?"main":"alternative";return e.characteristics&&0<=e.characteristics.indexOf("public.accessibility.describes-video")&&(t="main-desc"),t},c=function c(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)};a.stopLoaders=c;var l=function l(e,t){(t.activePlaylistLoader=e).load()};a.startLoaders=l;var d=function d(o,u){return function(){var e=u.segmentLoaders,t=e[o],n=e.main,i=u.mediaTypes[o],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;c(t,i),a&&(a.playlistLoader?(t.resyncLoader(),l(a.playlistLoader,i)):s&&n.resetEverything())}};a.onGroupChanged=d;var h=function h(o,u){return function(){var e=u.segmentLoaders,t=e[o],n=e.main,i=u.mediaTypes[o],r=i.activeTrack(),a=i.activeGroup(r),s=i.activePlaylistLoader;c(t,i),a&&(a.playlistLoader?(s!==a.playlistLoader&&(t.track&&t.track(r),t.resetEverything()),l(a.playlistLoader,i)):n.resetEverything())}};a.onTrackChanged=h;var v={AUDIO:function S(u,l){return function(){var e=l.segmentLoaders[u],t=l.mediaTypes[u],n=l.blacklistCurrentPlaylist;c(e,t);var i=t.activeTrack(),r=t.activeGroup(),a=(r.filter(function(e){return e["default"]})[0]||r[0]).id,s=t.tracks[a];if(i!==s){for(var o in m["default"].log.warn("Problem encountered loading the alternate audio track.Switching back to default."),t.tracks)t.tracks[o].enabled=t.tracks[o]===s;t.onTrackChanged()}else n({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function w(i,r){return function(){var e=r.segmentLoaders[i],t=r.mediaTypes[i];m["default"].log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),c(e,t);var n=t.activeTrack();n&&(n.mode="disabled"),t.onTrackChanged()}}};a.onError=v;var b={AUDIO:function S(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",v[e](e,n))}},SUBTITLES:function w(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",function(){var e=t.media();a.playlist(e,r),a.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),r),i.paused()||a.load()}),t.on("error",v[e](e,n))}};a.setupListeners=b;var f={AUDIO:function S(e,t){var n=t.mode,i=t.hls,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],u=o.groups,l=o.tracks;for(var c in s[e]&&0!==Object.keys(s[e]).length&&"html5"===n||(s[e]={main:{"default":{"default":!0}}}),s[e])for(var d in u[c]||(u[c]=[]),s[e][c]){var h=s[e][c][d],f=undefined;if(f=h.resolvedUri?new g["default"](h.resolvedUri,i,a):null,h=m["default"].mergeOptions({id:d,playlistLoader:f},h),b[e](e,h.playlistLoader,t),u[c].push(h),"undefined"==typeof l[d]){var p=new m["default"].AudioTrack({id:d,kind:y(h),enabled:!1,language:h.language,"default":h["default"],label:d});l[d]=p}}r.on("error",v[e](e,t))},SUBTITLES:function w(e,t){var n=t.tech,i=t.hls,r=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],u=o.groups,l=o.tracks;for(var c in s[e])for(var d in u[c]||(u[c]=[]),s[e][c])if(!s[e][c][d].forced){var h=s[e][c][d];if(h=m["default"].mergeOptions({id:d,playlistLoader:new g["default"](h.resolvedUri,i,a)},h),b[e](e,h.playlistLoader,t),u[c].push(h),"undefined"==typeof l[d]){var f=n.addRemoteTextTrack({id:d,kind:"subtitles",enabled:!1,language:h.language,label:d},!1).track;l[d]=f}}r.on("error",v[e](e,t))},"CLOSED-CAPTIONS":function k(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var u in a[o]||(a[o]=[]),i[e][o]){var l=i[e][o][u];if(l.instreamId.match(/CC\d/)&&(a[o].push(m["default"].mergeOptions({id:u},l)),"undefined"==typeof s[u])){var c=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",enabled:!1,language:l.language,label:u},!1).track;s[u]=c}}}};a.initialize=f;var p=function p(a,s){return function(t){var e=s.masterPlaylistLoader,n=s.mediaTypes[a].groups,i=e.media();if(!i)return null;var r=null;return i.attributes[a]&&(r=n[i.attributes[a]]),r=r||n.main,void 0===t?r:null===t?null:r.filter(function(e){return e.id===t.id})[0]||null}};a.activeGroup=p;var _={AUDIO:function S(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if(e[t].enabled)return e[t];return null}},SUBTITLES:function w(n,i){return function(){var e=i.mediaTypes[n].tracks;for(var t in e)if("showing"===e[t].mode)return e[t];return null}}};a.activeTrack=_;var T=function T(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){f[e](e,t)});var n=t.mediaTypes,e=t.masterPlaylistLoader,i=t.tech,r=t.hls;["AUDIO","SUBTITLES"].forEach(function(e){n[e].activeGroup=p(e,t),n[e].activeTrack=_[e](e,t),n[e].onGroupChanged=d(e,t),n[e].onTrackChanged=h(e,t)});var a=n.AUDIO.activeGroup(),s=(a.filter(function(e){return e["default"]})[0]||a[0]).id;n.AUDIO.tracks[s].enabled=!0,n.AUDIO.onTrackChanged(),e.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return n[e].onGroupChanged()})});var o=function o(){n.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"hls-audio-change"})};for(var u in i.audioTracks().addEventListener("change",o),i.remoteTextTracks().addEventListener("change",n.SUBTITLES.onTrackChanged),r.on("dispose",function(){i.audioTracks().removeEventListener("change",o),i.remoteTextTracks().removeEventListener("change",n.SUBTITLES.onTrackChanged)}),i.clearTracks("audio"),n.AUDIO.tracks)i.audioTracks().addTrack(n.AUDIO.tracks[u])};a.setupMediaGroups=T;var i=function i(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:n,activeTrack:n,onGroupChanged:n,onTrackChanged:n}}),t};a.createMediaTypes=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist-loader":9}],7:[function(i,e,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var d=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),s=i("./bin-utils"),o={FAILURE:2,TIMEOUT:-101,ABORTED:-102};a.REQUEST_ERRORS=o;var n=function n(e){undefined;var t=undefined;return t=e.offset+e.length-1,"bytes="+e.offset+"-"+t},h=function h(e){var t={};return e.byterange&&(t.Range=n(e.byterange)),t},f=function f(e){e.forEach(function(e){e.abort()})},u=function u(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},r=function r(e){var t=e.target,n=Date.now()-t.requestTime,i={bandwidth:Infinity,bytesReceived:0,roundTripTime:n||0};return i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3),i},l=function l(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:o.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:o.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:o.FAILURE,xhr:t}:null},p=function p(a,s){return function(e,t){var n=t.response,i=l(e,t);if(i)return s(i,a);if(16!==n.byteLength)return s({status:t.status,message:"Invalid HLS key at URL: "+t.uri,code:o.FAILURE,xhr:t},a);var r=new DataView(n);return a.key.bytes=new Uint32Array([r.getUint32(0),r.getUint32(4),r.getUint32(8),r.getUint32(12)]),s(null,a)}},m=function m(r,a){return function(e,t){var n=t.response,i=l(e,t);return i?a(i,r):0===n.byteLength?a({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:o.FAILURE,xhr:t},r):(r.map.bytes=new Uint8Array(t.response),a(null,r))}},g=function g(r,a){return function(e,t){var n=t.response,i=l(e,t);return i?a(i,r):0===n.byteLength?a({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:o.FAILURE,xhr:t},r):(r.stats=u(t),r.key?r.encryptedBytes=new Uint8Array(t.response):r.bytes=new Uint8Array(t.response),a(null,r))}},c=function c(n,i,r){var a=function a(e){if(e.data.source===i.requestId){n.removeEventListener("message",a);var t=e.data.decrypted;return i.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),r(null,i)}};n.addEventListener("message",a),n.postMessage((0,s.createTransferableMessage)({source:i.requestId,encrypted:i.encryptedBytes,key:i.key.bytes,iv:i.key.iv}),[i.encryptedBytes.buffer,i.key.bytes.buffer])},y=function y(e){return e.reduce(function(e,t){return t.code>e.code?t:e})},v=function v(i,r,a){var s=[],o=0;return function(e,t){if(e&&(f(i),s.push(e)),(o+=1)===i.length){if(t.endOfAllRequests=Date.now(),0<s.length){var n=y(s);return a(n,t)}return t.encryptedBytes?c(r,t,a):a(null,t)}}},b=function b(t,n){return function(e){return t.stats=d["default"].mergeOptions(t.stats,r(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}},_=function _(e,t,n,i,r,a){var s=[],o=v(s,n,a);if(i.key){var u=e(d["default"].mergeOptions(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),p(i,o));s.push(u)}if(i.map&&!i.map.bytes){var l=e(d["default"].mergeOptions(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:h(i.map)}),m(i,o));s.push(l)}var c=e(d["default"].mergeOptions(t,{uri:i.resolvedUri,responseType:"arraybuffer",headers:h(i)}),g(i,o));return c.addEventListener("progress",b(i,r)),s.push(c),function(){return f(s)}};a.mediaSegmentRequest=_}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2}],8:[function(i,r,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var p=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),m=t(i("global/window")),g=t(i("./ranges")),y=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),v=["seeking","seeked","pause","playing","error"],n=function(){function s(e){var t=this;f(this,s),this.tech_=e.tech,this.seekable=e.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,e.debug&&(this.logger_=y["default"].log.bind(y["default"],"playback-watcher ->")),this.logger_("initialize");var n=function n(){return t.monitorCurrentTime_()},i=function i(){return t.techWaiting_()},r=function r(){return t.cancelTimer_()},a=function a(){return t.fixesBadSeeks_()};this.tech_.on("seekablechanged",a),this.tech_.on("waiting",i),this.tech_.on(v,r),this.tech_.on("canplay",n),this.dispose=function(){t.logger_("dispose"),t.tech_.off("seekablechanged",a),t.tech_.off("waiting",i),t.tech_.off(v,r),t.tech_.off("canplay",n),t.checkCurrentTimeTimeout_&&m["default"].clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}return p(s,[{key:"monitorCurrentTime_",value:function e(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&m["default"].clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=m["default"].setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function n(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+g["default"].SAFE_TIME_DELTA>=t.end(t.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function t(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function r(){var e=this.tech_.seeking(),t=this.seekable(),n=this.tech_.currentTime(),i=undefined;e&&this.afterSeekableWindow_(t,n)&&(i=t.end(t.length-1));e&&this.beforeSeekableWindow_(t,n)&&(i=t.start(0)+g["default"].SAFE_TIME_DELTA);return void 0!==i&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+g["default"].printableRange(t)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0)}},{key:"waiting_",value:function i(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=g["default"].findRange(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function o(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.buffered(),r=g["default"].findNextRange(i,t);if(this.videoUnderflow_(r,i,t))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<r.length){var a=r.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+r.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function a(e,t){return!!e.length&&t>e.end(e.length-1)+g["default"].SAFE_TIME_DELTA}},{key:"beforeSeekableWindow_",value:function u(e,t){return!!(e.length&&0<e.start(0)&&t<e.start(0)-g["default"].SAFE_TIME_DELTA)}},{key:"videoUnderflow_",value:function l(e,t,n){if(0===e.length){var i=this.gapFromVideoUnderflow_(t,n);if(i)return this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function c(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=g["default"].findNextRange(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+g["default"].TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function d(e,t){for(var n=g["default"].findGaps(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&2<t-r)return{start:r,end:a}}return null}},{key:"logger_",value:function h(){}}]),s}();a["default"]=n,r.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":12,"global/window":32}],9:[function(i,e,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var h=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),f=function S(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},p=t(i("./resolve-url")),m="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,g=t(i("m3u8-parser")),y=t(i("global/window")),s=function s(e,t,n){var i=t.slice();n=n||0;for(var r=Math.min(e.length,t.length+n),a=n;a<r;a++)i[a-n]=(0,m.mergeOptions)(e[a],i[a-n]);return i};r.updateSegments=s;var o=function o(e,t){e.resolvedUri||(e.resolvedUri=(0,p["default"])(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=(0,p["default"])(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=(0,p["default"])(t,e.map.uri))};r.resolveSegmentUris=o;var v=function v(e,t){var n=(0,m.mergeOptions)(e,{}),i=n.playlists.filter(function(e){return e.uri===t.uri})[0];if(!i)return null;if(i.segments&&t.segments&&i.segments.length===t.segments.length&&i.mediaSequence===t.mediaSequence)return null;var r=(0,m.mergeOptions)(i,t);i.segments&&(r.segments=s(i.segments,t.segments,t.mediaSequence-i.mediaSequence)),r.segments.forEach(function(e){o(e,r.resolvedUri)});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=r);return n.playlists[t.uri]=r,n};r.updateMaster=v;var b=function b(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];(e.playlists[n.uri]=n).resolvedUri=(0,p["default"])(e.uri,n.uri),n.attributes||(n.attributes={},m.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};r.setupMediaPlaylists=b;var _=function _(r){["AUDIO","SUBTITLES"].forEach(function(e){for(var t in r.mediaGroups[e])for(var n in r.mediaGroups[e][t]){var i=r.mediaGroups[e][t][n];i.uri&&(i.resolvedUri=(0,p["default"])(r.uri,i.uri))}})};r.resolveMediaGroupUris=_;var T=function T(e,t){var n=e.segments[e.segments.length-1];undefined;return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)};r.refreshDelay=T;var n=function(){function r(e,t,n){var i=this;if(c(this,r),f(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),n=n||{},this.srcUrl=e,this.hls_=t,this.withCredentials=!!n.withCredentials,this.handleManifestRedirects=!!n.handleManifestRedirects,!this.srcUrl)throw new Error("A non-empty playlist URL is required");this.state="HAVE_NOTHING",this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:(0,p["default"])(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(e){if(i.request)return e?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))})}return d(r,m.EventTarget),h(r,[{key:"playlistRequestError",value:function i(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t,responseText:e.responseText,code:500<=e.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function a(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var i=new g["default"].Parser;i.push(e.responseText),i.end(),i.manifest.uri=t,i.manifest.attributes=i.manifest.attributes||{};var r=v(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,r?(this.master=r,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(y["default"].clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=y["default"].setTimeout(function(){n.trigger("mediaupdatetimeout")},T(this.media(),!!r))),this.trigger("loadedplaylist")}},{key:"dispose",value:function e(){this.stopRequest(),y["default"].clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function t(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function s(n){var i=this;if(!n)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var r=this.state;if("string"==typeof n){if(!this.master.playlists[n])throw new Error("Unknown playlist URI: "+n);n=this.master.playlists[n]}var e=!this.media_||n.uri!==this.media_.uri;if(this.master.playlists[n.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=n,void(e&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(e){if(this.state="SWITCHING_MEDIA",this.request){if(n.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:n.resolvedUri,withCredentials:this.withCredentials},function(e,t){if(i.request){if(n.resolvedUri=i.resolveManifestRedirect(n.resolvedUri,t),e)return i.playlistRequestError(i.request,n.uri,r);i.haveMetadata(t,n.uri),"HAVE_MASTER"===r?i.trigger("loadedmetadata"):i.trigger("mediachange")}})}}},{key:"resolveManifestRedirect",value:function n(e,t){return this.handleManifestRedirects&&t.responseURL&&e!==t.responseURL?t.responseURL:e}},{key:"pause",value:function o(){this.stopRequest(),y["default"].clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function u(e){var t=this;y["default"].clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=y["default"].setTimeout(function(){return t.load()},i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function l(){var i=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,t){if(i.request){if(i.request=null,e)return i.error={status:t.status,message:"HLS playlist request error at URL: "+i.srcUrl,responseText:t.responseText,code:2},"HAVE_NOTHING"===i.state&&(i.started=!1),i.trigger("error");var n=new g["default"].Parser;return n.push(t.responseText),n.end(),i.state="HAVE_MASTER",i.srcUrl=i.resolveManifestRedirect(i.srcUrl,t),n.manifest.uri=i.srcUrl,n.manifest.playlists?(i.master=n.manifest,b(i.master),_(i.master),i.trigger("loadedplaylist"),void(i.request||i.media(n.manifest.playlists[0]))):(i.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:y["default"].location.href,playlists:[{uri:i.srcUrl,resolvedUri:i.srcUrl,attributes:{}}]},i.master.playlists[i.srcUrl]=i.master.playlists[0],i.haveMetadata(t,i.srcUrl),i.trigger("loadedmetadata"))}})}}]),r}();r["default"]=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./resolve-url":15,"global/window":32,"m3u8-parser":33}],10:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var g=i(e("./config")),y=i(e("./playlist")),r=e("./util/codecs.js"),a=function a(e,t){var n=undefined;return e&&(n=window.getComputedStyle(e))?n[t]:""},v=function v(e,i){var r=e.slice();e.sort(function(e,t){var n=i(e,t);return 0===n?r.indexOf(e)-r.indexOf(t):n})},f=function f(e,t){var n=undefined,i=undefined;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||window.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i=i||window.Number.MAX_VALUE)};n.comparePlaylistBandwidth=f;var s=function s(e,t){var n=undefined,i=undefined;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||window.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||window.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i};n.comparePlaylistResolution=s;var b=function b(e,t,n,i){var r=e.playlists.map(function(e){var t=undefined,n=undefined;undefined;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t,height:n,playlist:e}});v(r,function(e,t){return e.bandwidth-t.bandwidth});var a=(r=r.filter(function(e){return!y["default"].isIncompatible(e.playlist)})).filter(function(e){return y["default"].isEnabled(e.playlist)});a.length||(a=r.filter(function(e){return!y["default"].isDisabled(e.playlist)}));var s=a.filter(function(e){return e.bandwidth*g["default"].BANDWIDTH_VARIANCE<t}),o=s[s.length-1],u=s.filter(function(e){return e.bandwidth===o.bandwidth})[0],l=s.filter(function(e){return e.width&&e.height});v(l,function(e,t){return e.width-t.width});var c=l.filter(function(e){return e.width===n&&e.height===i});o=c[c.length-1];var d=c.filter(function(e){return e.bandwidth===o.bandwidth})[0],h=undefined,f=undefined,p=undefined;d||(f=(h=l.filter(function(e){return e.width>n||e.height>i})).filter(function(e){return e.width===h[0].width&&e.height===h[0].height}),o=f[f.length-1],p=f.filter(function(e){return e.bandwidth===o.bandwidth})[0]);var m=p||d||u||a[0]||r[0];return m?m.playlist:null};n.simpleSelector=b;var o=function o(){return b(this.playlists.master,this.systemBandwidth,parseInt(a(this.tech_.el(),"width"),10),parseInt(a(this.tech_.el(),"height"),10))};n.lastBandwidthSelector=o;var u=function u(e){var t=-1;if(e<0||1<e)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){return t<0&&(t=this.systemBandwidth),t=e*this.systemBandwidth+(1-e)*t,b(this.playlists.master,t,parseInt(a(this.tech_.el(),"width"),10),parseInt(a(this.tech_.el(),"height"),10))}};n.movingAverageBandwidthSelector=u;var p=function p(e){var t=e.master,n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,u=e.syncController,l=t.playlists.filter(function(e){return!y["default"].isIncompatible(e)}),c=l.filter(y["default"].isEnabled);c.length||(c=l.filter(function(e){return!y["default"].isDisabled(e)}));var d=c.filter(y["default"].hasAttribute.bind(null,"BANDWIDTH")).map(function(e){var t=u.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:y["default"].estimateSegmentRequestTime(a,i,e)*t-s}}),h=d.filter(function(e){return e.rebufferingImpact<=0});return v(h,function(e,t){return f(t.playlist,e.playlist)}),h.length?h[0]:(v(d,function(e,t){return e.rebufferingImpact-t.rebufferingImpact}),d[0]||null)};n.minRebufferMaxBandwidthSelector=p;var l=function l(){var e=this.playlists.master.playlists.filter(y["default"].isEnabled);return v(e,function(e,t){return f(e,t)}),e.filter(function(e){return(0,r.parseCodecs)(e.attributes.CODECS).videoCodec})[0]||null};n.lowestBitrateCompatibleVariantSelector=l},{"./config":3,"./playlist":11,"./util/codecs.js":19}],11:[function(E,e,x){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(x,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,i=t(E("global/window")),a=function a(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if("undefined"!=typeof r.start)return{result:r.start,precise:!0};if("undefined"!=typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if("undefined"!=typeof(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,"undefined"!=typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}},s=function s(e,t){for(var n=0,i=undefined,r=t-e.mediaSequence;r<e.segments.length;r++){if("undefined"!=typeof(i=e.segments[r]).start)return{result:i.start-n,precise:!0};if(n+=i.duration,"undefined"!=typeof i.end)return{result:i.end-n,precise:!0}}return{result:-1,precise:!1}},o=function o(e,t,n){var i=undefined,r=undefined;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(i=a(e,t)).precise?i.result:(r=s(e,t)).precise?r.result:i.result+n},u=function u(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i["default"].Infinity}return o(e,t,n)};x.duration=u;var l=function l(e,t,n){var i=0;if(n<t){var r=[n,t];t=r[0],n=r[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)i+=e.targetDuration;t=0}for(a=t;a<n;a++)i+=e.segments[a].duration;return i};x.sumDurations=l;var c=function c(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,i=n+2*e.targetDuration;t--&&!(i<=(n+=e.segments[t].duration)););return Math.max(0,t)};x.safeLiveIndex=c;var d=function d(e,t,n){if(!e||!e.segments)return null;if(e.endList)return u(e);if(null===t)return null;t=t||0;var i=n?c(e):e.segments.length;return o(e,e.mediaSequence+i,t)};x.playlistEnd=d;var h=function h(e,t){var n=t||0,i=d(e,t,!0);return null===i?(0,r.createTimeRange)():(0,r.createTimeRange)(n,i)};x.seekable=h;var f=function f(e){return e-Math.floor(e)==0},p=function p(e,t){if(f(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,i=1;i<=n;i++){var r=Math.pow(10,i),a=t*r;if(f(a)||i===n)return(a+e)/r}},m=p.bind(null,1),g=p.bind(null,-1),y=function y(e,t,n,i){var r=undefined,a=undefined,s=e.segments.length,o=t-i;if(o<0){if(0<n)for(r=n-1;0<=r;r--)if(a=e.segments[r],0<(o+=g(a.duration)))return{mediaIndex:r,startTime:i-l(e,n,r)};return{mediaIndex:0,startTime:t}}if(n<0){for(r=n;r<0;r++)if((o-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(r=n;r<s;r++)if(a=e.segments[r],(o-=m(a.duration))<0)return{mediaIndex:r,startTime:i+l(e,n,r)};return{mediaIndex:s-1,startTime:t}};x.getMediaInfoForTime=y;var n=function n(e){return e.excludeUntil&&e.excludeUntil>Date.now()};x.isBlacklisted=n;var v=function v(e){return e.excludeUntil&&e.excludeUntil===Infinity};x.isIncompatible=v;var b=function b(e){var t=n(e);return!e.disabled&&!t};x.isEnabled=b;var _=function _(e){return e.disabled};x.isDisabled=_;var T=function T(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1};x.isAes=T;var S=function S(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1};x.isFmp4=S;var w=function w(e,t){return t.attributes&&t.attributes[e]};x.hasAttribute=w;var k=function k(e,t,n,i){var r=arguments.length<=3||i===undefined?0:arguments[3];return w("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN};x.estimateSegmentRequestTime=k;var C=function C(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter(function(e){return!!b(e)&&(e.attributes.BANDWIDTH||0)<n}).length};x.isLowestEnabledRendition=C,x["default"]={duration:u,seekable:h,safeLiveIndex:c,getMediaInfoForTime:y,isEnabled:b,isDisabled:_,isBlacklisted:n,isIncompatible:v,playlistEnd:d,isAes:T,isFmp4:S,hasAttribute:w,estimateSegmentRequestTime:k,isLowestEnabledRendition:C}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":32}],12:[function(e,y,v){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(v,"__esModule",{value:!0});var a=function(){function n(e,t){var n=[],i=!0,r=!1,a=undefined;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0
);}catch(u){r=!0,a=u}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),i=1/30,n=3*i,l=function l(e,t){var n=a(t,2),i=n[0],r=n[1];return Math.min(Math.max(i,e),r)},r=function r(e,t){var n=[],i=undefined;if(e&&e.length)for(i=0;i<e.length;i++)t(e.start(i),e.end(i))&&n.push([e.start(i),e.end(i)]);return u["default"].createTimeRanges(n)},s=function s(e,n){return r(e,function(e,t){return e-i<=n&&n<=t+i})},o=function o(e,t){return r(e,function(e){return t<=e-i})},c=function c(e){if(e.length<2)return u["default"].createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return u["default"].createTimeRanges(t)},d=function d(e,t){var n=undefined,i=undefined,r=undefined,a=[],s=[],o=function o(e){return e[0]<=r&&e[1]>=r};if(e)for(n=0;n<e.length;n++)i=e.start(n),r=e.end(n),s.push([i,r]);if(t)for(n=0;n<t.length;n++)i=t.start(n),r=t.end(n),s.some(o)||a.push(r);return 1!==a.length?null:a[0]},h=function h(e,t){var n=null,i=null,r=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return u["default"].createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort(function(e,t){return e.time-t.time}),o=0;o<a.length;o++)"start"===a[o].type?2===++r&&(n=a[o].time):"end"===a[o].type&&1===--r&&(i=a[o].time),null!==n&&null!==i&&(s.push([n,i]),i=n=null);return u["default"].createTimeRanges(s)},f=function f(e,t,n,i){for(var r=t.end(0)-t.start(0),a=r-(e.end(0)-e.start(0)),s=h(e,i),o=h(t,i),u=0,l=0,c=s.length;c--;)u+=s.end(c)-s.start(c),s.start(c)===n&&(u+=a);for(c=o.length;c--;)l+=o.end(c)-o.start(c);return Math.max(u,l)/r*100},p=function p(e,t,n,i){var r=e+t,a=u["default"].createTimeRanges([[e,r]]),s=u["default"].createTimeRanges([[l(e,[n,r]),r]]);if(s.start(0)===s.end(0))return 0;var o=f(s,a,n,i);return isNaN(o)||o===Infinity||o===-Infinity?0:o},m=function m(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},g=function g(e,t,n){var i=arguments.length<=2||n===undefined?1:arguments[2];return((e.length?e.end(e.length-1):0)-t)/i};v["default"]={findRange:s,findNextRange:o,findGaps:c,findSoleUncommonTimeRangesEnd:d,getSegmentBufferedPercent:p,TIME_FUDGE_FACTOR:i,SAFE_TIME_DELTA:n,printableRange:m,timeUntilRebuffer:g},y.exports=v["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,r,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(a,"__esModule",{value:!0});var c=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),d={errorInterval:30,getSource:function i(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},h=function h(t,e){var n=0,i=0,r=c["default"].mergeOptions(d,e);t.ready(function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function a(){i&&t.currentTime(i)},s=function s(e){null!==e&&e!==undefined&&(i=t.duration()!==Infinity&&t.currentTime()||0,t.one("loadedmetadata",a),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},o=function o(){if(Date.now()-n<1e3*r.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return n=Date.now(),r.getSource.call(t,s);c["default"].log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function u(){t.off("loadedmetadata",a),t.off("error",o),t.off("dispose",u)},l=function l(e){u(),h(t,e)};t.on("error",o),t.on("dispose",u),t.reloadSourceOnError=l},n=function n(e){h(this,e)};a["default"]=n,r.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=e("./playlist.js"),u=function u(r,a,s){return function(e){var t=r.master.playlists[a],n=(0,o.isIncompatible)(t),i=(0,o.isEnabled)(t);return void 0===e?i:(e?delete t.disabled:t.disabled=!0,e===i||n||(s(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)}},s=function s(e,t,n){a(this,s);var i=e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(t.attributes.RESOLUTION){var r=t.attributes.RESOLUTION;this.width=r.width,this.height=r.height}this.bandwidth=t.attributes.BANDWIDTH,this.id=n,this.enabled=u(e.playlists,t.uri,i)},i=function i(t){var e=t.playlists;t.representations=function(){return e.master.playlists.filter(function(e){return!(0,o.isIncompatible)(e)}).map(function(e){return new s(t,e,e.uri)})}};n["default"]=i,t.exports=n["default"]},{"./playlist.js":11}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(e("url-toolkit")),a=i(e("global/window")),s=function s(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=r["default"].buildAbsoluteURL(a["default"].location.href,e)),r["default"].buildAbsoluteURL(e,t))};n["default"]=s,t.exports=n["default"]},{"global/window":32,"url-toolkit":63}],16:[function(i,e,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var F=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),q=function c(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},H=t(i("./playlist")),V=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),W=t(i("./source-updater")),z=t(i("./config")),G=t(i("global/window")),$=t(i("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),X=i("./bin-utils"),Y=i("./media-segment-request"),K=i("./ranges"),Q=i("./playlist-selectors"),J=500,Z=function Z(e,t,n){if(!e||!t)return!1;var i=n===e.segments.length;return e.endList&&"open"===t.readyState&&i},ee=function ee(e){return"number"==typeof e&&isFinite(e)},te=function te(e,t,n){return"main"===e&&t&&n?n.containsAudio||n.containsVideo?t.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};r.illegalMediaSwitch=te;var ne=function ne(e,t,n){var i=undefined;return i=e.length&&0<e.start(0)&&e.start(0)<t?e.start(0):t-30,Math.min(i,t-n)};r.safeBackBufferTrimTime=ne;var n=function(){function r(e,t){var n=this,i=arguments.length<=1||t===undefined?{}:arguments[1];if(j(this,r),q(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT",this.bandwidth=e.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=e.hasPlayed,this.currentTime_=e.currentTime,this.seekable_=e.seekable,this.seeking_=e.seeking,this.duration_=e.duration,this.mediaSource_=e.mediaSource,this.hls_=e.hls,this.loaderType_=e.loaderType,this.startingMedia_=void 0,this.segmentMetadataTrack_=e.segmentMetadataTrack,this.goalBufferLength_=e.goalBufferLength,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=e.decrypter,this.syncController_=e.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return n.trigger("syncinfoupdate")}),this.mediaSource_.addEventListener("sourceopen",function(){return n.ended_=!1}),this.fetchAtBuffer_=!1,i.debug&&(this.logger_=V["default"].log.bind(V["default"],"segment-loader",this.loaderType_,"->"))}return B(r,V["default"].EventTarget),F(r,[{key:"resetStats_",value:function e(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function t(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function n(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function i(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function a(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function s(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function o(){return this.sourceUpdater_?this.sourceUpdater_.buffered():V["default"].createTimeRanges()}},{key:"initSegment",value:function u(e,t){var n=!(arguments.length<=1||t===undefined)&&arguments[1];if(!e)return null;var i=(0,X.initSegmentId)(e),r=this.initSegments_[i];return n&&!r&&e.bytes&&(this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes}),r||e}},{key:"couldBeginLoading_",value:function l(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function c(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function d(){return this.state="READY",this.sourceUpdater_=new W["default"](this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function h(e,t){var n=arguments.length<=1||t===undefined?{}:arguments[1];if(e){var i=this.playlist_,r=this.pendingSegment_;if(this.playlist_=e,this.xhrOptions_=n,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0}),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(i&&i.uri===e.uri){var a=e.mediaSequence-i.mediaSequence;this.logger_("mediaSequenceDiff",a),null!==this.mediaIndex&&(this.mediaIndex-=a),r&&(r.mediaIndex-=a,0<=r.mediaIndex&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function f(){this.checkBufferTimeout_&&(G["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function p(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function m(e){this.mimeType_||(this.mimeType_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function g(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")}},{key:"resetLoader",value:function y(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function v(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function b(e,t){this.sourceUpdater_&&this.sourceUpdater_.remove(e,t),(0,$["default"])(e,t,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function _(){this.checkBufferTimeout_&&G["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=G["default"].setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function T(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&G["default"].clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=G["default"].setTimeout(this.monitorBufferTick_.bind(this),J)}},{key:"fillBuffer_",value:function S(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e)Z(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment),this.loadSegment_(e))}}},{key:"checkBuffer_",value:function w(e,t,n,i,r,a){var s=0,o=undefined;e.length&&(s=e.end(e.length-1));var u,l=Math.max(0,s-r);if(!t.segments.length)return null;if(l>=this.goalBufferLength_())return null;if(!i&&1<=l)return null;if(this.logger_("checkBuffer_","mediaIndex:",n,"hasPlayed:",i,"currentTime:",r,"syncPoint:",a,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",l),null===a)return n=this.getSyncSegmentCandidate_(t),this.logger_("getSync","mediaIndex:",n),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){this.logger_("walkForward","mediaIndex:",n+1);var c=t.segments[n];return o=c&&c.end?c.end:s,this.generateSegmentInfo_(t,n+1,o,!1)}this.fetchAtBuffer_?(n=(u=H["default"].getMediaInfoForTime(t,s,a.segmentIndex,a.time)).mediaIndex,o=u.startTime):(n=(u=H["default"].getMediaInfoForTime(t,r,a.segmentIndex,a.time)).mediaIndex,o=u.startTime);return this.logger_("getMediaIndexForTime","mediaIndex:",n,"startOfSegment:",o),this.generateSegmentInfo_(t,n,o,!1)}},{key:"getSyncSegmentCandidate_",value:function k(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===t.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function C(e,t,n,i){if(t<0||t>=e.segments.length)return null;var r=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:r.resolvedUri,mediaIndex:t,isSyncRequest:i,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"abortRequestEarly_",value:function E(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=H["default"].estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=(0,K.timeUntilRebuffer)(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(r<=a)return!1;var s=(0,Q.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=r-a-s.rebufferingImpact,u=.5;return a<=K.TIME_FUDGE_FACTOR&&(u=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<u?!1:(this.bandwidth=s.playlist.attributes.BANDWIDTH*z["default"].BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function x(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function A(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=(0,Y.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function P(){var e=ne(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);0<e&&this.remove(0,e)}},{key:"createSimplifiedSegmentObj_",value:function O(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var i=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key={resolvedUri:t.key.resolvedUri,iv:i}}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function I(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Y.REQUEST_ERRORS.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Y.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function L(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function D(){var n=this;if(this.pendingSegment_){var e=this.pendingSegment_,i=e.segment,t=this.syncController_.probeSegmentInfo(e);"undefined"==typeof this.startingMedia_&&t&&(t.containsAudio||t.containsVideo)&&(this.startingMedia_={containsAudio:t.containsAudio,containsVideo:t.containsVideo});var r=te(this.loaderType_,this.startingMedia_,t);if(r)return this.error({message:r,blacklistDuration:Infinity}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(e.timeline);null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",i.map&&function(){var e=(0,X.initSegmentId)(i.map);if(!n.activeInitSegmentId_||n.activeInitSegmentId_!==e){var t=n.initSegment(i.map);n.sourceUpdater_.appendBuffer(t.bytes,function(){n.activeInitSegmentId_=e})}}(),e.byteLength=e.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function R(){if(this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;(this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration)?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),Z(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function M(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},{key:"logger_",value:function U(){}},{key:"addSegmentMetadataCue_",value:function N(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(ee(n)&&ee(i)){(0,$["default"])(n,i,this.segmentMetadataTrack_);var r=G["default"].WebKitDataCue||G["default"].VTTCue,a={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:i},s=new r(n,i,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}}]),r}();r["default"]=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":7,"./playlist":11,"./playlist-selectors":10,"./ranges":12,"./source-updater":17,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],17:[function(e,i,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var d=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),h=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),f=function f(){},n=function(){function r(e,t){var n=this;c(this,r);var i=function i(){n.sourceBuffer_=e.addSourceBuffer(t),n.onUpdateendCallback_=function(){var e=n.pendingCallback_;n.pendingCallback_=null,e&&e(),n.runCallback_()},n.sourceBuffer_.addEventListener("updateend",n.onUpdateendCallback_),n.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,"closed"===e.readyState?e.addEventListener("sourceopen",i):i()}return d(r,[{key:"abort",value:function n(e){var t=this;this.processedAppend_&&this.queueCallback_(function(){t.sourceBuffer_.abort()},e)}},{key:"appendBuffer",value:function i(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(e)},t)}},{key:"buffered",value:function e(){return this.sourceBuffer_?this.sourceBuffer_.buffered:h["default"].createTimeRanges()}},{key:"remove",value:function a(e,t){var n=this;this.processedAppend_&&this.queueCallback_(function(){n.sourceBuffer_.remove(e,t)},f)}},{key:"updating",value:function t(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function s(e){var t=this;return void 0!==e&&(this.queueCallback_(function(){t.sourceBuffer_.timestampOffset=e}),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function o(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function u(){var e=undefined;!this.updating()&&this.callbacks_.length&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function l(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),r}();r["default"]=n,i.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(i,e,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var v=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),b=function c(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},_=t(i("mux.js/lib/mp4/probe")),T=i("mux.js/lib/tools/ts-inspector.js"),S=i("./playlist"),w=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),k=[{name:"VOD",run:function h(e,t,n){return n===Infinity?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function h(e,t){return e.datetimeToDisplayTime&&t.dateTimeObject?{time:t.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function h(e,t,n,i,r){var a=t.segments||[],s=null,o=null;r=r||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===i&&"undefined"!=typeof l.start){var c=Math.abs(r-l.start);if(null!==o&&o<c)break;(!s||null===o||c<=o)&&(o=c,s={time:l.start,segmentIndex:u})}}return s}},{name:"Discontinuity",run:function h(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,c=e.discontinuities[l];if(c){var d=Math.abs(r-c.time);if(null!==s&&s<d)break;(!a||null===s||d<=s)&&(s=d,a={time:c.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function h(e,t){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}];r.syncPointStrategies=k;var n=function(){function n(e){var t=arguments.length<=0||e===undefined?{}:arguments[0];g(this,n),b(Object.getPrototypeOf(n.prototype),"constructor",this).call(this),this.inspectCache_=undefined,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null,t.debug&&(this.logger_=w["default"].log.bind(w["default"],"sync-controller ->"))}return y(n,w["default"].EventTarget),v(n,[{key:"getSyncPoint",value:function a(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function r(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<i.segmentIndex&&(i.time*=-1),Math.abs(i.time+(0,S.sumDurations)(e,i.segmentIndex,0))}},{key:"runStrategies_",value:function u(e,t,n,i){for(var r=[],a=0;a<k.length;a++){var s=k[a],o=s.run(this,e,t,n,i);o&&(o.strategy=s.name,r.push({strategy:s.name,syncPoint:o}),this.logger_("syncPoint found via <"+s.name+">:",o))}return r}},{key:"selectSyncPoint_",value:function o(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<i&&(i=s,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint with strategy <"+r+"> chosen: ",n),n}},{key:"saveExpiredSegmentInfo",value:function s(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;0<=n;n--){var i=e.segments[n];if(i&&"undefined"!=typeof i.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:i.start},this.logger_("playlist sync:",t.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function i(e){if(!this.datetimeToDisplayTime&&e.dateTimeObject){var t=e.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function e(){this.inspectCache_=undefined}},{key:"probeSegmentInfo",value:function l(e){var t=e.segment,n=e.playlist,i=undefined;return(i=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,i)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),i}},{key:"probeMp4Segment_",value:function c(e){var t=e.segment,n=_["default"].timescale(t.map.bytes),i=_["default"].startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=i),{start:i,end:i+t.duration}}},{key:"probeTsSegment_",value:function d(e){var t=(0,T.inspect)(e.bytes,this.inspectCache_),n=undefined,i=undefined;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,i=t.video[1].dtsTime):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,i=t.audio[1].dtsTime),{start:n,end:i,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function t(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function h(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function f(e,t){var n=e.segment,i=this.timelines[e.timeline];if(null!==e.timestampOffset)this.logger_("tsO:",e.timestampOffset),i={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=i,this.trigger("timestampoffset"),n.start=e.startOfSegment,n.end=t.end+i.mapping;else{if(!i)return!1;n.start=t.start+i.mapping,n.end=t.end+i.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function p(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var u=undefined;u=s<0?n.start-(0,S.sumDurations)(t,e.mediaIndex,r):n.end+(0,S.sumDurations)(t,e.mediaIndex+1,r),this.discontinuities[a]={time:u,accuracy:o}}}}},{key:"logger_",value:function m(){}}]),n}();r["default"]=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist":11,"mux.js/lib/mp4/probe":57,"mux.js/lib/tools/ts-inspector.js":59}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function r(e){var t=arguments.length<=0||e===undefined?"":arguments[0],n={codecCount:0},i=undefined;return n.codecCount=t.split(",").length,n.codecCount=n.codecCount||2,(i=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(t))&&(n.videoCodec=i[2],n.videoObjectTypeIndicator=i[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),n.audioProfile=n.audioProfile&&n.audioProfile[2],n};n.parseCodecs=r},{}],20:[function(i,r,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var p=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),m=function c(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}
var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},g=t(i("./segment-loader")),y=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),v=t(i("global/window")),b=t(i("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),_=i("./bin-utils"),T=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),S=function S(e){return String.fromCharCode.apply(null,e)},n=function(){function i(e,t){var n=arguments.length<=1||t===undefined?{}:arguments[1];h(this,i),m(Object.getPrototypeOf(i.prototype),"constructor",this).call(this,e,n),this.mediaSource_=null,this.subtitlesTrack_=null}return f(i,g["default"]),p(i,[{key:"buffered_",value:function r(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return y["default"].createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return y["default"].createTimeRanges([[t,n]])}},{key:"initSegment",value:function o(e,t){var n=!(arguments.length<=1||t===undefined)&&arguments[1];if(!e)return null;var i=(0,_.initSegmentId)(e),r=this.initSegments_[i];if(n&&!r&&e.bytes){var a=T.byteLength+e.bytes.byteLength,s=new Uint8Array(a);s.set(e.bytes),s.set(T,e.bytes.byteLength),this.initSegments_[i]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:s}}return r||e}},{key:"couldBeginLoading_",value:function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function t(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function n(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function a(e,t){(0,b["default"])(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function s(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){var n=function n(){e.state="READY",e.paused()||e.monitorBuffer_()};return this.syncController_.one("timestampoffset",n),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function u(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function l(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e,n=this.pendingSegment_,i=n.segment;if("function"!=typeof v["default"].WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=(e=function e(){t.handleSegment_()},t.state="WAITING_ON_VTTJS",t.subtitlesTrack_.tech_.one("vttjsloaded",e),t.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",e),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")}),{v:undefined});if("object"==typeof r)return r.v}i.requested=!0;try{this.parseVTTCues_(n)}catch(Q){return this.error({message:Q.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=i.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function c(t){var e=undefined,n=!1;"function"==typeof v["default"].TextDecoder?e=new v["default"].TextDecoder("utf8"):(e=v["default"].WebVTT.StringDecoder(),n=!0);var i=new v["default"].WebVTT.Parser(v["default"],v["default"].vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){return t.timestampmap=e},i.onparsingerror=function(e){y["default"].log.warn("Error encountered when parsing cues: "+e.message)},t.segment.map){var r=t.segment.map.bytes;n&&(r=S(r)),i.parse(r)}var a=t.bytes;n&&(a=S(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function d(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/9e4-r.LOCAL+t.mapping;if(e.cues.forEach(function(e){e.startTime+=a,e.endTime+=a}),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-i.duration)}}}else i.empty=!0}}]),i}();a["default"]=n,r.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./segment-loader":16,"global/window":32,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":72}],21:[function(e,i,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(r,"__esModule",{value:!0});var o="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,u=t(o),n=function n(){return function s(e,i){e=(0,o.mergeOptions)({timeout:45e3},e);var t=s.beforeRequest||u["default"].Hls.xhr.beforeRequest;if(t&&"function"==typeof t){var n=t(e);n&&(e=n)}var r=(0,o.xhr)(e,function(e,t){var n=r.response;!e&&n&&(r.responseTime=Date.now(),r.roundTripTime=r.responseTime-r.requestTime,r.bytesReceived=n.byteLength||n.length,r.bandwidth||(r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3))),e&&"ETIMEDOUT"===e.code&&(r.timedout=!0),e||r.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(r&&(n||r.responseText)))),i(e,r)}),a=r.abort;return r.abort=function(){return r.aborted=!0,a.apply(r,arguments)},r.uri=e.uri,r.requestTime=Date.now(),r}};r["default"]=n,i.exports=r["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,t,n){"use strict";function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),m=function m(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],i=t[4],r=n[4],a=undefined,s=undefined,o=undefined,u=[],l=[],c=undefined,d=undefined,h=(undefined,undefined),f=undefined,p=undefined;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(s=o=0;!i[s];s^=c||1,o=l[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,p=16843009*u[d=u[c=u[r[i[s]=h]=s]]]^65537*d^257*c^16843008*s,f=257*u[h]^16843008*h,a=0;a<4;a++)t[a][s]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e},h=null,r=function(){function c(e){d(this,c),h||(h=m()),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var t=undefined,n=undefined,i=undefined,r=undefined,a=undefined,s=this._tables[0][4],o=this._tables[1],u=e.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(r=e.slice(0),a=[],this._key=[r,a],t=u;t<4*u+28;t++)i=r[t-1],(t%u==0||8===u&&t%u==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],t%u==0&&(i=i<<8^i>>>24^l<<24,l=l<<1^283*(l>>7))),r[t]=r[t-u]^i;for(n=0;t;n++,t--)i=r[3&n?t:t-4],a[n]=t<=4||n<4?i:o[0][s[i>>>24]]^o[1][s[i>>16&255]]^o[2][s[i>>8&255]]^o[3][s[255&i]]}return i(c,[{key:"decrypt",value:function w(e,t,n,i,r,a){var s=this._key[1],o=e^s[0],u=i^s[1],l=n^s[2],c=t^s[3],d=undefined,h=undefined,f=undefined,p=s.length/4-2,m=undefined,g=4,y=this._tables[1],v=y[0],b=y[1],_=y[2],T=y[3],S=y[4];for(m=0;m<p;m++)d=v[o>>>24]^b[u>>16&255]^_[l>>8&255]^T[255&c]^s[g],h=v[u>>>24]^b[l>>16&255]^_[c>>8&255]^T[255&o]^s[g+1],f=v[l>>>24]^b[c>>16&255]^_[o>>8&255]^T[255&u]^s[g+2],c=v[c>>>24]^b[o>>16&255]^_[u>>8&255]^T[255&l]^s[g+3],g+=4,o=d,u=h,l=f;for(m=0;m<4;m++)r[(3&-m)+a]=S[o>>>24]<<24^S[u>>16&255]<<16^S[l>>8&255]<<8^S[255&c]^s[g++],d=o,o=u,u=l,l=c,c=d}}]),c}();n["default"]=r,t.exports=n["default"]},{}],23:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=function c(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},u=i(e("./stream")),l=function(){function e(){r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,u["default"]),this.jobs=[],this.delay=1,this.timeout_=null}return a(e,u["default"]),s(e,[{key:"processJob_",value:function t(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}},{key:"push",value:function n(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),e}();n["default"]=l,t.exports=n["default"]},{"./stream":26}],24:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),g=i(e("./aes")),c=i(e("./async-stream")),d=e("pkcs7"),y=function y(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},v=function v(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),r=new g["default"](Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),s=new Int32Array(a.buffer),o=undefined,u=undefined,l=undefined,c=undefined,d=undefined,h=undefined,f=undefined,p=undefined,m=undefined;for(o=n[0],u=n[1],l=n[2],c=n[3],m=0;m<i.length;m+=4)d=y(i[m]),h=y(i[m+1]),f=y(i[m+2]),p=y(i[m+3]),r.decrypt(d,h,f,p,s,m),s[m]=y(s[m]^o),s[m+1]=y(s[m+1]^u),s[m+2]=y(s[m+2]^l),s[m+3]=y(s[m+3]^c),o=d,u=h,l=f,c=p;return a};n.decrypt=v;var a=function(){function u(e,t,n,i){l(this,u);var r=u.STEP,a=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),o=0;for(this.asyncStream_=new c["default"],this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s)),o=r;o<a.length;o+=r)n=new Uint32Array([y(a[o-4]),y(a[o-3]),y(a[o-2]),y(a[o-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(o,o+r),t,n,s));this.asyncStream_.push(function(){i(null,(0,d.unpad)(s))})}return r(u,[{key:"decryptChunk_",value:function e(t,n,i,r){return function(){var e=v(t,n,i);r.set(e,t.byteOffset)}}}],[{key:"STEP",get:function t(){return 32e3}}]),u}();n.Decrypter=a,n["default"]={Decrypter:a,decrypt:v}},{"./aes":22,"./async-stream":23,pkcs7:28}],25:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var r=e("./decrypter"),a=i(e("./async-stream"));n["default"]={decrypt:r.decrypt,Decrypter:r.Decrypter,AsyncStream:a["default"]},t.exports=n["default"]},{"./async-stream":23,"./decrypter":24}],26:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=function(){function e(){a(this,e),this.listeners={}}return o(e,[{key:"on",value:function n(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function i(e,t){var n=undefined;return!!this.listeners[e]&&(n=this.listeners[e].indexOf(t),this.listeners[e].splice(n,1),-1<n)}},{key:"trigger",value:function s(e,t){var n=undefined,i=undefined,r=undefined,a=undefined;if(n=this.listeners[e])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,t);else for(a=Array.prototype.slice.call(arguments,1),r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},{key:"dispose",value:function t(){this.listeners={}}},{key:"pipe",value:function r(t){this.on("data",function(e){t.push(e)})}}]),e}();n["default"]=i,t.exports=n["default"]},{}],27:[function(e,t){"use strict";var i;t.exports=function r(e){var t=i[e.byteLength%16||0],n=new Uint8Array(e.byteLength+t.length);return n.set(e),n.set(t,e.byteLength),n},i=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(e,t,n){"use strict";n.pad=e("./pad.js"),n.unpad=e("./unpad.js")},{"./pad.js":27,"./unpad.js":29}],29:[function(e,t){"use strict";t.exports=function n(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}},{}],30:[function(){},{}],31:[function(r,a){(function(e){var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},i=r("min-document");"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=i),a.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":30}],32:[function(e,n){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=n(e("./line-stream")),r=n(e("./parse-stream")),a=n(e("./parser"));t.exports={LineStream:i["default"],ParseStream:r["default"],Parser:a["default"]}},{"./line-stream":34,"./parse-stream":35,"./parser":36}],34:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),u=i(e("./stream")),l=function(){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.buffer="",e}return s(t,u["default"]),o(t,[{key:"push",value:function n(e){var t=void 0;for(this.buffer+=e,t=this.buffer.indexOf("\n");-1<t;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)}}]),t}();n["default"]=l},{"./stream":37}],35:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var d=function(){function n(e,t){var n=[],i=!0,r=!1,a=undefined;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(u){r=!0,a=u}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw a}}return n}return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return n(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),u=i(e("./stream")),l=function l(){return new RegExp("(?:^|,)("+("(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")")+")")},h=function h(e){for(var t=e.split(l()),n={},i=t.length,r=void 0;i--;)""!==t[i]&&((r=/([^=]*)=(.*)/.exec(t[i]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),n[r[0]]=r[1]);return n},c=function(){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return s(e,u["default"]),o(e,[{key:"push",value:function c(e){var t=void 0,n=void 0;if(0!==(e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===e[0])if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void this.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void this.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void this.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void this.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var i=h(t[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var r=i.BYTERANGE.split("@"),a=d(r,2),s=a[0],o=a[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),o&&(n.byterange.offset=parseInt(o,10))}}this.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=h(t[1]),n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x"),l={};u[0]&&(l.width=parseInt(u[0],10)),u[1]&&(l.height=parseInt(u[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=h(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))this.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void this.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=h(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void this.trigger("data",n);this.trigger("data",{type:"tag",data:e.slice(4)})}}}else this.trigger("data",{type:"comment",text:e.slice(1)});else this.trigger("data",{type:"uri",uri:e})}}]),e}();n["default"]=c},{"./stream":37}],36:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),u=i(e("./stream")),l=i(e("./line-stream")),c=i(e("./parse-stream")),d=function(){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.lineStream=new l["default"],e.parseStream=new c["default"],e.lineStream.pipe(e.parseStream);var T=e,S=[],w={},k=void 0,C=void 0,E=function E(){},x={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},A=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(y){var v=void 0,b=void 0;({tag:function _(){({"allow-cache":function e(){this.manifest.allowCache=y.allowed,"allowed"in y||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function e(){var e={};"length"in y&&((w.byterange=e).length=y.length,"offset"in y||(this.trigger("info",{message:"defaulting offset to zero"}),y.offset=0)),"offset"in y&&((w.byterange=e).offset=y.offset)},endlist:function t(){this.manifest.endList=!0},inf:function n(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<y.duration&&(w.duration=y.duration),0===y.duration&&(w.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=S},key:function i(){y.attributes?"NONE"!==y.attributes.METHOD?y.attributes.URI?(y.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),C={method:y.attributes.METHOD||"AES-128",uri:y.attributes.URI},"undefined"!=typeof y.attributes.IV&&(C.iv=y.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):C=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function r(){isFinite(y.number)?this.manifest.mediaSequence=y.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+y.number})},"discontinuity-sequence":function a(){isFinite(y.number)?(this.manifest.discontinuitySequence=y.number,A=y.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+y.number})},"playlist-type":function s(){/VOD|EVENT/.test(y.playlistType)?this.manifest.playlistType=y.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+y.playlist})},map:function o(){k={},y.uri&&(k.uri=y.uri),y.byterange&&(k.byterange=y.byterange)},"stream-inf":function u(){this.manifest.playlists=S,this.manifest.mediaGroups=this.manifest.mediaGroups||x,y.attributes?(w.attributes||(w.attributes={}),P(w.attributes,y.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function l(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||x,y.attributes&&y.attributes.TYPE&&y.attributes["GROUP-ID"]&&y.attributes.NAME){var e=this.manifest.mediaGroups[y.attributes.TYPE];e[y.attributes["GROUP-ID"]]=e[y.attributes["GROUP-ID"]]||{},v=e[y.attributes["GROUP-ID"]],(b={"default":/yes/i.test(y.attributes.DEFAULT)})["default"]?b.autoselect=!0:b.autoselect=/yes/i.test(y.attributes.AUTOSELECT),y.attributes.LANGUAGE&&(b.language=y.attributes.LANGUAGE),y.attributes.URI&&(b.uri=y.attributes.URI),y.attributes["INSTREAM-ID"]&&(b.instreamId=y.attributes["INSTREAM-ID"]),y.attributes.CHARACTERISTICS&&(b.characteristics=y.attributes.CHARACTERISTICS),y.attributes.FORCED&&(b.forced=/yes/i.test(y.attributes.FORCED)),v[y.attributes.NAME]=b}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function c(){A+=1,w.discontinuity=!0,this.manifest.discontinuityStarts.push(S.length)},"program-date-time":function d(){this.manifest.dateTimeString=y.dateTimeString,this.manifest.dateTimeObject=y.dateTimeObject},targetduration:function h(){!isFinite(y.duration)||y.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+y.duration}):this.manifest.targetDuration=y.duration},totalduration:function f(){!isFinite(y.duration)||y.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+y.duration}):this.manifest.totalDuration=y.duration},"cue-out":function p(){w.cueOut=y.data},"cue-out-cont":function m(){w.cueOutCont=y.data},"cue-in":function g(){w.cueIn=y.data}}[y.tagType]||E).call(T)},uri:function e(){w.uri=y.uri,S.push(w),!this.manifest.targetDuration||"duration"in w||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),w.duration=this.manifest.targetDuration),C&&(w.key=C),w.timeline=A,k&&(w.map=k),w={}},comment:function t(){}})[y.type].call(T)}),e}return s(t,u["default"]),o(t,[{key:"push",value:function n(e){this.lineStream.push(e)}},{key:"end",value:function e(){this.lineStream.push("\n")}}]),t}();n["default"]=d},{"./line-stream":34,"./parse-stream":35,"./stream":37}],37:[function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),i=function(){function e(){a(this,e),this.listeners={}}return o(e,[{key:"on",value:function n(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"off",value:function i(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),-1<n}},{key:"trigger",value:function s(e,t){var n=this.listeners[e],i=void 0,r=void 0,a=void 0;if(n)if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,t);else for(a=Array.prototype.slice.call(arguments,1),r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},{key:"dispose",value:function t(){this.listeners={}}},{key:"pipe",value:function r(t){this.on("data",function(e){t.push(e)})}}]),e}();n["default"]=i},{}],38:[function(e,t){"use strict";var n,i=e("../utils/stream.js");(n=function(){var o=new Uint8Array,u=0;n.prototype.init.call(this),this.setTimestamp=function(e){u=e},this.parseId3TagSize=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},this.parseAdtsSize=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},this.push=function(e){var t,n,i,r,a=0,s=0;for(o.length?(r=o.length,(o=new Uint8Array(e.byteLength+r)).set(o.subarray(0,r)),o.set(e,r)):o=e;3<=o.length-s;)if(o[s]!=="I".charCodeAt(0)||o[s+1]!=="D".charCodeAt(0)||o[s+2]!=="3".charCodeAt(0))if(!0&o[s]&&240==(240&o[s+1])){if(o.length-s<7)break;if((a=this.parseAdtsSize(o,s))>o.length)break;i={type:"audio",data:o.subarray(s,s+a),pts:u,dts:u},this.trigger("data",i),s+=a}else s++;else{if(o.length-s<10)break;if((a=this.parseId3TagSize(o,s))>o.length)break;n={type:"timed-metadata",data:o.subarray(s,s+a)},this.trigger("data",n),s+=a}t=o.length-s,o=0<t?o.subarray(s):new Uint8Array}}).prototype=new i,t.exports=n},{"../utils/stream.js":62}],39:[function(e,t){"use strict";var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},i=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},u=function(e,t,n){return unescape(i(e,t,n))},r=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},a=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},s=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},l=function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return n[(60&e[t+2])>>>2];t++}return null},c=function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=o(e.subarray(10,14)));do{if((n=o(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"!==u(i,0,r))break;var a=i.subarray(r+1),s=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return s*=4,s+=3&a[7]}}t+=10,t+=n}while(t<e.byteLength);return null};t.exports={parseId3TagSize:r,parseAdtsSize:a,parseType:s,parseSampleRate:l,parseAacTimestamp:c}},{}],40:[function(e,t){"use strict";var n,i=e("../utils/stream.js"),c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(n=function(){var l;n.prototype.init.call(this),this.push=function(e){var t,n,i,r,a,s,o=0,u=0;if("audio"===e.type)for(l?(r=l,(l=new Uint8Array(r.byteLength+e.data.byteLength)).set(r),l.set(e.data,r.byteLength)):l=e.data;o+5<l.length;)if(255===l[o]&&240==(246&l[o+1])){if(n=2*(1&~l[o+1]),t=(3&l[o+3])<<11|l[o+4]<<3|(224&l[o+5])>>5,s=9e4*(a=1024*(1+(3&l[o+6])))/c[(60&l[o+2])>>>2],i=o+t,l.byteLength<i)return
;if(this.trigger("data",{pts:e.pts+u*s,dts:e.dts+u*s,sampleCount:a,audioobjecttype:1+(l[o+2]>>>6&3),channelcount:(1&l[o+2])<<2|(192&l[o+3])>>>6,samplerate:c[(60&l[o+2])>>>2],samplingfrequencyindex:(60&l[o+2])>>>2,samplesize:16,data:l.subarray(o+7+n,i)}),l.byteLength===i)return void(l=undefined);u++,l=l.subarray(i)}else o++},this.flush=function(){this.trigger("done")}}).prototype=new i,t.exports=n},{"../utils/stream.js":62}],41:[function(e,t){"use strict";var u,l,_,n=e("../utils/stream.js"),T=e("../utils/exp-golomb.js");(l=function(){var n,i,r=0;l.prototype.init.call(this),this.push=function(e){var t;for(i?((t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength),i=t):i=e.data;r<i.byteLength-3;r++)if(1===i[r+2]){n=r+5;break}for(;n<i.byteLength;)switch(i[n]){case 0:if(0!==i[n-1]){n+=2;break}if(0!==i[n-2]){n++;break}for(r+3!==n-2&&this.trigger("data",i.subarray(r+3,n-2));1!==i[++n]&&n<i.length;);r=n-2,n+=3;break;case 1:if(0!==i[n-1]||0!==i[n-2]){n+=3;break}this.trigger("data",i.subarray(r+3,n-2)),r=n-2,n+=3;break;default:n+=3}i=i.subarray(r),n-=r,r=0},this.flush=function(){i&&3<i.byteLength&&this.trigger("data",i.subarray(r+3)),i=null,r=0,this.trigger("done")}}).prototype=new n,_={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(u=function(){var n,i,r,a,s,o,b,t=new l;u.prototype.init.call(this),(n=this).push=function(e){"video"===e.type&&(i=e.trackId,r=e.pts,a=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:i,pts:r,dts:a,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=s(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}n.trigger("data",t)}),t.on("done",function(){n.trigger("done")}),this.flush=function(){t.flush()},b=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},s=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===r[0]&&(s++,r.shift()),n[a]=e[s];return n},o=function(e){var t,n,i,r,a,s,o,u,l,c,d,h,f,p=0,m=0,g=0,y=0,v=1;if(n=(t=new T(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),_[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==a?8:12,f=0;f<d;f++)t.readBoolean()&&b(f<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),o=t.readUnsignedExpGolomb(),f=0;f<o;f++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),u=t.readUnsignedExpGolomb(),l=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(v=h[0]/h[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:Math.ceil((16*(u+1)-2*p-2*m)*v),height:(2-c)*(l+1)*16-2*g-2*y}}}).prototype=new n,t.exports={H264Stream:u,NalByteStream:l}},{"../utils/exp-golomb.js":61,"../utils/stream.js":62}],42:[function(e,t){var n=[33,16,5,32,164,27],i=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],r=function(e){for(var t=[];e--;)t.push(0);return t},a=function(n){return Object.keys(n).reduce(function(e,t){return e[t]=new Uint8Array(n[t].reduce(function(e,t){return e.concat(t)},[])),e},{})},s={96e3:[n,[227,64],r(154),[56]],88200:[n,[231],r(170),[56]],64e3:[n,[248,192],r(240),[56]],48e3:[n,[255,192],r(268),[55,148,128],r(54),[112]],44100:[n,[255,192],r(268),[55,163,128],r(84),[112]],32e3:[n,[255,192],r(268),[55,234],r(226),[112]],24e3:[n,[255,192],r(268),[55,255,128],r(268),[111,112],r(126),[224]],16e3:[n,[255,192],r(268),[55,255,128],r(268),[111,255],r(269),[223,108],r(195),[1,192]],12e3:[i,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,253,128],r(259),[56]],11025:[i,r(268),[3,127,248],r(268),[6,255,240],r(268),[13,255,224],r(268),[27,255,192],r(268),[55,175,128],r(108),[112]],8e3:[i,r(268),[3,121,16],r(47),[7]]};t.exports=a(s)},{}],43:[function(e,t){"use strict";var n=e("../utils/stream.js"),i=function(e){this.numberOfTracks=0,this.metadataStream=e.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,i.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};i.prototype=new n,i.prototype.flush=function(e){var t,n,i,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)(n=this.pendingCaptions[i]).startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)(t=this.pendingMetadata[i]).cueTime=t.pts-r,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},t.exports=i},{"../utils/stream.js":62}],44:[function(e,t){"use strict";var u=e("./flv-tag.js"),n=function(e,t,n){var i,r,a,s=new Uint8Array(9),o=new DataView(s.buffer);return e=e||0,t=t===undefined||t,n=n===undefined||n,o.setUint8(0,70),o.setUint8(1,76),o.setUint8(2,86),o.setUint8(3,1),o.setUint8(4,(t?4:0)|(n?1:0)),o.setUint32(5,s.byteLength),e<=0?((r=new Uint8Array(s.byteLength+4)).set(s),r.set([0,0,0,0],s.byteLength)):((i=new u(u.METADATA_TAG)).pts=i.dts=0,i.writeMetaDataDouble("duration",e),a=i.finalize().length,(r=new Uint8Array(s.byteLength+a)).set(s),r.set(o.byteLength,a)),r};t.exports=n},{"./flv-tag.js":45}],45:[function(e,t){"use strict";var l;(l=function(e,n){var t,i=0,r=16384,a=function(e,t){var n,i=e.position+t;i<e.bytes.byteLength||((n=new Uint8Array(2*i)).set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},s=l.widthBytes||new Uint8Array("width".length),o=l.heightBytes||new Uint8Array("height".length),u=l.videocodecidBytes||new Uint8Array("videocodecid".length);if(!l.widthBytes){for(t=0;t<"width".length;t++)s[t]="width".charCodeAt(t);for(t=0;t<"height".length;t++)o[t]="height".charCodeAt(t);for(t=0;t<"videocodecid".length;t++)u[t]="videocodecid".charCodeAt(t);l.widthBytes=s,l.heightBytes=o,l.videocodecidBytes=u}switch(this.keyFrame=!1,e){case l.VIDEO_TAG:this.length=16,r*=6;break;case l.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case l.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(r),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var i,r=t||0;i=r+(n=n||e.byteLength),a(this,n),this.bytes.set(e.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(0<i)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===i+4?this.length-=4:0<i&&(t=i+4,n=this.length-t,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),i=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(s,this.position),this.position+=5;else if("height"===e)this.bytes.set(o,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var e,t;switch(this.bytes[0]){case l.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||n?16:32),this.bytes[12]=n?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case l.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case l.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return t=this.length-11,this.bytes[1]=(16711680&t)>>>16,this.bytes[2]=(65280&t)>>>8,this.bytes[3]=(255&t)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=l.frameTime(this.bytes),this}}).AUDIO_TAG=8,l.VIDEO_TAG=9,l.METADATA_TAG=18,l.isAudioFrame=function(e){return l.AUDIO_TAG===e[0]},l.isVideoFrame=function(e){return l.VIDEO_TAG===e[0]},l.isMetaData=function(e){return l.METADATA_TAG===e[0]},l.isKeyFrame=function(e){return l.isVideoFrame(e)?23===e[11]:!!l.isAudioFrame(e)||!!l.isMetaData(e)},l.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24},t.exports=l},{}],46:[function(e,t){t.exports={tag:e("./flv-tag"),Transmuxer:e("./transmuxer"),getFlvHeader:e("./flv-header")}},{"./flv-header":44,"./flv-tag":45,"./transmuxer":48}],47:[function(e,t){"use strict";var n=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})};t.exports=n},{}],48:[function(e,t){"use strict";var p,m,g,i,o,u,n=e("../utils/stream.js"),l=e("./flv-tag.js"),y=e("../m2ts/m2ts.js"),v=e("../codecs/adts.js"),b=e("../codecs/h264").H264Stream,_=e("./coalesce-stream.js"),c=e("./tag-list.js");i=function(e,t){"number"==typeof t.pts&&(e.timelineStartInfo.pts===undefined?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"==typeof t.dts&&(e.timelineStartInfo.dts===undefined?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},o=function(e,t){var n=new l(l.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},u=function(e,t){var n,i=new l(l.VIDEO_TAG,!0);for(i.dts=t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return i},(g=function(r){var a,s=[],o=[];g.prototype.init.call(this),this.push=function(e){i(r,e),r&&(r.audioobjecttype=e.audioobjecttype,r.channelcount=e.channelcount,r.samplerate=e.samplerate,r.samplingfrequencyindex=e.samplingfrequencyindex,r.samplesize=e.samplesize,r.extraData=r.audioobjecttype<<11|r.samplingfrequencyindex<<7|r.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),s.push(e)},this.flush=function(){var e,t,n,i=new c;if(0!==s.length){for(n=-Infinity;s.length;)e=s.shift(),o.length&&e.pts>=o[0]&&(n=o.shift(),this.writeMetaDataTags(i,n)),(r.extraData!==a||1e3<=e.pts-n)&&(this.writeMetaDataTags(i,e.pts),a=r.extraData,n=e.pts),(t=new l(l.AUDIO_TAG)).pts=e.pts,t.dts=e.dts,t.writeBytes(e.data),i.push(t.finalize());o.length=0,a=null,this.trigger("data",{track:r,tags:i.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,t){var n;(n=new l(l.METADATA_TAG)).pts=t,n.dts=t,n.writeMetaDataDouble("audiocodecid",10),n.writeMetaDataBoolean("stereo",2===r.channelcount),n.writeMetaDataDouble("audiosamplerate",r.samplerate),n.writeMetaDataDouble("audiosamplesize",16),e.push(n.finalize()),(n=new l(l.AUDIO_TAG,!0)).pts=t,n.dts=t,n.view.setUint16(n.position,r.extraData),n.position+=2,n.length=Math.max(n.length,n.position),e.push(n.finalize())},this.onVideoKeyFrame=function(e){o.push(e)}}).prototype=new n,(m=function(r){var a,s,n=[];m.prototype.init.call(this),this.finishFrame=function(e,t){if(t){if(a&&r&&r.newMetadata&&(t.keyFrame||0===e.length)){var n=o(a,t.dts).finalize(),i=u(r,t.dts).finalize();n.metaDataTag=i.metaDataTag=!0,e.push(n),e.push(i),r.newMetadata=!1,this.trigger("keyframe",t.dts)}t.endNalUnit(),e.push(t.finalize()),s=null}},this.push=function(e){i(r,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){for(var e,t=new c;n.length&&"access_unit_delimiter_rbsp"!==n[0].nalUnitType;)n.shift();if(0!==n.length){for(;n.length;)"seq_parameter_set_rbsp"===(e=n.shift()).nalUnitType?(r.newMetadata=!0,a=e.config,r.width=a.width,r.height=a.height,r.sps=[e.data],r.profileIdc=a.profileIdc,r.levelIdc=a.levelIdc,r.profileCompatibility=a.profileCompatibility,s.endNalUnit()):"pic_parameter_set_rbsp"===e.nalUnitType?(r.newMetadata=!0,r.pps=[e.data],s.endNalUnit()):"access_unit_delimiter_rbsp"===e.nalUnitType?(s&&this.finishFrame(t,s),(s=new l(l.VIDEO_TAG)).pts=e.pts,s.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(s.keyFrame=!0),s.endNalUnit()),s.startNalUnit(),s.writeBytes(e.data);s&&this.finishFrame(t,s),this.trigger("data",{track:r,tags:t.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new n,(p=function(e){var t,n,i,r,a,s,o,u,l,c,d,h,f=this;p.prototype.init.call(this),e=e||{},this.metadataStream=new y.MetadataStream,e.metadataStream=this.metadataStream,t=new y.TransportPacketStream,n=new y.TransportParseStream,i=new y.ElementaryStream,r=new y.TimestampRolloverStream("video"),a=new y.TimestampRolloverStream("audio"),s=new y.TimestampRolloverStream("timed-metadata"),o=new v,u=new b,h=new _(e),t.pipe(n).pipe(i),i.pipe(r).pipe(u),i.pipe(a).pipe(o),i.pipe(s).pipe(this.metadataStream).pipe(h),d=new y.CaptionStream,u.pipe(d).pipe(h),i.on("data",function(e){var t,n,i;if("metadata"===e.type){for(t=e.tracks.length;t--;)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(i=e.tracks[t]);n&&!l&&(h.numberOfTracks++,l=new m(n),u.pipe(l).pipe(h)),i&&!c&&(h.numberOfTracks++,c=new g(i),o.pipe(c).pipe(h),l&&l.on("keyframe",c.onVideoKeyFrame))}}),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){d.reset()},h.on("data",function(e){f.trigger("data",e)}),h.on("done",function(){f.trigger("done")})}).prototype=new n,t.exports=p},{"../codecs/adts.js":40,"../codecs/h264":41,"../m2ts/m2ts.js":50,"../utils/stream.js":62,"./coalesce-stream.js":43,"./flv-tag.js":45,"./tag-list.js":47}],49:[function(e,t){"use strict";var a=4,s=128,n=e("../utils/stream"),i=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&e[t]!==s;){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&i===a){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}t+=r,r=i=0}return n},r=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},o=function(e,t){var n,i,r,a,s=[];if(!(64&t[0]))return s;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[(r=3*n)+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],s.push(a));return s},u=function(){u.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new p(0,0),new p(0,1),new p(1,0),new p(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};u.prototype=new n,u.prototype.push=function(e){var t,n;"sei_rbsp"===e.nalUnitType&&(t=i(e.escapedRBSP)).payloadType===a&&(n=r(t))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?this.ignoreNextEqualDts_=!1:(this.captionPackets_=this.captionPackets_.concat(o(e.pts,n)),this.latestDts_=e.dts))},u.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},u.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},u.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},u.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},u.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},c=function(e){return null===e?"":(e=l[e]||e,String.fromCharCode(e))},d=14,h=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],f=function(){for(var e=[],t=d+1;t--;)e.push("");return e},p=function(e,t){p.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.topRow_=d-1,this.mode_="rollUp";else if(t===this.ROLL_UP_3_ROWS_)this.topRow_=d-2,this.mode_="rollUp";else if(t===this.ROLL_UP_4_ROWS_)this.topRow_=d-3,this.mode_="rollUp";else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[d]=this.nonDisplayed_[d].slice(0,-1):this.displayed_[d]=this.displayed_[d].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=f();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=f();else if(t===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(i,r))a=c((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[d]=this.displayed_[d].slice(0,-1),a=c((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var s=h.indexOf(7968&t);s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=c(i),a+=c(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};p.prototype=new n,p.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},p.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=f(),this.nonDisplayed_=f(),this.lastControlCode_=null,this.column_=0,this.row_=d,this.formatting_=[]},p.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},p.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},p.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},p.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},p.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},p.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},p.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},p.prototype.isNormalChar=function(e){return 32<=e&&e<=127},p.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,n)},p.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},p.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},p.prototype.rollUp=function(e,t){var n=this.displayed_[d];n+=t,this.displayed_[d]=n},p.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.topRow_;e<d;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[d]=""},p.prototype.paintOn=function(){},t.exports={CaptionStream:u,Cea608Stream:p}},{"../utils/stream":62}],50:[function(e,t){"use strict";var n,o,u,i=e("../utils/stream.js"),r=e("./caption-stream"),d=e("./stream-types"),a=e("./timestamp-rollover-stream").TimestampRolloverStream,h=e("./stream-types.js"),s=188,l=71;(n=function(){var r=new Uint8Array(s),a=0;n.prototype.init.call(this),this.push=function(e){var t,n=0,i=s;for(a?((t=new Uint8Array(e.byteLength+a)).set(r.subarray(0,a)),t.set(e,a),a=0):t=e;i<t.byteLength;)t[n]!==l||t[i]!==l?(n++,i++):(this.trigger("data",t.subarray(n,i)),n+=s,i+=s);n<t.byteLength&&(r.set(t.subarray(n),0),a=t.byteLength-n)},this.flush=function(){a===s&&r[0]===l&&(this.trigger("data",r),a=0),this.trigger("done")}}).prototype=new i,(o=function(){var i,r,a,s;o.prototype.init.call(this),(s=this).packetsWaitingForPmt=[],this.programMapTable=undefined,i=function(e,t){var n=0;t.payloadUnitStartIndicator&&(n+=e[n]+1),"pat"===t.type?r(e.subarray(n),t):a(e.subarray(n),t)},r=function(e,t){t.section_number=e[7],t.last_section_number=e[8],s.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=s.pmtPid},a=function(e,t){var n,i;if(1&e[5]){for(s.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var r=e[i],a=(31&e[i+1])<<8|e[i+2];r===d.H264_STREAM_TYPE&&null===s.programMapTable.video?s.programMapTable.video=a:r===d.ADTS_STREAM_TYPE&&null===s.programMapTable.audio?s.programMapTable.audio=a:r===d.METADATA_STREAM_TYPE&&(s.programMapTable["timed-metadata"][a]=r),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=s.programMapTable}},this.push=function(e){var t={},n=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(n+=e[n]+1),0===t.pid)t.type="pat",i(e.subarray(n),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",i(e.subarray(n),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===undefined?this.packetsWaitingForPmt.push([e,n,t]):this.processPes_(e,n,t)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=d.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=d.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new i,o.STREAM_TYPES={h264:27,adts:15},(u=function(){var l=this,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},c=function(e,t){var n;t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!=(4&e[6]),192&(n=e[7])&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8])},s=function(e,t,n){var i,r=new Uint8Array(e.size),a={type:t},s=0,o=0,u=!1;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,s=0;s<e.data.length;s++)i=e.data[s],r.set(i.data,o),o+=i.data.byteLength;c(r,a),u="video"===t||a.packetLength<=e.size,(n||u)&&(e.size=0,e.data.length=0),u&&l.trigger("data",a)}};u.prototype.init.call(this),this.push=function(n){({pat:function(){},pes:function(){var e,t;switch(n.streamType){case d.H264_STREAM_TYPE:case h.H264_STREAM_TYPE:e=i,t="video";break;case d.ADTS_STREAM_TYPE:e=r,t="audio";break;case d.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}n.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(n),e.size+=n.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=n.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),l.trigger("data",e)}})[n.type]()},this.flush=function(){s(i,"video"),s(r,"audio"),s(a,"timed-metadata"),this.trigger("done")}}).prototype=new i;var c={PAT_PID:0,MP2T_PACKET_LENGTH:s,TransportPacketStream:n,TransportParseStream:o,ElementaryStream:u,TimestampRolloverStream:a,CaptionStream:r.CaptionStream,Cea608Stream:r.Cea608Stream,MetadataStream:e("./metadata-stream")};for(var f in d)d.hasOwnProperty(f)&&(c[f]=d[f]);t.exports=c},{"../utils/stream.js":62,"./caption-stream":49,"./metadata-stream":51,"./stream-types":53,"./stream-types.js":53,"./timestamp-rollover-stream":54}],51:[function(e,t){"use strict";var n,i=e("../utils/stream"),r=e("./stream-types"),a=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},s=function(e,t,n){return decodeURIComponent(a(e,t,n))},o=function(e,t,n){return unescape(a(e,t,n))},h=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},f={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.value=s(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=s(e.data,1,t),e.url=s(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=o(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(n=function(e){var t,u={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},l=0,c=[],d=0;if(n.prototype.init.call(this),this.dispatchType=r.METADATA_STREAM_TYPE.toString(16),u.descriptor)for(t=0;t<u.descriptor.length;t++)this.dispatchType+=("00"+u.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,i,r,a;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))u.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(e),d+=e.data.byteLength,1===c.length&&(l=h(e.data.subarray(6,10)),l+=10),!(d<l)){for(t={data:new Uint8Array(l),frames:[],pts:c[0].pts,dts:c[0].dts},a=0;a<l;)t.data.set(c[0].data.subarray(0,l-a),a),a+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();n=10,64&t.data[5]&&(n+=4,n+=h(t.data.subarray(10,14)),l-=h(t.data.subarray(16,20)));do{if((i=h(t.data.subarray(n+4,n+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((r={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+i+10)}).key=r.id,f[r.id]&&(f[r.id](r),"com.apple.streaming.transportStreamTimestamp"===r.owner)){var s=r.data,o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;o*=4,o+=3&s[7],r.timeStamp=o,t.pts===undefined&&t.dts===undefined&&(t.pts=r.timeStamp,t.dts=r.timeStamp),this.trigger("timestamp",r)}t.frames.push(r),n+=10,n+=i}while(n<l);this.trigger("data",t)}}}).prototype=new i,t.exports=n},{"../utils/stream":62,"./stream-types":53}],52:[function(e,t){"use strict";var n=e("./stream-types.js"),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},o=function(e){return!!(64&e[1])},u=function(e){var t=0;return 1<(48&e[3])>>>4&&(t+=e[4]+1),t},r=function(e,t){var n=i(e)
;return 0===n?"pat":n===t?"pmt":t?"pes":null},a=function(e){var t=o(e),n=4+u(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},s=function(e){var t={},n=o(e),i=4+u(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var s=i+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},l=function(e,t){switch(t[i(e)]){case n.H264_STREAM_TYPE:return"video";case n.ADTS_STREAM_TYPE:return"audio";case n.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},c=function(e){if(!o(e))return null;var t=4+u(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},d=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},h=function(e){for(var t=4+u(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===d(31&n[r+3])&&(a=!0);1!==n[++i]&&i<n.length;);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===d(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===d(31&n[r+3])&&(a=!0),a};t.exports={parseType:r,parsePat:a,parsePmt:s,parsePayloadUnitStartIndicator:o,parsePesType:l,parsePesTime:c,videoPacketContainsKeyFrame:h}},{"./stream-types.js":53}],53:[function(e,t){"use strict";t.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(e,t){"use strict";var n=e("../utils/stream"),i=8589934592,r=4294967296,a=function(e,t){var n=1;for(t<e&&(n=-1);Math.abs(t-e)>r;)e+=n*i;return e},s=function(e){var t,n;s.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(n===undefined&&(n=e.dts),e.dts=a(e.dts,n),e.pts=a(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.discontinuity=function(){t=n=void 0}};s.prototype=new n,t.exports={TimestampRolloverStream:s,handleRollover:a}},{"../utils/stream":62}],55:[function(e,t){t.exports={generator:e("./mp4-generator"),Transmuxer:e("./transmuxer").Transmuxer,AudioSegmentStream:e("./transmuxer").AudioSegmentStream,VideoSegmentStream:e("./transmuxer").VideoSegmentStream}},{"./mp4-generator":56,"./transmuxer":58}],56:[function(e,t){"use strict";var u,n,i,r,a,s,o,l,c,d,h,f,p,m,g,y,v,b,_,T,S,w,k,C,E,x,A,P,O,I,L,D,R,M,U,N,j,B,F,q,H,V=Math.pow(2,32)-1;!function(){var e;if(k={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in k)k.hasOwnProperty(e)&&(k[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),x=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),O={video:A,audio:P},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),M=R,U=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=R,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),u=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},n=function(){return u(k.dinf,u(k.dref,D))},i=function(e){return u(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},r=function(){return u(k.ftyp,C,E,C,x)},y=function(e){return u(k.hdlr,O[e])},a=function(e){return u(k.mdat,e)},g=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),u(k.mdhd,t)},m=function(e){return u(k.mdia,g(e),y(e.type),o(e))},s=function(e){return u(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return u(k.minf,"video"===e.type?u(k.vmhd,I):u(k.smhd,L),n(),b(e))},l=function(e,t){for(var n=[],i=t.length;i--;)n[i]=T(t[i]);return u.apply(null,[k.moof,s(e)].concat(n))},c=function(e){for(var t=e.length,n=[];t--;)n[t]=f(e[t]);return u.apply(null,[k.moov,h(4294967295)].concat(n).concat(d(e)))},d=function(e){for(var t=e.length,n=[];t--;)n[t]=S(e[t]);return u.apply(null,[k.mvex].concat(n))},h=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return u(k.mvhd,t)},v=function(e){var t,n,i=e.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return u(k.sdtp,r)},b=function(e){return u(k.stbl,_(e),u(k.stts,N),u(k.stsc,M),u(k.stsz,U),u(k.stco,R))},_=function(e){return u(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):B(e))},j=function(e){var t,n=e.sps||[],i=e.pps||[],r=[],a=[];for(t=0;t<n.length;t++)r.push((65280&n[t].byteLength)>>>8),r.push(255&n[t].byteLength),r=r.concat(Array.prototype.slice.call(n[t]));for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));return u(k.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u(k.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([n.length]).concat(r).concat([i.length]).concat(a))),u(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},B=function(e){return u(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},p=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return u(k.tkhd,t)},T=function(e){var t,n,i,r,a,s,o;return t=u(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/(V+1)),o=Math.floor(e.baseMediaDecodeTime%(V+1)),n=u(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),a=92,"audio"===e.type?(i=w(e,a),u(k.traf,t,n,i)):(r=v(e),i=w(e,r.length+a),u(k.traf,t,n,i,r))},f=function(e){return e.duration=e.duration||4294967295,u(k.trak,p(e),m(e))},S=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),u(k.trex,t)},H=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(e[0].duration!==undefined&&(n=1),e[0].size!==undefined&&(i=2),e[0].flags!==undefined&&(r=4),e[0].compositionTimeOffset!==undefined&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},q=function(e,t){var n,i,r,a;for(t+=20+16*(i=e.samples||[]).length,n=H(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,61440&r.flags.degradationPriority,15&r.flags.degradationPriority,(4278190080&r.compositionTimeOffset)>>>24,(16711680&r.compositionTimeOffset)>>>16,(65280&r.compositionTimeOffset)>>>8,255&r.compositionTimeOffset]);return u(k.trun,new Uint8Array(n))},F=function(e,t){var n,i,r,a;for(t+=20+8*(i=e.samples||[]).length,n=H(i,t),a=0;a<i.length;a++)r=i[a],n=n.concat([(4278190080&r.duration)>>>24,(16711680&r.duration)>>>16,(65280&r.duration)>>>8,255&r.duration,(4278190080&r.size)>>>24,(16711680&r.size)>>>16,(65280&r.size)>>>8,255&r.size]);return u(k.trun,new Uint8Array(n))},w=function(e,t){return"audio"===e.type?F(e,t):q(e,t)},t.exports={ftyp:r,mdat:a,moof:l,moov:c,initSegment:function(e){var t,n=r(),i=c(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}}},{}],57:[function(e,t){"use strict";var u,l,n,i;u=function(e,t){var n,i,r,a,s,o=[];if(!t.length)return null;for(n=0;n<e.byteLength;)i=e[n]<<24,i|=e[n+1]<<16,i|=e[n+2]<<8,i|=e[n+3],r=l(e.subarray(n+4,n+8)),a=1<i?n+i:e.byteLength,r===t[0]&&(1===t.length?o.push(e.subarray(n+8,a)):(s=u(e.subarray(n+8,a),t.slice(1))).length&&(o=o.concat(s))),n=a;return o},l=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},n=function(e){var t={};return u(e,["moov","trak"]).reduce(function(e,t){var n,i,r,a;return(n=u(t,["tkhd"])[0])?(r=n[i=0===n[0]?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3],(a=u(t,["mdia","mdhd"])[0])?(i=0===a[0]?12:20,e[r]=a[i]<<24|a[i+1]<<16|a[i+2]<<8|a[i+3],e):null):null},t)},i=function(r,e){var t,n,i;return t=u(e,["moof","traf"]),n=[].concat.apply([],t.map(function(i){return u(i,["tfhd"]).map(function(e){var t,n;return t=e[4]<<24|e[5]<<16|e[6]<<8|e[7],n=r[t]||9e4,(u(i,["tfdt"]).map(function(e){var t,n;return t=e[0],n=e[4]<<24|e[5]<<16|e[6]<<8|e[7],1===t&&(n*=Math.pow(2,32),n+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),n})[0]||Infinity)/n})})),i=Math.min.apply(null,n),isFinite(i)?i:0},t.exports={parseType:l,timescale:n,startTime:i}},{}],58:[function(e,t){"use strict";var h,o,u,l,f,c,p,m,g,y,d,n=e("../utils/stream.js"),v=e("./mp4-generator.js"),b=e("../m2ts/m2ts.js"),_=e("../codecs/adts.js"),T=e("../codecs/h264").H264Stream,S=e("../aac"),w=e("../data/silence"),k=e("../utils/clock"),C=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],E=["width","height","profileIdc","levelIdc","profileCompatibility"],x=9e4;f=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}},c=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},y=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},d=function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n},(o=function(r){var a=[],s=0,t=0,l=0,c=Infinity;o.prototype.init.call(this),this.push=function(t){p(r,t),r&&C.forEach(function(e){r[e]=t[e]}),a.push(t)},this.setEarliestDts=function(e){t=e-r.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){c=e},this.setAudioAppendStart=function(e){l=e},this.flush=function(){var e,t,n,i;0!==a.length&&(e=this.trimAdtsFramesByEarliestDts_(a),r.baseMediaDecodeTime=g(r),this.prefixWithSilence_(r,e),r.samples=this.generateSampleTable_(e),n=v.mdat(this.concatenateFrameData_(e)),a=[],t=v.moof(s,[r]),i=new Uint8Array(t.byteLength+n.byteLength),s++,i.set(t),i.set(n,t.byteLength),m(r),this.trigger("data",{track:r,boxes:i})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var n,i,r,a=0,s=0,o=0,u=0;if(t.length&&(n=k.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(x/(e.samplerate/1024)),l&&c&&(s=n-Math.max(l,c),u=(o=Math.floor(s/a))*a),!(o<1||x/2<u))){for((i=w[e.samplerate])||(i=t[0].data),r=0;r<o;r++)t.splice(r,0,{data:i});e.baseMediaDecodeTime-=Math.floor(k.videoTsToAudioTs(u,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return r.minSegmentDts>=t?e:(r.minSegmentDts=Infinity,e.filter(function(e){return e.dts>=t&&(r.minSegmentDts=Math.min(r.minSegmentDts,e.dts),r.minSegmentPts=r.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(e){var t,n,i=0,r=new Uint8Array(d(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}}).prototype=new n,(h=function(l,o){var t,n,u=0,c=[],d=[];o=o||{},h.prototype.init.call(this),delete l.minPTS,this.gopCache_=[],this.push=function(e){p(l,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,l.sps=[e.data],E.forEach(function(e){l[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.data,l.pps=[e.data]),c.push(e)},this.flush=function(){for(var e,t,n,i,r,a;c.length&&"access_unit_delimiter_rbsp"!==c[0].nalUnitType;)c.shift();if(0===c.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=this.groupNalsIntoFrames_(c),(n=this.groupFramesIntoGops_(e))[0][0].keyFrame||((t=this.getGopForFusion_(c[0],l))?(n.unshift(t),n.byteLength+=t.byteLength,n.nalCount+=t.nalCount,n.pts=t.pts,n.dts=t.dts,n.duration+=t.duration):n=this.extendFirstKeyFrame_(n)),d.length){var s;if(!(s=o.alignGopsAtEnd?this.alignGopsAtEnd_(n):this.alignGopsAtStart_(n)))return this.gopCache_.unshift({gop:n.pop(),pps:l.pps,sps:l.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");m(l),n=s}p(l,n),l.samples=this.generateSampleTable_(n),r=v.mdat(this.concatenateNalData_(n)),l.baseMediaDecodeTime=g(l),this.trigger("processedGopsInfo",n.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:n.pop(),pps:l.pps,sps:l.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),c=[],this.trigger("baseMediaDecodeTime",l.baseMediaDecodeTime),this.trigger("timelineStartInfo",l.timelineStartInfo),i=v.moof(u,[l]),a=new Uint8Array(i.byteLength+r.byteLength),u++,a.set(i),a.set(r,i.byteLength),this.trigger("data",{track:l,boxes:a}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){m(l),t=undefined,n=undefined},this.getGopForFusion_=function(e){var t,n,i,r,a,s=45e3,o=1e4,u=Infinity;for(a=0;a<this.gopCache_.length;a++)i=(r=this.gopCache_[a]).gop,l.pps&&y(l.pps[0],r.pps[0])&&l.sps&&y(l.sps[0],r.sps[0])&&(i.dts<l.timelineStartInfo.dts||-o<=(t=e.dts-i.dts-i.duration)&&t<=s&&(!n||t<u)&&(n=r,u=t));return n?n.gop:null},this.extendFirstKeyFrame_=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},this.groupNalsIntoFrames_=function(e){var t,n,i=[],r=[];for(t=i.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.push(i),r},this.groupFramesIntoGops_=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},this.generateSampleTable_=function(e,t){var n,i,r,a,s,o=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)s=a[i],(r=f()).dataOffset=o,r.compositionTimeOffset=s.pts-s.dts,r.duration=s.duration,r.size=4*s.length,r.size+=s.byteLength,s.keyFrame&&(r.flags.dependsOn=2),o+=r.size,u.push(r);return u},this.concatenateNalData_=function(e){var t,n,i,r,a,s,o=0,u=e.byteLength,l=e.nalCount,c=new Uint8Array(u+4*l),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)s=a[i],d.setUint32(o,s.data.byteLength),o+=4,c.set(s.data,o),o+=s.data.byteLength;return c},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,o,u;for(a=e.byteLength,s=e.nalCount,o=e.duration,t=n=0;t<d.length&&n<e.length&&(i=d[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,o-=r.duration);return 0===n?e:n===e.length?null:((u=e.slice(n)).byteLength=a,u.duration=o,u.nalCount=s,u.pts=u[0].pts,u.dts=u[0].dts,u)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,o;for(t=d.length-1,n=e.length-1,a=null,s=!1;0<=t&&0<=n;){if(i=d[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===d.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(o=s?n:a))return e;var u=e.slice(o),l=u.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,nalCount:0});return u.byteLength=l.byteLength,u.duration=l.duration,u.nalCount=l.nalCount,u.pts=u[0].pts,u.dts=u[0].dts,u},this.alignGopsWith=function(e){d=e}}).prototype=new n,p=function(e,t){"number"==typeof t.pts&&(e.timelineStartInfo.pts===undefined&&(e.timelineStartInfo.pts=t.pts),e.minSegmentPts===undefined?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),e.maxSegmentPts===undefined?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(e.timelineStartInfo.dts===undefined&&(e.timelineStartInfo.dts=t.dts),e.minSegmentDts===undefined?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.maxSegmentDts===undefined?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},m=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},g=function(e){var t,n=e.minSegmentDts-e.timelineStartInfo.dts;return t=e.timelineStartInfo.baseMediaDecodeTime,t+=n,t=Math.max(0,t),"audio"===e.type&&(t*=e.samplerate/x,t=Math.floor(t)),t},(l=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,l.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new n,l.prototype.flush=function(e){var t,n,i,r,a=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,E.forEach(function(e){s.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,C.forEach(function(e){s.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=v.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=t.startPts-o,t.startTime/=9e4,t.endTime=t.endPts-o,t.endTime/=9e4,s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=n.pts-o,n.cueTime/=9e4,s.metadata.push(n);s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(u=function(i){var r,a,s=this,n=!0;u.prototype.init.call(this),i=i||{},this.baseMediaDecodeTime=i.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new b.MetadataStream,t.aacStream=new S,t.audioTimestampRolloverStream=new b.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new b.TimestampRolloverStream("timed-metadata"),t.adtsStream=new _,t.coalesceStream=new l(i,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(a=a||{timelineStartInfo:{baseMediaDecodeTime:s.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new o(a),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var n={};(this.transmuxPipeline_=n).type="ts",n.metadataStream=new b.MetadataStream,n.packetStream=new b.TransportPacketStream,n.parseStream=new b.TransportParseStream,n.elementaryStream=new b.ElementaryStream,n.videoTimestampRolloverStream=new b.TimestampRolloverStream("video"),n.audioTimestampRolloverStream=new b.TimestampRolloverStream("audio"),n.timedMetadataTimestampRolloverStream=new b.TimestampRolloverStream("timed-metadata"),n.adtsStream=new _,n.h264Stream=new T,n.captionStream=new b.CaptionStream,n.coalesceStream=new l(i,n.metadataStream),n.headOfPipeline=n.packetStream,n.packetStream.pipe(n.parseStream).pipe(n.elementaryStream),n.elementaryStream.pipe(n.videoTimestampRolloverStream).pipe(n.h264Stream),n.elementaryStream.pipe(n.audioTimestampRolloverStream).pipe(n.adtsStream),n.elementaryStream.pipe(n.timedMetadataTimestampRolloverStream).pipe(n.metadataStream).pipe(n.coalesceStream),n.h264Stream.pipe(n.captionStream).pipe(n.coalesceStream),n.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)r||"video"!==e.tracks[t].type?a||"audio"!==e.tracks[t].type||((a=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime):(r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=s.baseMediaDecodeTime;r&&!n.videoSegmentStream&&(n.coalesceStream.numberOfTracks++,n.videoSegmentStream=new h(r,i),n.videoSegmentStream.on("timelineStartInfo",function(e){a&&(a.timelineStartInfo=e,n.audioSegmentStream.setEarliestDts(e.dts))}),n.videoSegmentStream.on("processedGopsInfo",s.trigger.bind(s,"gopInfo")),n.videoSegmentStream.on("baseMediaDecodeTime",function(e){a&&n.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),n.h264Stream.pipe(n.videoSegmentStream).pipe(n.coalesceStream)),a&&!n.audioSegmentStream&&(n.coalesceStream.numberOfTracks++,n.audioSegmentStream=new o(a),n.adtsStream.pipe(n.audioSegmentStream).pipe(n.coalesceStream))}}),n.coalesceStream.on("data",this.trigger.bind(this,"data")),n.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,a&&(a.timelineStartInfo.dts=undefined,a.timelineStartInfo.pts=undefined,m(a),a.timelineStartInfo.baseMediaDecodeTime=e,t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),r&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),r.timelineStartInfo.dts=undefined,r.timelineStartInfo.pts=undefined,m(r),t.captionStream.reset(),r.timelineStartInfo.baseMediaDecodeTime=e),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){a&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){r&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(n){var t=c(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),n=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){n=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new n,t.exports={Transmuxer:u,VideoSegmentStream:h,AudioSegmentStream:o,AUDIO_PROPERTIES:C,VIDEO_PROPERTIES:E}},{"../aac":38,"../codecs/adts.js":40,"../codecs/h264":41,"../data/silence":42,"../m2ts/m2ts.js":50,"../utils/clock":60,"../utils/stream.js":62,"./mp4-generator.js":56}],59:[function(e,t){"use strict";var r=e("../m2ts/stream-types.js"),a=e("../m2ts/timestamp-rollover-stream.js").handleRollover,p={};p.ts=e("../m2ts/probe.js"),p.aac=e("../aac/probe.js");var l=9e4,m=188,g=71,i=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},s=function(e,t){for(var n,i=0,r=m;r<e.byteLength;)if(e[i]!==g||e[r]!==g)i++,r++;else{switch(n=e.subarray(i,r),p.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=p.ts.parsePat(n));break;case"pmt":t.table||(t.table=p.ts.parsePmt(n))}if(t.pid&&t.table)return;i+=m,r+=m}},o=function(e,t,n){for(var i,r,a,s,o=0,u=m,l=!1;u<e.byteLength;)if(e[o]!==g||e[u]!==g)o++,u++;else{switch(i=e.subarray(o,u),p.ts.parseType(i,t.pid)){case"pes":r=p.ts.parsePesType(i,t.table),a=p.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=p.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),l=!0)}if(l)break;o+=m,u+=m}for(o=(u=e.byteLength)-m,l=!1;0<=o;)if(e[o]!==g||e[u]!==g)o--,u--;else{switch(i=e.subarray(o,u),p.ts.parseType(i,t.pid)){case"pes":r=p.ts.parsePesType(i,t.table),a=p.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(s=p.ts.parsePesTime(i))&&(s.type="audio",n.audio.push(s),l=!0)}if(l)break;o-=m,u-=m}},u=function(e,t,n){for(var i,r,a,s,o,u,l,c=0,d=m,h=!1,f={data:[],size:0};d<e.byteLength;)if(e[c]!==g||e[d]!==g)c++,d++;else{switch(i=e.subarray(c,d),p.ts.parseType(i,t.pid)){case"pes":if(r=p.ts.parsePesType(i,t.table),a=p.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!h&&(s=p.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0),!n.firstKeyFrame)){if(a&&0!==f.size){for(o=new Uint8Array(f.size),u=0;f.data.length;)l=f.data.shift(),o.set(l,u),u+=l.byteLength;p.ts.videoPacketContainsKeyFrame(o)&&(n.firstKeyFrame=p.ts.parsePesTime(o),n.firstKeyFrame.type="video"),f.size=0}f.data.push(i),f.size+=i.byteLength}}if(h&&n.firstKeyFrame)break;c+=m,d+=m}for(c=(d=e.byteLength)-m,h=!1;0<=c;)if(e[c]!==g||e[d]!==g)c--,d--;else{switch(i=e.subarray(c,d),p.ts.parseType(i,t.pid)){case"pes":r=p.ts.parsePesType(i,t.table),a=p.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(s=p.ts.parsePesTime(i))&&(s.type="video",n.video.push(s),h=!0)}if(h)break;c-=m,d-=m}},c=function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach(function(e){e.dts=a(e.dts,n),e.pts=a(e.pts,n),e.dtsTime=e.dts/l,e.ptsTime=e.pts/l})}if(e.video&&e.video.length){var i=t;if(void 0===i&&(i=e.video[0].dts),e.video.forEach(function(e){e.dts=a(e.dts,i),e.pts=a(e.pts,i),e.dtsTime=e.dts/l,e.ptsTime=e.pts/l}),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=a(r.dts,i),r.pts=a(r.pts,i),r.dtsTime=r.dts/l,r.ptsTime=r.dts/l}}},d=function(e){for(var t,n=!1,i=0,r=null,a=null,s=0,o=0;3<=e.length-o;){switch(p.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=p.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=p.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=p.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=p.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var u=l/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*u,pts:a+1024*i*u}]}},h=function(e){var t={pid:null,table:null},n={};for(var i in s(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case r.H264_STREAM_TYPE:n.video=[],u(e,t,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],o(e,t,n),0===n.audio.length&&delete n.audio}}return n},n=function(e,t){var n;return(n=i(e)?d(e):h(e))&&(n.audio||n.video)?(c(n,t),n):null};t.exports={inspect:n}},{"../aac/probe.js":39,"../m2ts/probe.js":52,"../m2ts/stream-types.js":53,"../m2ts/timestamp-rollover-stream.js":54}],60:[function(e,t){var n,i,r,a,s,o,u=9e4;n=function(e){return e*u},i=function(e,t){return e*t},r=function(e){return e/u},a=function(e,t){return e/t},s=function(e,t){return n(a(e,t))},o=function(e,t){return i(r(e),t)},t.exports={secondsToVideoTs:n,secondsToAudioTs:i,videoTsToSeconds:r,audioTsToSeconds:a,audioTsToVideoTs:s,videoTsToAudioTs:o}},{}],61:[function(e,t){"use strict";var n;n=function(i){var r=i.byteLength,a=0,s=0;this.length=function(){return 8*r},this.bitsAvailable=function(){return 8*r+s},this.loadWord=function(){var e=i.byteLength-r,t=new Uint8Array(4),n=Math.min(4,r);if(0===n)throw new Error("no bytes available");t.set(i.subarray(e,e+n)),a=new DataView(t.buffer).getUint32(0),s=8*n,r-=n},this.skipBits=function(e){var t;e<s||(e-=s,e-=8*(t=Math.floor(e/8)),r-=t,this.loadWord()),a<<=e,s-=e},this.readBits=function(e){var t=Math.min(s,e),n=a>>>32-t;return 0<(s-=t)?a<<=t:0<r&&this.loadWord(),0<(t=e-t)?n<<t|this.readBits(t):n},this.skipLeadingZeros=function(){var e;for(e=0;e<s;++e)if(0!=(a&2147483648>>>e))return a<<=e,s-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.exports=n},{}],62:[function(e,t){"use strict";var n=function(){this.init=function(){var s={};this.on=function(e,t){s[e]||(s[e]=[]),s[e]=s[e].concat(t)},this.off=function(e,t){var n;return!!s[e]&&(n=s[e].indexOf(t),s[e]=s[e].slice(),s[e].splice(n,1),-1<n)},this.trigger=function(e,t){var n,i,r,a;if(n=s[e])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,t);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){s={}}}}
;n.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},n.prototype.push=function(e){this.trigger("data",e)},n.prototype.flush=function(e){this.trigger("done",e)},t.exports=n},{}],63:[function(e,t,n){var i,r,c,a,s,d;i=this,r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=this.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=d.normalizePath(i.path),d.buildURLFromParts(i)}var r=this.parseURL(t);if(!r)throw new Error("Error trying to parse relative URL.");if(r.scheme)return n.alwaysNormalize?(r.path=d.normalizePath(r.path),d.buildURLFromParts(r)):t;var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");if(!a.netLoc&&a.path&&"/"!==a.path[0]){var s=c.exec(a.path);a.netLoc=s[1],a.path=s[2]}a.netLoc&&!a.path&&(a.path="/");var o={scheme:a.scheme,netLoc:r.netLoc,path:null,params:r.params,query:r.query,fragment:r.fragment};if(!r.netLoc&&(o.netLoc=a.netLoc,"/"!==r.path[0]))if(r.path){var u=a.path,l=u.substring(0,u.lastIndexOf("/")+1)+r.path;o.path=d.normalizePath(l)}else o.path=a.path,r.params||(o.params=a.params,r.query||(o.query=a.query));return null===o.path&&(o.path=n.alwaysNormalize?d.normalizePath(r.path):r.path),d.buildURLFromParts(o)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(s,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},"object"==typeof n&&"object"==typeof t?t.exports=d:"function"==typeof o&&o.amd?o([],function(){return d}):"object"==typeof n?n.URLToolkit=d:i.URLToolkit=d},{}],64:[function(r,s,l){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(l,"__esModule",{value:!0});var n=t(r("global/window")),i=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),a=function a(e){Object.defineProperties(e.frame,{id:{get:function t(){return i["default"].log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function t(){return i["default"].log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function t(){return i["default"].log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},o=function o(e){undefined;return isNaN(e)||Math.abs(e)===Infinity?Number.MAX_VALUE:e},u=function u(i,e,t){var s,r=n["default"].WebKitDataCue||n["default"].VTTCue;e&&e.forEach(function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))},i),t&&(s=o(i.mediaSource_.duration),t.forEach(function(e){var n=e.cueTime+this.timestampOffset;e.frames.forEach(function(e){var t=new r(n,n,e.value||e.url||e.data||"");t.frame=e,t.value=e,a(t),this.metadataTrack_.addCue(t)},this)},i),i.metadataTrack_&&i.metadataTrack_.cues&&i.metadataTrack_.cues.length&&function(){for(var e=i.metadataTrack_.cues,t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);var r=t.reduce(function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e},{}),a=Object.keys(r).sort(function(e,t){return Number(e)-Number(t)});a.forEach(function(e,t){var n=r[e],i=Number(a[t+1])||s;n.forEach(function(e){e.endTime=i})})}())};l["default"]={addTextTrackData:u,durationOfVideo:o},s.exports=l["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":32}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function i(e){return/mp4a\.\d+.\d+/i.test(e)},r=function r(e){return/avc1\.[\da-f]+/i.test(e)},a=function a(e){var r={type:"",parameters:{}},t=e.trim().split(";");return r.type=t.shift().trim(),t.forEach(function(e){var t=e.trim().split("=");if(1<t.length){var n=t[0].replace(/"/g,"").trim(),i=t[1].replace(/"/g,"").trim();r.parameters[n]=i}}),r},s=function s(e){return e.map(function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})};n["default"]={isAudioCodec:i,parseContentType:a,isVideoCodec:r,translateLegacyCodecs:s},t.exports=n["default"]},{}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var s=function s(e,t,n){var i=t.player_;if(n.captions&&n.captions.length)for(var r in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[r]){i.tech_.trigger({type:"usage",name:"hls-608"});var a=i.textTracks().getTrackById(r);e.inbandTextTracks_[r]=a||i.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)};n["default"]=s,t.exports=n["default"]},{}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768};n["default"]=i,t.exports=n["default"]},{}],68:[function(m,g,y){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(y,"__esModule",{value:!0});var s=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),o=function f(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},u=t(m("global/document")),l=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),c=t(m("./flash-source-buffer")),n=t(m("./flash-constants")),d=m("./codec-utils"),i=function(){function e(){var t=this;r(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(e){t.swfObj=u["default"].getElementById(e.swfId),t.player_=(0,l["default"])(t.swfObj.parentNode),t.tech_=t.swfObj.tech,t.readyState="open",t.tech_.on("seeking",function(){for(var e=t.sourceBuffers.length;e--;)t.sourceBuffers[e].abort()}),t.swfObj&&t.swfObj.vjs_load()})}return a(e,l["default"].EventTarget),s(e,[{key:"addSeekableRange_",value:function t(){}},{key:"addSourceBuffer",value:function i(e){var t=(0,d.parseContentType)(e),n=undefined;if("video/mp2t"!==t.type&&"audio/mp2t"!==t.type)throw new Error("NotSupportedError (Video.js)");return n=new c["default"](this),this.sourceBuffers.push(n),n}},{key:"endOfStream",value:function n(e){"network"===e?this.tech_.error(2):"decode"===e&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),e}();y["default"]=i;try{Object.defineProperty(i.prototype,"duration",{get:function f(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function p(e){var t=undefined,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",e),e<n)for(t=0;t<this.sourceBuffers.length;t++)this.sourceBuffers[t].remove(e,n);return e}})}catch(Q){i.prototype.duration=NaN}for(var h in n["default"])i[h]=n["default"][h];g.exports=y["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./codec-utils":65,"./flash-constants":67,"./flash-source-buffer":69,"global/document":31}],69:[function(i,r,a){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(a,"__esModule",{value:!0});var c=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),d=function b(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},h=t(i("global/window")),f=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),p=t(i("mux.js/lib/flv")),m=t(i("./remove-cues-from-track")),g=t(i("./create-text-tracks-if-necessary")),y=i("./add-text-track-data"),v=t(i("./flash-transmuxer-worker")),_=t(i("webwackify")),T=t(i("./flash-constants")),S=function S(){var e=undefined;try{e=i.resolve("./flash-transmuxer-worker")}catch(Q){}return e},w=function w(e){h["default"].setTimeout(e,T["default"].TIME_BETWEEN_CHUNKS)},k=function k(){return Math.random().toString(36).slice(2,8)},C=function C(e,t){("number"!=typeof t||t<0)&&(t=0);var n=Math.pow(10,t);return Math.round(e*n)/n},n=function(){function u(e){var t=this;l(this,u),d(Object.getPrototypeOf(u.prototype),"constructor",this).call(this);var n=undefined;this.chunkSize_=T["default"].BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=e,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0,n=h["default"].btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(p["default"].getFlvHeader())));var i=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+i+k(),this.flashEncodedDataName_="vjs_flashEncodedData_"+i+k(),h["default"][this.flashEncodedHeaderName_]=function(){return delete h["default"][t.flashEncodedHeaderName_],n},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,_["default"])(v["default"],S()),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(e){"data"===e.data.action&&t.receiveBuffer_(e.data.segment)},this.one("updateend",function(){t.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function a(){return this.timestampOffset_},set:function s(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function o(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return f["default"].createTimeRange();var e=this.mediaSource_.swfObj.vjs_getProperty("buffered");return e&&e.length&&(e[0][0]=C(e[0][0],3),e[0][1]=C(e[0][1],3)),f["default"].createTimeRanges(e)}}),this.mediaSource_.player_.on("seeked",function(){if((0,m["default"])(0,Infinity,t.metadataTrack_),t.inbandTextTracks_)for(var e in t.inbandTextTracks_)(0,m["default"])(0,Infinity,t.inbandTextTracks_[e])});var r=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",r),this.mediaSource_.player_.tech_.hls.on("dispose",function(){t.transmuxer_.terminate(),t.mediaSource_.player_.tech_.off("hls-reset",r)})}return s(u,f["default"].EventTarget),c(u,[{key:"appendBuffer",value:function n(e){var t=undefined;if(this.updating)throw(t=new Error("SourceBuffer.append() cannot be called while an update is in progress")).name="InvalidStateError",t.code=11,t;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function e(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function i(e,t){if((0,m["default"])(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,m["default"])(e,t,this.inbandTextTracks_[n]);this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function r(t){var n=this;(0,g["default"])(this,this.mediaSource_,t),(0,y.addTextTrackData)(this,t.captions,t.metadata),w(function(){var e=n.convertTagsToData_(t);0===n.buffer_.length&&w(n.processBuffer_.bind(n)),e&&(n.buffer_.push(e),n.bufferSize_+=e.byteLength)})}},{key:"processBuffer_",value:function o(){var e=this,t=T["default"].BYTES_PER_CHUNK;if(this.buffer_.length){var n=this.buffer_[0].subarray(0,t);n.byteLength<t||this.buffer_[0].byteLength===t?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(t),this.bufferSize_-=n.byteLength;for(var i=[],r=n.byteLength,a=0;a<r;a++)i.push(String.fromCharCode(n[a]));var s=h["default"].btoa(i.join(""));h["default"][this.flashEncodedDataName_]=function(){return w(e.processBuffer_.bind(e)),delete h["default"][e.flashEncodedDataName_],s},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function b(e){var t=0,n=this.mediaSource_.tech_,i=0,r=undefined,a=e.tags.videoTags,s=e.tags.audioTags;if(isNaN(this.basePtsOffset_)&&(a.length||s.length)){var o=a[0]||{pts:Infinity},u=s[0]||{pts:Infinity};this.basePtsOffset_=Math.min(u.pts,o.pts)}n.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(n.buffered().length&&(i=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(i=Math.max(i,n.currentTime()-this.timestampOffset)),i*=1e3,i+=this.basePtsOffset_):i=this.videoBufferEnd_+.1;var l=a.length;if(l&&a[l-1].pts>=i){for(;--l;){var c=a[l];if(!(c.pts>i)&&(c.keyFrame||c.metaDataTag))break}for(;l;){if(!a[l-1].metaDataTag)break;l--}}var d=a.slice(l),h=undefined;for(h=isNaN(this.audioBufferEnd_)?i:this.audioBufferEnd_+.1,d.length&&(h=Math.min(h,d[0].pts)),l=0;l<s.length&&!(s[l].pts>=h);)l++;var f=s.slice(l);f.length&&(this.audioBufferEnd_=f[f.length-1].pts),d.length&&(this.videoBufferEnd_=d[d.length-1].pts);var p=this.getOrderedTags_(d,f);if(0!==p.length){if(p[0].pts<i&&n.seeking()){var m=1/30,g=n.currentTime()-(i-p[0].pts)/1e3;g<m&&(g=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(g)}catch(Q){}}for(var y=0;y<p.length;y++)t+=p[y].bytes.byteLength;r=new Uint8Array(t);y=0;for(var v=0;y<p.length;y++)r.set(p[y].bytes,v),v+=p[y].bytes.byteLength;return r}}},{key:"getOrderedTags_",value:function a(e,t){for(var n=undefined,i=[];e.length||t.length;)n=e.length?t.length&&t[0].dts<e[0].dts?t.shift():e.shift():t.shift(),i.push(n);return i}},{key:"onHlsReset_",value:function t(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]),u}();a["default"]=n,r.exports=a["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":64,"./create-text-tracks-if-necessary":66,"./flash-constants":67,"./flash-transmuxer-worker":70,"./remove-cues-from-track":72,"global/window":32,"mux.js/lib/flv":46,webwackify:76}],70:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=i(e("global/window")),u=i(e("mux.js/lib/flv")),l=function l(e){e.on("data",function(e){r["default"].postMessage({action:"data",segment:e})}),e.on("done",function(){r["default"].postMessage({action:"done"})})},a=function(){function t(e){s(this,t),this.options=e||{},this.init()}return o(t,[{key:"init",value:function e(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new u["default"].Transmuxer(this.options),l(this.transmuxer)}},{key:"push",value:function n(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function i(){this.init()}},{key:"flush",value:function r(){this.transmuxer.flush()}},{key:"resetCaptions",value:function a(){this.transmuxer.resetCaptions()}}]),t}(),c=function c(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new a(e.data.options):(this.messageHandlers||(this.messageHandlers=new a),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}};n["default"]=function(e){return new c(e)},t.exports=n["default"]},{"global/window":32,"mux.js/lib/flv":46}],71:[function(r,o,g){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(g,"__esModule",{value:!0});var a=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),l=function m(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},c=t(r("global/window")),d=t(r("global/document")),h=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),s=t(r("./virtual-source-buffer")),f=r("./add-text-track-data"),p=r("./codec-utils"),i=function(){function o(){var a=this;u(this,o),l(Object.getPrototypeOf(o.prototype),"constructor",this).call(this);var e=undefined;for(e in this.nativeMediaSource_=new c["default"].MediaSource,this.nativeMediaSource_)e in o.prototype||"function"!=typeof this.nativeMediaSource_[e]||(this[e]=this.nativeMediaSource_[e].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function t(){return this.duration_===Infinity?this.duration_:this.nativeMediaSource_.duration},set:function n(e){(this.duration_=e)===Infinity||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(this,"seekable",{get:function i(){return this.duration_===Infinity?h["default"].createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function r(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function s(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){if(a.activeSourceBuffers_.length=0,1===a.sourceBuffers.length){var e=a.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void a.activeSourceBuffers_.push(e)}for(var t=!1,n=!0,i=0;i<a.player_.audioTracks().length;i++){var r=a.player_.audioTracks()[i];if(r.enabled&&"main"!==r.kind){n=!(t=!0);break}}a.sourceBuffers.forEach(function(e){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=t;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,n=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=n))return;a.activeSourceBuffers_.push(e)})},this.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(e){e.appendAudioInitSegment_=!0})},this.onHlsReset_=function(){a.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})})},this.onHlsSegmentTimeMapping_=function(t){a.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))},this),this.on("sourceopen",function(){var e=d["default"].querySelector('[src="'+a.url_+'"]');e&&(a.player_=(0,h["default"])(e.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_))}),this.on("sourceended",function(){for(var e=(0,f.durationOfVideo)(a.duration),t=0;t<a.sourceBuffers.length;t++){var n=a.sourceBuffers[t],i=n.metadataTrack_&&n.metadataTrack_.cues;i&&i.length&&(i[i.length-1].endTime=e)}}),this.on("sourceclose",function(){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}return n(o,h["default"].EventTarget),a(o,[{key:"addSeekableRange_",value:function i(e,t){var n=undefined;if(this.duration!==Infinity)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function r(e){var t=undefined,n=(0,p.parseContentType)(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var i=[];n.parameters&&n.parameters.codecs&&(i=n.parameters.codecs.split(","),i=(i=(0,p.translateLegacyCodecs)(i)).filter(function(e){return(0,p.isAudioCodec)(e)||(0,p.isVideoCodec)(e)})),0===i.length&&(i=["avc1.4d400d","mp4a.40.2"]),t=new s["default"](this,i),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),o}();g["default"]=i,o.exports=g["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./virtual-source-buffer":75,"global/document":31,"global/window":32}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function a(e,t,n){var i=undefined,r=undefined;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime<=t&&r.endTime>=e&&n.removeCue(r)};n["default"]=a,t.exports=n["default"]},{}],73:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),r=i(e("global/window")),d=i(e("mux.js/lib/mp4")),h=function h(e){e.on("data",function(e){var t=e.initSegment;e.initSegment={data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength};var n=e.data;e.data=n.buffer,r["default"].postMessage({action:"data",segment:e,byteOffset:n.byteOffset,byteLength:n.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){r["default"].postMessage({action:"caption",data:e})}),e.on("done",function(){r["default"].postMessage({action:"done"})}),e.on("gopInfo",function(e){r["default"].postMessage({action:"gopInfo",gopInfo:e})})},a=function(){function t(e){l(this,t),this.options=e||{},this.init()}return c(t,[{key:"init",value:function e(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new d["default"].Transmuxer(this.options),h(this.transmuxer)}},{key:"push",value:function n(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function i(){this.init()}},{key:"setTimestampOffset",value:function r(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function a(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function s(){this.transmuxer.flush()}},{key:"resetCaptions",value:function o(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function u(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),t}(),s=function s(e){e.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new a(e.data.options):(this.messageHandlers||(this.messageHandlers=new a),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}};n["default"]=function(e){return new s(e)},t.exports=n["default"]},{"global/window":32,"mux.js/lib/mp4":55}],74:[function(f,e,p){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(p,"__esModule",{value:!0});var i=t(f("global/window")),r=t(f("./flash-media-source")),a=t(f("./html-media-source")),s=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),o=0,n={mode:"auto"};s["default"].mediaSources={};var u=function u(e,t){var n=s["default"].mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},l=function l(){return!!i["default"].MediaSource&&!!i["default"].MediaSource.isTypeSupported&&i["default"].MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},c=function c(e){var t=s["default"].mergeOptions(n,e);if(this.MediaSource={open:u,supportsNativeMediaSources:l},"html5"===t.mode||"auto"===t.mode&&l())return new a["default"];if(s["default"].getTech("Flash"))return new r["default"];throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};(p.MediaSource=c).open=u,c.supportsNativeMediaSources=l;var d={createObjectURL:function h(e){var t="blob:vjs-media-source/",n=undefined;return e instanceof a["default"]?(n=i["default"].URL.createObjectURL(e.nativeMediaSource_),e.url_=n):e instanceof r["default"]?(n=t+o,o++,s["default"].mediaSources[n]=e,n):(n=i["default"].URL.createObjectURL(e),e.url_=n)}};p.URL=d,s["default"].MediaSource=c,s["default"].URL=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":68,"./html-media-source":71,"global/window":32}],75:[function(i,e,r){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var h=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),f=function E(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},p=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),m=t(i("./create-text-tracks-if-necessary")),g=t(i("./remove-cues-from-track")),y=i("./add-text-track-data"),v=t(i("webwackify")),b=t(i("./transmuxer-worker")),_=i("./codec-utils"),T=function T(){var e=undefined;try{e=i.resolve("./transmuxer-worker")}catch(Q){}return e},S=function S(e,t){var i=e.addSourceBuffer(t),r=Object.create(null);r.updating=!1,r.realBuffer_=i;var n=function(t){"function"==typeof i[t]?r[t]=function(){return i[t].apply(i,arguments)}:"undefined"==typeof r[t]&&Object.defineProperty(r,t,{get:function e(){return i[t]},set:function n(e){return i[t]=e}})};for(var a in i)n(a);return r},w=function w(e,t,n){if(!t||!e.length)return[];var i=Math.ceil(9e4*(t.currentTime()-n+3)),r=undefined;for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)};r.gopsSafeToAlignWith=w;var k=function k(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)};r.updateGopBuffer=k;var C=function C(e,t,n,i){for(var r=Math.ceil(9e4*(t-i)),a=Math.ceil(9e4*(n-i)),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var u=o+1;u--&&!(e[u].pts<=r););return u=Math.max(u,0),s.splice(u,o-u+1),s};r.removeGopBuffer=C;var n=function(){function l(e,t){var n=this;c(this,l),f(Object.getPrototypeOf(l.prototype),"constructor",this).call(this,p["default"].EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=e,this.codecs_=t,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=11<=p["default"].browser.IE_VERSION;var i={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(e){(0,_.isAudioCodec)(e)?n.audioCodec_=e:(0,_.isVideoCodec)(e)&&(n.videoCodec_=e)}),this.transmuxer_=(0,v["default"])(b["default"],T()),this.transmuxer_.postMessage({action:"init",options:i}),this.transmuxer_.onmessage=function(e){return"data"===e.data.action?n.data_(e):"done"===e.data.action?n.done_(e):"gopInfo"===e.data.action?n.appendGopInfo_(e):void 0},Object.defineProperty(this,"timestampOffset",{get:function r(){return this.timestampOffset_},set:function a(e){"number"==typeof e&&0<=e&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(this,"appendWindowStart",{get:function s(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function a(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(this,"updating",{get:function o(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function u(){var e=null,t=null,n=0,i=[],r=[];if(
!this.videoBuffer_&&!this.audioBuffer_)return p["default"].createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return p["default"].createTimeRange();for(var a=this.videoBuffer_.buffered,s=this.audioBuffer_.buffered,o=a.length;o--;)i.push({time:a.start(o),type:"start"}),i.push({time:a.end(o),type:"end"});for(o=s.length;o--;)i.push({time:s.start(o),type:"start"}),i.push({time:s.end(o),type:"end"});for(i.sort(function(e,t){return e.time-t.time}),o=0;o<i.length;o++)"start"===i[o].type?2===++n&&(e=i[o].time):"end"===i[o].type&&1===--n&&(t=i[o].time),null!==e&&null!==t&&(r.push([e,t]),t=e=null);return p["default"].createTimeRanges(r)}})}return d(l,p["default"].EventTarget),h(l,[{key:"data_",value:function n(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),(0,m["default"])(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function e(){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function t(){var i=this,r=["audio","video"];r.forEach(function(t){if(i[t+"Codec_"]&&!i[t+"Buffer_"]){var n=null;if(i.mediaSource_[t+"Buffer_"])(n=i.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+i[t+"Codec_"]+'"';n=S(i.mediaSource_.nativeMediaSource_,e),i.mediaSource_[t+"Buffer_"]=n}i[t+"Buffer_"]=n,["update","updatestart","updateend"].forEach(function(e){n.addEventListener(e,function(){if("audio"!==t||!i.audioDisabled_)return"updateend"===e&&(i[t+"Buffer_"].updating=!1),r.every(function(e){return!("audio"!==e||!i.audioDisabled_)||(t===e||!i[e+"Buffer_"]||!i[e+"Buffer_"].updating)})?i.trigger(e):void 0})})}})}},{key:"appendBuffer",value:function i(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:w(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function r(e){this.gopBuffer_=k(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function a(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=C(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),(0,g["default"])(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,g["default"])(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function s(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(e,t){var n=t.type,i=t.data,r=t.initSegment;return e[n].segments.push(i),e[n].bytes+=i.byteLength,e[n].initSegment=r,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),(0,y.addTextTrackData)(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function o(e,t){var n=0,i=undefined;if(e.bytes){i=new Uint8Array(e.bytes),e.segments.forEach(function(e){i.set(e,n),n+=e.byteLength});try{t.updating=!0,t.appendBuffer(i)}catch(r){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:r.message,originalError:r})}}}},{key:"abort",value:function u(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),l}();r["default"]=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":64,"./codec-utils":65,"./create-text-tracks-if-necessary":66,"./remove-cues-from-track":72,"./transmuxer-worker":73,webwackify:76}],76:[function(e,t,n,i,r,a){var l=i,c=r,d=a,h=JSON.stringify,s=!1;void 0===l&&(s=!0,l=function(n){function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var i={};return r.m=n,r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function n(){return e["default"]}:function i(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=entryModule)},c=__webpack_modules__);var o=function(e){for(var t,n=Object.keys(d),i=0;i<n.length;i++){var r=n[i],a=d[r].exports;if(a===e||a&&a["default"]===e){t=r;break}}if(!t){t=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var s={};for(i=0;i<n.length;i++){s[r=n[i]]=r}c[t]=["function(require,module,exports){"+e+"(self); }",s]}var o=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};return u[t]=t,c[o]=["function(require,module,exports){var f = require("+h(t)+");(f.default ? f.default : f)(self);}",u],"("+l+")({"+Object.keys(c).map(function(e){return h(e)+":["+c[e][0]+","+h(c[e][1])+"]"}).join(",")+"},{},["+h(o)+"])"},u=function(e,t){var n,i="string"==typeof t;n=i?{}:[],Object.keys(c).forEach(function(e){c[e]&&(n[e]=c[e].toString())});var r,a=__webpack_require__(t);if(!a||a!==e&&a["default"]!==e){var s=n[t];n[t]=s.substring(0,s.length-1)+"\n"+e.name+"();\n}"}i?(t=h(t),r="{"+Object.keys(n).map(function(e){return h(e)+":"+n[e]}).join(",")+"}"):r="["+n.join(",")+"]";return"var fn = ("+l.toString().replace("entryModule",t)+")("+r+');\n(typeof fn === "function") && fn(self);'};t.exports=function f(e,t){var n;n=s?u(e,t):o(e);var i=new Blob([n],{type:"text/javascript"}),r=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(i),a=new Worker(r);return a.objectURL=r,a}},{}],77:[function(L,D){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),d=function I(e,t,n){for(var i=!0;i;){var r=e,a=t,s=n;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,a);if(o!==undefined){if("value"in o)return o.value;var u=o.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(r);if(null===l)return undefined;e=l,t=a,n=s,i=!0,o=l=undefined}},h=t(L("global/document")),n=t(L("./playlist-loader")),i=t(L("./playlist")),f=t(L("./xhr")),r=L("aes-decrypter"),a=t(L("./bin-utils")),s=L("videojs-contrib-media-sources"),o=t(L("m3u8-parser")),y=t("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),v=L("./master-playlist-controller"),p=t(L("./config")),b=t(L("./rendition-mixin")),m=t(L("global/window")),_=t(L("./playback-watcher")),g=t(L("./reload-source-on-error")),T=L("./playlist-selectors.js"),S={PlaylistLoader:n["default"],Playlist:i["default"],Decrypter:r.Decrypter,AsyncStream:r.AsyncStream,decrypt:r.decrypt,utils:a["default"],STANDARD_PLAYLIST_SELECTOR:T.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:T.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:T.comparePlaylistBandwidth,comparePlaylistResolution:T.comparePlaylistResolution,xhr:(0,f["default"])()},w=4194304;["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(S,t,{get:function e(){return y["default"].log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),p["default"][t]},set:function n(e){y["default"].log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?y["default"].log.warn("value of Hls."+t+" must be greater than or equal to 0"):p["default"][t]=e}})});var k,C=function C(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.uri){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})},E=function E(t,e){e.representations().forEach(function(e){t.addQualityLevel(e)}),C(t,e.playlists)};S.canPlaySource=function(){return y["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},S.supportsNativeHls=(k=h["default"].createElement("video"),!!y["default"].getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(k.canPlayType(e))})),S.isSupported=function(){return y["default"].log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var x=y["default"].getComponent("Component"),A=function(){function s(e,t,n){var i=this;if(u(this,s),d(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,t,n.hls),t.options_&&t.options_.playerId){var r=(0,y["default"])(t.options_.playerId);r.hasOwnProperty("hls")||Object.defineProperty(r,"hls",{get:function a(){return y["default"].log.warn("player.hls is deprecated. Use player.tech_.hls instead."),t.trigger({type:"usage",name:"hls-player-access"}),i}})}if(this.tech_=t,this.source_=e,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(h["default"],["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var e=h["default"].fullscreenElement||h["default"].webkitFullscreenElement||h["default"].mozFullScreenElement||h["default"].msFullscreenElement;e&&e.contains(i.tech_.el())&&i.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}return l(s,x),c(s,[{key:"setOptions_",value:function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=w),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===w,["withCredentials","bandwidth","handleManifestRedirects"].forEach(function(e){"undefined"!=typeof t.source_[e]&&(t.options_[e]=t.source_[e])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function g(e){var t=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=S,this.masterPlaylistController_=new v.MasterPlaylistController(this.options_),this.playbackWatcher_=new _["default"](y["default"].mergeOptions(this.options_,{seekable:function n(){return t.seekable()}})),this.masterPlaylistController_.on("error",function(){y["default"].players[t.tech_.options_.playerId].error(t.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):S.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=S.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function i(){return this.masterPlaylistController_.selectPlaylist},set:function r(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function a(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function r(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function s(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function r(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function o(){var e=1/(this.bandwidth||1),t=undefined;return t=0<this.throughput?1/this.throughput:0,Math.floor(1/(e+t))},set:function r(){y["default"].log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function u(){return t.bandwidth||0},enumerable:!0},mediaRequests:{get:function l(){return t.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function c(){return t.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function d(){return t.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function h(){return t.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function f(){return t.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function p(){return t.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function m(){return t.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,b["default"])(t)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return t.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(y["default"].URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function n(){var e=this,t=y["default"].players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){E(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){C(e.qualityLevels_,e.playlists)}))}},{key:"play",value:function t(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function i(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function r(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function a(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function o(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),d(Object.getPrototypeOf(s.prototype),"dispose",this).call(this)}}]),s}(),P=function P(a){return{canHandleSource:function r(e,t){var n=arguments.length<=1||t===undefined?{}:arguments[1],i=y["default"].mergeOptions(y["default"].options,n);return(!i.hls||!i.hls.mode||i.hls.mode===a)&&P.canPlayType(e.type,i)},handleSource:function s(e,t,n){var i=arguments.length<=2||n===undefined?{}:arguments[2],r=y["default"].mergeOptions(y["default"].options,i,{hls:{mode:a}});return"flash"===a&&t.setTimeout(function(){t.trigger("loadstart")},1),t.hls=new A(e,t,r),t.hls.xhr=(0,f["default"])(),t.hls.src(e.src),t.hls},canPlayType:function o(e,t){var n=arguments.length<=1||t===undefined?{}:arguments[1],i=y["default"].mergeOptions(y["default"].options,n);return P.canPlayType(e,i)?"maybe":""}}};P.canPlayType=function(e,t){if(y["default"].browser.IE_VERSION&&y["default"].browser.IE_VERSION<=10)return!1;var n=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;return!(!t.hls.overrideNative&&S.supportsNativeHls)&&n.test(e)},"undefined"!=typeof y["default"].MediaSource&&"undefined"!=typeof y["default"].URL||(y["default"].MediaSource=s.MediaSource,y["default"].URL=s.URL);var O=y["default"].getTech("Flash");s.MediaSource.supportsNativeMediaSources()&&y["default"].getTech("Html5").registerSourceHandler(P("html5"),0),m["default"].Uint8Array&&O&&O.registerSourceHandler(P("flash")),y["default"].HlsHandler=A,y["default"].HlsSourceHandler=P,y["default"].Hls=S,y["default"].use||y["default"].registerComponent("Hls",S),y["default"].m3u8=o["default"],y["default"].options.hls=y["default"].options.hls||{},y["default"].registerPlugin?y["default"].registerPlugin("reloadSourceOnError",g["default"]):y["default"].plugin("reloadSourceOnError",g["default"]),D.exports={Hls:S,HlsHandler:A,HlsSourceHandler:P}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":8,"./playlist":11,"./playlist-loader":9,"./playlist-selectors.js":10,"./reload-source-on-error":13,"./rendition-mixin":14,"./xhr":21,"aes-decrypter":25,"global/document":31,"global/window":32,"m3u8-parser":33,"videojs-contrib-media-sources":74}]},{},[77])(77)}),function(){var e=this;(function(){(function(){var n=[].slice;this.ActionCable={INTERNAL:{message_types:{welcome:"welcome",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]},WebSocket:window.WebSocket,logger:window.console,createConsumer:function(e){var t;return null==e&&(e=null!=(t=this.getConfig("url"))?t:this.INTERNAL.default_mount_path),new u.Consumer(this.createWebSocketURL(e))},getConfig:function(e){var t;return null!=(t=document.head.querySelector("meta[name='action-cable-"+e+"']"))?t.getAttribute("content"):void 0},createWebSocketURL:function(e){var t;return e&&!/^wss?:/i.test(e)?((t=document.createElement("a")).href=e,t.href=t.href,t.protocol=t.protocol.replace("http","ws"),t.href):e},startDebugging:function(){return this.debugging=!0},stopDebugging:function(){return this.debugging=null},log:function(){var e,t;if(e=1<=arguments.length?n.call(arguments,0):[],this.debugging)return e.push(Date.now()),(t=this.logger).log.apply(t,["[ActionCable]"].concat(n.call(e)))}}}).call(this)}).call(e);var u=e.ActionCable;(function(){(function(){var i=function(e,t){return function(){return e.apply(t,arguments)}};u.ConnectionMonitor=function(){function e(e){this.connection=e,this.visibilityDidChange=i(this.visibilityDidChange,this),this.reconnectAttempts=0}var r,t,n;return e.pollInterval={min:3,max:30},e.staleThreshold=6,e.prototype.start=function(){if(!this.isRunning())return this.startedAt=t(),delete this.stoppedAt,this.startPolling(),document.addEventListener("visibilitychange",this.visibilityDidChange),u.log("ConnectionMonitor started. pollInterval = "+this.getPollInterval()+" ms")},e.prototype.stop=function(){if(this.isRunning())return this.stoppedAt=t(),this.stopPolling(),document.removeEventListener("visibilitychange",this.visibilityDidChange),u.log("ConnectionMonitor stopped")},e.prototype.isRunning=function(){return null!=this.startedAt&&null==this.stoppedAt},e.prototype.recordPing=function(){return this.pingedAt=t()},e.prototype.recordConnect=function(){return this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,u.log("ConnectionMonitor recorded connect")},e.prototype.recordDisconnect=function(){return this.disconnectedAt=t(),u.log("ConnectionMonitor recorded disconnect")},e.prototype.startPolling=function(){return this.stopPolling(),this.poll()},e.prototype.stopPolling=function(){return clearTimeout(this.pollTimeout)},e.prototype.poll=function(){return this.pollTimeout=setTimeout((e=this,function(){return e.reconnectIfStale(),e.poll()}),this.getPollInterval());var e},e.prototype.getPollInterval=function(){var e,t,n,i;return n=(i=this.constructor.pollInterval).min,t=i.max,e=5*Math.log(this.reconnectAttempts+1),Math.round(1e3*r(e,n,t))},e.prototype.reconnectIfStale=function(){if(this.connectionIsStale())return u.log("ConnectionMonitor detected stale connection. reconnectAttempts = "+this.reconnectAttempts+", pollInterval = "+this.getPollInterval()+" ms, time disconnected = "+n(this.disconnectedAt)+" s, stale threshold = "+this.constructor.staleThreshold+" s"),this.reconnectAttempts++,this.disconnectedRecently()?u.log("ConnectionMonitor skipping reopening recent disconnect"):(u.log("ConnectionMonitor reopening"),this.connection.reopen())},e.prototype.connectionIsStale=function(){var e;return n(null!=(e=this.pingedAt)?e:this.startedAt)>this.constructor.staleThreshold},e.prototype.disconnectedRecently=function(){return this.disconnectedAt&&n(this.disconnectedAt)<this.constructor.staleThreshold},e.prototype.visibilityDidChange=function(){if("visible"===document.visibilityState)return setTimeout((e=this,function(){if(e.connectionIsStale()||!e.connection.isOpen())return u.log("ConnectionMonitor reopening stale connection on visibilitychange. visbilityState = "+document.visibilityState),e.connection.reopen()}),200);var e},t=function(){return(new Date).getTime()},n=function(e){return(t()-e)/1e3},r=function(e,t,n){return Math.max(t,Math.min(n,e))},e}()}).call(this),function(){var e,r,t,n,i,a=[].slice,s=function(e,t){return function(){return e.apply(t,arguments)}},o=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n=u.INTERNAL,r=n.message_types,t=n.protocols,i=2<=t.length?a.call(t,0,e=t.length-1):(e=0,[]),t[e++],u.Connection=function(){function e(e){this.consumer=e,this.open=s(this.open,this),this.subscriptions=this.consumer.subscriptions,this.monitor=new u.ConnectionMonitor(this),this.disconnected=!0}return e.reopenDelay=500,e.prototype.send=function(e){return!!this.isOpen()&&(this.webSocket.send(JSON.stringify(e)),!0)},e.prototype.open=function(){return this.isActive()?(u.log("Attempted to open WebSocket, but existing socket is "+this.getState()),!1):(u.log("Opening WebSocket, current state is "+this.getState()+", subprotocols: "+t),null!=this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new u.WebSocket(this.consumer.url,t),this.installEventHandlers(),this.monitor.start(),!0)},e.prototype.close=function(e){var t;if((null!=e?e:{allowReconnect:!0}).allowReconnect||this.monitor.stop(),this.isActive())return null!=(t=this.webSocket)?t.close():void 0},e.prototype.reopen=function(){var e;if(u.log("Reopening WebSocket, current state is "+this.getState()),!this.isActive())return this.open();try{return this.close()}catch(t){return e=t,u.log("Failed to reopen WebSocket",e)}finally{u.log("Reopening WebSocket in "+this.constructor.reopenDelay+"ms"),setTimeout(this.open,this.constructor.reopenDelay)}},e.prototype.getProtocol=function(){var e;return null!=(e=this.webSocket)?e.protocol:void 0},e.prototype.isOpen=function(){return this.isState("open")},e.prototype.isActive=function(){return this.isState("open","connecting")},e.prototype.isProtocolSupported=function(){var e;return e=this.getProtocol(),0<=o.call(i,e)},e.prototype.isState=function(){var e,t;return t=1<=arguments.length?a.call(arguments,0):[],e=this.getState(),0<=o.call(t,e)},e.prototype.getState=function(){var e,t;for(t in WebSocket)if(WebSocket[t]===(null!=(e=this.webSocket)?e.readyState:void 0))return t.toLowerCase();return null},e.prototype.installEventHandlers=function(){var e,t;for(e in this.events)t=this.events[e].bind(this),this.webSocket["on"+e]=t},e.prototype.uninstallEventHandlers=function(){var e;for(e in this.events)this.webSocket["on"+e]=function(){}},e.prototype.events={message:function(e){var t,n,i;if(this.isProtocolSupported())switch(t=(i=JSON.parse(e.data)).identifier,n=i.message,i.type){case r.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case r.ping:return this.monitor.recordPing();case r.confirmation:return this.subscriptions.notify(t,"connected");case r.rejection:return this.subscriptions.reject(t);default:return this.subscriptions.notify(t,"received",n)}},open:function(){if(u.log("WebSocket onopen event, using '"+this.getProtocol()+"' subprotocol"),this.disconnected=!1,!this.isProtocolSupported())return u.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close:function(){if(u.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error:function(){return u.log("WebSocket onerror event")}},e}()}.call(this),function(){var l=[].slice;u.Subscriptions=function(){function e(e){this.consumer=e,this.subscriptions=[]}return e.prototype.create=function(e,t){var n,i,r;return i="object"==typeof(n=e)?n:{channel:n},r=new u.Subscription(this.consumer,i,t),this.add(r)},e.prototype.add=function(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.sendCommand(e,"subscribe"),e},e.prototype.remove=function(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e},e.prototype.reject=function(e){var t,n,i,r,a;for(r=[],t=0,n=(i=this.findAll(e)).length;t<n;t++)a=i[t],this.forget(a),this.notify(a,"rejected"),r.push(a);return r},e.prototype.forget=function(r){var a;return this.subscriptions=function(){var e,t,n,i;for(i=[],e=0,t=(n=this.subscriptions).length;e<t;e++)(a=n[e])!==r&&i.push(a);return i}.call(this),r},e.prototype.findAll=function(e){var t,n,i,r,a;for(r=[],t=0,n=(i=this.subscriptions).length;t<n;t++)(a=i[t]).identifier===e&&r.push(a);return r},e.prototype.reload=function(){var e,t,n,i,r;for(i=[],e=0,t=(n=this.subscriptions).length;e<t;e++)r=n[e],i.push(this.sendCommand(r,"subscribe"));return i},e.prototype.notifyAll=function(e){var t,n,i,r,a,s,o;for(n=e,t=2<=arguments.length?l.call(arguments,1):[],s=[],i=0,r=(a=this.subscriptions).length;i<r;i++)o=a[i],s.push(this.notify.apply(this,[o,n].concat(l.call(t))));return s},e.prototype.notify=function(e,t){var n,i,r,a,s,o,u;for(o=e,i=t,n=3<=arguments.length?l.call(arguments,2):[],s=[],r=0,a=(u="string"==typeof o?this.findAll(o):[o]).length;r<a;r++)o=u[r],s.push("function"==typeof o[i]?o[i].apply(o,n):void 0);return s},e.prototype.sendCommand=function(e,t){var n;return n=e.identifier,this.consumer.send({command:t,identifier:n})},e}()}.call(this),function(){u.Subscription=function(){function e(e,t,n){this.consumer=e,null==t&&(t={}),this.identifier=JSON.stringify(t),i(this,n)}var i;return e.prototype.perform=function(e,t){return null==t&&(t={}),t.action=e,this.send(t)},e.prototype.send=function(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})},e.prototype.unsubscribe=function(){return this.consumer.subscriptions.remove(this)},i=function(e,t){var n,i;if(null!=t)for(n in t)i=t[n],e[n]=i;return e},e}()}.call(this),function(){u.Consumer=function(){function e(e){this.url=e,this.subscriptions=new u.Subscriptions(this),this.connection=new u.Connection(this)}return e.prototype.send=function(e){return this.connection.send(e)},e.prototype.connect=function(){return this.connection.open()},e.prototype.disconnect=function(){return this.connection.close({allowReconnect:!1})},e.prototype.ensureActiveConnection=function(){if(!this.connection.isActive())return this.connection.open()},e}()}.call(this)}).call(this),"object"==typeof module&&module.exports?module.exports=u:"function"==typeof define&&define.amd&&define(u)}.call(this),function(){this.App||(this.App={}),App.cable=ActionCable.createConsumer()}.call(this),function(){var t;t=function(){$.ajax({type:"POST",url:"/increment/views/",dataType:"json",data:{video:$("#video").val()},success:function(e){var t,n;n=e.ok,t=e.count,!0===n&&$("#count_views").text(t+" visualiza\xe7\xf5es")},error:function(){console.log("erro ao salvar view")}})},$(document).ready(function(){var e;window.location.pathname.includes("/assistir")&&((e=videojs("show-video")).play(),e.on("play",function(){t()}))})}.call(this),function(){$(document).on("turbolinks:load",function(){$(".button-collapse").sideNav()})}.call(this),function(){$(document).on("turbolinks:load",function(){$("select").material_select(),$(".update_video input").bind("blur",function(){return $(".update_video").submit()}),$(".update_video").on("submit",function(e){return $.ajax(e.target.action,{type:"PUT",dataType:"json",data:$(".update_video").serialize(),success:function(){return Materialize.toast("V\xeddeo atualizado",4e3,"green")},error:function(){return Materialize.toast("Problema na atualiza\xe7\xe3o do v\xeddeo",4e3,"red")}}),!1}),$(".remove_video").on("submit",function(e){return $.ajax(e.target.action,{type:"DELETE",dataType:"json",data:{},success:function(){return $(location).attr("href","/videos")},error:function(){return Materialize.toast("Problema na remo\xe7\xe3o do v\xeddeo",4e3,"red")}}),!1}),window.location.pathname.includes("/videos/")&&videojs("show-video").play()})}.call(this);